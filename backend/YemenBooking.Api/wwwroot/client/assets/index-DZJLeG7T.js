function bC(e,n){for(var a=0;a<n.length;a++){const r=n[a];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const d=Object.getOwnPropertyDescriptor(r,o);d&&Object.defineProperty(e,o,d.get?d:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=a(o);fetch(o.href,d)}})();function pu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nl(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var a=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),a}var Eg={exports:{}},Td={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function vC(){if(s1)return Td;s1=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,o,d){var h=null;if(d!==void 0&&(h=""+d),o.key!==void 0&&(h=""+o.key),"key"in o){d={};for(var g in o)g!=="key"&&(d[g]=o[g])}else d=o;return o=d.ref,{$$typeof:e,type:r,key:h,ref:o!==void 0?o:null,props:d}}return Td.Fragment=n,Td.jsx=a,Td.jsxs=a,Td}var r1;function jC(){return r1||(r1=1,Eg.exports=vC()),Eg.exports}var t=jC(),Mg={exports:{}},pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function wC(){if(i1)return pt;i1=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),j=Symbol.iterator;function S(I){return I===null||typeof I!="object"?null:(I=j&&I[j]||I["@@iterator"],typeof I=="function"?I:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function k(I,se,ne){this.props=I,this.context=se,this.refs=N,this.updater=ne||T}k.prototype.isReactComponent={},k.prototype.setState=function(I,se){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,se,"setState")},k.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function A(){}A.prototype=k.prototype;function D(I,se,ne){this.props=I,this.context=se,this.refs=N,this.updater=ne||T}var O=D.prototype=new A;O.constructor=D,C(O,k.prototype),O.isPureReactComponent=!0;var F=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function E(I,se,ne,ae,ee,le){return ne=le.ref,{$$typeof:e,type:I,key:se,ref:ne!==void 0?ne:null,props:le}}function z(I,se){return E(I.type,se,void 0,void 0,void 0,I.props)}function Z(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function U(I){var se={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ne){return se[ne]})}var V=/\/+/g;function X(I,se){return typeof I=="object"&&I!==null&&I.key!=null?U(""+I.key):se.toString(36)}function W(){}function B(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(W,W):(I.status="pending",I.then(function(se){I.status==="pending"&&(I.status="fulfilled",I.value=se)},function(se){I.status==="pending"&&(I.status="rejected",I.reason=se)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,se,ne,ae,ee){var le=typeof I;(le==="undefined"||le==="boolean")&&(I=null);var me=!1;if(I===null)me=!0;else switch(le){case"bigint":case"string":case"number":me=!0;break;case"object":switch(I.$$typeof){case e:case n:me=!0;break;case v:return me=I._init,te(me(I._payload),se,ne,ae,ee)}}if(me)return ee=ee(I),me=ae===""?"."+X(I,0):ae,F(ee)?(ne="",me!=null&&(ne=me.replace(V,"$&/")+"/"),te(ee,se,ne,"",function(ie){return ie})):ee!=null&&(Z(ee)&&(ee=z(ee,ne+(ee.key==null||I&&I.key===ee.key?"":(""+ee.key).replace(V,"$&/")+"/")+me)),se.push(ee)),1;me=0;var Re=ae===""?".":ae+":";if(F(I))for(var Pe=0;Pe<I.length;Pe++)ae=I[Pe],le=Re+X(ae,Pe),me+=te(ae,se,ne,le,ee);else if(Pe=S(I),typeof Pe=="function")for(I=Pe.call(I),Pe=0;!(ae=I.next()).done;)ae=ae.value,le=Re+X(ae,Pe++),me+=te(ae,se,ne,le,ee);else if(le==="object"){if(typeof I.then=="function")return te(B(I),se,ne,ae,ee);throw se=String(I),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return me}function G(I,se,ne){if(I==null)return I;var ae=[],ee=0;return te(I,ae,"","",function(le){return se.call(ne,le,ee++)}),ae}function J(I){if(I._status===-1){var se=I._result;se=se(),se.then(function(ne){(I._status===0||I._status===-1)&&(I._status=1,I._result=ne)},function(ne){(I._status===0||I._status===-1)&&(I._status=2,I._result=ne)}),I._status===-1&&(I._status=0,I._result=se)}if(I._status===1)return I._result.default;throw I._result}var q=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function K(){}return pt.Children={map:G,forEach:function(I,se,ne){G(I,function(){se.apply(this,arguments)},ne)},count:function(I){var se=0;return G(I,function(){se++}),se},toArray:function(I){return G(I,function(se){return se})||[]},only:function(I){if(!Z(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},pt.Component=k,pt.Fragment=a,pt.Profiler=o,pt.PureComponent=D,pt.StrictMode=r,pt.Suspense=p,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,pt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return R.H.useMemoCache(I)}},pt.cache=function(I){return function(){return I.apply(null,arguments)}},pt.cloneElement=function(I,se,ne){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ae=C({},I.props),ee=I.key,le=void 0;if(se!=null)for(me in se.ref!==void 0&&(le=void 0),se.key!==void 0&&(ee=""+se.key),se)!H.call(se,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&se.ref===void 0||(ae[me]=se[me]);var me=arguments.length-2;if(me===1)ae.children=ne;else if(1<me){for(var Re=Array(me),Pe=0;Pe<me;Pe++)Re[Pe]=arguments[Pe+2];ae.children=Re}return E(I.type,ee,void 0,void 0,le,ae)},pt.createContext=function(I){return I={$$typeof:h,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:d,_context:I},I},pt.createElement=function(I,se,ne){var ae,ee={},le=null;if(se!=null)for(ae in se.key!==void 0&&(le=""+se.key),se)H.call(se,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ee[ae]=se[ae]);var me=arguments.length-2;if(me===1)ee.children=ne;else if(1<me){for(var Re=Array(me),Pe=0;Pe<me;Pe++)Re[Pe]=arguments[Pe+2];ee.children=Re}if(I&&I.defaultProps)for(ae in me=I.defaultProps,me)ee[ae]===void 0&&(ee[ae]=me[ae]);return E(I,le,void 0,void 0,null,ee)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(I){return{$$typeof:g,render:I}},pt.isValidElement=Z,pt.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:J}},pt.memo=function(I,se){return{$$typeof:f,type:I,compare:se===void 0?null:se}},pt.startTransition=function(I){var se=R.T,ne={};R.T=ne;try{var ae=I(),ee=R.S;ee!==null&&ee(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(K,q)}catch(le){q(le)}finally{R.T=se}},pt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},pt.use=function(I){return R.H.use(I)},pt.useActionState=function(I,se,ne){return R.H.useActionState(I,se,ne)},pt.useCallback=function(I,se){return R.H.useCallback(I,se)},pt.useContext=function(I){return R.H.useContext(I)},pt.useDebugValue=function(){},pt.useDeferredValue=function(I,se){return R.H.useDeferredValue(I,se)},pt.useEffect=function(I,se,ne){var ae=R.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(I,se)},pt.useId=function(){return R.H.useId()},pt.useImperativeHandle=function(I,se,ne){return R.H.useImperativeHandle(I,se,ne)},pt.useInsertionEffect=function(I,se){return R.H.useInsertionEffect(I,se)},pt.useLayoutEffect=function(I,se){return R.H.useLayoutEffect(I,se)},pt.useMemo=function(I,se){return R.H.useMemo(I,se)},pt.useOptimistic=function(I,se){return R.H.useOptimistic(I,se)},pt.useReducer=function(I,se,ne){return R.H.useReducer(I,se,ne)},pt.useRef=function(I){return R.H.useRef(I)},pt.useState=function(I){return R.H.useState(I)},pt.useSyncExternalStore=function(I,se,ne){return R.H.useSyncExternalStore(I,se,ne)},pt.useTransition=function(){return R.H.useTransition()},pt.version="19.1.1",pt}var l1;function r0(){return l1||(l1=1,Mg.exports=wC()),Mg.exports}var b=r0();const Ke=pu(b),fx=bC({__proto__:null,default:Ke},[b]);var Rg={exports:{}},Ed={},Ag={exports:{}},Dg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1;function NC(){return o1||(o1=1,function(e){function n(G,J){var q=G.length;G.push(J);e:for(;0<q;){var K=q-1>>>1,I=G[K];if(0<o(I,J))G[K]=J,G[q]=I,q=K;else break e}}function a(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],q=G.pop();if(q!==J){G[0]=q;e:for(var K=0,I=G.length,se=I>>>1;K<se;){var ne=2*(K+1)-1,ae=G[ne],ee=ne+1,le=G[ee];if(0>o(ae,q))ee<I&&0>o(le,ae)?(G[K]=le,G[ee]=q,K=ee):(G[K]=ae,G[ne]=q,K=ne);else if(ee<I&&0>o(le,q))G[K]=le,G[ee]=q,K=ee;else break e}}return J}function o(G,J){var q=G.sortIndex-J.sortIndex;return q!==0?q:G.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();e.unstable_now=function(){return h.now()-g}}var p=[],f=[],v=1,j=null,S=3,T=!1,C=!1,N=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function F(G){for(var J=a(f);J!==null;){if(J.callback===null)r(f);else if(J.startTime<=G)r(f),J.sortIndex=J.expirationTime,n(p,J);else break;J=a(f)}}function R(G){if(N=!1,F(G),!C)if(a(p)!==null)C=!0,H||(H=!0,X());else{var J=a(f);J!==null&&te(R,J.startTime-G)}}var H=!1,E=-1,z=5,Z=-1;function U(){return k?!0:!(e.unstable_now()-Z<z)}function V(){if(k=!1,H){var G=e.unstable_now();Z=G;var J=!0;try{e:{C=!1,N&&(N=!1,D(E),E=-1),T=!0;var q=S;try{t:{for(F(G),j=a(p);j!==null&&!(j.expirationTime>G&&U());){var K=j.callback;if(typeof K=="function"){j.callback=null,S=j.priorityLevel;var I=K(j.expirationTime<=G);if(G=e.unstable_now(),typeof I=="function"){j.callback=I,F(G),J=!0;break t}j===a(p)&&r(p),F(G)}else r(p);j=a(p)}if(j!==null)J=!0;else{var se=a(f);se!==null&&te(R,se.startTime-G),J=!1}}break e}finally{j=null,S=q,T=!1}J=void 0}}finally{J?X():H=!1}}}var X;if(typeof O=="function")X=function(){O(V)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,B=W.port2;W.port1.onmessage=V,X=function(){B.postMessage(null)}}else X=function(){A(V,0)};function te(G,J){E=A(function(){G(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(G){switch(S){case 1:case 2:case 3:var J=3;break;default:J=S}var q=S;S=J;try{return G()}finally{S=q}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var q=S;S=G;try{return J()}finally{S=q}},e.unstable_scheduleCallback=function(G,J,q){var K=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,G){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=q+I,G={id:v++,callback:J,priorityLevel:G,startTime:q,expirationTime:I,sortIndex:-1},q>K?(G.sortIndex=q,n(f,G),a(p)===null&&G===a(f)&&(N?(D(E),E=-1):N=!0,te(R,q-K))):(G.sortIndex=I,n(p,G),C||T||(C=!0,H||(H=!0,X()))),G},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(G){var J=S;return function(){var q=S;S=J;try{return G.apply(this,arguments)}finally{S=q}}}}(Dg)),Dg}var c1;function _C(){return c1||(c1=1,Ag.exports=NC()),Ag.exports}var Pg={exports:{}},ba={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1;function SC(){if(d1)return ba;d1=1;var e=r0();function n(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(p,f,v){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:j==null?null:""+j,children:p,containerInfo:f,implementation:v}}var h=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ba.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ba.createPortal=function(p,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(n(299));return d(p,f,null,v)},ba.flushSync=function(p){var f=h.T,v=r.p;try{if(h.T=null,r.p=2,p)return p()}finally{h.T=f,r.p=v,r.d.f()}},ba.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(p,f))},ba.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},ba.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var v=f.as,j=g(v,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?r.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:j,integrity:S,fetchPriority:T}):v==="script"&&r.d.X(p,{crossOrigin:j,integrity:S,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ba.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=g(f.as,f.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(p)},ba.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,j=g(v,f.crossOrigin);r.d.L(p,v,{crossOrigin:j,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ba.preloadModule=function(p,f){if(typeof p=="string")if(f){var v=g(f.as,f.crossOrigin);r.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(p)},ba.requestFormReset=function(p){r.d.r(p)},ba.unstable_batchedUpdates=function(p,f){return p(f)},ba.useFormState=function(p,f,v){return h.H.useFormState(p,f,v)},ba.useFormStatus=function(){return h.H.useHostTransitionStatus()},ba.version="19.1.1",ba}var u1;function $w(){if(u1)return Pg.exports;u1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Pg.exports=SC(),Pg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function CC(){if(m1)return Ed;m1=1;var e=_C(),n=r0(),a=$w();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function h(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function g(s){if(d(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=d(s),i===null)throw Error(r(188));return i!==s?null:s}for(var c=s,m=i;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return g(y),s;if(w===m)return g(y),i;w=w.sibling}throw Error(r(188))}if(c.return!==m.return)c=y,m=w;else{for(var P=!1,Y=y.child;Y;){if(Y===c){P=!0,c=y,m=w;break}if(Y===m){P=!0,m=y,c=w;break}Y=Y.sibling}if(!P){for(Y=w.child;Y;){if(Y===c){P=!0,c=w,m=y;break}if(Y===m){P=!0,m=w,c=y;break}Y=Y.sibling}if(!P)throw Error(r(189))}}if(c.alternate!==m)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:i}function f(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=f(s),i!==null)return i;s=s.sibling}return null}var v=Object.assign,j=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var W=Symbol.for("react.client.reference");function B(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===W?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case R:return"Suspense";case H:return"SuspenseList";case Z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case T:return"Portal";case O:return(s.displayName||"Context")+".Provider";case D:return(s._context.displayName||"Context")+".Consumer";case F:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return i=s.displayName||null,i!==null?i:B(s.type)||"Memo";case z:i=s._payload,s=s._init;try{return B(s(i))}catch{}}return null}var te=Array.isArray,G=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},K=[],I=-1;function se(s){return{current:s}}function ne(s){0>I||(s.current=K[I],K[I]=null,I--)}function ae(s,i){I++,K[I]=s.current,s.current=i}var ee=se(null),le=se(null),me=se(null),Re=se(null);function Pe(s,i){switch(ae(me,i),ae(le,s),ae(ee,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?Av(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=Av(i),s=Dv(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(ee),ae(ee,s)}function ie(){ne(ee),ne(le),ne(me)}function Q(s){s.memoizedState!==null&&ae(Re,s);var i=ee.current,c=Dv(i,s.type);i!==c&&(ae(le,s),ae(ee,c))}function we(s){le.current===s&&(ne(ee),ne(le)),Re.current===s&&(ne(Re),Nd._currentValue=q)}var Be=Object.prototype.hasOwnProperty,nt=e.unstable_scheduleCallback,Qe=e.unstable_cancelCallback,it=e.unstable_shouldYield,Ce=e.unstable_requestPaint,Fe=e.unstable_now,Nt=e.unstable_getCurrentPriorityLevel,_t=e.unstable_ImmediatePriority,ut=e.unstable_UserBlockingPriority,ke=e.unstable_NormalPriority,Oe=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ae=e.log,He=e.unstable_setDisableYieldValue,ct=null,de=null;function De(s){if(typeof Ae=="function"&&He(s),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(ct,s)}catch{}}var Le=Math.clz32?Math.clz32:$n,kt=Math.log,sn=Math.LN2;function $n(s){return s>>>=0,s===0?32:31-(kt(s)/sn|0)|0}var Fn=256,wn=4194304;function rn(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function la(s,i,c){var m=s.pendingLanes;if(m===0)return 0;var y=0,w=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var Y=m&134217727;return Y!==0?(m=Y&~w,m!==0?y=rn(m):(P&=Y,P!==0?y=rn(P):c||(c=Y&~s,c!==0&&(y=rn(c))))):(Y=m&~w,Y!==0?y=rn(Y):P!==0?y=rn(P):c||(c=m&~s,c!==0&&(y=rn(c)))),y===0?0:i!==0&&i!==y&&(i&w)===0&&(w=y&-y,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:y}function En(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function he(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tt(){var s=Fn;return Fn<<=1,(Fn&4194048)===0&&(Fn=256),s}function re(){var s=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),s}function Te(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function $e(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Xe(s,i,c,m,y,w){var P=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var Y=s.entanglements,ce=s.expirationTimes,xe=s.hiddenUpdates;for(c=P&~c;0<c;){var _e=31-Le(c),Ee=1<<_e;Y[_e]=0,ce[_e]=-1;var ye=xe[_e];if(ye!==null)for(xe[_e]=null,_e=0;_e<ye.length;_e++){var be=ye[_e];be!==null&&(be.lane&=-536870913)}c&=~Ee}m!==0&&qt(s,m,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(P&~i))}function qt(s,i,c){s.pendingLanes|=i,s.suspendedLanes&=~i;var m=31-Le(i);s.entangledLanes|=i,s.entanglements[m]=s.entanglements[m]|1073741824|c&4194090}function Rt(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var m=31-Le(c),y=1<<m;y&i|s[m]&i&&(s[m]|=i),c&=~y}}function Mn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Nn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function oa(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:Xv(s.type))}function Ma(s,i){var c=J.p;try{return J.p=s,i()}finally{J.p=c}}var Pt=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Pt,Qt="__reactProps$"+Pt,Jn="__reactContainer$"+Pt,Un="__reactEvents$"+Pt,Ve="__reactListeners$"+Pt,Ha="__reactHandles$"+Pt,Ts="__reactResources$"+Pt,os="__reactMarker$"+Pt;function Xl(s){delete s[Gt],delete s[Qt],delete s[Un],delete s[Ve],delete s[Ha]}function Vs(s){var i=s[Gt];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Jn]||c[Gt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=zv(s);s!==null;){if(c=s[Gt])return c;s=zv(s)}return i}s=c,c=s.parentNode}return null}function yr(s){if(s=s[Gt]||s[Jn]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function cs(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function br(s){var i=s[Ts];return i||(i=s[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Hn(s){s[os]=!0}var Ou=new Set,Lu={};function vr(s,i){jr(s,i),jr(s+"Capture",i)}function jr(s,i){for(Lu[s]=i,s=0;s<i.length;s++)Ou.add(i[s])}var Bf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},zu={};function $f(s){return Be.call(zu,s)?!0:Be.call(rl,s)?!1:Bf.test(s)?zu[s]=!0:(rl[s]=!0,!1)}function Jl(s,i,c){if($f(i))if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var m=i.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+c)}}function eo(s,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+c)}}function Es(s,i,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(i,c,""+m)}}var il,ni;function wr(s){if(il===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);il=i&&i[1]||"",ni=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+il+s+ni}var to=!1;function Nr(s,i){if(!s||to)return"";to=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(be){var ye=be}Reflect.construct(s,[],Ee)}else{try{Ee.call()}catch(be){ye=be}s.call(Ee.prototype)}}else{try{throw Error()}catch(be){ye=be}(Ee=s())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(be){if(be&&ye&&typeof be.stack=="string")return[be.stack,ye.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),P=w[0],Y=w[1];if(P&&Y){var ce=P.split(`
`),xe=Y.split(`
`);for(y=m=0;m<ce.length&&!ce[m].includes("DetermineComponentFrameRoot");)m++;for(;y<xe.length&&!xe[y].includes("DetermineComponentFrameRoot");)y++;if(m===ce.length||y===xe.length)for(m=ce.length-1,y=xe.length-1;1<=m&&0<=y&&ce[m]!==xe[y];)y--;for(;1<=m&&0<=y;m--,y--)if(ce[m]!==xe[y]){if(m!==1||y!==1)do if(m--,y--,0>y||ce[m]!==xe[y]){var _e=`
`+ce[m].replace(" at new "," at ");return s.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",s.displayName)),_e}while(1<=m&&0<=y);break}}}finally{to=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?wr(c):""}function Tt(s){switch(s.tag){case 26:case 27:case 5:return wr(s.type);case 16:return wr("Lazy");case 13:return wr("Suspense");case 19:return wr("SuspenseList");case 0:case 15:return Nr(s.type,!1);case 11:return Nr(s.type.render,!1);case 1:return Nr(s.type,!0);case 31:return wr("Activity");default:return""}}function en(s){try{var i="";do i+=Tt(s),s=s.return;while(s);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ca(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function _r(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ai(s){var i=_r(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),m=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return y.call(this)},set:function(P){m=""+P,w.call(this,P)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function si(s){s._valueTracker||(s._valueTracker=ai(s))}function ht(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return s&&(m=_r(s)?s.checked?"true":"false":s.value),s=m,s!==c?(i.setValue(s),!0):!1}function tn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ac=/[\n"\\]/g;function da(s){return s.replace(Ac,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ga(s,i,c,m,y,w,P,Y){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),i!=null?P==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+ca(i)):s.value!==""+ca(i)&&(s.value=""+ca(i)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),i!=null?ri(s,P,ca(i)):c!=null?ri(s,P,ca(c)):m!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.name=""+ca(Y):s.removeAttribute("name")}function Iu(s,i,c,m,y,w,P,Y){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null))return;c=c!=null?""+ca(c):"",i=i!=null?""+ca(i):c,Y||i===s.value||(s.value=i),s.defaultValue=i}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=Y?s.checked:!!m,s.defaultChecked=!!m,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P)}function ri(s,i,c){i==="number"&&tn(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ra(s,i,c,m){if(s=s.options,i){i={};for(var y=0;y<c.length;y++)i["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=i.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&m&&(s[c].defaultSelected=!0)}else{for(c=""+ca(c),i=null,y=0;y<s.length;y++){if(s[y].value===c){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}i!==null||s[y].disabled||(i=s[y])}i!==null&&(i.selected=!0)}}function fn(s,i,c){if(i!=null&&(i=""+ca(i),i!==s.value&&(s.value=i),c==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=c!=null?""+ca(c):""}function Zs(s,i,c,m){if(i==null){if(m!=null){if(c!=null)throw Error(r(92));if(te(m)){if(1<m.length)throw Error(r(93));m=m[0]}c=m}c==null&&(c=""),i=c}c=ca(i),s.defaultValue=c,m=s.textContent,m===c&&m!==""&&m!==null&&(s.value=m)}function ds(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function no(s,i,c){var m=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":m?s.setProperty(i,c):typeof c!="number"||c===0||ll.has(i)?i==="float"?s.cssFloat=c:s[i]=(""+c).trim():s[i]=c+"px"}function ii(s,i,c){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||i!=null&&i.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var y in i)m=i[y],i.hasOwnProperty(y)&&c[y]!==m&&no(s,y,m)}else for(var w in i)i.hasOwnProperty(w)&&no(s,w,i[w])}function ol(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ao=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(s){return ao.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var cl=null;function oi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Sr=null,Ks=null;function Bu(s){var i=yr(s);if(i&&(s=i.stateNode)){var c=s[Qt]||null;e:switch(s=i.stateNode,i.type){case"input":if(ga(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+da(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==s&&m.form===s.form){var y=m[Qt]||null;if(!y)throw Error(r(90));ga(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(i=0;i<c.length;i++)m=c[i],m.form===s.form&&ht(m)}break e;case"textarea":fn(s,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Ra(s,!!c.multiple,i,!1)}}}var mt=!1;function qa(s,i,c){if(mt)return s(i,c);mt=!0;try{var m=s(i);return m}finally{if(mt=!1,(Sr!==null||Ks!==null)&&(Dm(),Sr&&(i=Sr,s=Ks,Ks=Sr=null,Bu(i),s)))for(i=0;i<s.length;i++)Bu(s[i])}}function At(s,i){var c=s.stateNode;if(c===null)return null;var m=c[Qt]||null;if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dl=!1;if(us)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){dl=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{dl=!1}var ms=null,Ms=null,ci=null;function di(){if(ci)return ci;var s,i=Ms,c=i.length,m,y="value"in ms?ms.value:ms.textContent,w=y.length;for(s=0;s<c&&i[s]===y[s];s++);var P=c-s;for(m=1;m<=P&&i[c-m]===y[w-m];m++);return ci=y.slice(s,1<m?1-m:void 0)}function _n(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function hs(){return!0}function Pc(){return!1}function ua(s){function i(c,m,y,w,P){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(c=s[Y],this[Y]=c?c(w):w[Y]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?hs:Pc,this.isPropagationStopped=Pc,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),i}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=ua(kr),Tr=v({},kr,{view:0,detail:0}),Ff=ua(Tr),so,bt,ml,xa=v({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ml&&(ml&&s.type==="mousemove"?(so=s.screenX-ml.screenX,bt=s.screenY-ml.screenY):bt=so=0,ml=s),so)},movementY:function(s){return"movementY"in s?s.movementY:bt}}),ui=ua(xa),$u=v({},xa,{dataTransfer:0}),Uf=ua($u),Oc=v({},Tr,{relatedTarget:0}),Lc=ua(Oc),Fu=v({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hf=ua(Fu),qf=v({},kr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zc=ua(qf),Yf=v({},kr,{data:0}),Ya=ua(Yf),Vf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ws={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Ws[s])?!!i[s]:!1}function ro(){return Hu}var Ic=v({},Tr,{key:function(s){if(s.key){var i=Vf[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=_n(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Uu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(s){return s.type==="keypress"?_n(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_n(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Zf=ua(Ic),qu=v({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=ua(qu),Kf=v({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),Wf=ua(Kf),$c=v({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gf=ua($c),Yu=v({},xa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Vu=ua(Yu),io=v({},kr,{newState:0,oldState:0}),Er=ua(io),Qf=[9,13,27,32],Mr=us&&"CompositionEvent"in window,ea=null;us&&"documentMode"in document&&(ea=document.documentMode);var Zu=us&&"TextEvent"in window&&!ea,Fc=us&&(!Mr||ea&&8<ea&&11>=ea),Ku=" ",lo=!1;function oo(s,i){switch(s){case"keyup":return Qf.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mi=!1;function Gu(s,i){switch(s){case"compositionend":return Wu(i);case"keypress":return i.which!==32?null:(lo=!0,Ku);case"textInput":return s=i.data,s===Ku&&lo?null:s;default:return null}}function Xf(s,i){if(mi)return s==="compositionend"||!Mr&&oo(s,i)?(s=di(),ci=Ms=ms=null,mi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fc&&i.locale!=="ko"?null:i.data;default:return null}}var Va={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Va[s.type]:i==="textarea"}function Qu(s,i,c,m){Sr?Ks?Ks.push(m):Ks=[m]:Sr=m,i=Bm(i,"onChange"),0<i.length&&(c=new ul("onChange","change",null,c,m),s.push({event:c,listeners:i}))}var Na=null,hl=null;function hi(s){kv(s,0)}function co(s){var i=cs(s);if(ht(i))return s}function fi(s,i){if(s==="change")return i}var Uc=!1;if(us){var pi;if(us){var Hc="oninput"in document;if(!Hc){var Rs=document.createElement("div");Rs.setAttribute("oninput","return;"),Hc=typeof Rs.oninput=="function"}pi=Hc}else pi=!1;Uc=pi&&(!document.documentMode||9<document.documentMode)}function fl(){Na&&(Na.detachEvent("onpropertychange",Xu),hl=Na=null)}function Xu(s){if(s.propertyName==="value"&&co(hl)){var i=[];Qu(i,hl,s,oi(s)),qa(hi,i)}}function qc(s,i,c){s==="focusin"?(fl(),Na=i,hl=c,Na.attachEvent("onpropertychange",Xu)):s==="focusout"&&fl()}function Jf(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return co(hl)}function As(s,i){if(s==="click")return co(i)}function ep(s,i){if(s==="input"||s==="change")return co(i)}function gi(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var _a=typeof Object.is=="function"?Object.is:gi;function Sa(s,i){if(_a(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!Be.call(i,y)||!_a(s[y],i[y]))return!1}return!0}function pl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Yc(s,i){var c=pl(s);s=0;for(var m;c;){if(c.nodeType===3){if(m=s+c.textContent.length,s<=i&&m>=i)return{node:c,offset:i-s};s=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pl(c)}}function uo(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?uo(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function gl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=tn(s.document);i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=tn(s.document)}return i}function xl(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var mo=us&&"documentMode"in document&&11>=document.documentMode,Za=null,xi=null,Ar=null,ho=!1;function Ju(s,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ho||Za==null||Za!==tn(m)||(m=Za,"selectionStart"in m&&xl(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ar&&Sa(Ar,m)||(Ar=m,m=Bm(xi,"onSelect"),0<m.length&&(i=new ul("onSelect","select",null,i,c),s.push({event:i,listeners:m}),i.target=Za)))}function fs(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var yi={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},fo={},em={};us&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Gs(s){if(fo[s])return fo[s];if(!yi[s])return s;var i=yi[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in em)return fo[s]=i[c];return s}var tm=Gs("animationend"),Ka=Gs("animationiteration"),yl=Gs("animationstart"),tp=Gs("transitionrun"),po=Gs("transitionstart"),np=Gs("transitioncancel"),Vc=Gs("transitionend"),nm=new Map,Dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dr.push("scrollEnd");function Wa(s,i){nm.set(s,i),vr(i,[s])}var Pr=new WeakMap;function Ca(s,i){if(typeof s=="object"&&s!==null){var c=Pr.get(s);return c!==void 0?c:(i={value:s,source:i,stack:en(i)},Pr.set(s,i),i)}return{value:s,source:i,stack:en(i)}}var ka=[],bi=0,Ga=0;function bl(){for(var s=bi,i=Ga=bi=0;i<s;){var c=ka[i];ka[i++]=null;var m=ka[i];ka[i++]=null;var y=ka[i];ka[i++]=null;var w=ka[i];if(ka[i++]=null,m!==null&&y!==null){var P=m.pending;P===null?y.next=y:(y.next=P.next,P.next=y),m.pending=y}w!==0&&jl(c,y,w)}}function vl(s,i,c,m){ka[bi++]=s,ka[bi++]=i,ka[bi++]=c,ka[bi++]=m,Ga|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Or(s,i,c,m){return vl(s,i,c,m),Qs(s)}function vi(s,i){return vl(s,null,null,i),Qs(s)}function jl(s,i,c){s.lanes|=c;var m=s.alternate;m!==null&&(m.lanes|=c);for(var y=!1,w=s.return;w!==null;)w.childLanes|=c,m=w.alternate,m!==null&&(m.childLanes|=c),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&i!==null&&(y=31-Le(c),s=w.hiddenUpdates,m=s[y],m===null?s[y]=[i]:m.push(i),i.lane=c|536870912),w):null}function Qs(s){if(50<pd)throw pd=0,Jp=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Lr={};function am(s,i,c,m){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(s,i,c,m){return new am(s,i,c,m)}function go(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ps(s,i){var c=s.alternate;return c===null?(c=Ta(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Zc(s,i){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,i=c.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function wl(s,i,c,m,y,w){var P=0;if(m=s,typeof s=="function")go(s)&&(P=1);else if(typeof s=="string")P=iC(s,c,ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Z:return s=Ta(31,c,i,y),s.elementType=Z,s.lanes=w,s;case C:return Xs(c.children,y,w,i);case N:P=8,y|=24;break;case k:return s=Ta(12,c,i,y|2),s.elementType=k,s.lanes=w,s;case R:return s=Ta(13,c,i,y),s.elementType=R,s.lanes=w,s;case H:return s=Ta(19,c,i,y),s.elementType=H,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:case O:P=10;break e;case D:P=9;break e;case F:P=11;break e;case E:P=14;break e;case z:P=16,m=null;break e}P=29,c=Error(r(130,s===null?"null":typeof s,"")),m=null}return i=Ta(P,c,i,y),i.elementType=s,i.type=m,i.lanes=w,i}function Xs(s,i,c,m){return s=Ta(7,s,m,i),s.lanes=c,s}function Kc(s,i,c){return s=Ta(6,s,null,i),s.lanes=c,s}function xo(s,i,c){return i=Ta(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var zr=[],ji=0,l=null,u=0,x=[],_=0,M=null,$=1,oe="";function pe(s,i){zr[ji++]=u,zr[ji++]=l,l=s,u=i}function ve(s,i,c){x[_++]=$,x[_++]=oe,x[_++]=M,M=s;var m=$;s=oe;var y=32-Le(m)-1;m&=~(1<<y),c+=1;var w=32-Le(i)+y;if(30<w){var P=y-y%5;w=(m&(1<<P)-1).toString(32),m>>=P,y-=P,$=1<<32-Le(i)+y|c<<y|m,oe=w+s}else $=1<<w|c<<y|m,oe=s}function Me(s){s.return!==null&&(pe(s,1),ve(s,1,0))}function Ue(s){for(;s===l;)l=zr[--ji],zr[ji]=null,u=zr[--ji],zr[ji]=null;for(;s===M;)M=x[--_],x[_]=null,oe=x[--_],x[_]=null,$=x[--_],x[_]=null}var Ye=null,Ge=null,dt=!1,nn=null,pn=!1,ta=Error(r(519));function Aa(s){var i=Error(r(418,""));throw Ni(Ca(i,s)),ta}function sm(s){var i=s.stateNode,c=s.type,m=s.memoizedProps;switch(i[Gt]=s,i[Qt]=m,c){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(c=0;c<xd.length;c++)wt(xd[c],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":wt("invalid",i),Iu(i,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),si(i);break;case"select":wt("invalid",i);break;case"textarea":wt("invalid",i),Zs(i,m.value,m.defaultValue,m.children),si(i)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||m.suppressHydrationWarning===!0||Rv(i.textContent,c)?(m.popover!=null&&(wt("beforetoggle",i),wt("toggle",i)),m.onScroll!=null&&wt("scroll",i),m.onScrollEnd!=null&&wt("scrollend",i),m.onClick!=null&&(i.onclick=$m),i=!0):i=!1,i||Aa(s)}function rm(s){for(Ye=s.return;Ye;)switch(Ye.tag){case 5:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Ye=Ye.return}}function Nl(s){if(s!==Ye)return!1;if(!dt)return rm(s),dt=!0,!1;var i=s.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||pg(s.type,s.memoizedProps)),c=!c),c&&Ge&&Aa(s),rm(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(i===0){Ge=Ls(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++;s=s.nextSibling}Ge=null}}else i===27?(i=Ge,Ii(s.type)?(s=bg,bg=null,Ge=s):Ge=i):Ge=Ye?Ls(s.stateNode.nextSibling):null;return!0}function wi(){Ge=Ye=null,dt=!1}function im(){var s=nn;return s!==null&&(Oa===null?Oa=s:Oa.push.apply(Oa,s),nn=null),s}function Ni(s){nn===null?nn=[s]:nn.push(s)}var on=se(null),gs=null,Ds=null;function Js(s,i,c){ae(on,i._currentValue),i._currentValue=c}function Ps(s){s._currentValue=on.current,ne(on)}function _l(s,i,c){for(;s!==null;){var m=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),s===c)break;s=s.return}}function yo(s,i,c,m){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var P=y.child;w=w.firstContext;e:for(;w!==null;){var Y=w;w=y;for(var ce=0;ce<i.length;ce++)if(Y.context===i[ce]){w.lanes|=c,Y=w.alternate,Y!==null&&(Y.lanes|=c),_l(w.return,c,s),m||(P=null);break e}w=Y.next}}else if(y.tag===18){if(P=y.return,P===null)throw Error(r(341));P.lanes|=c,w=P.alternate,w!==null&&(w.lanes|=c),_l(P,c,s),P=null}else P=y.child;if(P!==null)P.return=y;else for(P=y;P!==null;){if(P===s){P=null;break}if(y=P.sibling,y!==null){y.return=P.return,P=y;break}P=P.return}y=P}}function Sl(s,i,c,m){s=null;for(var y=i,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var P=y.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var Y=y.type;_a(y.pendingProps.value,P.value)||(s!==null?s.push(Y):s=[Y])}}else if(y===Re.current){if(P=y.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Nd):s=[Nd])}y=y.return}s!==null&&yo(i,s,c,m),i.flags|=262144}function lm(s){for(s=s.firstContext;s!==null;){if(!_a(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Cl(s){gs=s,Ds=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ya(s){return xy(gs,s)}function om(s,i){return gs===null&&Cl(s),xy(s,i)}function xy(s,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Ds===null){if(s===null)throw Error(r(308));Ds=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Ds=Ds.next=i;return c}var rS=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(c,m){s.push(m)}};this.abort=function(){i.aborted=!0,s.forEach(function(c){return c()})}},iS=e.unstable_scheduleCallback,lS=e.unstable_NormalPriority,Zn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ap(){return{controller:new rS,data:new Map,refCount:0}}function Wc(s){s.refCount--,s.refCount===0&&iS(lS,function(){s.controller.abort()})}var Gc=null,sp=0,bo=0,vo=null;function oS(s,i){if(Gc===null){var c=Gc=[];sp=0,bo=ig(),vo={status:"pending",value:void 0,then:function(m){c.push(m)}}}return sp++,i.then(yy,yy),i}function yy(){if(--sp===0&&Gc!==null){vo!==null&&(vo.status="fulfilled");var s=Gc;Gc=null,bo=0,vo=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function cS(s,i){var c=[],m={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return s.then(function(){m.status="fulfilled",m.value=i;for(var y=0;y<c.length;y++)(0,c[y])(i)},function(y){for(m.status="rejected",m.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),m}var by=G.S;G.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&oS(s,i),by!==null&&by(s,i)};var kl=se(null);function rp(){var s=kl.current;return s!==null?s:an.pooledCache}function cm(s,i){i===null?ae(kl,kl.current):ae(kl,i.pool)}function vy(){var s=rp();return s===null?null:{parent:Zn._currentValue,pool:s}}var Qc=Error(r(460)),jy=Error(r(474)),dm=Error(r(542)),ip={then:function(){}};function wy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function um(){}function Ny(s,i,c){switch(c=s[c],c===void 0?s.push(i):c!==i&&(i.then(um,um),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Sy(s),s;default:if(typeof i.status=="string")i.then(um,um);else{if(s=an,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(m){if(i.status==="pending"){var y=i;y.status="fulfilled",y.value=m}},function(m){if(i.status==="pending"){var y=i;y.status="rejected",y.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Sy(s),s}throw Xc=i,Qc}}var Xc=null;function _y(){if(Xc===null)throw Error(r(459));var s=Xc;return Xc=null,s}function Sy(s){if(s===Qc||s===dm)throw Error(r(483))}var _i=!1;function lp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function op(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Si(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ci(s,i,c){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Ft&2)!==0){var y=m.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),m.pending=i,i=Qs(s),jl(s,null,c),i}return vl(s,m,i,c),Qs(s)}function Jc(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var m=i.lanes;m&=s.pendingLanes,c|=m,i.lanes=c,Rt(s,c)}}function cp(s,i){var c=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var P={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?y=w=P:w=w.next=P,c=c.next}while(c!==null);w===null?y=w=i:w=w.next=i}else y=w=i;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}var dp=!1;function ed(){if(dp){var s=vo;if(s!==null)throw s}}function td(s,i,c,m){dp=!1;var y=s.updateQueue;_i=!1;var w=y.firstBaseUpdate,P=y.lastBaseUpdate,Y=y.shared.pending;if(Y!==null){y.shared.pending=null;var ce=Y,xe=ce.next;ce.next=null,P===null?w=xe:P.next=xe,P=ce;var _e=s.alternate;_e!==null&&(_e=_e.updateQueue,Y=_e.lastBaseUpdate,Y!==P&&(Y===null?_e.firstBaseUpdate=xe:Y.next=xe,_e.lastBaseUpdate=ce))}if(w!==null){var Ee=y.baseState;P=0,_e=xe=ce=null,Y=w;do{var ye=Y.lane&-536870913,be=ye!==Y.lane;if(be?(Et&ye)===ye:(m&ye)===ye){ye!==0&&ye===bo&&(dp=!0),_e!==null&&(_e=_e.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var lt=s,at=Y;ye=i;var Zt=c;switch(at.tag){case 1:if(lt=at.payload,typeof lt=="function"){Ee=lt.call(Zt,Ee,ye);break e}Ee=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=at.payload,ye=typeof lt=="function"?lt.call(Zt,Ee,ye):lt,ye==null)break e;Ee=v({},Ee,ye);break e;case 2:_i=!0}}ye=Y.callback,ye!==null&&(s.flags|=64,be&&(s.flags|=8192),be=y.callbacks,be===null?y.callbacks=[ye]:be.push(ye))}else be={lane:ye,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},_e===null?(xe=_e=be,ce=Ee):_e=_e.next=be,P|=ye;if(Y=Y.next,Y===null){if(Y=y.shared.pending,Y===null)break;be=Y,Y=be.next,be.next=null,y.lastBaseUpdate=be,y.shared.pending=null}}while(!0);_e===null&&(ce=Ee),y.baseState=ce,y.firstBaseUpdate=xe,y.lastBaseUpdate=_e,w===null&&(y.shared.lanes=0),Pi|=P,s.lanes=P,s.memoizedState=Ee}}function Cy(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function ky(s,i){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Cy(c[s],i)}var jo=se(null),mm=se(0);function Ty(s,i){s=qr,ae(mm,s),ae(jo,i),qr=s|i.baseLanes}function up(){ae(mm,qr),ae(jo,jo.current)}function mp(){qr=mm.current,ne(jo),ne(mm)}var ki=0,yt=null,Yt=null,qn=null,hm=!1,wo=!1,Tl=!1,fm=0,nd=0,No=null,dS=0;function Rn(){throw Error(r(321))}function hp(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!_a(s[c],i[c]))return!1;return!0}function fp(s,i,c,m,y,w){return ki=w,yt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=s===null||s.memoizedState===null?ub:mb,Tl=!1,w=c(m,y),Tl=!1,wo&&(w=My(i,c,m,y)),Ey(s),w}function Ey(s){G.H=vm;var i=Yt!==null&&Yt.next!==null;if(ki=0,qn=Yt=yt=null,hm=!1,nd=0,No=null,i)throw Error(r(300));s===null||na||(s=s.dependencies,s!==null&&lm(s)&&(na=!0))}function My(s,i,c,m){yt=s;var y=0;do{if(wo&&(No=null),nd=0,wo=!1,25<=y)throw Error(r(301));if(y+=1,qn=Yt=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}G.H=xS,w=i(c,m)}while(wo);return w}function uS(){var s=G.H,i=s.useState()[0];return i=typeof i.then=="function"?ad(i):i,s=s.useState()[0],(Yt!==null?Yt.memoizedState:null)!==s&&(yt.flags|=1024),i}function pp(){var s=fm!==0;return fm=0,s}function gp(s,i,c){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~c}function xp(s){if(hm){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}hm=!1}ki=0,qn=Yt=yt=null,wo=!1,nd=fm=0,No=null}function Da(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?yt.memoizedState=qn=s:qn=qn.next=s,qn}function Yn(){if(Yt===null){var s=yt.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var i=qn===null?yt.memoizedState:qn.next;if(i!==null)qn=i,Yt=s;else{if(s===null)throw yt.alternate===null?Error(r(467)):Error(r(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},qn===null?yt.memoizedState=qn=s:qn=qn.next=s}return qn}function yp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ad(s){var i=nd;return nd+=1,No===null&&(No=[]),s=Ny(No,s,i),i=yt,(qn===null?i.memoizedState:qn.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?ub:mb),s}function pm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ad(s);if(s.$$typeof===O)return ya(s)}throw Error(r(438,String(s)))}function bp(s){var i=null,c=yt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var m=yt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(y){return y.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=yp(),yt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(s),m=0;m<s;m++)c[m]=U;return i.index++,c}function Ir(s,i){return typeof i=="function"?i(s):i}function gm(s){var i=Yn();return vp(i,Yt,s)}function vp(s,i,c){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=s.baseQueue,w=m.pending;if(w!==null){if(y!==null){var P=y.next;y.next=w.next,w.next=P}i.baseQueue=y=w,m.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{i=y.next;var Y=P=null,ce=null,xe=i,_e=!1;do{var Ee=xe.lane&-536870913;if(Ee!==xe.lane?(Et&Ee)===Ee:(ki&Ee)===Ee){var ye=xe.revertLane;if(ye===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Ee===bo&&(_e=!0);else if((ki&ye)===ye){xe=xe.next,ye===bo&&(_e=!0);continue}else Ee={lane:0,revertLane:xe.revertLane,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ce===null?(Y=ce=Ee,P=w):ce=ce.next=Ee,yt.lanes|=ye,Pi|=ye;Ee=xe.action,Tl&&c(w,Ee),w=xe.hasEagerState?xe.eagerState:c(w,Ee)}else ye={lane:Ee,revertLane:xe.revertLane,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ce===null?(Y=ce=ye,P=w):ce=ce.next=ye,yt.lanes|=Ee,Pi|=Ee;xe=xe.next}while(xe!==null&&xe!==i);if(ce===null?P=w:ce.next=Y,!_a(w,s.memoizedState)&&(na=!0,_e&&(c=vo,c!==null)))throw c;s.memoizedState=w,s.baseState=P,s.baseQueue=ce,m.lastRenderedState=w}return y===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function jp(s){var i=Yn(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var m=c.dispatch,y=c.pending,w=i.memoizedState;if(y!==null){c.pending=null;var P=y=y.next;do w=s(w,P.action),P=P.next;while(P!==y);_a(w,i.memoizedState)||(na=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,m]}function Ry(s,i,c){var m=yt,y=Yn(),w=dt;if(w){if(c===void 0)throw Error(r(407));c=c()}else c=i();var P=!_a((Yt||y).memoizedState,c);P&&(y.memoizedState=c,na=!0),y=y.queue;var Y=Py.bind(null,m,y,s);if(sd(2048,8,Y,[s]),y.getSnapshot!==i||P||qn!==null&&qn.memoizedState.tag&1){if(m.flags|=2048,_o(9,xm(),Dy.bind(null,m,y,c,i),null),an===null)throw Error(r(349));w||(ki&124)!==0||Ay(m,i,c)}return c}function Ay(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=yt.updateQueue,i===null?(i=yp(),yt.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function Dy(s,i,c,m){i.value=c,i.getSnapshot=m,Oy(i)&&Ly(s)}function Py(s,i,c){return c(function(){Oy(i)&&Ly(s)})}function Oy(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!_a(s,c)}catch{return!0}}function Ly(s){var i=vi(s,2);i!==null&&ts(i,s,2)}function wp(s){var i=Da();if(typeof s=="function"){var c=s;if(s=c(),Tl){De(!0);try{c()}finally{De(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:s},i}function zy(s,i,c,m){return s.baseState=c,vp(s,Yt,typeof m=="function"?m:Ir)}function mS(s,i,c,m,y){if(bm(s))throw Error(r(485));if(s=i.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){w.listeners.push(P)}};G.T!==null?c(!0):w.isTransition=!1,m(w),c=i.pending,c===null?(w.next=i.pending=w,Iy(i,w)):(w.next=c.next,i.pending=c.next=w)}}function Iy(s,i){var c=i.action,m=i.payload,y=s.state;if(i.isTransition){var w=G.T,P={};G.T=P;try{var Y=c(y,m),ce=G.S;ce!==null&&ce(P,Y),By(s,i,Y)}catch(xe){Np(s,i,xe)}finally{G.T=w}}else try{w=c(y,m),By(s,i,w)}catch(xe){Np(s,i,xe)}}function By(s,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){$y(s,i,m)},function(m){return Np(s,i,m)}):$y(s,i,c)}function $y(s,i,c){i.status="fulfilled",i.value=c,Fy(i),s.state=c,i=s.pending,i!==null&&(c=i.next,c===i?s.pending=null:(c=c.next,i.next=c,Iy(s,c)))}function Np(s,i,c){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=c,Fy(i),i=i.next;while(i!==m)}s.action=null}function Fy(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Uy(s,i){return i}function Hy(s,i){if(dt){var c=an.formState;if(c!==null){e:{var m=yt;if(dt){if(Ge){t:{for(var y=Ge,w=pn;y.nodeType!==8;){if(!w){y=null;break t}if(y=Ls(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Ge=Ls(y.nextSibling),m=y.data==="F!";break e}}Aa(m)}m=!1}m&&(i=c[0])}}return c=Da(),c.memoizedState=c.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uy,lastRenderedState:i},c.queue=m,c=ob.bind(null,yt,m),m.dispatch=c,m=wp(!1),w=Tp.bind(null,yt,!1,m.queue),m=Da(),y={state:i,dispatch:null,action:s,pending:null},m.queue=y,c=mS.bind(null,yt,y,w,c),y.dispatch=c,m.memoizedState=s,[i,c,!1]}function qy(s){var i=Yn();return Yy(i,Yt,s)}function Yy(s,i,c){if(i=vp(s,i,Uy)[0],s=gm(Ir)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=ad(i)}catch(P){throw P===Qc?dm:P}else m=i;i=Yn();var y=i.queue,w=y.dispatch;return c!==i.memoizedState&&(yt.flags|=2048,_o(9,xm(),hS.bind(null,y,c),null)),[m,w,s]}function hS(s,i){s.action=i}function Vy(s){var i=Yn(),c=Yt;if(c!==null)return Yy(i,c,s);Yn(),i=i.memoizedState,c=Yn();var m=c.queue.dispatch;return c.memoizedState=s,[i,m,!1]}function _o(s,i,c,m){return s={tag:s,create:c,deps:m,inst:i,next:null},i=yt.updateQueue,i===null&&(i=yp(),yt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=s.next=s:(m=c.next,c.next=s,s.next=m,i.lastEffect=s),s}function xm(){return{destroy:void 0,resource:void 0}}function Zy(){return Yn().memoizedState}function ym(s,i,c,m){var y=Da();m=m===void 0?null:m,yt.flags|=s,y.memoizedState=_o(1|i,xm(),c,m)}function sd(s,i,c,m){var y=Yn();m=m===void 0?null:m;var w=y.memoizedState.inst;Yt!==null&&m!==null&&hp(m,Yt.memoizedState.deps)?y.memoizedState=_o(i,w,c,m):(yt.flags|=s,y.memoizedState=_o(1|i,w,c,m))}function Ky(s,i){ym(8390656,8,s,i)}function Wy(s,i){sd(2048,8,s,i)}function Gy(s,i){return sd(4,2,s,i)}function Qy(s,i){return sd(4,4,s,i)}function Xy(s,i){if(typeof i=="function"){s=s();var c=i(s);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Jy(s,i,c){c=c!=null?c.concat([s]):null,sd(4,4,Xy.bind(null,i,s),c)}function _p(){}function eb(s,i){var c=Yn();i=i===void 0?null:i;var m=c.memoizedState;return i!==null&&hp(i,m[1])?m[0]:(c.memoizedState=[s,i],s)}function tb(s,i){var c=Yn();i=i===void 0?null:i;var m=c.memoizedState;if(i!==null&&hp(i,m[1]))return m[0];if(m=s(),Tl){De(!0);try{s()}finally{De(!1)}}return c.memoizedState=[m,i],m}function Sp(s,i,c){return c===void 0||(ki&1073741824)!==0?s.memoizedState=i:(s.memoizedState=c,s=sv(),yt.lanes|=s,Pi|=s,c)}function nb(s,i,c,m){return _a(c,i)?c:jo.current!==null?(s=Sp(s,c,m),_a(s,i)||(na=!0),s):(ki&42)===0?(na=!0,s.memoizedState=c):(s=sv(),yt.lanes|=s,Pi|=s,i)}function ab(s,i,c,m,y){var w=J.p;J.p=w!==0&&8>w?w:8;var P=G.T,Y={};G.T=Y,Tp(s,!1,i,c);try{var ce=y(),xe=G.S;if(xe!==null&&xe(Y,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var _e=cS(ce,m);rd(s,i,_e,es(s))}else rd(s,i,m,es(s))}catch(Ee){rd(s,i,{then:function(){},status:"rejected",reason:Ee},es())}finally{J.p=w,G.T=P}}function fS(){}function Cp(s,i,c,m){if(s.tag!==5)throw Error(r(476));var y=sb(s).queue;ab(s,y,i,q,c===null?fS:function(){return rb(s),c(m)})}function sb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:q},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:c},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function rb(s){var i=sb(s).next.queue;rd(s,i,{},es())}function kp(){return ya(Nd)}function ib(){return Yn().memoizedState}function lb(){return Yn().memoizedState}function pS(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var c=es();s=Si(c);var m=Ci(i,s,c);m!==null&&(ts(m,i,c),Jc(m,i,c)),i={cache:ap()},s.payload=i;return}i=i.return}}function gS(s,i,c){var m=es();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},bm(s)?cb(i,c):(c=Or(s,i,c,m),c!==null&&(ts(c,s,m),db(c,i,m)))}function ob(s,i,c){var m=es();rd(s,i,c,m)}function rd(s,i,c,m){var y={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(bm(s))cb(i,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var P=i.lastRenderedState,Y=w(P,c);if(y.hasEagerState=!0,y.eagerState=Y,_a(Y,P))return vl(s,i,y,0),an===null&&bl(),!1}catch{}finally{}if(c=Or(s,i,y,m),c!==null)return ts(c,s,m),db(c,i,m),!0}return!1}function Tp(s,i,c,m){if(m={lane:2,revertLane:ig(),action:m,hasEagerState:!1,eagerState:null,next:null},bm(s)){if(i)throw Error(r(479))}else i=Or(s,c,m,2),i!==null&&ts(i,s,2)}function bm(s){var i=s.alternate;return s===yt||i!==null&&i===yt}function cb(s,i){wo=hm=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function db(s,i,c){if((c&4194048)!==0){var m=i.lanes;m&=s.pendingLanes,c|=m,i.lanes=c,Rt(s,c)}}var vm={readContext:ya,use:pm,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useLayoutEffect:Rn,useInsertionEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useSyncExternalStore:Rn,useId:Rn,useHostTransitionStatus:Rn,useFormState:Rn,useActionState:Rn,useOptimistic:Rn,useMemoCache:Rn,useCacheRefresh:Rn},ub={readContext:ya,use:pm,useCallback:function(s,i){return Da().memoizedState=[s,i===void 0?null:i],s},useContext:ya,useEffect:Ky,useImperativeHandle:function(s,i,c){c=c!=null?c.concat([s]):null,ym(4194308,4,Xy.bind(null,i,s),c)},useLayoutEffect:function(s,i){return ym(4194308,4,s,i)},useInsertionEffect:function(s,i){ym(4,2,s,i)},useMemo:function(s,i){var c=Da();i=i===void 0?null:i;var m=s();if(Tl){De(!0);try{s()}finally{De(!1)}}return c.memoizedState=[m,i],m},useReducer:function(s,i,c){var m=Da();if(c!==void 0){var y=c(i);if(Tl){De(!0);try{c(i)}finally{De(!1)}}}else y=i;return m.memoizedState=m.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},m.queue=s,s=s.dispatch=gS.bind(null,yt,s),[m.memoizedState,s]},useRef:function(s){var i=Da();return s={current:s},i.memoizedState=s},useState:function(s){s=wp(s);var i=s.queue,c=ob.bind(null,yt,i);return i.dispatch=c,[s.memoizedState,c]},useDebugValue:_p,useDeferredValue:function(s,i){var c=Da();return Sp(c,s,i)},useTransition:function(){var s=wp(!1);return s=ab.bind(null,yt,s.queue,!0,!1),Da().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,c){var m=yt,y=Da();if(dt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),an===null)throw Error(r(349));(Et&124)!==0||Ay(m,i,c)}y.memoizedState=c;var w={value:c,getSnapshot:i};return y.queue=w,Ky(Py.bind(null,m,w,s),[s]),m.flags|=2048,_o(9,xm(),Dy.bind(null,m,w,c,i),null),c},useId:function(){var s=Da(),i=an.identifierPrefix;if(dt){var c=oe,m=$;c=(m&~(1<<32-Le(m)-1)).toString(32)+c,i="«"+i+"R"+c,c=fm++,0<c&&(i+="H"+c.toString(32)),i+="»"}else c=dS++,i="«"+i+"r"+c.toString(32)+"»";return s.memoizedState=i},useHostTransitionStatus:kp,useFormState:Hy,useActionState:Hy,useOptimistic:function(s){var i=Da();i.memoizedState=i.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Tp.bind(null,yt,!0,c),c.dispatch=i,[s,i]},useMemoCache:bp,useCacheRefresh:function(){return Da().memoizedState=pS.bind(null,yt)}},mb={readContext:ya,use:pm,useCallback:eb,useContext:ya,useEffect:Wy,useImperativeHandle:Jy,useInsertionEffect:Gy,useLayoutEffect:Qy,useMemo:tb,useReducer:gm,useRef:Zy,useState:function(){return gm(Ir)},useDebugValue:_p,useDeferredValue:function(s,i){var c=Yn();return nb(c,Yt.memoizedState,s,i)},useTransition:function(){var s=gm(Ir)[0],i=Yn().memoizedState;return[typeof s=="boolean"?s:ad(s),i]},useSyncExternalStore:Ry,useId:ib,useHostTransitionStatus:kp,useFormState:qy,useActionState:qy,useOptimistic:function(s,i){var c=Yn();return zy(c,Yt,s,i)},useMemoCache:bp,useCacheRefresh:lb},xS={readContext:ya,use:pm,useCallback:eb,useContext:ya,useEffect:Wy,useImperativeHandle:Jy,useInsertionEffect:Gy,useLayoutEffect:Qy,useMemo:tb,useReducer:jp,useRef:Zy,useState:function(){return jp(Ir)},useDebugValue:_p,useDeferredValue:function(s,i){var c=Yn();return Yt===null?Sp(c,s,i):nb(c,Yt.memoizedState,s,i)},useTransition:function(){var s=jp(Ir)[0],i=Yn().memoizedState;return[typeof s=="boolean"?s:ad(s),i]},useSyncExternalStore:Ry,useId:ib,useHostTransitionStatus:kp,useFormState:Vy,useActionState:Vy,useOptimistic:function(s,i){var c=Yn();return Yt!==null?zy(c,Yt,s,i):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:bp,useCacheRefresh:lb},So=null,id=0;function jm(s){var i=id;return id+=1,So===null&&(So=[]),Ny(So,s,i)}function ld(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function wm(s,i){throw i.$$typeof===j?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function hb(s){var i=s._init;return i(s._payload)}function fb(s){function i(fe,ue){if(s){var ge=fe.deletions;ge===null?(fe.deletions=[ue],fe.flags|=16):ge.push(ue)}}function c(fe,ue){if(!s)return null;for(;ue!==null;)i(fe,ue),ue=ue.sibling;return null}function m(fe){for(var ue=new Map;fe!==null;)fe.key!==null?ue.set(fe.key,fe):ue.set(fe.index,fe),fe=fe.sibling;return ue}function y(fe,ue){return fe=ps(fe,ue),fe.index=0,fe.sibling=null,fe}function w(fe,ue,ge){return fe.index=ge,s?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<ue?(fe.flags|=67108866,ue):ge):(fe.flags|=67108866,ue)):(fe.flags|=1048576,ue)}function P(fe){return s&&fe.alternate===null&&(fe.flags|=67108866),fe}function Y(fe,ue,ge,Se){return ue===null||ue.tag!==6?(ue=Kc(ge,fe.mode,Se),ue.return=fe,ue):(ue=y(ue,ge),ue.return=fe,ue)}function ce(fe,ue,ge,Se){var Ze=ge.type;return Ze===C?_e(fe,ue,ge.props.children,Se,ge.key):ue!==null&&(ue.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===z&&hb(Ze)===ue.type)?(ue=y(ue,ge.props),ld(ue,ge),ue.return=fe,ue):(ue=wl(ge.type,ge.key,ge.props,null,fe.mode,Se),ld(ue,ge),ue.return=fe,ue)}function xe(fe,ue,ge,Se){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ge.containerInfo||ue.stateNode.implementation!==ge.implementation?(ue=xo(ge,fe.mode,Se),ue.return=fe,ue):(ue=y(ue,ge.children||[]),ue.return=fe,ue)}function _e(fe,ue,ge,Se,Ze){return ue===null||ue.tag!==7?(ue=Xs(ge,fe.mode,Se,Ze),ue.return=fe,ue):(ue=y(ue,ge),ue.return=fe,ue)}function Ee(fe,ue,ge){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=Kc(""+ue,fe.mode,ge),ue.return=fe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case S:return ge=wl(ue.type,ue.key,ue.props,null,fe.mode,ge),ld(ge,ue),ge.return=fe,ge;case T:return ue=xo(ue,fe.mode,ge),ue.return=fe,ue;case z:var Se=ue._init;return ue=Se(ue._payload),Ee(fe,ue,ge)}if(te(ue)||X(ue))return ue=Xs(ue,fe.mode,ge,null),ue.return=fe,ue;if(typeof ue.then=="function")return Ee(fe,jm(ue),ge);if(ue.$$typeof===O)return Ee(fe,om(fe,ue),ge);wm(fe,ue)}return null}function ye(fe,ue,ge,Se){var Ze=ue!==null?ue.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ze!==null?null:Y(fe,ue,""+ge,Se);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:return ge.key===Ze?ce(fe,ue,ge,Se):null;case T:return ge.key===Ze?xe(fe,ue,ge,Se):null;case z:return Ze=ge._init,ge=Ze(ge._payload),ye(fe,ue,ge,Se)}if(te(ge)||X(ge))return Ze!==null?null:_e(fe,ue,ge,Se,null);if(typeof ge.then=="function")return ye(fe,ue,jm(ge),Se);if(ge.$$typeof===O)return ye(fe,ue,om(fe,ge),Se);wm(fe,ge)}return null}function be(fe,ue,ge,Se,Ze){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return fe=fe.get(ge)||null,Y(ue,fe,""+Se,Ze);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case S:return fe=fe.get(Se.key===null?ge:Se.key)||null,ce(ue,fe,Se,Ze);case T:return fe=fe.get(Se.key===null?ge:Se.key)||null,xe(ue,fe,Se,Ze);case z:var vt=Se._init;return Se=vt(Se._payload),be(fe,ue,ge,Se,Ze)}if(te(Se)||X(Se))return fe=fe.get(ge)||null,_e(ue,fe,Se,Ze,null);if(typeof Se.then=="function")return be(fe,ue,ge,jm(Se),Ze);if(Se.$$typeof===O)return be(fe,ue,ge,om(ue,Se),Ze);wm(ue,Se)}return null}function lt(fe,ue,ge,Se){for(var Ze=null,vt=null,Je=ue,st=ue=0,sa=null;Je!==null&&st<ge.length;st++){Je.index>st?(sa=Je,Je=null):sa=Je.sibling;var Dt=ye(fe,Je,ge[st],Se);if(Dt===null){Je===null&&(Je=sa);break}s&&Je&&Dt.alternate===null&&i(fe,Je),ue=w(Dt,ue,st),vt===null?Ze=Dt:vt.sibling=Dt,vt=Dt,Je=sa}if(st===ge.length)return c(fe,Je),dt&&pe(fe,st),Ze;if(Je===null){for(;st<ge.length;st++)Je=Ee(fe,ge[st],Se),Je!==null&&(ue=w(Je,ue,st),vt===null?Ze=Je:vt.sibling=Je,vt=Je);return dt&&pe(fe,st),Ze}for(Je=m(Je);st<ge.length;st++)sa=be(Je,fe,st,ge[st],Se),sa!==null&&(s&&sa.alternate!==null&&Je.delete(sa.key===null?st:sa.key),ue=w(sa,ue,st),vt===null?Ze=sa:vt.sibling=sa,vt=sa);return s&&Je.forEach(function(Hi){return i(fe,Hi)}),dt&&pe(fe,st),Ze}function at(fe,ue,ge,Se){if(ge==null)throw Error(r(151));for(var Ze=null,vt=null,Je=ue,st=ue=0,sa=null,Dt=ge.next();Je!==null&&!Dt.done;st++,Dt=ge.next()){Je.index>st?(sa=Je,Je=null):sa=Je.sibling;var Hi=ye(fe,Je,Dt.value,Se);if(Hi===null){Je===null&&(Je=sa);break}s&&Je&&Hi.alternate===null&&i(fe,Je),ue=w(Hi,ue,st),vt===null?Ze=Hi:vt.sibling=Hi,vt=Hi,Je=sa}if(Dt.done)return c(fe,Je),dt&&pe(fe,st),Ze;if(Je===null){for(;!Dt.done;st++,Dt=ge.next())Dt=Ee(fe,Dt.value,Se),Dt!==null&&(ue=w(Dt,ue,st),vt===null?Ze=Dt:vt.sibling=Dt,vt=Dt);return dt&&pe(fe,st),Ze}for(Je=m(Je);!Dt.done;st++,Dt=ge.next())Dt=be(Je,fe,st,Dt.value,Se),Dt!==null&&(s&&Dt.alternate!==null&&Je.delete(Dt.key===null?st:Dt.key),ue=w(Dt,ue,st),vt===null?Ze=Dt:vt.sibling=Dt,vt=Dt);return s&&Je.forEach(function(yC){return i(fe,yC)}),dt&&pe(fe,st),Ze}function Zt(fe,ue,ge,Se){if(typeof ge=="object"&&ge!==null&&ge.type===C&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:e:{for(var Ze=ge.key;ue!==null;){if(ue.key===Ze){if(Ze=ge.type,Ze===C){if(ue.tag===7){c(fe,ue.sibling),Se=y(ue,ge.props.children),Se.return=fe,fe=Se;break e}}else if(ue.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===z&&hb(Ze)===ue.type){c(fe,ue.sibling),Se=y(ue,ge.props),ld(Se,ge),Se.return=fe,fe=Se;break e}c(fe,ue);break}else i(fe,ue);ue=ue.sibling}ge.type===C?(Se=Xs(ge.props.children,fe.mode,Se,ge.key),Se.return=fe,fe=Se):(Se=wl(ge.type,ge.key,ge.props,null,fe.mode,Se),ld(Se,ge),Se.return=fe,fe=Se)}return P(fe);case T:e:{for(Ze=ge.key;ue!==null;){if(ue.key===Ze)if(ue.tag===4&&ue.stateNode.containerInfo===ge.containerInfo&&ue.stateNode.implementation===ge.implementation){c(fe,ue.sibling),Se=y(ue,ge.children||[]),Se.return=fe,fe=Se;break e}else{c(fe,ue);break}else i(fe,ue);ue=ue.sibling}Se=xo(ge,fe.mode,Se),Se.return=fe,fe=Se}return P(fe);case z:return Ze=ge._init,ge=Ze(ge._payload),Zt(fe,ue,ge,Se)}if(te(ge))return lt(fe,ue,ge,Se);if(X(ge)){if(Ze=X(ge),typeof Ze!="function")throw Error(r(150));return ge=Ze.call(ge),at(fe,ue,ge,Se)}if(typeof ge.then=="function")return Zt(fe,ue,jm(ge),Se);if(ge.$$typeof===O)return Zt(fe,ue,om(fe,ge),Se);wm(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ue!==null&&ue.tag===6?(c(fe,ue.sibling),Se=y(ue,ge),Se.return=fe,fe=Se):(c(fe,ue),Se=Kc(ge,fe.mode,Se),Se.return=fe,fe=Se),P(fe)):c(fe,ue)}return function(fe,ue,ge,Se){try{id=0;var Ze=Zt(fe,ue,ge,Se);return So=null,Ze}catch(Je){if(Je===Qc||Je===dm)throw Je;var vt=Ta(29,Je,null,fe.mode);return vt.lanes=Se,vt.return=fe,vt}finally{}}}var Co=fb(!0),pb=fb(!1),xs=se(null),er=null;function Ti(s){var i=s.alternate;ae(Kn,Kn.current&1),ae(xs,s),er===null&&(i===null||jo.current!==null||i.memoizedState!==null)&&(er=s)}function gb(s){if(s.tag===22){if(ae(Kn,Kn.current),ae(xs,s),er===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(er=s)}}else Ei()}function Ei(){ae(Kn,Kn.current),ae(xs,xs.current)}function Br(s){ne(xs),er===s&&(er=null),ne(Kn)}var Kn=se(0);function Nm(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||yg(c)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Ep(s,i,c,m){i=s.memoizedState,c=c(m,i),c=c==null?i:v({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Mp={enqueueSetState:function(s,i,c){s=s._reactInternals;var m=es(),y=Si(m);y.payload=i,c!=null&&(y.callback=c),i=Ci(s,y,m),i!==null&&(ts(i,s,m),Jc(i,s,m))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var m=es(),y=Si(m);y.tag=1,y.payload=i,c!=null&&(y.callback=c),i=Ci(s,y,m),i!==null&&(ts(i,s,m),Jc(i,s,m))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=es(),m=Si(c);m.tag=2,i!=null&&(m.callback=i),i=Ci(s,m,c),i!==null&&(ts(i,s,c),Jc(i,s,c))}};function xb(s,i,c,m,y,w,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,w,P):i.prototype&&i.prototype.isPureReactComponent?!Sa(c,m)||!Sa(y,w):!0}function yb(s,i,c,m){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==s&&Mp.enqueueReplaceState(i,i.state,null)}function El(s,i){var c=i;if("ref"in i){c={};for(var m in i)m!=="ref"&&(c[m]=i[m])}if(s=s.defaultProps){c===i&&(c=v({},c));for(var y in s)c[y]===void 0&&(c[y]=s[y])}return c}var _m=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function bb(s){_m(s)}function vb(s){console.error(s)}function jb(s){_m(s)}function Sm(s,i){try{var c=s.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function wb(s,i,c){try{var m=s.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Rp(s,i,c){return c=Si(c),c.tag=3,c.payload={element:null},c.callback=function(){Sm(s,i)},c}function Nb(s){return s=Si(s),s.tag=3,s}function _b(s,i,c,m){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var w=m.value;s.payload=function(){return y(w)},s.callback=function(){wb(i,c,m)}}var P=c.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){wb(i,c,m),typeof y!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var Y=m.stack;this.componentDidCatch(m.value,{componentStack:Y!==null?Y:""})})}function yS(s,i,c,m,y){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=c.alternate,i!==null&&Sl(i,c,y,!0),c=xs.current,c!==null){switch(c.tag){case 13:return er===null?tg():c.alternate===null&&Sn===0&&(Sn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,m===ip?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([m]):i.add(m),ag(s,m,y)),!1;case 22:return c.flags|=65536,m===ip?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([m]):c.add(m)),ag(s,m,y)),!1}throw Error(r(435,c.tag))}return ag(s,m,y),tg(),!1}if(dt)return i=xs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=y,m!==ta&&(s=Error(r(422),{cause:m}),Ni(Ca(s,c)))):(m!==ta&&(i=Error(r(423),{cause:m}),Ni(Ca(i,c))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,m=Ca(m,c),y=Rp(s.stateNode,m,y),cp(s,y),Sn!==4&&(Sn=2)),!1;var w=Error(r(520),{cause:m});if(w=Ca(w,c),fd===null?fd=[w]:fd.push(w),Sn!==4&&(Sn=2),i===null)return!0;m=Ca(m,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,s=y&-y,c.lanes|=s,s=Rp(c.stateNode,m,s),cp(c,s),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Oi===null||!Oi.has(w))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Nb(y),_b(y,s,c,m),cp(c,y),!1}c=c.return}while(c!==null);return!1}var Sb=Error(r(461)),na=!1;function ma(s,i,c,m){i.child=s===null?pb(i,null,c,m):Co(i,s.child,c,m)}function Cb(s,i,c,m,y){c=c.render;var w=i.ref;if("ref"in m){var P={};for(var Y in m)Y!=="ref"&&(P[Y]=m[Y])}else P=m;return Cl(i),m=fp(s,i,c,P,w,y),Y=pp(),s!==null&&!na?(gp(s,i,y),$r(s,i,y)):(dt&&Y&&Me(i),i.flags|=1,ma(s,i,m,y),i.child)}function kb(s,i,c,m,y){if(s===null){var w=c.type;return typeof w=="function"&&!go(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,Tb(s,i,w,m,y)):(s=wl(c.type,null,m,i,i.mode,y),s.ref=i.ref,s.return=i,i.child=s)}if(w=s.child,!Bp(s,y)){var P=w.memoizedProps;if(c=c.compare,c=c!==null?c:Sa,c(P,m)&&s.ref===i.ref)return $r(s,i,y)}return i.flags|=1,s=ps(w,m),s.ref=i.ref,s.return=i,i.child=s}function Tb(s,i,c,m,y){if(s!==null){var w=s.memoizedProps;if(Sa(w,m)&&s.ref===i.ref)if(na=!1,i.pendingProps=m=w,Bp(s,y))(s.flags&131072)!==0&&(na=!0);else return i.lanes=s.lanes,$r(s,i,y)}return Ap(s,i,c,m,y)}function Eb(s,i,c){var m=i.pendingProps,y=m.children,w=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((i.flags&128)!==0){if(m=w!==null?w.baseLanes|c:c,s!==null){for(y=i.child=s.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;i.childLanes=w&~m}else i.childLanes=0,i.child=null;return Mb(s,i,m,c)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&cm(i,w!==null?w.cachePool:null),w!==null?Ty(i,w):up(),gb(i);else return i.lanes=i.childLanes=536870912,Mb(s,i,w!==null?w.baseLanes|c:c,c)}else w!==null?(cm(i,w.cachePool),Ty(i,w),Ei(),i.memoizedState=null):(s!==null&&cm(i,null),up(),Ei());return ma(s,i,y,c),i.child}function Mb(s,i,c,m){var y=rp();return y=y===null?null:{parent:Zn._currentValue,pool:y},i.memoizedState={baseLanes:c,cachePool:y},s!==null&&cm(i,null),up(),gb(i),s!==null&&Sl(s,i,m,!0),null}function Cm(s,i){var c=i.ref;if(c===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(i.flags|=4194816)}}function Ap(s,i,c,m,y){return Cl(i),c=fp(s,i,c,m,void 0,y),m=pp(),s!==null&&!na?(gp(s,i,y),$r(s,i,y)):(dt&&m&&Me(i),i.flags|=1,ma(s,i,c,y),i.child)}function Rb(s,i,c,m,y,w){return Cl(i),i.updateQueue=null,c=My(i,m,c,y),Ey(s),m=pp(),s!==null&&!na?(gp(s,i,w),$r(s,i,w)):(dt&&m&&Me(i),i.flags|=1,ma(s,i,c,w),i.child)}function Ab(s,i,c,m,y){if(Cl(i),i.stateNode===null){var w=Lr,P=c.contextType;typeof P=="object"&&P!==null&&(w=ya(P)),w=new c(m,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Mp,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=m,w.state=i.memoizedState,w.refs={},lp(i),P=c.contextType,w.context=typeof P=="object"&&P!==null?ya(P):Lr,w.state=i.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(Ep(i,c,P,m),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(P=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),P!==w.state&&Mp.enqueueReplaceState(w,w.state,null),td(i,m,w,y),ed(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(s===null){w=i.stateNode;var Y=i.memoizedProps,ce=El(c,Y);w.props=ce;var xe=w.context,_e=c.contextType;P=Lr,typeof _e=="object"&&_e!==null&&(P=ya(_e));var Ee=c.getDerivedStateFromProps;_e=typeof Ee=="function"||typeof w.getSnapshotBeforeUpdate=="function",Y=i.pendingProps!==Y,_e||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Y||xe!==P)&&yb(i,w,m,P),_i=!1;var ye=i.memoizedState;w.state=ye,td(i,m,w,y),ed(),xe=i.memoizedState,Y||ye!==xe||_i?(typeof Ee=="function"&&(Ep(i,c,Ee,m),xe=i.memoizedState),(ce=_i||xb(i,c,ce,m,ye,xe,P))?(_e||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=xe),w.props=m,w.state=xe,w.context=P,m=ce):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{w=i.stateNode,op(s,i),P=i.memoizedProps,_e=El(c,P),w.props=_e,Ee=i.pendingProps,ye=w.context,xe=c.contextType,ce=Lr,typeof xe=="object"&&xe!==null&&(ce=ya(xe)),Y=c.getDerivedStateFromProps,(xe=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==Ee||ye!==ce)&&yb(i,w,m,ce),_i=!1,ye=i.memoizedState,w.state=ye,td(i,m,w,y),ed();var be=i.memoizedState;P!==Ee||ye!==be||_i||s!==null&&s.dependencies!==null&&lm(s.dependencies)?(typeof Y=="function"&&(Ep(i,c,Y,m),be=i.memoizedState),(_e=_i||xb(i,c,_e,m,ye,be,ce)||s!==null&&s.dependencies!==null&&lm(s.dependencies))?(xe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,be,ce),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,be,ce)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===s.memoizedProps&&ye===s.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&ye===s.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=be),w.props=m,w.state=be,w.context=ce,m=_e):(typeof w.componentDidUpdate!="function"||P===s.memoizedProps&&ye===s.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&ye===s.memoizedState||(i.flags|=1024),m=!1)}return w=m,Cm(s,i),m=(i.flags&128)!==0,w||m?(w=i.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,s!==null&&m?(i.child=Co(i,s.child,null,y),i.child=Co(i,null,c,y)):ma(s,i,c,y),i.memoizedState=w.state,s=i.child):s=$r(s,i,y),s}function Db(s,i,c,m){return wi(),i.flags|=256,ma(s,i,c,m),i.child}var Dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pp(s){return{baseLanes:s,cachePool:vy()}}function Op(s,i,c){return s=s!==null?s.childLanes&~c:0,i&&(s|=ys),s}function Pb(s,i,c){var m=i.pendingProps,y=!1,w=(i.flags&128)!==0,P;if((P=w)||(P=s!==null&&s.memoizedState===null?!1:(Kn.current&2)!==0),P&&(y=!0,i.flags&=-129),P=(i.flags&32)!==0,i.flags&=-33,s===null){if(dt){if(y?Ti(i):Ei(),dt){var Y=Ge,ce;if(ce=Y){e:{for(ce=Y,Y=pn;ce.nodeType!==8;){if(!Y){Y=null;break e}if(ce=Ls(ce.nextSibling),ce===null){Y=null;break e}}Y=ce}Y!==null?(i.memoizedState={dehydrated:Y,treeContext:M!==null?{id:$,overflow:oe}:null,retryLane:536870912,hydrationErrors:null},ce=Ta(18,null,null,0),ce.stateNode=Y,ce.return=i,i.child=ce,Ye=i,Ge=null,ce=!0):ce=!1}ce||Aa(i)}if(Y=i.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return yg(Y)?i.lanes=32:i.lanes=536870912,null;Br(i)}return Y=m.children,m=m.fallback,y?(Ei(),y=i.mode,Y=km({mode:"hidden",children:Y},y),m=Xs(m,y,c,null),Y.return=i,m.return=i,Y.sibling=m,i.child=Y,y=i.child,y.memoizedState=Pp(c),y.childLanes=Op(s,P,c),i.memoizedState=Dp,m):(Ti(i),Lp(i,Y))}if(ce=s.memoizedState,ce!==null&&(Y=ce.dehydrated,Y!==null)){if(w)i.flags&256?(Ti(i),i.flags&=-257,i=zp(s,i,c)):i.memoizedState!==null?(Ei(),i.child=s.child,i.flags|=128,i=null):(Ei(),y=m.fallback,Y=i.mode,m=km({mode:"visible",children:m.children},Y),y=Xs(y,Y,c,null),y.flags|=2,m.return=i,y.return=i,m.sibling=y,i.child=m,Co(i,s.child,null,c),m=i.child,m.memoizedState=Pp(c),m.childLanes=Op(s,P,c),i.memoizedState=Dp,i=y);else if(Ti(i),yg(Y)){if(P=Y.nextSibling&&Y.nextSibling.dataset,P)var xe=P.dgst;P=xe,m=Error(r(419)),m.stack="",m.digest=P,Ni({value:m,source:null,stack:null}),i=zp(s,i,c)}else if(na||Sl(s,i,c,!1),P=(c&s.childLanes)!==0,na||P){if(P=an,P!==null&&(m=c&-c,m=(m&42)!==0?1:Mn(m),m=(m&(P.suspendedLanes|c))!==0?0:m,m!==0&&m!==ce.retryLane))throw ce.retryLane=m,vi(s,m),ts(P,s,m),Sb;Y.data==="$?"||tg(),i=zp(s,i,c)}else Y.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=ce.treeContext,Ge=Ls(Y.nextSibling),Ye=i,dt=!0,nn=null,pn=!1,s!==null&&(x[_++]=$,x[_++]=oe,x[_++]=M,$=s.id,oe=s.overflow,M=i),i=Lp(i,m.children),i.flags|=4096);return i}return y?(Ei(),y=m.fallback,Y=i.mode,ce=s.child,xe=ce.sibling,m=ps(ce,{mode:"hidden",children:m.children}),m.subtreeFlags=ce.subtreeFlags&65011712,xe!==null?y=ps(xe,y):(y=Xs(y,Y,c,null),y.flags|=2),y.return=i,m.return=i,m.sibling=y,i.child=m,m=y,y=i.child,Y=s.child.memoizedState,Y===null?Y=Pp(c):(ce=Y.cachePool,ce!==null?(xe=Zn._currentValue,ce=ce.parent!==xe?{parent:xe,pool:xe}:ce):ce=vy(),Y={baseLanes:Y.baseLanes|c,cachePool:ce}),y.memoizedState=Y,y.childLanes=Op(s,P,c),i.memoizedState=Dp,m):(Ti(i),c=s.child,s=c.sibling,c=ps(c,{mode:"visible",children:m.children}),c.return=i,c.sibling=null,s!==null&&(P=i.deletions,P===null?(i.deletions=[s],i.flags|=16):P.push(s)),i.child=c,i.memoizedState=null,c)}function Lp(s,i){return i=km({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function km(s,i){return s=Ta(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function zp(s,i,c){return Co(i,s.child,null,c),s=Lp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Ob(s,i,c){s.lanes|=i;var m=s.alternate;m!==null&&(m.lanes|=i),_l(s.return,i,c)}function Ip(s,i,c,m,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=c,w.tailMode=y)}function Lb(s,i,c){var m=i.pendingProps,y=m.revealOrder,w=m.tail;if(ma(s,i,m.children,c),m=Kn.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ob(s,c,i);else if(s.tag===19)Ob(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(ae(Kn,m),y){case"forwards":for(c=i.child,y=null;c!==null;)s=c.alternate,s!==null&&Nm(s)===null&&(y=c),c=c.sibling;c=y,c===null?(y=i.child,i.child=null):(y=c.sibling,c.sibling=null),Ip(i,!1,y,c,w);break;case"backwards":for(c=null,y=i.child,i.child=null;y!==null;){if(s=y.alternate,s!==null&&Nm(s)===null){i.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}Ip(i,!0,c,null,w);break;case"together":Ip(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $r(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),Pi|=i.lanes,(c&i.childLanes)===0)if(s!==null){if(Sl(s,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,c=ps(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=ps(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function Bp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&lm(s)))}function bS(s,i,c){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),Js(i,Zn,s.memoizedState.cache),wi();break;case 27:case 5:Q(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:Js(i,i.type,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(Ti(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Pb(s,i,c):(Ti(i),s=$r(s,i,c),s!==null?s.sibling:null);Ti(i);break;case 19:var y=(s.flags&128)!==0;if(m=(c&i.childLanes)!==0,m||(Sl(s,i,c,!1),m=(c&i.childLanes)!==0),y){if(m)return Lb(s,i,c);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Kn,Kn.current),m)break;return null;case 22:case 23:return i.lanes=0,Eb(s,i,c);case 24:Js(i,Zn,s.memoizedState.cache)}return $r(s,i,c)}function zb(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps)na=!0;else{if(!Bp(s,c)&&(i.flags&128)===0)return na=!1,bS(s,i,c);na=(s.flags&131072)!==0}else na=!1,dt&&(i.flags&1048576)!==0&&ve(i,u,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var m=i.elementType,y=m._init;if(m=y(m._payload),i.type=m,typeof m=="function")go(m)?(s=El(m,s),i.tag=1,i=Ab(null,i,m,s,c)):(i.tag=0,i=Ap(null,i,m,s,c));else{if(m!=null){if(y=m.$$typeof,y===F){i.tag=11,i=Cb(null,i,m,s,c);break e}else if(y===E){i.tag=14,i=kb(null,i,m,s,c);break e}}throw i=B(m)||m,Error(r(306,i,""))}}return i;case 0:return Ap(s,i,i.type,i.pendingProps,c);case 1:return m=i.type,y=El(m,i.pendingProps),Ab(s,i,m,y,c);case 3:e:{if(Pe(i,i.stateNode.containerInfo),s===null)throw Error(r(387));m=i.pendingProps;var w=i.memoizedState;y=w.element,op(s,i),td(i,m,null,c);var P=i.memoizedState;if(m=P.cache,Js(i,Zn,m),m!==w.cache&&yo(i,[Zn],c,!0),ed(),m=P.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:P.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=Db(s,i,m,c);break e}else if(m!==y){y=Ca(Error(r(424)),i),Ni(y),i=Db(s,i,m,c);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ge=Ls(s.firstChild),Ye=i,dt=!0,nn=null,pn=!0,c=pb(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(wi(),m===y){i=$r(s,i,c);break e}ma(s,i,m,c)}i=i.child}return i;case 26:return Cm(s,i),s===null?(c=Fv(i.type,null,i.pendingProps,null))?i.memoizedState=c:dt||(c=i.type,s=i.pendingProps,m=Fm(me.current).createElement(c),m[Gt]=i,m[Qt]=s,fa(m,c,s),Hn(m),i.stateNode=m):i.memoizedState=Fv(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Q(i),s===null&&dt&&(m=i.stateNode=Iv(i.type,i.pendingProps,me.current),Ye=i,pn=!0,y=Ge,Ii(i.type)?(bg=y,Ge=Ls(m.firstChild)):Ge=y),ma(s,i,i.pendingProps.children,c),Cm(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&dt&&((y=m=Ge)&&(m=ZS(m,i.type,i.pendingProps,pn),m!==null?(i.stateNode=m,Ye=i,Ge=Ls(m.firstChild),pn=!1,y=!0):y=!1),y||Aa(i)),Q(i),y=i.type,w=i.pendingProps,P=s!==null?s.memoizedProps:null,m=w.children,pg(y,w)?m=null:P!==null&&pg(y,P)&&(i.flags|=32),i.memoizedState!==null&&(y=fp(s,i,uS,null,null,c),Nd._currentValue=y),Cm(s,i),ma(s,i,m,c),i.child;case 6:return s===null&&dt&&((s=c=Ge)&&(c=KS(c,i.pendingProps,pn),c!==null?(i.stateNode=c,Ye=i,Ge=null,s=!0):s=!1),s||Aa(i)),null;case 13:return Pb(s,i,c);case 4:return Pe(i,i.stateNode.containerInfo),m=i.pendingProps,s===null?i.child=Co(i,null,m,c):ma(s,i,m,c),i.child;case 11:return Cb(s,i,i.type,i.pendingProps,c);case 7:return ma(s,i,i.pendingProps,c),i.child;case 8:return ma(s,i,i.pendingProps.children,c),i.child;case 12:return ma(s,i,i.pendingProps.children,c),i.child;case 10:return m=i.pendingProps,Js(i,i.type,m.value),ma(s,i,m.children,c),i.child;case 9:return y=i.type._context,m=i.pendingProps.children,Cl(i),y=ya(y),m=m(y),i.flags|=1,ma(s,i,m,c),i.child;case 14:return kb(s,i,i.type,i.pendingProps,c);case 15:return Tb(s,i,i.type,i.pendingProps,c);case 19:return Lb(s,i,c);case 31:return m=i.pendingProps,c=i.mode,m={mode:m.mode,children:m.children},s===null?(c=km(m,c),c.ref=i.ref,i.child=c,c.return=i,i=c):(c=ps(s.child,m),c.ref=i.ref,i.child=c,c.return=i,i=c),i;case 22:return Eb(s,i,c);case 24:return Cl(i),m=ya(Zn),s===null?(y=rp(),y===null&&(y=an,w=ap(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=c),y=w),i.memoizedState={parent:m,cache:y},lp(i),Js(i,Zn,y)):((s.lanes&c)!==0&&(op(s,i),td(i,null,null,c),ed()),y=s.memoizedState,w=i.memoizedState,y.parent!==m?(y={parent:m,cache:m},i.memoizedState=y,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=y),Js(i,Zn,m)):(m=w.cache,Js(i,Zn,m),m!==y.cache&&yo(i,[Zn],c,!0))),ma(s,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Fr(s){s.flags|=4}function Ib(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Vv(i)){if(i=xs.current,i!==null&&((Et&4194048)===Et?er!==null:(Et&62914560)!==Et&&(Et&536870912)===0||i!==er))throw Xc=ip,jy;s.flags|=8192}}function Tm(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?re():536870912,s.lanes|=i,Mo|=i)}function od(s,i){if(!dt)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function gn(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,m=0;if(i)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=c,i}function vS(s,i,c){var m=i.pendingProps;switch(Ue(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(i),null;case 1:return gn(i),null;case 3:return c=i.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),Ps(Zn),ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Nl(i)?Fr(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,im())),gn(i),null;case 26:return c=i.memoizedState,s===null?(Fr(i),c!==null?(gn(i),Ib(i,c)):(gn(i),i.flags&=-16777217)):c?c!==s.memoizedState?(Fr(i),gn(i),Ib(i,c)):(gn(i),i.flags&=-16777217):(s.memoizedProps!==m&&Fr(i),gn(i),i.flags&=-16777217),null;case 27:we(i),c=me.current;var y=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==m&&Fr(i);else{if(!m){if(i.stateNode===null)throw Error(r(166));return gn(i),null}s=ee.current,Nl(i)?sm(i):(s=Iv(y,m,c),i.stateNode=s,Fr(i))}return gn(i),null;case 5:if(we(i),c=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==m&&Fr(i);else{if(!m){if(i.stateNode===null)throw Error(r(166));return gn(i),null}if(s=ee.current,Nl(i))sm(i);else{switch(y=Fm(me.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?y.createElement("select",{is:m.is}):y.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?y.createElement(c,{is:m.is}):y.createElement(c)}}s[Gt]=i,s[Qt]=m;e:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=s;e:switch(fa(s,c,m),c){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Fr(i)}}return gn(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==m&&Fr(i);else{if(typeof m!="string"&&i.stateNode===null)throw Error(r(166));if(s=me.current,Nl(i)){if(s=i.stateNode,c=i.memoizedProps,m=null,y=Ye,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}s[Gt]=i,s=!!(s.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||Rv(s.nodeValue,c)),s||Aa(i)}else s=Fm(s).createTextNode(m),s[Gt]=i,i.stateNode=s}return gn(i),null;case 13:if(m=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Nl(i),m!==null&&m.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Gt]=i}else wi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gn(i),y=!1}else y=im(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return i.flags&256?(Br(i),i):(Br(i),null)}if(Br(i),(i.flags&128)!==0)return i.lanes=c,i;if(c=m!==null,s=s!==null&&s.memoizedState!==null,c){m=i.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool);var w=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==y&&(m.flags|=2048)}return c!==s&&c&&(i.child.flags|=8192),Tm(i,i.updateQueue),gn(i),null;case 4:return ie(),s===null&&dg(i.stateNode.containerInfo),gn(i),null;case 10:return Ps(i.type),gn(i),null;case 19:if(ne(Kn),y=i.memoizedState,y===null)return gn(i),null;if(m=(i.flags&128)!==0,w=y.rendering,w===null)if(m)od(y,!1);else{if(Sn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(w=Nm(s),w!==null){for(i.flags|=128,od(y,!1),s=w.updateQueue,i.updateQueue=s,Tm(i,s),i.subtreeFlags=0,s=c,c=i.child;c!==null;)Zc(c,s),c=c.sibling;return ae(Kn,Kn.current&1|2),i.child}s=s.sibling}y.tail!==null&&Fe()>Rm&&(i.flags|=128,m=!0,od(y,!1),i.lanes=4194304)}else{if(!m)if(s=Nm(w),s!==null){if(i.flags|=128,m=!0,s=s.updateQueue,i.updateQueue=s,Tm(i,s),od(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!dt)return gn(i),null}else 2*Fe()-y.renderingStartTime>Rm&&c!==536870912&&(i.flags|=128,m=!0,od(y,!1),i.lanes=4194304);y.isBackwards?(w.sibling=i.child,i.child=w):(s=y.last,s!==null?s.sibling=w:i.child=w,y.last=w)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=Fe(),i.sibling=null,s=Kn.current,ae(Kn,m?s&1|2:s&1),i):(gn(i),null);case 22:case 23:return Br(i),mp(),m=i.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(c&536870912)!==0&&(i.flags&128)===0&&(gn(i),i.subtreeFlags&6&&(i.flags|=8192)):gn(i),c=i.updateQueue,c!==null&&Tm(i,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==c&&(i.flags|=2048),s!==null&&ne(kl),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ps(Zn),gn(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function jS(s,i){switch(Ue(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Ps(Zn),ie(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return we(i),null;case 13:if(Br(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));wi()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return ne(Kn),null;case 4:return ie(),null;case 10:return Ps(i.type),null;case 22:case 23:return Br(i),mp(),s!==null&&ne(kl),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Ps(Zn),null;case 25:return null;default:return null}}function Bb(s,i){switch(Ue(i),i.tag){case 3:Ps(Zn),ie();break;case 26:case 27:case 5:we(i);break;case 4:ie();break;case 13:Br(i);break;case 19:ne(Kn);break;case 10:Ps(i.type);break;case 22:case 23:Br(i),mp(),s!==null&&ne(kl);break;case 24:Ps(Zn)}}function cd(s,i){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&s)===s){m=void 0;var w=c.create,P=c.inst;m=w(),P.destroy=m}c=c.next}while(c!==y)}}catch(Y){Xt(i,i.return,Y)}}function Mi(s,i,c){try{var m=i.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var w=y.next;m=w;do{if((m.tag&s)===s){var P=m.inst,Y=P.destroy;if(Y!==void 0){P.destroy=void 0,y=i;var ce=c,xe=Y;try{xe()}catch(_e){Xt(y,ce,_e)}}}m=m.next}while(m!==w)}}catch(_e){Xt(i,i.return,_e)}}function $b(s){var i=s.updateQueue;if(i!==null){var c=s.stateNode;try{ky(i,c)}catch(m){Xt(s,s.return,m)}}}function Fb(s,i,c){c.props=El(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(m){Xt(s,i,m)}}function dd(s,i){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof c=="function"?s.refCleanup=c(m):c.current=m}}catch(y){Xt(s,i,y)}}function tr(s,i){var c=s.ref,m=s.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(y){Xt(s,i,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Xt(s,i,y)}else c.current=null}function Ub(s){var i=s.type,c=s.memoizedProps,m=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(y){Xt(s,s.return,y)}}function $p(s,i,c){try{var m=s.stateNode;US(m,s.type,c,i),m[Qt]=i}catch(y){Xt(s,s.return,y)}}function Hb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ii(s.type)||s.tag===4}function Fp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Hb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ii(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Up(s,i,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(s),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=$m));else if(m!==4&&(m===27&&Ii(s.type)&&(c=s.stateNode,i=null),s=s.child,s!==null))for(Up(s,i,c),s=s.sibling;s!==null;)Up(s,i,c),s=s.sibling}function Em(s,i,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(m!==4&&(m===27&&Ii(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Em(s,i,c),s=s.sibling;s!==null;)Em(s,i,c),s=s.sibling}function qb(s){var i=s.stateNode,c=s.memoizedProps;try{for(var m=s.type,y=i.attributes;y.length;)i.removeAttributeNode(y[0]);fa(i,m,c),i[Gt]=s,i[Qt]=c}catch(w){Xt(s,s.return,w)}}var Ur=!1,An=!1,Hp=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,aa=null;function wS(s,i){if(s=s.containerInfo,hg=Zm,s=gl(s),xl(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var P=0,Y=-1,ce=-1,xe=0,_e=0,Ee=s,ye=null;t:for(;;){for(var be;Ee!==c||y!==0&&Ee.nodeType!==3||(Y=P+y),Ee!==w||m!==0&&Ee.nodeType!==3||(ce=P+m),Ee.nodeType===3&&(P+=Ee.nodeValue.length),(be=Ee.firstChild)!==null;)ye=Ee,Ee=be;for(;;){if(Ee===s)break t;if(ye===c&&++xe===y&&(Y=P),ye===w&&++_e===m&&(ce=P),(be=Ee.nextSibling)!==null)break;Ee=ye,ye=Ee.parentNode}Ee=be}c=Y===-1||ce===-1?null:{start:Y,end:ce}}else c=null}c=c||{start:0,end:0}}else c=null;for(fg={focusedElem:s,selectionRange:c},Zm=!1,aa=i;aa!==null;)if(i=aa,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,aa=s;else for(;aa!==null;){switch(i=aa,w=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,c=i,y=w.memoizedProps,w=w.memoizedState,m=c.stateNode;try{var lt=El(c.type,y,c.elementType===c.type);s=m.getSnapshotBeforeUpdate(lt,w),m.__reactInternalSnapshotBeforeUpdate=s}catch(at){Xt(c,c.return,at)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,c=s.nodeType,c===9)xg(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":xg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,aa=s;break}aa=i.return}}function Vb(s,i,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Ri(s,c),m&4&&cd(5,c);break;case 1:if(Ri(s,c),m&4)if(s=c.stateNode,i===null)try{s.componentDidMount()}catch(P){Xt(c,c.return,P)}else{var y=El(c.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(y,i,s.__reactInternalSnapshotBeforeUpdate)}catch(P){Xt(c,c.return,P)}}m&64&&$b(c),m&512&&dd(c,c.return);break;case 3:if(Ri(s,c),m&64&&(s=c.updateQueue,s!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{ky(s,i)}catch(P){Xt(c,c.return,P)}}break;case 27:i===null&&m&4&&qb(c);case 26:case 5:Ri(s,c),i===null&&m&4&&Ub(c),m&512&&dd(c,c.return);break;case 12:Ri(s,c);break;case 13:Ri(s,c),m&4&&Wb(s,c),m&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=RS.bind(null,c),WS(s,c))));break;case 22:if(m=c.memoizedState!==null||Ur,!m){i=i!==null&&i.memoizedState!==null||An,y=Ur;var w=An;Ur=m,(An=i)&&!w?Ai(s,c,(c.subtreeFlags&8772)!==0):Ri(s,c),Ur=y,An=w}break;case 30:break;default:Ri(s,c)}}function Zb(s){var i=s.alternate;i!==null&&(s.alternate=null,Zb(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Xl(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var cn=null,Pa=!1;function Hr(s,i,c){for(c=c.child;c!==null;)Kb(s,i,c),c=c.sibling}function Kb(s,i,c){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(ct,c)}catch{}switch(c.tag){case 26:An||tr(c,i),Hr(s,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:An||tr(c,i);var m=cn,y=Pa;Ii(c.type)&&(cn=c.stateNode,Pa=!1),Hr(s,i,c),bd(c.stateNode),cn=m,Pa=y;break;case 5:An||tr(c,i);case 6:if(m=cn,y=Pa,cn=null,Hr(s,i,c),cn=m,Pa=y,cn!==null)if(Pa)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(c.stateNode)}catch(w){Xt(c,i,w)}else try{cn.removeChild(c.stateNode)}catch(w){Xt(c,i,w)}break;case 18:cn!==null&&(Pa?(s=cn,Lv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),kd(s)):Lv(cn,c.stateNode));break;case 4:m=cn,y=Pa,cn=c.stateNode.containerInfo,Pa=!0,Hr(s,i,c),cn=m,Pa=y;break;case 0:case 11:case 14:case 15:An||Mi(2,c,i),An||Mi(4,c,i),Hr(s,i,c);break;case 1:An||(tr(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"&&Fb(c,i,m)),Hr(s,i,c);break;case 21:Hr(s,i,c);break;case 22:An=(m=An)||c.memoizedState!==null,Hr(s,i,c),An=m;break;default:Hr(s,i,c)}}function Wb(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{kd(s)}catch(c){Xt(i,i.return,c)}}function NS(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Yb),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Yb),i;default:throw Error(r(435,s.tag))}}function qp(s,i){var c=NS(s);i.forEach(function(m){var y=AS.bind(null,s,m);c.has(m)||(c.add(m),m.then(y,y))})}function Qa(s,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m],w=s,P=i,Y=P;e:for(;Y!==null;){switch(Y.tag){case 27:if(Ii(Y.type)){cn=Y.stateNode,Pa=!1;break e}break;case 5:cn=Y.stateNode,Pa=!1;break e;case 3:case 4:cn=Y.stateNode.containerInfo,Pa=!0;break e}Y=Y.return}if(cn===null)throw Error(r(160));Kb(w,P,y),cn=null,Pa=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Gb(i,s),i=i.sibling}var Os=null;function Gb(s,i){var c=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Qa(i,s),Xa(s),m&4&&(Mi(3,s,s.return),cd(3,s),Mi(5,s,s.return));break;case 1:Qa(i,s),Xa(s),m&512&&(An||c===null||tr(c,c.return)),m&64&&Ur&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var y=Os;if(Qa(i,s),Xa(s),m&512&&(An||c===null||tr(c,c.return)),m&4){var w=c!==null?c.memoizedState:null;if(m=s.memoizedState,c===null)if(m===null)if(s.stateNode===null){e:{m=s.type,c=s.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":w=y.getElementsByTagName("title")[0],(!w||w[os]||w[Gt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(m),y.head.insertBefore(w,y.querySelector("head > title"))),fa(w,m,c),w[Gt]=s,Hn(w),m=w;break e;case"link":var P=qv("link","href",y).get(m+(c.href||""));if(P){for(var Y=0;Y<P.length;Y++)if(w=P[Y],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){P.splice(Y,1);break t}}w=y.createElement(m),fa(w,m,c),y.head.appendChild(w);break;case"meta":if(P=qv("meta","content",y).get(m+(c.content||""))){for(Y=0;Y<P.length;Y++)if(w=P[Y],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){P.splice(Y,1);break t}}w=y.createElement(m),fa(w,m,c),y.head.appendChild(w);break;default:throw Error(r(468,m))}w[Gt]=s,Hn(w),m=w}s.stateNode=m}else Yv(y,s.type,s.stateNode);else s.stateNode=Hv(y,m,s.memoizedProps);else w!==m?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,m===null?Yv(y,s.type,s.stateNode):Hv(y,m,s.memoizedProps)):m===null&&s.stateNode!==null&&$p(s,s.memoizedProps,c.memoizedProps)}break;case 27:Qa(i,s),Xa(s),m&512&&(An||c===null||tr(c,c.return)),c!==null&&m&4&&$p(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Qa(i,s),Xa(s),m&512&&(An||c===null||tr(c,c.return)),s.flags&32){y=s.stateNode;try{ds(y,"")}catch(be){Xt(s,s.return,be)}}m&4&&s.stateNode!=null&&(y=s.memoizedProps,$p(s,y,c!==null?c.memoizedProps:y)),m&1024&&(Hp=!0);break;case 6:if(Qa(i,s),Xa(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,c=s.stateNode;try{c.nodeValue=m}catch(be){Xt(s,s.return,be)}}break;case 3:if(qm=null,y=Os,Os=Um(i.containerInfo),Qa(i,s),Os=y,Xa(s),m&4&&c!==null&&c.memoizedState.isDehydrated)try{kd(i.containerInfo)}catch(be){Xt(s,s.return,be)}Hp&&(Hp=!1,Qb(s));break;case 4:m=Os,Os=Um(s.stateNode.containerInfo),Qa(i,s),Xa(s),Os=m;break;case 12:Qa(i,s),Xa(s);break;case 13:Qa(i,s),Xa(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Gp=Fe()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,qp(s,m)));break;case 22:y=s.memoizedState!==null;var ce=c!==null&&c.memoizedState!==null,xe=Ur,_e=An;if(Ur=xe||y,An=_e||ce,Qa(i,s),An=_e,Ur=xe,Xa(s),m&8192)e:for(i=s.stateNode,i._visibility=y?i._visibility&-2:i._visibility|1,y&&(c===null||ce||Ur||An||Ml(s)),c=null,i=s;;){if(i.tag===5||i.tag===26){if(c===null){ce=c=i;try{if(w=ce.stateNode,y)P=w.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{Y=ce.stateNode;var Ee=ce.memoizedProps.style,ye=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;Y.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(be){Xt(ce,ce.return,be)}}}else if(i.tag===6){if(c===null){ce=i;try{ce.stateNode.nodeValue=y?"":ce.memoizedProps}catch(be){Xt(ce,ce.return,be)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}m&4&&(m=s.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,qp(s,c))));break;case 19:Qa(i,s),Xa(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,qp(s,m)));break;case 30:break;case 21:break;default:Qa(i,s),Xa(s)}}function Xa(s){var i=s.flags;if(i&2){try{for(var c,m=s.return;m!==null;){if(Hb(m)){c=m;break}m=m.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,w=Fp(s);Em(s,w,y);break;case 5:var P=c.stateNode;c.flags&32&&(ds(P,""),c.flags&=-33);var Y=Fp(s);Em(s,Y,P);break;case 3:case 4:var ce=c.stateNode.containerInfo,xe=Fp(s);Up(s,xe,ce);break;default:throw Error(r(161))}}catch(_e){Xt(s,s.return,_e)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Qb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Qb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Ri(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Vb(s,i.alternate,i),i=i.sibling}function Ml(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Mi(4,i,i.return),Ml(i);break;case 1:tr(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Fb(i,i.return,c),Ml(i);break;case 27:bd(i.stateNode);case 26:case 5:tr(i,i.return),Ml(i);break;case 22:i.memoizedState===null&&Ml(i);break;case 30:Ml(i);break;default:Ml(i)}s=s.sibling}}function Ai(s,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,y=s,w=i,P=w.flags;switch(w.tag){case 0:case 11:case 15:Ai(y,w,c),cd(4,w);break;case 1:if(Ai(y,w,c),m=w,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(xe){Xt(m,m.return,xe)}if(m=w,y=m.updateQueue,y!==null){var Y=m.stateNode;try{var ce=y.shared.hiddenCallbacks;if(ce!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ce.length;y++)Cy(ce[y],Y)}catch(xe){Xt(m,m.return,xe)}}c&&P&64&&$b(w),dd(w,w.return);break;case 27:qb(w);case 26:case 5:Ai(y,w,c),c&&m===null&&P&4&&Ub(w),dd(w,w.return);break;case 12:Ai(y,w,c);break;case 13:Ai(y,w,c),c&&P&4&&Wb(y,w);break;case 22:w.memoizedState===null&&Ai(y,w,c),dd(w,w.return);break;case 30:break;default:Ai(y,w,c)}i=i.sibling}}function Yp(s,i){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Wc(c))}function Vp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Wc(s))}function nr(s,i,c,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xb(s,i,c,m),i=i.sibling}function Xb(s,i,c,m){var y=i.flags;switch(i.tag){case 0:case 11:case 15:nr(s,i,c,m),y&2048&&cd(9,i);break;case 1:nr(s,i,c,m);break;case 3:nr(s,i,c,m),y&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Wc(s)));break;case 12:if(y&2048){nr(s,i,c,m),s=i.stateNode;try{var w=i.memoizedProps,P=w.id,Y=w.onPostCommit;typeof Y=="function"&&Y(P,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ce){Xt(i,i.return,ce)}}else nr(s,i,c,m);break;case 13:nr(s,i,c,m);break;case 23:break;case 22:w=i.stateNode,P=i.alternate,i.memoizedState!==null?w._visibility&2?nr(s,i,c,m):ud(s,i):w._visibility&2?nr(s,i,c,m):(w._visibility|=2,ko(s,i,c,m,(i.subtreeFlags&10256)!==0)),y&2048&&Yp(P,i);break;case 24:nr(s,i,c,m),y&2048&&Vp(i.alternate,i);break;default:nr(s,i,c,m)}}function ko(s,i,c,m,y){for(y=y&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var w=s,P=i,Y=c,ce=m,xe=P.flags;switch(P.tag){case 0:case 11:case 15:ko(w,P,Y,ce,y),cd(8,P);break;case 23:break;case 22:var _e=P.stateNode;P.memoizedState!==null?_e._visibility&2?ko(w,P,Y,ce,y):ud(w,P):(_e._visibility|=2,ko(w,P,Y,ce,y)),y&&xe&2048&&Yp(P.alternate,P);break;case 24:ko(w,P,Y,ce,y),y&&xe&2048&&Vp(P.alternate,P);break;default:ko(w,P,Y,ce,y)}i=i.sibling}}function ud(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=s,m=i,y=m.flags;switch(m.tag){case 22:ud(c,m),y&2048&&Yp(m.alternate,m);break;case 24:ud(c,m),y&2048&&Vp(m.alternate,m);break;default:ud(c,m)}i=i.sibling}}var md=8192;function To(s){if(s.subtreeFlags&md)for(s=s.child;s!==null;)Jb(s),s=s.sibling}function Jb(s){switch(s.tag){case 26:To(s),s.flags&md&&s.memoizedState!==null&&oC(Os,s.memoizedState,s.memoizedProps);break;case 5:To(s);break;case 3:case 4:var i=Os;Os=Um(s.stateNode.containerInfo),To(s),Os=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=md,md=16777216,To(s),md=i):To(s));break;default:To(s)}}function ev(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function hd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var m=i[c];aa=m,nv(m,s)}ev(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tv(s),s=s.sibling}function tv(s){switch(s.tag){case 0:case 11:case 15:hd(s),s.flags&2048&&Mi(9,s,s.return);break;case 3:hd(s);break;case 12:hd(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Mm(s)):hd(s);break;default:hd(s)}}function Mm(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var m=i[c];aa=m,nv(m,s)}ev(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Mi(8,i,i.return),Mm(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Mm(i));break;default:Mm(i)}s=s.sibling}}function nv(s,i){for(;aa!==null;){var c=aa;switch(c.tag){case 0:case 11:case 15:Mi(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Wc(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,aa=m;else e:for(c=s;aa!==null;){m=aa;var y=m.sibling,w=m.return;if(Zb(m),m===c){aa=null;break e}if(y!==null){y.return=w,aa=y;break e}aa=w}}}var _S={getCacheForType:function(s){var i=ya(Zn),c=i.data.get(s);return c===void 0&&(c=s(),i.data.set(s,c)),c}},SS=typeof WeakMap=="function"?WeakMap:Map,Ft=0,an=null,jt=null,Et=0,Ut=0,Ja=null,Di=!1,Eo=!1,Zp=!1,qr=0,Sn=0,Pi=0,Rl=0,Kp=0,ys=0,Mo=0,fd=null,Oa=null,Wp=!1,Gp=0,Rm=1/0,Am=null,Oi=null,ha=0,Li=null,Ro=null,Ao=0,Qp=0,Xp=null,av=null,pd=0,Jp=null;function es(){if((Ft&2)!==0&&Et!==0)return Et&-Et;if(G.T!==null){var s=bo;return s!==0?s:ig()}return oa()}function sv(){ys===0&&(ys=(Et&536870912)===0||dt?tt():536870912);var s=xs.current;return s!==null&&(s.flags|=32),ys}function ts(s,i,c){(s===an&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)&&(Do(s,0),zi(s,Et,ys,!1)),$e(s,c),((Ft&2)===0||s!==an)&&(s===an&&((Ft&2)===0&&(Rl|=c),Sn===4&&zi(s,Et,ys,!1)),ar(s))}function rv(s,i,c){if((Ft&6)!==0)throw Error(r(327));var m=!c&&(i&124)===0&&(i&s.expiredLanes)===0||En(s,i),y=m?TS(s,i):ng(s,i,!0),w=m;do{if(y===0){Eo&&!m&&zi(s,i,0,!1);break}else{if(c=s.current.alternate,w&&!CS(c)){y=ng(s,i,!1),w=!1;continue}if(y===2){if(w=i,s.errorRecoveryDisabledLanes&w)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){i=P;e:{var Y=s;y=fd;var ce=Y.current.memoizedState.isDehydrated;if(ce&&(Do(Y,P).flags|=256),P=ng(Y,P,!1),P!==2){if(Zp&&!ce){Y.errorRecoveryDisabledLanes|=w,Rl|=w,y=4;break e}w=Oa,Oa=y,w!==null&&(Oa===null?Oa=w:Oa.push.apply(Oa,w))}y=P}if(w=!1,y!==2)continue}}if(y===1){Do(s,0),zi(s,i,0,!0);break}e:{switch(m=s,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:zi(m,i,ys,!Di);break e;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(y=Gp+300-Fe(),10<y)){if(zi(m,i,ys,!Di),la(m,0,!0)!==0)break e;m.timeoutHandle=Pv(iv.bind(null,m,c,Oa,Am,Wp,i,ys,Rl,Mo,Di,w,2,-0,0),y);break e}iv(m,c,Oa,Am,Wp,i,ys,Rl,Mo,Di,w,0,-0,0)}}break}while(!0);ar(s)}function iv(s,i,c,m,y,w,P,Y,ce,xe,_e,Ee,ye,be){if(s.timeoutHandle=-1,Ee=i.subtreeFlags,(Ee&8192||(Ee&16785408)===16785408)&&(wd={stylesheets:null,count:0,unsuspend:lC},Jb(i),Ee=cC(),Ee!==null)){s.cancelPendingCommit=Ee(hv.bind(null,s,i,w,c,m,y,P,Y,ce,_e,1,ye,be)),zi(s,w,P,!xe);return}hv(s,i,w,c,m,y,P,Y,ce)}function CS(s){for(var i=s;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var y=c[m],w=y.getSnapshot;y=y.value;try{if(!_a(w(),y))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zi(s,i,c,m){i&=~Kp,i&=~Rl,s.suspendedLanes|=i,s.pingedLanes&=~i,m&&(s.warmLanes|=i),m=s.expirationTimes;for(var y=i;0<y;){var w=31-Le(y),P=1<<w;m[w]=-1,y&=~P}c!==0&&qt(s,c,i)}function Dm(){return(Ft&6)===0?(gd(0),!1):!0}function eg(){if(jt!==null){if(Ut===0)var s=jt.return;else s=jt,Ds=gs=null,xp(s),So=null,id=0,s=jt;for(;s!==null;)Bb(s.alternate,s),s=s.return;jt=null}}function Do(s,i){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,qS(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),eg(),an=s,jt=c=ps(s.current,null),Et=i,Ut=0,Ja=null,Di=!1,Eo=En(s,i),Zp=!1,Mo=ys=Kp=Rl=Pi=Sn=0,Oa=fd=null,Wp=!1,(i&8)!==0&&(i|=i&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=i;0<m;){var y=31-Le(m),w=1<<y;i|=s[y],m&=~w}return qr=i,bl(),c}function lv(s,i){yt=null,G.H=vm,i===Qc||i===dm?(i=_y(),Ut=3):i===jy?(i=_y(),Ut=4):Ut=i===Sb?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ja=i,jt===null&&(Sn=1,Sm(s,Ca(i,s.current)))}function ov(){var s=G.H;return G.H=vm,s===null?vm:s}function cv(){var s=G.A;return G.A=_S,s}function tg(){Sn=4,Di||(Et&4194048)!==Et&&xs.current!==null||(Eo=!0),(Pi&134217727)===0&&(Rl&134217727)===0||an===null||zi(an,Et,ys,!1)}function ng(s,i,c){var m=Ft;Ft|=2;var y=ov(),w=cv();(an!==s||Et!==i)&&(Am=null,Do(s,i)),i=!1;var P=Sn;e:do try{if(Ut!==0&&jt!==null){var Y=jt,ce=Ja;switch(Ut){case 8:eg(),P=6;break e;case 3:case 2:case 9:case 6:xs.current===null&&(i=!0);var xe=Ut;if(Ut=0,Ja=null,Po(s,Y,ce,xe),c&&Eo){P=0;break e}break;default:xe=Ut,Ut=0,Ja=null,Po(s,Y,ce,xe)}}kS(),P=Sn;break}catch(_e){lv(s,_e)}while(!0);return i&&s.shellSuspendCounter++,Ds=gs=null,Ft=m,G.H=y,G.A=w,jt===null&&(an=null,Et=0,bl()),P}function kS(){for(;jt!==null;)dv(jt)}function TS(s,i){var c=Ft;Ft|=2;var m=ov(),y=cv();an!==s||Et!==i?(Am=null,Rm=Fe()+500,Do(s,i)):Eo=En(s,i);e:do try{if(Ut!==0&&jt!==null){i=jt;var w=Ja;t:switch(Ut){case 1:Ut=0,Ja=null,Po(s,i,w,1);break;case 2:case 9:if(wy(w)){Ut=0,Ja=null,uv(i);break}i=function(){Ut!==2&&Ut!==9||an!==s||(Ut=7),ar(s)},w.then(i,i);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:wy(w)?(Ut=0,Ja=null,uv(i)):(Ut=0,Ja=null,Po(s,i,w,7));break;case 5:var P=null;switch(jt.tag){case 26:P=jt.memoizedState;case 5:case 27:var Y=jt;if(!P||Vv(P)){Ut=0,Ja=null;var ce=Y.sibling;if(ce!==null)jt=ce;else{var xe=Y.return;xe!==null?(jt=xe,Pm(xe)):jt=null}break t}}Ut=0,Ja=null,Po(s,i,w,5);break;case 6:Ut=0,Ja=null,Po(s,i,w,6);break;case 8:eg(),Sn=6;break e;default:throw Error(r(462))}}ES();break}catch(_e){lv(s,_e)}while(!0);return Ds=gs=null,G.H=m,G.A=y,Ft=c,jt!==null?0:(an=null,Et=0,bl(),Sn)}function ES(){for(;jt!==null&&!it();)dv(jt)}function dv(s){var i=zb(s.alternate,s,qr);s.memoizedProps=s.pendingProps,i===null?Pm(s):jt=i}function uv(s){var i=s,c=i.alternate;switch(i.tag){case 15:case 0:i=Rb(c,i,i.pendingProps,i.type,void 0,Et);break;case 11:i=Rb(c,i,i.pendingProps,i.type.render,i.ref,Et);break;case 5:xp(i);default:Bb(c,i),i=jt=Zc(i,qr),i=zb(c,i,qr)}s.memoizedProps=s.pendingProps,i===null?Pm(s):jt=i}function Po(s,i,c,m){Ds=gs=null,xp(i),So=null,id=0;var y=i.return;try{if(yS(s,y,i,c,Et)){Sn=1,Sm(s,Ca(c,s.current)),jt=null;return}}catch(w){if(y!==null)throw jt=y,w;Sn=1,Sm(s,Ca(c,s.current)),jt=null;return}i.flags&32768?(dt||m===1?s=!0:Eo||(Et&536870912)!==0?s=!1:(Di=s=!0,(m===2||m===9||m===3||m===6)&&(m=xs.current,m!==null&&m.tag===13&&(m.flags|=16384))),mv(i,s)):Pm(i)}function Pm(s){var i=s;do{if((i.flags&32768)!==0){mv(i,Di);return}s=i.return;var c=vS(i.alternate,i,qr);if(c!==null){jt=c;return}if(i=i.sibling,i!==null){jt=i;return}jt=i=s}while(i!==null);Sn===0&&(Sn=5)}function mv(s,i){do{var c=jS(s.alternate,s);if(c!==null){c.flags&=32767,jt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(s=s.sibling,s!==null)){jt=s;return}jt=s=c}while(s!==null);Sn=6,jt=null}function hv(s,i,c,m,y,w,P,Y,ce){s.cancelPendingCommit=null;do Om();while(ha!==0);if((Ft&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(w=i.lanes|i.childLanes,w|=Ga,Xe(s,c,w,P,Y,ce),s===an&&(jt=an=null,Et=0),Ro=i,Li=s,Ao=c,Qp=w,Xp=y,av=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,DS(ke,function(){return yv(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,y=J.p,J.p=2,P=Ft,Ft|=4;try{wS(s,i,c)}finally{Ft=P,J.p=y,G.T=m}}ha=1,fv(),pv(),gv()}}function fv(){if(ha===1){ha=0;var s=Li,i=Ro,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var m=J.p;J.p=2;var y=Ft;Ft|=4;try{Gb(i,s);var w=fg,P=gl(s.containerInfo),Y=w.focusedElem,ce=w.selectionRange;if(P!==Y&&Y&&Y.ownerDocument&&uo(Y.ownerDocument.documentElement,Y)){if(ce!==null&&xl(Y)){var xe=ce.start,_e=ce.end;if(_e===void 0&&(_e=xe),"selectionStart"in Y)Y.selectionStart=xe,Y.selectionEnd=Math.min(_e,Y.value.length);else{var Ee=Y.ownerDocument||document,ye=Ee&&Ee.defaultView||window;if(ye.getSelection){var be=ye.getSelection(),lt=Y.textContent.length,at=Math.min(ce.start,lt),Zt=ce.end===void 0?at:Math.min(ce.end,lt);!be.extend&&at>Zt&&(P=Zt,Zt=at,at=P);var fe=Yc(Y,at),ue=Yc(Y,Zt);if(fe&&ue&&(be.rangeCount!==1||be.anchorNode!==fe.node||be.anchorOffset!==fe.offset||be.focusNode!==ue.node||be.focusOffset!==ue.offset)){var ge=Ee.createRange();ge.setStart(fe.node,fe.offset),be.removeAllRanges(),at>Zt?(be.addRange(ge),be.extend(ue.node,ue.offset)):(ge.setEnd(ue.node,ue.offset),be.addRange(ge))}}}}for(Ee=[],be=Y;be=be.parentNode;)be.nodeType===1&&Ee.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ee.length;Y++){var Se=Ee[Y];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Zm=!!hg,fg=hg=null}finally{Ft=y,J.p=m,G.T=c}}s.current=i,ha=2}}function pv(){if(ha===2){ha=0;var s=Li,i=Ro,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var m=J.p;J.p=2;var y=Ft;Ft|=4;try{Vb(s,i.alternate,i)}finally{Ft=y,J.p=m,G.T=c}}ha=3}}function gv(){if(ha===4||ha===3){ha=0,Ce();var s=Li,i=Ro,c=Ao,m=av;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ha=5:(ha=0,Ro=Li=null,xv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Oi=null),Nn(c),i=i.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=G.T,y=J.p,J.p=2,G.T=null;try{for(var w=s.onRecoverableError,P=0;P<m.length;P++){var Y=m[P];w(Y.value,{componentStack:Y.stack})}}finally{G.T=i,J.p=y}}(Ao&3)!==0&&Om(),ar(s),y=s.pendingLanes,(c&4194090)!==0&&(y&42)!==0?s===Jp?pd++:(pd=0,Jp=s):pd=0,gd(0)}}function xv(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Wc(i)))}function Om(s){return fv(),pv(),gv(),yv()}function yv(){if(ha!==5)return!1;var s=Li,i=Qp;Qp=0;var c=Nn(Ao),m=G.T,y=J.p;try{J.p=32>c?32:c,G.T=null,c=Xp,Xp=null;var w=Li,P=Ao;if(ha=0,Ro=Li=null,Ao=0,(Ft&6)!==0)throw Error(r(331));var Y=Ft;if(Ft|=4,tv(w.current),Xb(w,w.current,P,c),Ft=Y,gd(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(ct,w)}catch{}return!0}finally{J.p=y,G.T=m,xv(s,i)}}function bv(s,i,c){i=Ca(c,i),i=Rp(s.stateNode,i,2),s=Ci(s,i,2),s!==null&&($e(s,2),ar(s))}function Xt(s,i,c){if(s.tag===3)bv(s,s,c);else for(;i!==null;){if(i.tag===3){bv(i,s,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Oi===null||!Oi.has(m))){s=Ca(c,s),c=Nb(2),m=Ci(i,c,2),m!==null&&(_b(c,m,i,s),$e(m,2),ar(m));break}}i=i.return}}function ag(s,i,c){var m=s.pingCache;if(m===null){m=s.pingCache=new SS;var y=new Set;m.set(i,y)}else y=m.get(i),y===void 0&&(y=new Set,m.set(i,y));y.has(c)||(Zp=!0,y.add(c),s=MS.bind(null,s,i,c),i.then(s,s))}function MS(s,i,c){var m=s.pingCache;m!==null&&m.delete(i),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,an===s&&(Et&c)===c&&(Sn===4||Sn===3&&(Et&62914560)===Et&&300>Fe()-Gp?(Ft&2)===0&&Do(s,0):Kp|=c,Mo===Et&&(Mo=0)),ar(s)}function vv(s,i){i===0&&(i=re()),s=vi(s,i),s!==null&&($e(s,i),ar(s))}function RS(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),vv(s,c)}function AS(s,i){var c=0;switch(s.tag){case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(i),vv(s,c)}function DS(s,i){return nt(s,i)}var Lm=null,Oo=null,sg=!1,zm=!1,rg=!1,Al=0;function ar(s){s!==Oo&&s.next===null&&(Oo===null?Lm=Oo=s:Oo=Oo.next=s),zm=!0,sg||(sg=!0,OS())}function gd(s,i){if(!rg&&zm){rg=!0;do for(var c=!1,m=Lm;m!==null;){if(s!==0){var y=m.pendingLanes;if(y===0)var w=0;else{var P=m.suspendedLanes,Y=m.pingedLanes;w=(1<<31-Le(42|s)+1)-1,w&=y&~(P&~Y),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,_v(m,w))}else w=Et,w=la(m,m===an?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||En(m,w)||(c=!0,_v(m,w));m=m.next}while(c);rg=!1}}function PS(){jv()}function jv(){zm=sg=!1;var s=0;Al!==0&&(HS()&&(s=Al),Al=0);for(var i=Fe(),c=null,m=Lm;m!==null;){var y=m.next,w=wv(m,i);w===0?(m.next=null,c===null?Lm=y:c.next=y,y===null&&(Oo=c)):(c=m,(s!==0||(w&3)!==0)&&(zm=!0)),m=y}gd(s)}function wv(s,i){for(var c=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var P=31-Le(w),Y=1<<P,ce=y[P];ce===-1?((Y&c)===0||(Y&m)!==0)&&(y[P]=he(Y,i)):ce<=i&&(s.expiredLanes|=Y),w&=~Y}if(i=an,c=Et,c=la(s,s===i?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,c===0||s===i&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Qe(m),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||En(s,c)){if(i=c&-c,i===s.callbackPriority)return i;switch(m!==null&&Qe(m),Nn(c)){case 2:case 8:c=ut;break;case 32:c=ke;break;case 268435456:c=qe;break;default:c=ke}return m=Nv.bind(null,s),c=nt(c,m),s.callbackPriority=i,s.callbackNode=c,i}return m!==null&&m!==null&&Qe(m),s.callbackPriority=2,s.callbackNode=null,2}function Nv(s,i){if(ha!==0&&ha!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Om()&&s.callbackNode!==c)return null;var m=Et;return m=la(s,s===an?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(rv(s,m,i),wv(s,Fe()),s.callbackNode!=null&&s.callbackNode===c?Nv.bind(null,s):null)}function _v(s,i){if(Om())return null;rv(s,i,!0)}function OS(){YS(function(){(Ft&6)!==0?nt(_t,PS):jv()})}function ig(){return Al===0&&(Al=tt()),Al}function Sv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:li(""+s)}function Cv(s,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,s.id&&c.setAttribute("form",s.id),i.parentNode.insertBefore(c,i),s=new FormData(s),c.parentNode.removeChild(c),s}function LS(s,i,c,m,y){if(i==="submit"&&c&&c.stateNode===y){var w=Sv((y[Qt]||null).action),P=m.submitter;P&&(i=(i=P[Qt]||null)?Sv(i.formAction):P.getAttribute("formAction"),i!==null&&(w=i,P=null));var Y=new ul("action","action",null,m,y);s.push({event:Y,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Al!==0){var ce=P?Cv(y,P):new FormData(y);Cp(c,{pending:!0,data:ce,method:y.method,action:w},null,ce)}}else typeof w=="function"&&(Y.preventDefault(),ce=P?Cv(y,P):new FormData(y),Cp(c,{pending:!0,data:ce,method:y.method,action:w},w,ce))},currentTarget:y}]})}}for(var lg=0;lg<Dr.length;lg++){var og=Dr[lg],zS=og.toLowerCase(),IS=og[0].toUpperCase()+og.slice(1);Wa(zS,"on"+IS)}Wa(tm,"onAnimationEnd"),Wa(Ka,"onAnimationIteration"),Wa(yl,"onAnimationStart"),Wa("dblclick","onDoubleClick"),Wa("focusin","onFocus"),Wa("focusout","onBlur"),Wa(tp,"onTransitionRun"),Wa(po,"onTransitionStart"),Wa(np,"onTransitionCancel"),Wa(Vc,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xd));function kv(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var m=s[c],y=m.event;m=m.listeners;e:{var w=void 0;if(i)for(var P=m.length-1;0<=P;P--){var Y=m[P],ce=Y.instance,xe=Y.currentTarget;if(Y=Y.listener,ce!==w&&y.isPropagationStopped())break e;w=Y,y.currentTarget=xe;try{w(y)}catch(_e){_m(_e)}y.currentTarget=null,w=ce}else for(P=0;P<m.length;P++){if(Y=m[P],ce=Y.instance,xe=Y.currentTarget,Y=Y.listener,ce!==w&&y.isPropagationStopped())break e;w=Y,y.currentTarget=xe;try{w(y)}catch(_e){_m(_e)}y.currentTarget=null,w=ce}}}}function wt(s,i){var c=i[Un];c===void 0&&(c=i[Un]=new Set);var m=s+"__bubble";c.has(m)||(Tv(i,s,2,!1),c.add(m))}function cg(s,i,c){var m=0;i&&(m|=4),Tv(c,s,m,i)}var Im="_reactListening"+Math.random().toString(36).slice(2);function dg(s){if(!s[Im]){s[Im]=!0,Ou.forEach(function(c){c!=="selectionchange"&&(BS.has(c)||cg(c,!1,s),cg(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Im]||(i[Im]=!0,cg("selectionchange",!1,i))}}function Tv(s,i,c,m){switch(Xv(i)){case 2:var y=mC;break;case 8:y=hC;break;default:y=_g}c=y.bind(null,i,c,s),y=void 0,!dl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(i,c,{capture:!0,passive:y}):s.addEventListener(i,c,!0):y!==void 0?s.addEventListener(i,c,{passive:y}):s.addEventListener(i,c,!1)}function ug(s,i,c,m,y){var w=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var Y=m.stateNode.containerInfo;if(Y===y)break;if(P===4)for(P=m.return;P!==null;){var ce=P.tag;if((ce===3||ce===4)&&P.stateNode.containerInfo===y)return;P=P.return}for(;Y!==null;){if(P=Vs(Y),P===null)return;if(ce=P.tag,ce===5||ce===6||ce===26||ce===27){m=w=P;continue e}Y=Y.parentNode}}m=m.return}qa(function(){var xe=w,_e=oi(c),Ee=[];e:{var ye=nm.get(s);if(ye!==void 0){var be=ul,lt=s;switch(s){case"keypress":if(_n(c)===0)break e;case"keydown":case"keyup":be=Zf;break;case"focusin":lt="focus",be=Lc;break;case"focusout":lt="blur",be=Lc;break;case"beforeblur":case"afterblur":be=Lc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=Uf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Wf;break;case tm:case Ka:case yl:be=Hf;break;case Vc:be=Gf;break;case"scroll":case"scrollend":be=Ff;break;case"wheel":be=Vu;break;case"copy":case"cut":case"paste":be=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Bc;break;case"toggle":case"beforetoggle":be=Er}var at=(i&4)!==0,Zt=!at&&(s==="scroll"||s==="scrollend"),fe=at?ye!==null?ye+"Capture":null:ye;at=[];for(var ue=xe,ge;ue!==null;){var Se=ue;if(ge=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ge===null||fe===null||(Se=At(ue,fe),Se!=null&&at.push(yd(ue,Se,ge))),Zt)break;ue=ue.return}0<at.length&&(ye=new be(ye,lt,null,c,_e),Ee.push({event:ye,listeners:at}))}}if((i&7)===0){e:{if(ye=s==="mouseover"||s==="pointerover",be=s==="mouseout"||s==="pointerout",ye&&c!==cl&&(lt=c.relatedTarget||c.fromElement)&&(Vs(lt)||lt[Jn]))break e;if((be||ye)&&(ye=_e.window===_e?_e:(ye=_e.ownerDocument)?ye.defaultView||ye.parentWindow:window,be?(lt=c.relatedTarget||c.toElement,be=xe,lt=lt?Vs(lt):null,lt!==null&&(Zt=d(lt),at=lt.tag,lt!==Zt||at!==5&&at!==27&&at!==6)&&(lt=null)):(be=null,lt=xe),be!==lt)){if(at=ui,Se="onMouseLeave",fe="onMouseEnter",ue="mouse",(s==="pointerout"||s==="pointerover")&&(at=Bc,Se="onPointerLeave",fe="onPointerEnter",ue="pointer"),Zt=be==null?ye:cs(be),ge=lt==null?ye:cs(lt),ye=new at(Se,ue+"leave",be,c,_e),ye.target=Zt,ye.relatedTarget=ge,Se=null,Vs(_e)===xe&&(at=new at(fe,ue+"enter",lt,c,_e),at.target=ge,at.relatedTarget=Zt,Se=at),Zt=Se,be&&lt)t:{for(at=be,fe=lt,ue=0,ge=at;ge;ge=Lo(ge))ue++;for(ge=0,Se=fe;Se;Se=Lo(Se))ge++;for(;0<ue-ge;)at=Lo(at),ue--;for(;0<ge-ue;)fe=Lo(fe),ge--;for(;ue--;){if(at===fe||fe!==null&&at===fe.alternate)break t;at=Lo(at),fe=Lo(fe)}at=null}else at=null;be!==null&&Ev(Ee,ye,be,at,!1),lt!==null&&Zt!==null&&Ev(Ee,Zt,lt,at,!0)}}e:{if(ye=xe?cs(xe):window,be=ye.nodeName&&ye.nodeName.toLowerCase(),be==="select"||be==="input"&&ye.type==="file")var Ze=fi;else if(Rr(ye))if(Uc)Ze=ep;else{Ze=Jf;var vt=qc}else be=ye.nodeName,!be||be.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?xe&&ol(xe.elementType)&&(Ze=fi):Ze=As;if(Ze&&(Ze=Ze(s,xe))){Qu(Ee,Ze,c,_e);break e}vt&&vt(s,ye,xe),s==="focusout"&&xe&&ye.type==="number"&&xe.memoizedProps.value!=null&&ri(ye,"number",ye.value)}switch(vt=xe?cs(xe):window,s){case"focusin":(Rr(vt)||vt.contentEditable==="true")&&(Za=vt,xi=xe,Ar=null);break;case"focusout":Ar=xi=Za=null;break;case"mousedown":ho=!0;break;case"contextmenu":case"mouseup":case"dragend":ho=!1,Ju(Ee,c,_e);break;case"selectionchange":if(mo)break;case"keydown":case"keyup":Ju(Ee,c,_e)}var Je;if(Mr)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else mi?oo(s,c)&&(st="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(st="onCompositionStart");st&&(Fc&&c.locale!=="ko"&&(mi||st!=="onCompositionStart"?st==="onCompositionEnd"&&mi&&(Je=di()):(ms=_e,Ms="value"in ms?ms.value:ms.textContent,mi=!0)),vt=Bm(xe,st),0<vt.length&&(st=new Ya(st,s,null,c,_e),Ee.push({event:st,listeners:vt}),Je?st.data=Je:(Je=Wu(c),Je!==null&&(st.data=Je)))),(Je=Zu?Gu(s,c):Xf(s,c))&&(st=Bm(xe,"onBeforeInput"),0<st.length&&(vt=new Ya("onBeforeInput","beforeinput",null,c,_e),Ee.push({event:vt,listeners:st}),vt.data=Je)),LS(Ee,s,xe,c,_e)}kv(Ee,i)})}function yd(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Bm(s,i){for(var c=i+"Capture",m=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=At(s,c),y!=null&&m.unshift(yd(s,y,w)),y=At(s,i),y!=null&&m.push(yd(s,y,w))),s.tag===3)return m;s=s.return}return[]}function Lo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ev(s,i,c,m,y){for(var w=i._reactName,P=[];c!==null&&c!==m;){var Y=c,ce=Y.alternate,xe=Y.stateNode;if(Y=Y.tag,ce!==null&&ce===m)break;Y!==5&&Y!==26&&Y!==27||xe===null||(ce=xe,y?(xe=At(c,w),xe!=null&&P.unshift(yd(c,xe,ce))):y||(xe=At(c,w),xe!=null&&P.push(yd(c,xe,ce)))),c=c.return}P.length!==0&&s.push({event:i,listeners:P})}var $S=/\r\n?/g,FS=/\u0000|\uFFFD/g;function Mv(s){return(typeof s=="string"?s:""+s).replace($S,`
`).replace(FS,"")}function Rv(s,i){return i=Mv(i),Mv(s)===i}function $m(){}function Vt(s,i,c,m,y,w){switch(c){case"children":typeof m=="string"?i==="body"||i==="textarea"&&m===""||ds(s,m):(typeof m=="number"||typeof m=="bigint")&&i!=="body"&&ds(s,""+m);break;case"className":eo(s,"class",m);break;case"tabIndex":eo(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":eo(s,c,m);break;case"style":ii(s,m,w);break;case"data":if(i!=="object"){eo(s,"data",m);break}case"src":case"href":if(m===""&&(i!=="a"||c!=="href")){s.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(c);break}m=li(""+m),s.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&Vt(s,i,"name",y.name,y,null),Vt(s,i,"formEncType",y.formEncType,y,null),Vt(s,i,"formMethod",y.formMethod,y,null),Vt(s,i,"formTarget",y.formTarget,y,null)):(Vt(s,i,"encType",y.encType,y,null),Vt(s,i,"method",y.method,y,null),Vt(s,i,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(c);break}m=li(""+m),s.setAttribute(c,m);break;case"onClick":m!=null&&(s.onclick=$m);break;case"onScroll":m!=null&&wt("scroll",s);break;case"onScrollEnd":m!=null&&wt("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}c=li(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,""+m):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":m===!0?s.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,m):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(c,m):s.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(c):s.setAttribute(c,m);break;case"popover":wt("beforetoggle",s),wt("toggle",s),Jl(s,"popover",m);break;case"xlinkActuate":Es(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Es(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Es(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Es(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Es(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Es(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Es(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Es(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Es(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Jl(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Dc.get(c)||c,Jl(s,c,m))}}function mg(s,i,c,m,y,w){switch(c){case"style":ii(s,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof m=="string"?ds(s,m):(typeof m=="number"||typeof m=="bigint")&&ds(s,""+m);break;case"onScroll":m!=null&&wt("scroll",s);break;case"onScrollEnd":m!=null&&wt("scrollend",s);break;case"onClick":m!=null&&(s.onclick=$m);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lu.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),i=c.slice(2,y?c.length-7:void 0),w=s[Qt]||null,w=w!=null?w[c]:null,typeof w=="function"&&s.removeEventListener(i,w,y),typeof m=="function")){typeof w!="function"&&w!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(i,m,y);break e}c in s?s[c]=m:m===!0?s.setAttribute(c,""):Jl(s,c,m)}}}function fa(s,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",s),wt("load",s);var m=!1,y=!1,w;for(w in c)if(c.hasOwnProperty(w)){var P=c[w];if(P!=null)switch(w){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Vt(s,i,w,P,c,null)}}y&&Vt(s,i,"srcSet",c.srcSet,c,null),m&&Vt(s,i,"src",c.src,c,null);return;case"input":wt("invalid",s);var Y=w=P=y=null,ce=null,xe=null;for(m in c)if(c.hasOwnProperty(m)){var _e=c[m];if(_e!=null)switch(m){case"name":y=_e;break;case"type":P=_e;break;case"checked":ce=_e;break;case"defaultChecked":xe=_e;break;case"value":w=_e;break;case"defaultValue":Y=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,i));break;default:Vt(s,i,m,_e,c,null)}}Iu(s,w,Y,ce,xe,P,y,!1),si(s);return;case"select":wt("invalid",s),m=P=w=null;for(y in c)if(c.hasOwnProperty(y)&&(Y=c[y],Y!=null))switch(y){case"value":w=Y;break;case"defaultValue":P=Y;break;case"multiple":m=Y;default:Vt(s,i,y,Y,c,null)}i=w,c=P,s.multiple=!!m,i!=null?Ra(s,!!m,i,!1):c!=null&&Ra(s,!!m,c,!0);return;case"textarea":wt("invalid",s),w=y=m=null;for(P in c)if(c.hasOwnProperty(P)&&(Y=c[P],Y!=null))switch(P){case"value":m=Y;break;case"defaultValue":y=Y;break;case"children":w=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Vt(s,i,P,Y,c,null)}Zs(s,m,y,w),si(s);return;case"option":for(ce in c)if(c.hasOwnProperty(ce)&&(m=c[ce],m!=null))switch(ce){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Vt(s,i,ce,m,c,null)}return;case"dialog":wt("beforetoggle",s),wt("toggle",s),wt("cancel",s),wt("close",s);break;case"iframe":case"object":wt("load",s);break;case"video":case"audio":for(m=0;m<xd.length;m++)wt(xd[m],s);break;case"image":wt("error",s),wt("load",s);break;case"details":wt("toggle",s);break;case"embed":case"source":case"link":wt("error",s),wt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in c)if(c.hasOwnProperty(xe)&&(m=c[xe],m!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Vt(s,i,xe,m,c,null)}return;default:if(ol(i)){for(_e in c)c.hasOwnProperty(_e)&&(m=c[_e],m!==void 0&&mg(s,i,_e,m,c,void 0));return}}for(Y in c)c.hasOwnProperty(Y)&&(m=c[Y],m!=null&&Vt(s,i,Y,m,c,null))}function US(s,i,c,m){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,P=null,Y=null,ce=null,xe=null,_e=null;for(be in c){var Ee=c[be];if(c.hasOwnProperty(be)&&Ee!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":ce=Ee;default:m.hasOwnProperty(be)||Vt(s,i,be,null,m,Ee)}}for(var ye in m){var be=m[ye];if(Ee=c[ye],m.hasOwnProperty(ye)&&(be!=null||Ee!=null))switch(ye){case"type":w=be;break;case"name":y=be;break;case"checked":xe=be;break;case"defaultChecked":_e=be;break;case"value":P=be;break;case"defaultValue":Y=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,i));break;default:be!==Ee&&Vt(s,i,ye,be,m,Ee)}}ga(s,P,Y,ce,xe,_e,w,y);return;case"select":be=P=Y=ye=null;for(w in c)if(ce=c[w],c.hasOwnProperty(w)&&ce!=null)switch(w){case"value":break;case"multiple":be=ce;default:m.hasOwnProperty(w)||Vt(s,i,w,null,m,ce)}for(y in m)if(w=m[y],ce=c[y],m.hasOwnProperty(y)&&(w!=null||ce!=null))switch(y){case"value":ye=w;break;case"defaultValue":Y=w;break;case"multiple":P=w;default:w!==ce&&Vt(s,i,y,w,m,ce)}i=Y,c=P,m=be,ye!=null?Ra(s,!!c,ye,!1):!!m!=!!c&&(i!=null?Ra(s,!!c,i,!0):Ra(s,!!c,c?[]:"",!1));return;case"textarea":be=ye=null;for(Y in c)if(y=c[Y],c.hasOwnProperty(Y)&&y!=null&&!m.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Vt(s,i,Y,null,m,y)}for(P in m)if(y=m[P],w=c[P],m.hasOwnProperty(P)&&(y!=null||w!=null))switch(P){case"value":ye=y;break;case"defaultValue":be=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&Vt(s,i,P,y,m,w)}fn(s,ye,be);return;case"option":for(var lt in c)if(ye=c[lt],c.hasOwnProperty(lt)&&ye!=null&&!m.hasOwnProperty(lt))switch(lt){case"selected":s.selected=!1;break;default:Vt(s,i,lt,null,m,ye)}for(ce in m)if(ye=m[ce],be=c[ce],m.hasOwnProperty(ce)&&ye!==be&&(ye!=null||be!=null))switch(ce){case"selected":s.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Vt(s,i,ce,ye,m,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in c)ye=c[at],c.hasOwnProperty(at)&&ye!=null&&!m.hasOwnProperty(at)&&Vt(s,i,at,null,m,ye);for(xe in m)if(ye=m[xe],be=c[xe],m.hasOwnProperty(xe)&&ye!==be&&(ye!=null||be!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,i));break;default:Vt(s,i,xe,ye,m,be)}return;default:if(ol(i)){for(var Zt in c)ye=c[Zt],c.hasOwnProperty(Zt)&&ye!==void 0&&!m.hasOwnProperty(Zt)&&mg(s,i,Zt,void 0,m,ye);for(_e in m)ye=m[_e],be=c[_e],!m.hasOwnProperty(_e)||ye===be||ye===void 0&&be===void 0||mg(s,i,_e,ye,m,be);return}}for(var fe in c)ye=c[fe],c.hasOwnProperty(fe)&&ye!=null&&!m.hasOwnProperty(fe)&&Vt(s,i,fe,null,m,ye);for(Ee in m)ye=m[Ee],be=c[Ee],!m.hasOwnProperty(Ee)||ye===be||ye==null&&be==null||Vt(s,i,Ee,ye,m,be)}var hg=null,fg=null;function Fm(s){return s.nodeType===9?s:s.ownerDocument}function Av(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dv(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function pg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gg=null;function HS(){var s=window.event;return s&&s.type==="popstate"?s===gg?!1:(gg=s,!0):(gg=null,!1)}var Pv=typeof setTimeout=="function"?setTimeout:void 0,qS=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,YS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(s){return Ov.resolve(null).then(s).catch(VS)}:Pv;function VS(s){setTimeout(function(){throw s})}function Ii(s){return s==="head"}function Lv(s,i){var c=i,m=0,y=0;do{var w=c.nextSibling;if(s.removeChild(c),w&&w.nodeType===8)if(c=w.data,c==="/$"){if(0<m&&8>m){c=m;var P=s.ownerDocument;if(c&1&&bd(P.documentElement),c&2&&bd(P.body),c&4)for(c=P.head,bd(c),P=c.firstChild;P;){var Y=P.nextSibling,ce=P.nodeName;P[os]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&P.rel.toLowerCase()==="stylesheet"||c.removeChild(P),P=Y}}if(y===0){s.removeChild(w),kd(i);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:m=c.charCodeAt(0)-48;else m=0;c=w}while(c);kd(i)}function xg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":xg(c),Xl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function ZS(s,i,c,m){for(;s.nodeType===1;){var y=c;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[os])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Ls(s.nextSibling),s===null)break}return null}function KS(s,i,c){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ls(s.nextSibling),s===null))return null;return s}function yg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function WS(s,i){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")i();else{var m=function(){i(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Ls(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var bg=null;function zv(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}function Iv(s,i,c){switch(i=Fm(c),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function bd(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Xl(s)}var bs=new Map,Bv=new Set;function Um(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Yr=J.d;J.d={f:GS,r:QS,D:XS,C:JS,L:eC,m:tC,X:aC,S:nC,M:sC};function GS(){var s=Yr.f(),i=Dm();return s||i}function QS(s){var i=yr(s);i!==null&&i.tag===5&&i.type==="form"?rb(i):Yr.r(s)}var zo=typeof document>"u"?null:document;function $v(s,i,c){var m=zo;if(m&&typeof i=="string"&&i){var y=da(i);y='link[rel="'+s+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Bv.has(y)||(Bv.add(y),s={rel:s,crossOrigin:c,href:i},m.querySelector(y)===null&&(i=m.createElement("link"),fa(i,"link",s),Hn(i),m.head.appendChild(i)))}}function XS(s){Yr.D(s),$v("dns-prefetch",s,null)}function JS(s,i){Yr.C(s,i),$v("preconnect",s,i)}function eC(s,i,c){Yr.L(s,i,c);var m=zo;if(m&&s&&i){var y='link[rel="preload"][as="'+da(i)+'"]';i==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+da(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+da(c.imageSizes)+'"]')):y+='[href="'+da(s)+'"]';var w=y;switch(i){case"style":w=Io(s);break;case"script":w=Bo(s)}bs.has(w)||(s=v({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:s,as:i},c),bs.set(w,s),m.querySelector(y)!==null||i==="style"&&m.querySelector(vd(w))||i==="script"&&m.querySelector(jd(w))||(i=m.createElement("link"),fa(i,"link",s),Hn(i),m.head.appendChild(i)))}}function tC(s,i){Yr.m(s,i);var c=zo;if(c&&s){var m=i&&typeof i.as=="string"?i.as:"script",y='link[rel="modulepreload"][as="'+da(m)+'"][href="'+da(s)+'"]',w=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Bo(s)}if(!bs.has(w)&&(s=v({rel:"modulepreload",href:s},i),bs.set(w,s),c.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(jd(w)))return}m=c.createElement("link"),fa(m,"link",s),Hn(m),c.head.appendChild(m)}}}function nC(s,i,c){Yr.S(s,i,c);var m=zo;if(m&&s){var y=br(m).hoistableStyles,w=Io(s);i=i||"default";var P=y.get(w);if(!P){var Y={loading:0,preload:null};if(P=m.querySelector(vd(w)))Y.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":i},c),(c=bs.get(w))&&vg(s,c);var ce=P=m.createElement("link");Hn(ce),fa(ce,"link",s),ce._p=new Promise(function(xe,_e){ce.onload=xe,ce.onerror=_e}),ce.addEventListener("load",function(){Y.loading|=1}),ce.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Hm(P,i,m)}P={type:"stylesheet",instance:P,count:1,state:Y},y.set(w,P)}}}function aC(s,i){Yr.X(s,i);var c=zo;if(c&&s){var m=br(c).hoistableScripts,y=Bo(s),w=m.get(y);w||(w=c.querySelector(jd(y)),w||(s=v({src:s,async:!0},i),(i=bs.get(y))&&jg(s,i),w=c.createElement("script"),Hn(w),fa(w,"link",s),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(y,w))}}function sC(s,i){Yr.M(s,i);var c=zo;if(c&&s){var m=br(c).hoistableScripts,y=Bo(s),w=m.get(y);w||(w=c.querySelector(jd(y)),w||(s=v({src:s,async:!0,type:"module"},i),(i=bs.get(y))&&jg(s,i),w=c.createElement("script"),Hn(w),fa(w,"link",s),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(y,w))}}function Fv(s,i,c,m){var y=(y=me.current)?Um(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Io(c.href),c=br(y).hoistableStyles,m=c.get(i),m||(m={type:"style",instance:null,count:0,state:null},c.set(i,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Io(c.href);var w=br(y).hoistableStyles,P=w.get(s);if(P||(y=y.ownerDocument||y,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,P),(w=y.querySelector(vd(s)))&&!w._p&&(P.instance=w,P.state.loading=5),bs.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},bs.set(s,c),w||rC(y,s,c,P.state))),i&&m===null)throw Error(r(528,""));return P}if(i&&m!==null)throw Error(r(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Bo(c),c=br(y).hoistableScripts,m=c.get(i),m||(m={type:"script",instance:null,count:0,state:null},c.set(i,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Io(s){return'href="'+da(s)+'"'}function vd(s){return'link[rel="stylesheet"]['+s+"]"}function Uv(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function rC(s,i,c,m){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?m.loading=1:(i=s.createElement("link"),m.preload=i,i.addEventListener("load",function(){return m.loading|=1}),i.addEventListener("error",function(){return m.loading|=2}),fa(i,"link",c),Hn(i),s.head.appendChild(i))}function Bo(s){return'[src="'+da(s)+'"]'}function jd(s){return"script[async]"+s}function Hv(s,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var m=s.querySelector('style[data-href~="'+da(c.href)+'"]');if(m)return i.instance=m,Hn(m),m;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),Hn(m),fa(m,"style",y),Hm(m,c.precedence,s),i.instance=m;case"stylesheet":y=Io(c.href);var w=s.querySelector(vd(y));if(w)return i.state.loading|=4,i.instance=w,Hn(w),w;m=Uv(c),(y=bs.get(y))&&vg(m,y),w=(s.ownerDocument||s).createElement("link"),Hn(w);var P=w;return P._p=new Promise(function(Y,ce){P.onload=Y,P.onerror=ce}),fa(w,"link",m),i.state.loading|=4,Hm(w,c.precedence,s),i.instance=w;case"script":return w=Bo(c.src),(y=s.querySelector(jd(w)))?(i.instance=y,Hn(y),y):(m=c,(y=bs.get(w))&&(m=v({},c),jg(m,y)),s=s.ownerDocument||s,y=s.createElement("script"),Hn(y),fa(y,"link",m),s.head.appendChild(y),i.instance=y);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(m=i.instance,i.state.loading|=4,Hm(m,c.precedence,s));return i.instance}function Hm(s,i,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,w=y,P=0;P<m.length;P++){var Y=m[P];if(Y.dataset.precedence===i)w=Y;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(s,i.firstChild))}function vg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function jg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var qm=null;function qv(s,i,c){if(qm===null){var m=new Map,y=qm=new Map;y.set(c,m)}else y=qm,m=y.get(c),m||(m=new Map,y.set(c,m));if(m.has(s))return m;for(m.set(s,null),c=c.getElementsByTagName(s),y=0;y<c.length;y++){var w=c[y];if(!(w[os]||w[Gt]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var P=w.getAttribute(i)||"";P=s+P;var Y=m.get(P);Y?Y.push(w):m.set(P,[w])}}return m}function Yv(s,i,c){s=s.ownerDocument||s,s.head.insertBefore(c,i==="title"?s.querySelector("head > title"):null)}function iC(s,i,c){if(c===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Vv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var wd=null;function lC(){}function oC(s,i,c){if(wd===null)throw Error(r(475));var m=wd;if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var y=Io(c.href),w=s.querySelector(vd(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Ym.bind(m),s.then(m,m)),i.state.loading|=4,i.instance=w,Hn(w);return}w=s.ownerDocument||s,c=Uv(c),(y=bs.get(y))&&vg(c,y),w=w.createElement("link"),Hn(w);var P=w;P._p=new Promise(function(Y,ce){P.onload=Y,P.onerror=ce}),fa(w,"link",c),i.instance=w}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(m.count++,i=Ym.bind(m),s.addEventListener("load",i),s.addEventListener("error",i))}}function cC(){if(wd===null)throw Error(r(475));var s=wd;return s.stylesheets&&s.count===0&&wg(s,s.stylesheets),0<s.count?function(i){var c=setTimeout(function(){if(s.stylesheets&&wg(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(c)}}:null}function Ym(){if(this.count--,this.count===0){if(this.stylesheets)wg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vm=null;function wg(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vm=new Map,i.forEach(dC,s),Vm=null,Ym.call(s))}function dC(s,i){if(!(i.state.loading&4)){var c=Vm.get(s);if(c)var m=c.get(null);else{c=new Map,Vm.set(s,c);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var P=y[w];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(c.set(P.dataset.precedence,P),m=P)}m&&c.set(null,m)}y=i.instance,P=y.getAttribute("data-precedence"),w=c.get(P)||m,w===m&&c.set(null,y),c.set(P,y),this.count++,m=Ym.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),i.state.loading|=4}}var Nd={$$typeof:O,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function uC(s,i,c,m,y,w,P,Y){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Zv(s,i,c,m,y,w,P,Y,ce,xe,_e,Ee){return s=new uC(s,i,c,P,Y,ce,xe,Ee),i=1,w===!0&&(i|=24),w=Ta(3,null,null,i),s.current=w,w.stateNode=s,i=ap(),i.refCount++,s.pooledCache=i,i.refCount++,w.memoizedState={element:m,isDehydrated:c,cache:i},lp(w),s}function Kv(s){return s?(s=Lr,s):Lr}function Wv(s,i,c,m,y,w){y=Kv(y),m.context===null?m.context=y:m.pendingContext=y,m=Si(i),m.payload={element:c},w=w===void 0?null:w,w!==null&&(m.callback=w),c=Ci(s,m,i),c!==null&&(ts(c,s,i),Jc(c,s,i))}function Gv(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function Ng(s,i){Gv(s,i),(s=s.alternate)&&Gv(s,i)}function Qv(s){if(s.tag===13){var i=vi(s,67108864);i!==null&&ts(i,s,67108864),Ng(s,67108864)}}var Zm=!0;function mC(s,i,c,m){var y=G.T;G.T=null;var w=J.p;try{J.p=2,_g(s,i,c,m)}finally{J.p=w,G.T=y}}function hC(s,i,c,m){var y=G.T;G.T=null;var w=J.p;try{J.p=8,_g(s,i,c,m)}finally{J.p=w,G.T=y}}function _g(s,i,c,m){if(Zm){var y=Sg(m);if(y===null)ug(s,i,m,Km,c),Jv(s,m);else if(pC(y,s,i,c,m))m.stopPropagation();else if(Jv(s,m),i&4&&-1<fC.indexOf(s)){for(;y!==null;){var w=yr(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var P=rn(w.pendingLanes);if(P!==0){var Y=w;for(Y.pendingLanes|=2,Y.entangledLanes|=2;P;){var ce=1<<31-Le(P);Y.entanglements[1]|=ce,P&=~ce}ar(w),(Ft&6)===0&&(Rm=Fe()+500,gd(0))}}break;case 13:Y=vi(w,2),Y!==null&&ts(Y,w,2),Dm(),Ng(w,2)}if(w=Sg(m),w===null&&ug(s,i,m,Km,c),w===y)break;y=w}y!==null&&m.stopPropagation()}else ug(s,i,m,null,c)}}function Sg(s){return s=oi(s),Cg(s)}var Km=null;function Cg(s){if(Km=null,s=Vs(s),s!==null){var i=d(s);if(i===null)s=null;else{var c=i.tag;if(c===13){if(s=h(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Km=s,null}function Xv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case _t:return 2;case ut:return 8;case ke:case Oe:return 32;case qe:return 268435456;default:return 32}default:return 32}}var kg=!1,Bi=null,$i=null,Fi=null,_d=new Map,Sd=new Map,Ui=[],fC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jv(s,i){switch(s){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":_d.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sd.delete(i.pointerId)}}function Cd(s,i,c,m,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[y]},i!==null&&(i=yr(i),i!==null&&Qv(i)),s):(s.eventSystemFlags|=m,i=s.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),s)}function pC(s,i,c,m,y){switch(i){case"focusin":return Bi=Cd(Bi,s,i,c,m,y),!0;case"dragenter":return $i=Cd($i,s,i,c,m,y),!0;case"mouseover":return Fi=Cd(Fi,s,i,c,m,y),!0;case"pointerover":var w=y.pointerId;return _d.set(w,Cd(_d.get(w)||null,s,i,c,m,y)),!0;case"gotpointercapture":return w=y.pointerId,Sd.set(w,Cd(Sd.get(w)||null,s,i,c,m,y)),!0}return!1}function e1(s){var i=Vs(s.target);if(i!==null){var c=d(i);if(c!==null){if(i=c.tag,i===13){if(i=h(c),i!==null){s.blockedOn=i,Ma(s.priority,function(){if(c.tag===13){var m=es();m=Mn(m);var y=vi(c,m);y!==null&&ts(y,c,m),Ng(c,m)}});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wm(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=Sg(s.nativeEvent);if(c===null){c=s.nativeEvent;var m=new c.constructor(c.type,c);cl=m,c.target.dispatchEvent(m),cl=null}else return i=yr(c),i!==null&&Qv(i),s.blockedOn=c,!1;i.shift()}return!0}function t1(s,i,c){Wm(s)&&c.delete(i)}function gC(){kg=!1,Bi!==null&&Wm(Bi)&&(Bi=null),$i!==null&&Wm($i)&&($i=null),Fi!==null&&Wm(Fi)&&(Fi=null),_d.forEach(t1),Sd.forEach(t1)}function Gm(s,i){s.blockedOn===i&&(s.blockedOn=null,kg||(kg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gC)))}var Qm=null;function n1(s){Qm!==s&&(Qm=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qm===s&&(Qm=null);for(var i=0;i<s.length;i+=3){var c=s[i],m=s[i+1],y=s[i+2];if(typeof m!="function"){if(Cg(m||c)===null)continue;break}var w=yr(c);w!==null&&(s.splice(i,3),i-=3,Cp(w,{pending:!0,data:y,method:c.method,action:m},m,y))}}))}function kd(s){function i(ce){return Gm(ce,s)}Bi!==null&&Gm(Bi,s),$i!==null&&Gm($i,s),Fi!==null&&Gm(Fi,s),_d.forEach(i),Sd.forEach(i);for(var c=0;c<Ui.length;c++){var m=Ui[c];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Ui.length&&(c=Ui[0],c.blockedOn===null);)e1(c),c.blockedOn===null&&Ui.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var y=c[m],w=c[m+1],P=y[Qt]||null;if(typeof w=="function")P||n1(c);else if(P){var Y=null;if(w&&w.hasAttribute("formAction")){if(y=w,P=w[Qt]||null)Y=P.formAction;else if(Cg(y)!==null)continue}else Y=P.action;typeof Y=="function"?c[m+1]=Y:(c.splice(m,3),m-=3),n1(c)}}}function Tg(s){this._internalRoot=s}Xm.prototype.render=Tg.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var c=i.current,m=es();Wv(c,m,s,i,null,null)},Xm.prototype.unmount=Tg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Wv(s.current,2,null,s,null,null),Dm(),i[Jn]=null}};function Xm(s){this._internalRoot=s}Xm.prototype.unstable_scheduleHydration=function(s){if(s){var i=oa();s={blockedOn:null,target:s,priority:i};for(var c=0;c<Ui.length&&i!==0&&i<Ui[c].priority;c++);Ui.splice(c,0,s),c===0&&e1(s)}};var a1=n.version;if(a1!=="19.1.1")throw Error(r(527,a1,"19.1.1"));J.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var xC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{ct=Jm.inject(xC),de=Jm}catch{}}return Ed.createRoot=function(s,i){if(!o(s))throw Error(r(299));var c=!1,m="",y=bb,w=vb,P=jb,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onUncaughtError!==void 0&&(y=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(P=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Y=i.unstable_transitionCallbacks)),i=Zv(s,1,!1,null,null,c,m,y,w,P,Y,null),s[Jn]=i.current,dg(s),new Tg(i)},Ed.hydrateRoot=function(s,i,c){if(!o(s))throw Error(r(299));var m=!1,y="",w=bb,P=vb,Y=jb,ce=null,xe=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(P=c.onCaughtError),c.onRecoverableError!==void 0&&(Y=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ce=c.unstable_transitionCallbacks),c.formState!==void 0&&(xe=c.formState)),i=Zv(s,1,!0,i,c??null,m,y,w,P,Y,ce,xe),i.context=Kv(null),c=i.current,m=es(),m=Mn(m),y=Si(m),y.callback=null,Ci(c,y,m),c=m,i.current.lanes=c,$e(i,c),ar(i),s[Jn]=i.current,dg(s),new Xm(i)},Ed.version="19.1.1",Ed}var h1;function kC(){if(h1)return Rg.exports;h1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Rg.exports=CC(),Rg.exports}var TC=kC();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var f1="popstate";function EC(e={}){function n(r,o){let{pathname:d,search:h,hash:g}=r.location;return px("",{pathname:d,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(r,o){return typeof o=="string"?o:Qd(o)}return RC(n,a,null,e)}function hn(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function $s(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function MC(){return Math.random().toString(36).substring(2,10)}function p1(e,n){return{usr:e.state,key:e.key,idx:n}}function px(e,n,a=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof n=="string"?fc(n):n,state:a,key:n&&n.key||r||MC()}}function Qd({pathname:e="/",search:n="",hash:a=""}){return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function fc(e){let n={};if(e){let a=e.indexOf("#");a>=0&&(n.hash=e.substring(a),e=e.substring(0,a));let r=e.indexOf("?");r>=0&&(n.search=e.substring(r),e=e.substring(0,r)),e&&(n.pathname=e)}return n}function RC(e,n,a,r={}){let{window:o=document.defaultView,v5Compat:d=!1}=r,h=o.history,g="POP",p=null,f=v();f==null&&(f=0,h.replaceState({...h.state,idx:f},""));function v(){return(h.state||{idx:null}).idx}function j(){g="POP";let k=v(),A=k==null?null:k-f;f=k,p&&p({action:g,location:N.location,delta:A})}function S(k,A){g="PUSH";let D=px(N.location,k,A);f=v()+1;let O=p1(D,f),F=N.createHref(D);try{h.pushState(O,"",F)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;o.location.assign(F)}d&&p&&p({action:g,location:N.location,delta:1})}function T(k,A){g="REPLACE";let D=px(N.location,k,A);f=v();let O=p1(D,f),F=N.createHref(D);h.replaceState(O,"",F),d&&p&&p({action:g,location:N.location,delta:0})}function C(k){return AC(k)}let N={get action(){return g},get location(){return e(o,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(f1,j),p=k,()=>{o.removeEventListener(f1,j),p=null}},createHref(k){return n(o,k)},createURL:C,encodeLocation(k){let A=C(k);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:S,replace:T,go(k){return h.go(k)}};return N}function AC(e,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),hn(a,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Qd(e);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function Fw(e,n,a="/"){return DC(e,n,a,!1)}function DC(e,n,a,r){let o=typeof n=="string"?fc(n):n,d=Wr(o.pathname||"/",a);if(d==null)return null;let h=Uw(e);PC(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let f=YC(d);g=HC(h[p],f,r)}return g}function Uw(e,n=[],a=[],r=""){let o=(d,h,g)=>{let p={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};p.relativePath.startsWith("/")&&(hn(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let f=Zr([r,p.relativePath]),v=a.concat(p);d.children&&d.children.length>0&&(hn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Uw(d.children,n,v,f)),!(d.path==null&&!d.index)&&n.push({path:f,score:FC(f,d.index),routesMeta:v})};return e.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))o(d,h);else for(let g of Hw(d.path))o(d,h,g)}),n}function Hw(e){let n=e.split("/");if(n.length===0)return[];let[a,...r]=n,o=a.endsWith("?"),d=a.replace(/\?$/,"");if(r.length===0)return o?[d,""]:[d];let h=Hw(r.join("/")),g=[];return g.push(...h.map(p=>p===""?d:[d,p].join("/"))),o&&g.push(...h),g.map(p=>e.startsWith("/")&&p===""?"/":p)}function PC(e){e.sort((n,a)=>n.score!==a.score?a.score-n.score:UC(n.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var OC=/^:[\w-]+$/,LC=3,zC=2,IC=1,BC=10,$C=-2,g1=e=>e==="*";function FC(e,n){let a=e.split("/"),r=a.length;return a.some(g1)&&(r+=$C),n&&(r+=zC),a.filter(o=>!g1(o)).reduce((o,d)=>o+(OC.test(d)?LC:d===""?IC:BC),r)}function UC(e,n){return e.length===n.length&&e.slice(0,-1).every((r,o)=>r===n[o])?e[e.length-1]-n[n.length-1]:0}function HC(e,n,a=!1){let{routesMeta:r}=e,o={},d="/",h=[];for(let g=0;g<r.length;++g){let p=r[g],f=g===r.length-1,v=d==="/"?n:n.slice(d.length)||"/",j=Th({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},v),S=p.route;if(!j&&f&&a&&!r[r.length-1].route.index&&(j=Th({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!j)return null;Object.assign(o,j.params),h.push({params:o,pathname:Zr([d,j.pathname]),pathnameBase:WC(Zr([d,j.pathnameBase])),route:S}),j.pathnameBase!=="/"&&(d=Zr([d,j.pathnameBase]))}return h}function Th(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,r]=qC(e.path,e.caseSensitive,e.end),o=n.match(a);if(!o)return null;let d=o[0],h=d.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:r.reduce((f,{paramName:v,isOptional:j},S)=>{if(v==="*"){let C=g[S]||"";h=d.slice(0,d.length-C.length).replace(/(.)\/+$/,"$1")}const T=g[S];return j&&!T?f[v]=void 0:f[v]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:d,pathnameBase:h,pattern:e}}function qC(e,n=!1,a=!0){$s(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(r.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),r]}function YC(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return $s(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),e}}function Wr(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,r=e.charAt(a);return r&&r!=="/"?null:e.slice(a)||"/"}function VC(e,n="/"){let{pathname:a,search:r="",hash:o=""}=typeof e=="string"?fc(e):e;return{pathname:a?a.startsWith("/")?a:ZC(a,n):n,search:GC(r),hash:QC(o)}}function ZC(e,n){let a=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function Og(e,n,a,r){return`Cannot include a '${e}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KC(e){return e.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function i0(e){let n=KC(e);return n.map((a,r)=>r===n.length-1?a.pathname:a.pathnameBase)}function l0(e,n,a,r=!1){let o;typeof e=="string"?o=fc(e):(o={...e},hn(!o.pathname||!o.pathname.includes("?"),Og("?","pathname","search",o)),hn(!o.pathname||!o.pathname.includes("#"),Og("#","pathname","hash",o)),hn(!o.search||!o.search.includes("#"),Og("#","search","hash",o)));let d=e===""||o.pathname==="",h=d?"/":o.pathname,g;if(h==null)g=a;else{let j=n.length-1;if(!r&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),j-=1;o.pathname=S.join("/")}g=j>=0?n[j]:"/"}let p=VC(o,g),f=h&&h!=="/"&&h.endsWith("/"),v=(d||h===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(f||v)&&(p.pathname+="/"),p}var Zr=e=>e.join("/").replace(/\/\/+/g,"/"),WC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,QC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var qw=["POST","PUT","PATCH","DELETE"];new Set(qw);var JC=["GET",...qw];new Set(JC);var pc=b.createContext(null);pc.displayName="DataRouter";var Gh=b.createContext(null);Gh.displayName="DataRouterState";b.createContext(!1);var Yw=b.createContext({isTransitioning:!1});Yw.displayName="ViewTransition";var ek=b.createContext(new Map);ek.displayName="Fetchers";var tk=b.createContext(null);tk.displayName="Await";var Us=b.createContext(null);Us.displayName="Navigation";var gu=b.createContext(null);gu.displayName="Location";var Cs=b.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var o0=b.createContext(null);o0.displayName="RouteError";function nk(e,{relative:n}={}){hn(gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=b.useContext(Us),{hash:o,pathname:d,search:h}=xu(e,{relative:n}),g=d;return a!=="/"&&(g=d==="/"?a:Zr([a,d])),r.createHref({pathname:g,search:h,hash:o})}function gc(){return b.useContext(gu)!=null}function Hs(){return hn(gc(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(gu).location}var Vw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zw(e){b.useContext(Us).static||b.useLayoutEffect(e)}function is(){let{isDataRoute:e}=b.useContext(Cs);return e?xk():ak()}function ak(){hn(gc(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(pc),{basename:n,navigator:a}=b.useContext(Us),{matches:r}=b.useContext(Cs),{pathname:o}=Hs(),d=JSON.stringify(i0(r)),h=b.useRef(!1);return Zw(()=>{h.current=!0}),b.useCallback((p,f={})=>{if($s(h.current,Vw),!h.current)return;if(typeof p=="number"){a.go(p);return}let v=l0(p,JSON.parse(d),o,f.relative==="path");e==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Zr([n,v.pathname])),(f.replace?a.replace:a.push)(v,f.state,f)},[n,a,d,o,e])}var sk=b.createContext(null);function rk(e){let n=b.useContext(Cs).outlet;return n&&b.createElement(sk.Provider,{value:e},n)}function Qh(){let{matches:e}=b.useContext(Cs),n=e[e.length-1];return n?n.params:{}}function xu(e,{relative:n}={}){let{matches:a}=b.useContext(Cs),{pathname:r}=Hs(),o=JSON.stringify(i0(a));return b.useMemo(()=>l0(e,JSON.parse(o),r,n==="path"),[e,o,r,n])}function ik(e,n){return Kw(e,n)}function Kw(e,n,a,r){hn(gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=b.useContext(Us),{matches:d}=b.useContext(Cs),h=d[d.length-1],g=h?h.params:{},p=h?h.pathname:"/",f=h?h.pathnameBase:"/",v=h&&h.route;{let A=v&&v.path||"";Ww(p,!v||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let j=Hs(),S;if(n){let A=typeof n=="string"?fc(n):n;hn(f==="/"||A.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${A.pathname}" was given in the \`location\` prop.`),S=A}else S=j;let T=S.pathname||"/",C=T;if(f!=="/"){let A=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=Fw(e,{pathname:C});$s(v||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),$s(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=uk(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},g,A.params),pathname:Zr([f,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:Zr([f,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),d,a,r);return n&&k?b.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},k):k}function lk(){let e=gk(),n=XC(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},d={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:d},"ErrorBoundary")," or"," ",b.createElement("code",{style:d},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},n),a?b.createElement("pre",{style:o},a):null,h)}var ok=b.createElement(lk,null),ck=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Cs.Provider,{value:this.props.routeContext},b.createElement(o0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dk({routeContext:e,match:n,children:a}){let r=b.useContext(pc);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Cs.Provider,{value:e},a)}function uk(e,n=[],a=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let o=e,d=a?.errors;if(d!=null){let p=o.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);hn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,g=-1;if(a)for(let p=0;p<o.length;p++){let f=o[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(g=p),f.route.id){let{loaderData:v,errors:j}=a,S=f.route.loader&&!v.hasOwnProperty(f.route.id)&&(!j||j[f.route.id]===void 0);if(f.route.lazy||S){h=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}return o.reduceRight((p,f,v)=>{let j,S=!1,T=null,C=null;a&&(j=d&&f.route.id?d[f.route.id]:void 0,T=f.route.errorElement||ok,h&&(g<0&&v===0?(Ww("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):g===v&&(S=!0,C=f.route.hydrateFallbackElement||null)));let N=n.concat(o.slice(0,v+1)),k=()=>{let A;return j?A=T:S?A=C:f.route.Component?A=b.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=p,b.createElement(dk,{match:f,routeContext:{outlet:p,matches:N,isDataRoute:a!=null},children:A})};return a&&(f.route.ErrorBoundary||f.route.errorElement||v===0)?b.createElement(ck,{location:a.location,revalidation:a.revalidation,component:T,error:j,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}function c0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mk(e){let n=b.useContext(pc);return hn(n,c0(e)),n}function hk(e){let n=b.useContext(Gh);return hn(n,c0(e)),n}function fk(e){let n=b.useContext(Cs);return hn(n,c0(e)),n}function d0(e){let n=fk(e),a=n.matches[n.matches.length-1];return hn(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function pk(){return d0("useRouteId")}function gk(){let e=b.useContext(o0),n=hk("useRouteError"),a=d0("useRouteError");return e!==void 0?e:n.errors?.[a]}function xk(){let{router:e}=mk("useNavigate"),n=d0("useNavigate"),a=b.useRef(!1);return Zw(()=>{a.current=!0}),b.useCallback(async(o,d={})=>{$s(a.current,Vw),a.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:n,...d}))},[e,n])}var x1={};function Ww(e,n,a){!n&&!x1[e]&&(x1[e]=!0,$s(!1,a))}b.memo(yk);function yk({routes:e,future:n,state:a}){return Kw(e,void 0,a,n)}function $l({to:e,replace:n,state:a,relative:r}){hn(gc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=b.useContext(Us);$s(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=b.useContext(Cs),{pathname:h}=Hs(),g=is(),p=l0(e,i0(d),h,r==="path"),f=JSON.stringify(p);return b.useEffect(()=>{g(JSON.parse(f),{replace:n,state:a,relative:r})},[g,f,r,n,a]),null}function u0(e){return rk(e.context)}function gt(e){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bk({basename:e="/",children:n=null,location:a,navigationType:r="POP",navigator:o,static:d=!1}){hn(!gc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),g=b.useMemo(()=>({basename:h,navigator:o,static:d,future:{}}),[h,o,d]);typeof a=="string"&&(a=fc(a));let{pathname:p="/",search:f="",hash:v="",state:j=null,key:S="default"}=a,T=b.useMemo(()=>{let C=Wr(p,h);return C==null?null:{location:{pathname:C,search:f,hash:v,state:j,key:S},navigationType:r}},[h,p,f,v,j,S,r]);return $s(T!=null,`<Router basename="${h}"> is not able to match the URL "${p}${f}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:b.createElement(Us.Provider,{value:g},b.createElement(gu.Provider,{children:n,value:T}))}function vk({children:e,location:n}){return ik(gx(e),n)}function gx(e,n=[]){let a=[];return b.Children.forEach(e,(r,o)=>{if(!b.isValidElement(r))return;let d=[...n,o];if(r.type===b.Fragment){a.push.apply(a,gx(r.props.children,d));return}hn(r.type===gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||d.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=gx(r.props.children,d)),a.push(h)}),a}var yh="get",bh="application/x-www-form-urlencoded";function Xh(e){return e!=null&&typeof e.tagName=="string"}function jk(e){return Xh(e)&&e.tagName.toLowerCase()==="button"}function wk(e){return Xh(e)&&e.tagName.toLowerCase()==="form"}function Nk(e){return Xh(e)&&e.tagName.toLowerCase()==="input"}function _k(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Sk(e,n){return e.button===0&&(!n||n==="_self")&&!_k(e)}var eh=null;function Ck(){if(eh===null)try{new FormData(document.createElement("form"),0),eh=!1}catch{eh=!0}return eh}var kk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lg(e){return e!=null&&!kk.has(e)?($s(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bh}"`),null):e}function Tk(e,n){let a,r,o,d,h;if(wk(e)){let g=e.getAttribute("action");r=g?Wr(g,n):null,a=e.getAttribute("method")||yh,o=Lg(e.getAttribute("enctype"))||bh,d=new FormData(e)}else if(jk(e)||Nk(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||g.getAttribute("action");if(r=p?Wr(p,n):null,a=e.getAttribute("formmethod")||g.getAttribute("method")||yh,o=Lg(e.getAttribute("formenctype"))||Lg(g.getAttribute("enctype"))||bh,d=new FormData(g,e),!Ck()){let{name:f,type:v,value:j}=e;if(v==="image"){let S=f?`${f}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else f&&d.append(f,j)}}else{if(Xh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=yh,r=null,o=bh,h=e}return d&&o==="text/plain"&&(h=d,d=void 0),{action:r,method:a.toLowerCase(),encType:o,formData:d,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m0(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Ek(e,n,a){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${a}`:n&&Wr(r.pathname,n)==="/"?r.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${a}`,r}async function Mk(e,n){if(e.id in n)return n[e.id];try{let a=await import(e.module);return n[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Rk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ak(e,n,a){let r=await Promise.all(e.map(async o=>{let d=n.routes[o.route.id];if(d){let h=await Mk(d,a);return h.links?h.links():[]}return[]}));return Lk(r.flat(1).filter(Rk).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function y1(e,n,a,r,o,d){let h=(p,f)=>a[f]?p.route.id!==a[f].route.id:!0,g=(p,f)=>a[f].pathname!==p.pathname||a[f].route.path?.endsWith("*")&&a[f].params["*"]!==p.params["*"];return d==="assets"?n.filter((p,f)=>h(p,f)||g(p,f)):d==="data"?n.filter((p,f)=>{let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,f)||g(p,f))return!0;if(p.route.shouldRevalidate){let j=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function Dk(e,n,{includeHydrateFallback:a}={}){return Pk(e.map(r=>{let o=n.routes[r.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function Pk(e){return[...new Set(e)]}function Ok(e){let n={},a=Object.keys(e).sort();for(let r of a)n[r]=e[r];return n}function Lk(e,n){let a=new Set;return new Set(n),e.reduce((r,o)=>{let d=JSON.stringify(Ok(o));return a.has(d)||(a.add(d),r.push({key:d,link:o})),r},[])}function Gw(){let e=b.useContext(pc);return m0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function zk(){let e=b.useContext(Gh);return m0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var h0=b.createContext(void 0);h0.displayName="FrameworkContext";function Qw(){let e=b.useContext(h0);return m0(e,"You must render this element inside a <HydratedRouter> element"),e}function Ik(e,n){let a=b.useContext(h0),[r,o]=b.useState(!1),[d,h]=b.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:f,onMouseLeave:v,onTouchStart:j}=n,S=b.useRef(null);b.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let N=A=>{A.forEach(D=>{h(D.isIntersecting)})},k=new IntersectionObserver(N,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[e]),b.useEffect(()=>{if(r){let N=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(N)}}},[r]);let T=()=>{o(!0)},C=()=>{o(!1),h(!1)};return a?e!=="intent"?[d,S,{}]:[d,S,{onFocus:Md(g,T),onBlur:Md(p,C),onMouseEnter:Md(f,T),onMouseLeave:Md(v,C),onTouchStart:Md(j,T)}]:[!1,S,{}]}function Md(e,n){return a=>{e&&e(a),a.defaultPrevented||n(a)}}function Bk({page:e,...n}){let{router:a}=Gw(),r=b.useMemo(()=>Fw(a.routes,e,a.basename),[a.routes,e,a.basename]);return r?b.createElement(Fk,{page:e,matches:r,...n}):null}function $k(e){let{manifest:n,routeModules:a}=Qw(),[r,o]=b.useState([]);return b.useEffect(()=>{let d=!1;return Ak(e,n,a).then(h=>{d||o(h)}),()=>{d=!0}},[e,n,a]),r}function Fk({page:e,matches:n,...a}){let r=Hs(),{manifest:o,routeModules:d}=Qw(),{basename:h}=Gw(),{loaderData:g,matches:p}=zk(),f=b.useMemo(()=>y1(e,n,p,o,r,"data"),[e,n,p,o,r]),v=b.useMemo(()=>y1(e,n,p,o,r,"assets"),[e,n,p,o,r]),j=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let C=new Set,N=!1;if(n.forEach(A=>{let D=o.routes[A.route.id];!D||!D.hasLoader||(!f.some(O=>O.route.id===A.route.id)&&A.route.id in g&&d[A.route.id]?.shouldRevalidate||D.hasClientLoader?N=!0:C.add(A.route.id))}),C.size===0)return[];let k=Ek(e,h,"data");return N&&C.size>0&&k.searchParams.set("_routes",n.filter(A=>C.has(A.route.id)).map(A=>A.route.id).join(",")),[k.pathname+k.search]},[h,g,r,o,f,n,e,d]),S=b.useMemo(()=>Dk(v,o),[v,o]),T=$k(v);return b.createElement(b.Fragment,null,j.map(C=>b.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...a})),S.map(C=>b.createElement("link",{key:C,rel:"modulepreload",href:C,...a})),T.map(({key:C,link:N})=>b.createElement("link",{key:C,...N})))}function Uk(...e){return n=>{e.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var Xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xw&&(window.__reactRouterVersion="7.7.1")}catch{}function Hk({basename:e,children:n,window:a}){let r=b.useRef();r.current==null&&(r.current=EC({window:a,v5Compat:!0}));let o=r.current,[d,h]=b.useState({action:o.action,location:o.location}),g=b.useCallback(p=>{b.startTransition(()=>h(p))},[h]);return b.useLayoutEffect(()=>o.listen(g),[o,g]),b.createElement(bk,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:o})}var Jw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bs=b.forwardRef(function({onClick:n,discover:a="render",prefetch:r="none",relative:o,reloadDocument:d,replace:h,state:g,target:p,to:f,preventScrollReset:v,viewTransition:j,...S},T){let{basename:C}=b.useContext(Us),N=typeof f=="string"&&Jw.test(f),k,A=!1;if(typeof f=="string"&&N&&(k=f,Xw))try{let Z=new URL(window.location.href),U=f.startsWith("//")?new URL(Z.protocol+f):new URL(f),V=Wr(U.pathname,C);U.origin===Z.origin&&V!=null?f=V+U.search+U.hash:A=!0}catch{$s(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=nk(f,{relative:o}),[O,F,R]=Ik(r,S),H=Zk(f,{replace:h,state:g,target:p,preventScrollReset:v,relative:o,viewTransition:j});function E(Z){n&&n(Z),Z.defaultPrevented||H(Z)}let z=b.createElement("a",{...S,...R,href:k||D,onClick:A||d?n:E,ref:Uk(T,F),target:p,"data-discover":!N&&a==="render"?"true":void 0});return O&&!N?b.createElement(b.Fragment,null,z,b.createElement(Bk,{page:D})):z});Bs.displayName="Link";var qk=b.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:r="",end:o=!1,style:d,to:h,viewTransition:g,children:p,...f},v){let j=xu(h,{relative:f.relative}),S=Hs(),T=b.useContext(Gh),{navigator:C,basename:N}=b.useContext(Us),k=T!=null&&Xk(j)&&g===!0,A=C.encodeLocation?C.encodeLocation(j).pathname:j.pathname,D=S.pathname,O=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;a||(D=D.toLowerCase(),O=O?O.toLowerCase():null,A=A.toLowerCase()),O&&N&&(O=Wr(O,N)||O);const F=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let R=D===A||!o&&D.startsWith(A)&&D.charAt(F)==="/",H=O!=null&&(O===A||!o&&O.startsWith(A)&&O.charAt(A.length)==="/"),E={isActive:R,isPending:H,isTransitioning:k},z=R?n:void 0,Z;typeof r=="function"?Z=r(E):Z=[r,R?"active":null,H?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let U=typeof d=="function"?d(E):d;return b.createElement(Bs,{...f,"aria-current":z,className:Z,ref:v,style:U,to:h,viewTransition:g},typeof p=="function"?p(E):p)});qk.displayName="NavLink";var Yk=b.forwardRef(({discover:e="render",fetcherKey:n,navigate:a,reloadDocument:r,replace:o,state:d,method:h=yh,action:g,onSubmit:p,relative:f,preventScrollReset:v,viewTransition:j,...S},T)=>{let C=Gk(),N=Qk(g,{relative:f}),k=h.toLowerCase()==="get"?"get":"post",A=typeof g=="string"&&Jw.test(g),D=O=>{if(p&&p(O),O.defaultPrevented)return;O.preventDefault();let F=O.nativeEvent.submitter,R=F?.getAttribute("formmethod")||h;C(F||O.currentTarget,{fetcherKey:n,method:R,navigate:a,replace:o,state:d,relative:f,preventScrollReset:v,viewTransition:j})};return b.createElement("form",{ref:T,method:k,action:N,onSubmit:r?p:D,...S,"data-discover":!A&&e==="render"?"true":void 0})});Yk.displayName="Form";function Vk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eN(e){let n=b.useContext(pc);return hn(n,Vk(e)),n}function Zk(e,{target:n,replace:a,state:r,preventScrollReset:o,relative:d,viewTransition:h}={}){let g=is(),p=Hs(),f=xu(e,{relative:d});return b.useCallback(v=>{if(Sk(v,n)){v.preventDefault();let j=a!==void 0?a:Qd(p)===Qd(f);g(e,{replace:j,state:r,preventScrollReset:o,relative:d,viewTransition:h})}},[p,g,f,a,r,n,e,o,d,h])}var Kk=0,Wk=()=>`__${String(++Kk)}__`;function Gk(){let{router:e}=eN("useSubmit"),{basename:n}=b.useContext(Us),a=pk();return b.useCallback(async(r,o={})=>{let{action:d,method:h,encType:g,formData:p,body:f}=Tk(r,n);if(o.navigate===!1){let v=o.fetcherKey||Wk();await e.fetch(v,a,o.action||d,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await e.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,n,a])}function Qk(e,{relative:n}={}){let{basename:a}=b.useContext(Us),r=b.useContext(Cs);hn(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),d={...xu(e||".",{relative:n})},h=Hs();if(e==null){d.search=h.search;let g=new URLSearchParams(d.search),p=g.getAll("index");if(p.some(v=>v==="")){g.delete("index"),p.filter(j=>j).forEach(j=>g.append("index",j));let v=g.toString();d.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(d.pathname=d.pathname==="/"?a:Zr([a,d.pathname])),Qd(d)}function Xk(e,{relative:n}={}){let a=b.useContext(Yw);hn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=eN("useViewTransitionState"),o=xu(e,{relative:n});if(!a.isTransitioning)return!1;let d=Wr(a.currentLocation.pathname,r)||a.currentLocation.pathname,h=Wr(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Th(o.pathname,h)!=null||Th(o.pathname,d)!=null}var ec=$w(),xc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ul=typeof window>"u"||"Deno"in globalThis;function Ea(){}function Jk(e,n){return typeof e=="function"?e(n):e}function xx(e){return typeof e=="number"&&e>=0&&e!==1/0}function tN(e,n){return Math.max(e+(n||0)-Date.now(),0)}function tl(e,n){return typeof e=="function"?e(n):e}function js(e,n){return typeof e=="function"?e(n):e}function b1(e,n){const{type:a="all",exact:r,fetchStatus:o,predicate:d,queryKey:h,stale:g}=e;if(h){if(r){if(n.queryHash!==f0(h,n.options))return!1}else if(!Xd(n.queryKey,h))return!1}if(a!=="all"){const p=n.isActive();if(a==="active"&&!p||a==="inactive"&&p)return!1}return!(typeof g=="boolean"&&n.isStale()!==g||o&&o!==n.state.fetchStatus||d&&!d(n))}function v1(e,n){const{exact:a,status:r,predicate:o,mutationKey:d}=e;if(d){if(!n.options.mutationKey)return!1;if(a){if(Hl(n.options.mutationKey)!==Hl(d))return!1}else if(!Xd(n.options.mutationKey,d))return!1}return!(r&&n.state.status!==r||o&&!o(n))}function f0(e,n){return(n?.queryKeyHashFn||Hl)(e)}function Hl(e){return JSON.stringify(e,(n,a)=>yx(a)?Object.keys(a).sort().reduce((r,o)=>(r[o]=a[o],r),{}):a)}function Xd(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(a=>Xd(e[a],n[a])):!1}function nN(e,n){if(e===n)return e;const a=j1(e)&&j1(n);if(a||yx(e)&&yx(n)){const r=a?e:Object.keys(e),o=r.length,d=a?n:Object.keys(n),h=d.length,g=a?[]:{},p=new Set(r);let f=0;for(let v=0;v<h;v++){const j=a?v:d[v];(!a&&p.has(j)||a)&&e[j]===void 0&&n[j]===void 0?(g[j]=void 0,f++):(g[j]=nN(e[j],n[j]),g[j]===e[j]&&e[j]!==void 0&&f++)}return o===h&&f===o?e:g}return n}function Eh(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(e[a]!==n[a])return!1;return!0}function j1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yx(e){if(!w1(e))return!1;const n=e.constructor;if(n===void 0)return!0;const a=n.prototype;return!(!w1(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function w1(e){return Object.prototype.toString.call(e)==="[object Object]"}function e5(e){return new Promise(n=>{setTimeout(n,e)})}function bx(e,n,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,n):a.structuralSharing!==!1?nN(e,n):n}function t5(e,n,a=0){const r=[...e,n];return a&&r.length>a?r.slice(1):r}function n5(e,n,a=0){const r=[n,...e];return a&&r.length>a?r.slice(0,-1):r}var p0=Symbol();function aN(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===p0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function sN(e,n){return typeof e=="function"?e(...n):!!e}var a5=class extends xc{#t;#e;#n;constructor(){super(),this.#n=e=>{if(!Ul&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#n=e,this.#e?.(),this.#e=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},g0=new a5,s5=class extends xc{#t=!0;#e;#n;constructor(){super(),this.#n=e=>{if(!Ul&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#n=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(a=>{a(e)}))}isOnline(){return this.#t}},Mh=new s5;function vx(){let e,n;const a=new Promise((o,d)=>{e=o,n=d});a.status="pending",a.catch(()=>{});function r(o){Object.assign(a,o),delete a.resolve,delete a.reject}return a.resolve=o=>{r({status:"fulfilled",value:o}),e(o)},a.reject=o=>{r({status:"rejected",reason:o}),n(o)},a}function r5(e){return Math.min(1e3*2**e,3e4)}function rN(e){return(e??"online")==="online"?Mh.isOnline():!0}var iN=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function zg(e){return e instanceof iN}function lN(e){let n=!1,a=0,r=!1,o;const d=vx(),h=N=>{r||(S(new iN(N)),e.abort?.())},g=()=>{n=!0},p=()=>{n=!1},f=()=>g0.isFocused()&&(e.networkMode==="always"||Mh.isOnline())&&e.canRun(),v=()=>rN(e.networkMode)&&e.canRun(),j=N=>{r||(r=!0,e.onSuccess?.(N),o?.(),d.resolve(N))},S=N=>{r||(r=!0,e.onError?.(N),o?.(),d.reject(N))},T=()=>new Promise(N=>{o=k=>{(r||f())&&N(k)},e.onPause?.()}).then(()=>{o=void 0,r||e.onContinue?.()}),C=()=>{if(r)return;let N;const k=a===0?e.initialPromise:void 0;try{N=k??e.fn()}catch(A){N=Promise.reject(A)}Promise.resolve(N).then(j).catch(A=>{if(r)return;const D=e.retry??(Ul?0:3),O=e.retryDelay??r5,F=typeof O=="function"?O(a,A):O,R=D===!0||typeof D=="number"&&a<D||typeof D=="function"&&D(a,A);if(n||!R){S(A);return}a++,e.onFail?.(a,A),e5(F).then(()=>f()?void 0:T()).then(()=>{n?S(A):C()})})};return{promise:d,cancel:h,continue:()=>(o?.(),d),cancelRetry:g,continueRetry:p,canStart:v,start:()=>(v()?C():T().then(C),d)}}var i5=e=>setTimeout(e,0);function l5(){let e=[],n=0,a=g=>{g()},r=g=>{g()},o=i5;const d=g=>{n?e.push(g):o(()=>{a(g)})},h=()=>{const g=e;e=[],g.length&&o(()=>{r(()=>{g.forEach(p=>{a(p)})})})};return{batch:g=>{let p;n++;try{p=g()}finally{n--,n||h()}return p},batchCalls:g=>(...p)=>{d(()=>{g(...p)})},schedule:d,setNotifyFunction:g=>{a=g},setBatchNotifyFunction:g=>{r=g},setScheduler:g=>{o=g}}}var Gn=l5(),oN=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xx(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ul?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},o5=class extends oN{#t;#e;#n;#a;#s;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#n=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=c5(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const a=bx(this.state.data,e,this.options);return this.#r({data:a,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),a}setState(e,n){this.#r({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(Ea).catch(Ea):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>js(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===p0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>tl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tN(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(e,n){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const a=new AbortController,r=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#l=!0,a.signal)})},o=()=>{const p=aN(this.options,n),v=(()=>{const j={client:this.#a,queryKey:this.queryKey,meta:this.meta};return r(j),j})();return this.#l=!1,this.options.persister?this.options.persister(p,v,this):p(v)},h=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:o};return r(p),p})();this.options.behavior?.onFetch(h,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#r({type:"fetch",meta:h.fetchOptions?.meta});const g=p=>{zg(p)&&p.silent||this.#r({type:"error",error:p}),zg(p)||(this.#n.config.onError?.(p,this),this.#n.config.onSettled?.(this.state.data,p,this)),this.scheduleGc()};return this.#s=lN({initialPromise:n?.initialPromise,fn:h.fetchFn,abort:a.abort.bind(a),onSuccess:p=>{if(p===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(f){g(f);return}this.#n.config.onSuccess?.(p,this),this.#n.config.onSettled?.(p,this.state.error,this),this.scheduleGc()},onError:g,onFail:(p,f)=>{this.#r({type:"failed",failureCount:p,error:f})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...cN(a.data,this.options),fetchMeta:e.meta??null};case"success":return this.#e=void 0,{...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return zg(r)&&r.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Gn.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function cN(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rN(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function c5(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,a=n!==void 0,r=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:a?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var d5=class extends xc{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,n,a){const r=n.queryKey,o=n.queryHash??f0(r,n);let d=this.get(o);return d||(d=new o5({client:e,queryKey:r,queryHash:o,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(r)}),this.add(d)),d}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#t.get(e.queryHash);n&&(e.destroy(),n===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>b1(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>b1(e,a)):n}notify(e){Gn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Gn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},u5=class extends oN{#t;#e;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||dN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#a({type:"continue"})};this.#n=lN({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(o,d)=>{this.#a({type:"failed",failureCount:o,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const a=this.state.status==="pending",r=!this.#n.canStart();try{if(a)n();else{this.#a({type:"pending",variables:e,isPaused:r}),await this.#e.config.onMutate?.(e,this);const d=await this.options.onMutate?.(e);d!==this.state.context&&this.#a({type:"pending",context:d,variables:e,isPaused:r})}const o=await this.#n.start();return await this.#e.config.onSuccess?.(o,e,this.state.context,this),await this.options.onSuccess?.(o,e,this.state.context),await this.#e.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,e,this.state.context),this.#a({type:"success",data:o}),o}catch(o){try{throw await this.#e.config.onError?.(o,e,this.state.context,this),await this.options.onError?.(o,e,this.state.context),await this.#e.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,e,this.state.context),o}finally{this.#a({type:"error",error:o})}}finally{this.#e.runNext(this)}}#a(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Gn.batch(()=>{this.#t.forEach(a=>{a.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function dN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var m5=class extends xc{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(e,n,a){const r=new u5({mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:a});return this.add(r),r}add(e){this.#t.add(e);const n=th(e);if(typeof n=="string"){const a=this.#e.get(n);a?a.push(e):this.#e.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const n=th(e);if(typeof n=="string"){const a=this.#e.get(n);if(a)if(a.length>1){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}else a[0]===e&&this.#e.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=th(e);if(typeof n=="string"){const r=this.#e.get(n)?.find(o=>o.state.status==="pending");return!r||r===e}else return!0}runNext(e){const n=th(e);return typeof n=="string"?this.#e.get(n)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gn.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const n={exact:!0,...e};return this.getAll().find(a=>v1(n,a))}findAll(e={}){return this.getAll().filter(n=>v1(e,n))}notify(e){Gn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Gn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ea))))}};function th(e){return e.options.scope?.id}function N1(e){return{onFetch:(n,a)=>{const r=n.options,o=n.fetchOptions?.meta?.fetchMore?.direction,d=n.state.data?.pages||[],h=n.state.data?.pageParams||[];let g={pages:[],pageParams:[]},p=0;const f=async()=>{let v=!1;const j=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(n.signal.aborted?v=!0:n.signal.addEventListener("abort",()=>{v=!0}),n.signal)})},S=aN(n.options,n.fetchOptions),T=async(C,N,k)=>{if(v)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const D=(()=>{const H={client:n.client,queryKey:n.queryKey,pageParam:N,direction:k?"backward":"forward",meta:n.options.meta};return j(H),H})(),O=await S(D),{maxPages:F}=n.options,R=k?n5:t5;return{pages:R(C.pages,O,F),pageParams:R(C.pageParams,N,F)}};if(o&&d.length){const C=o==="backward",N=C?h5:_1,k={pages:d,pageParams:h},A=N(r,k);g=await T(k,A,C)}else{const C=e??d.length;do{const N=p===0?h[0]??r.initialPageParam:_1(r,g);if(p>0&&N==null)break;g=await T(g,N),p++}while(p<C)}return g};n.options.persister?n.fetchFn=()=>n.options.persister?.(f,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},a):n.fetchFn=f}}}function _1(e,{pages:n,pageParams:a}){const r=n.length-1;return n.length>0?e.getNextPageParam(n[r],n,a[r],a):void 0}function h5(e,{pages:n,pageParams:a}){return n.length>0?e.getPreviousPageParam?.(n[0],n,a[0],a):void 0}var f5=class{#t;#e;#n;#a;#s;#i;#l;#r;constructor(e={}){this.#t=e.queryCache||new d5,this.#e=e.mutationCache||new m5,this.#n=e.defaultOptions||{},this.#a=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=g0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#r=Mh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),a=this.#t.build(this,n),r=a.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(tl(n.staleTime,a))&&this.prefetchQuery(n),Promise.resolve(r))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:n,state:a})=>{const r=a.data;return[n,r]})}setQueryData(e,n,a){const r=this.defaultQueryOptions({queryKey:e}),d=this.#t.get(r.queryHash)?.state.data,h=Jk(n,d);if(h!==void 0)return this.#t.build(this,r).setData(h,{...a,manual:!0})}setQueriesData(e,n,a){return Gn.batch(()=>this.#t.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,n,a)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state}removeQueries(e){const n=this.#t;Gn.batch(()=>{n.findAll(e).forEach(a=>{n.remove(a)})})}resetQueries(e,n){const a=this.#t;return Gn.batch(()=>(a.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const a={revert:!0,...n},r=Gn.batch(()=>this.#t.findAll(e).map(o=>o.cancel(a)));return Promise.all(r).then(Ea).catch(Ea)}invalidateQueries(e,n={}){return Gn.batch(()=>(this.#t.findAll(e).forEach(a=>{a.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const a={...n,cancelRefetch:n.cancelRefetch??!0},r=Gn.batch(()=>this.#t.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,a);return a.throwOnError||(d=d.catch(Ea)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(r).then(Ea)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const a=this.#t.build(this,n);return a.isStaleByTime(tl(n.staleTime,a))?a.fetch(n):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ea).catch(Ea)}fetchInfiniteQuery(e){return e.behavior=N1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ea).catch(Ea)}ensureInfiniteQueryData(e){return e.behavior=N1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Mh.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#a.set(Hl(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#a.values()],a={};return n.forEach(r=>{Xd(e,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(e,n){this.#s.set(Hl(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],a={};return n.forEach(r=>{Xd(e,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=f0(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===p0&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},p5=class extends xc{constructor(e,n){super(),this.options=n,this.#t=e,this.#r=null,this.#l=vx(),this.options.experimental_prefetchInRender||this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}#t;#e=void 0;#n=void 0;#a=void 0;#s;#i;#l;#r;#p;#m;#h;#c;#d;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),S1(this.#e,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jx(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jx(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#e.removeObserver(this)}setOptions(e){const n=this.options,a=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof js(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),n._defaulted&&!Eh(this.options,n)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&C1(this.#e,a,this.options,n)&&this.#u(),this.updateResult(),r&&(this.#e!==a||js(this.options.enabled,this.#e)!==js(n.enabled,this.#e)||tl(this.options.staleTime,this.#e)!==tl(n.staleTime,this.#e))&&this.#g();const o=this.#x();r&&(this.#e!==a||js(this.options.enabled,this.#e)!==js(n.enabled,this.#e)||o!==this.#o)&&this.#y(o)}getOptimisticResult(e){const n=this.#t.getQueryCache().build(this.#t,e),a=this.createResult(n,e);return x5(this,a)&&(this.#a=a,this.#i=this.options,this.#s=this.#e.state),a}getCurrentResult(){return this.#a}trackResult(e,n){return new Proxy(e,{get:(a,r)=>(this.trackProp(r),n?.(r),Reflect.get(a,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#t.defaultQueryOptions(e),a=this.#t.getQueryCache().build(this.#t,n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#w();let n=this.#e.fetch(this.options,e);return e?.throwOnError||(n=n.catch(Ea)),n}#g(){this.#v();const e=tl(this.options.staleTime,this.#e);if(Ul||this.#a.isStale||!xx(e))return;const a=tN(this.#a.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#a.isStale||this.updateResult()},a)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#j(),this.#o=e,!(Ul||js(this.options.enabled,this.#e)===!1||!xx(this.#o)||this.#o===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||g0.isFocused())&&this.#u()},this.#o))}#b(){this.#g(),this.#y(this.#x())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,n){const a=this.#e,r=this.options,o=this.#a,d=this.#s,h=this.#i,p=e!==a?e.state:this.#n,{state:f}=e;let v={...f},j=!1,S;if(n._optimisticResults){const z=this.hasListeners(),Z=!z&&S1(e,n),U=z&&C1(e,a,n,r);(Z||U)&&(v={...v,...cN(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:T,errorUpdatedAt:C,status:N}=v;S=v.data;let k=!1;if(n.placeholderData!==void 0&&S===void 0&&N==="pending"){let z;o?.isPlaceholderData&&n.placeholderData===h?.placeholderData?(z=o.data,k=!0):z=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,z!==void 0&&(N="success",S=bx(o?.data,z,n),j=!0)}if(n.select&&S!==void 0&&!k)if(o&&S===d?.data&&n.select===this.#p)S=this.#m;else try{this.#p=n.select,S=n.select(S),S=bx(o?.data,S,n),this.#m=S,this.#r=null}catch(z){this.#r=z}this.#r&&(T=this.#r,S=this.#m,C=Date.now(),N="error");const A=v.fetchStatus==="fetching",D=N==="pending",O=N==="error",F=D&&A,R=S!==void 0,E={status:N,fetchStatus:v.fetchStatus,isPending:D,isSuccess:N==="success",isError:O,isInitialLoading:F,isLoading:F,data:S,dataUpdatedAt:v.dataUpdatedAt,error:T,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:A,isRefetching:A&&!D,isLoadingError:O&&!R,isPaused:v.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:O&&R,isStale:x0(e,n),refetch:this.refetch,promise:this.#l,isEnabled:js(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const z=V=>{E.status==="error"?V.reject(E.error):E.data!==void 0&&V.resolve(E.data)},Z=()=>{const V=this.#l=E.promise=vx();z(V)},U=this.#l;switch(U.status){case"pending":e.queryHash===a.queryHash&&z(U);break;case"fulfilled":(E.status==="error"||E.data!==U.value)&&Z();break;case"rejected":(E.status!=="error"||E.error!==U.reason)&&Z();break}}return E}updateResult(){const e=this.#a,n=this.createResult(this.#e,this.options);if(this.#s=this.#e.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#e),Eh(n,e))return;this.#a=n;const a=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!this.#f.size)return!0;const d=new Set(o??this.#f);return this.options.throwOnError&&d.add("error"),Object.keys(this.#a).some(h=>{const g=h;return this.#a[g]!==e[g]&&d.has(g)})};this.#N({listeners:a()})}#w(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const n=this.#e;this.#e=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#N(e){Gn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#a)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function g5(e,n){return js(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function S1(e,n){return g5(e,n)||e.state.data!==void 0&&jx(e,n,n.refetchOnMount)}function jx(e,n,a){if(js(n.enabled,e)!==!1&&tl(n.staleTime,e)!=="static"){const r=typeof a=="function"?a(e):a;return r==="always"||r!==!1&&x0(e,n)}return!1}function C1(e,n,a,r){return(e!==n||js(r.enabled,e)===!1)&&(!a.suspense||e.state.status!=="error")&&x0(e,a)}function x0(e,n){return js(n.enabled,e)!==!1&&e.isStaleByTime(tl(n.staleTime,e))}function x5(e,n){return!Eh(e.getCurrentResult(),n)}var y5=class extends xc{#t;#e=void 0;#n;#a;constructor(n,a){super(),this.#t=n,this.setOptions(a),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const a=this.options;this.options=this.#t.defaultMutationOptions(n),Eh(this.options,a)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),a?.mutationKey&&this.options.mutationKey&&Hl(a.mutationKey)!==Hl(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,a){return this.#a=a,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??dN();this.#e={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){Gn.batch(()=>{if(this.#a&&this.hasListeners()){const a=this.#e.variables,r=this.#e.context;n?.type==="success"?(this.#a.onSuccess?.(n.data,a,r),this.#a.onSettled?.(n.data,null,a,r)):n?.type==="error"&&(this.#a.onError?.(n.error,a,r),this.#a.onSettled?.(void 0,n.error,a,r))}this.listeners.forEach(a=>{a(this.#e)})})}},uN=b.createContext(void 0),In=e=>{const n=b.useContext(uN);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},b5=({client:e,children:n})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(uN.Provider,{value:e,children:n})),mN=b.createContext(!1),v5=()=>b.useContext(mN);mN.Provider;function j5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var w5=b.createContext(j5()),N5=()=>b.useContext(w5),_5=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},S5=e=>{b.useEffect(()=>{e.clearReset()},[e])},C5=({result:e,errorResetBoundary:n,throwOnError:a,query:r,suspense:o})=>e.isError&&!n.isReset()&&!e.isFetching&&r&&(o&&e.data===void 0||sN(a,[e.error,r])),k5=e=>{if(e.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...r)=>n(a(...r)):n(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},T5=(e,n)=>e.isLoading&&e.isFetching&&!n,E5=(e,n)=>e?.suspense&&n.isPending,k1=(e,n,a)=>n.fetchOptimistic(e).catch(()=>{a.clearReset()});function M5(e,n,a){const r=v5(),o=N5(),d=In(),h=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(h),h._optimisticResults=r?"isRestoring":"optimistic",k5(h),_5(h,o),S5(o);const g=!d.getQueryCache().get(h.queryHash),[p]=b.useState(()=>new n(d,h)),f=p.getOptimisticResult(h),v=!r&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(j=>{const S=v?p.subscribe(Gn.batchCalls(j)):Ea;return p.updateResult(),S},[p,v]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),b.useEffect(()=>{p.setOptions(h)},[h,p]),E5(h,f))throw k1(h,p,o);if(C5({result:f,errorResetBoundary:o,throwOnError:h.throwOnError,query:d.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw f.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(h,f),h.experimental_prefetchInRender&&!Ul&&T5(f,r)&&(g?k1(h,p,o):d.getQueryCache().get(h.queryHash)?.promise)?.catch(Ea).finally(()=>{p.updateResult()}),h.notifyOnChangeProps?f:p.trackResult(f)}function zt(e,n){return M5(e,p5)}function Ie(e,n){const a=In(),[r]=b.useState(()=>new y5(a,e));b.useEffect(()=>{r.setOptions(e)},[r,e]);const o=b.useSyncExternalStore(b.useCallback(h=>r.subscribe(Gn.batchCalls(h)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=b.useCallback((h,g)=>{r.mutate(h,g).catch(Ea)},[r]);if(o.error&&sN(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}function hN(e,n){return function(){return e.apply(n,arguments)}}const{toString:R5}=Object.prototype,{getPrototypeOf:y0}=Object,{iterator:Jh,toStringTag:fN}=Symbol,ef=(e=>n=>{const a=R5.call(n);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),qs=e=>(e=e.toLowerCase(),n=>ef(n)===e),tf=e=>n=>typeof n===e,{isArray:yc}=Array,Jd=tf("undefined");function yu(e){return e!==null&&!Jd(e)&&e.constructor!==null&&!Jd(e.constructor)&&Ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pN=qs("ArrayBuffer");function A5(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&pN(e.buffer),n}const D5=tf("string"),Ba=tf("function"),gN=tf("number"),bu=e=>e!==null&&typeof e=="object",P5=e=>e===!0||e===!1,vh=e=>{if(ef(e)!=="object")return!1;const n=y0(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(fN in e)&&!(Jh in e)},O5=e=>{if(!bu(e)||yu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},L5=qs("Date"),z5=qs("File"),I5=qs("Blob"),B5=qs("FileList"),$5=e=>bu(e)&&Ba(e.pipe),F5=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Ba(e.append)&&((n=ef(e))==="formdata"||n==="object"&&Ba(e.toString)&&e.toString()==="[object FormData]"))},U5=qs("URLSearchParams"),[H5,q5,Y5,V5]=["ReadableStream","Request","Response","Headers"].map(qs),Z5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vu(e,n,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),yc(e))for(r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else{if(yu(e))return;const d=a?Object.getOwnPropertyNames(e):Object.keys(e),h=d.length;let g;for(r=0;r<h;r++)g=d[r],n.call(null,e[g],g,e)}}function xN(e,n){if(yu(e))return null;n=n.toLowerCase();const a=Object.keys(e);let r=a.length,o;for(;r-- >0;)if(o=a[r],n===o.toLowerCase())return o;return null}const Il=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yN=e=>!Jd(e)&&e!==Il;function wx(){const{caseless:e}=yN(this)&&this||{},n={},a=(r,o)=>{const d=e&&xN(n,o)||o;vh(n[d])&&vh(r)?n[d]=wx(n[d],r):vh(r)?n[d]=wx({},r):yc(r)?n[d]=r.slice():n[d]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&vu(arguments[r],a);return n}const K5=(e,n,a,{allOwnKeys:r}={})=>(vu(n,(o,d)=>{a&&Ba(o)?e[d]=hN(o,a):e[d]=o},{allOwnKeys:r}),e),W5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),G5=(e,n,a,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),a&&Object.assign(e.prototype,a)},Q5=(e,n,a,r)=>{let o,d,h;const g={};if(n=n||{},e==null)return n;do{for(o=Object.getOwnPropertyNames(e),d=o.length;d-- >0;)h=o[d],(!r||r(h,e,n))&&!g[h]&&(n[h]=e[h],g[h]=!0);e=a!==!1&&y0(e)}while(e&&(!a||a(e,n))&&e!==Object.prototype);return n},X5=(e,n,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=n.length;const r=e.indexOf(n,a);return r!==-1&&r===a},J5=e=>{if(!e)return null;if(yc(e))return e;let n=e.length;if(!gN(n))return null;const a=new Array(n);for(;n-- >0;)a[n]=e[n];return a},e4=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&y0(Uint8Array)),t4=(e,n)=>{const r=(e&&e[Jh]).call(e);let o;for(;(o=r.next())&&!o.done;){const d=o.value;n.call(e,d[0],d[1])}},n4=(e,n)=>{let a;const r=[];for(;(a=e.exec(n))!==null;)r.push(a);return r},a4=qs("HTMLFormElement"),s4=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,o){return r.toUpperCase()+o}),T1=(({hasOwnProperty:e})=>(n,a)=>e.call(n,a))(Object.prototype),r4=qs("RegExp"),bN=(e,n)=>{const a=Object.getOwnPropertyDescriptors(e),r={};vu(a,(o,d)=>{let h;(h=n(o,d,e))!==!1&&(r[d]=h||o)}),Object.defineProperties(e,r)},i4=e=>{bN(e,(n,a)=>{if(Ba(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=e[a];if(Ba(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},l4=(e,n)=>{const a={},r=o=>{o.forEach(d=>{a[d]=!0})};return yc(e)?r(e):r(String(e).split(n)),a},o4=()=>{},c4=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function d4(e){return!!(e&&Ba(e.append)&&e[fN]==="FormData"&&e[Jh])}const u4=e=>{const n=new Array(10),a=(r,o)=>{if(bu(r)){if(n.indexOf(r)>=0)return;if(yu(r))return r;if(!("toJSON"in r)){n[o]=r;const d=yc(r)?[]:{};return vu(r,(h,g)=>{const p=a(h,o+1);!Jd(p)&&(d[g]=p)}),n[o]=void 0,d}}return r};return a(e,0)},m4=qs("AsyncFunction"),h4=e=>e&&(bu(e)||Ba(e))&&Ba(e.then)&&Ba(e.catch),vN=((e,n)=>e?setImmediate:n?((a,r)=>(Il.addEventListener("message",({source:o,data:d})=>{o===Il&&d===a&&r.length&&r.shift()()},!1),o=>{r.push(o),Il.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Ba(Il.postMessage)),f4=typeof queueMicrotask<"u"?queueMicrotask.bind(Il):typeof process<"u"&&process.nextTick||vN,p4=e=>e!=null&&Ba(e[Jh]),Ne={isArray:yc,isArrayBuffer:pN,isBuffer:yu,isFormData:F5,isArrayBufferView:A5,isString:D5,isNumber:gN,isBoolean:P5,isObject:bu,isPlainObject:vh,isEmptyObject:O5,isReadableStream:H5,isRequest:q5,isResponse:Y5,isHeaders:V5,isUndefined:Jd,isDate:L5,isFile:z5,isBlob:I5,isRegExp:r4,isFunction:Ba,isStream:$5,isURLSearchParams:U5,isTypedArray:e4,isFileList:B5,forEach:vu,merge:wx,extend:K5,trim:Z5,stripBOM:W5,inherits:G5,toFlatObject:Q5,kindOf:ef,kindOfTest:qs,endsWith:X5,toArray:J5,forEachEntry:t4,matchAll:n4,isHTMLForm:a4,hasOwnProperty:T1,hasOwnProp:T1,reduceDescriptors:bN,freezeMethods:i4,toObjectSet:l4,toCamelCase:s4,noop:o4,toFiniteNumber:c4,findKey:xN,global:Il,isContextDefined:yN,isSpecCompliantForm:d4,toJSONObject:u4,isAsyncFn:m4,isThenable:h4,setImmediate:vN,asap:f4,isIterable:p4};function ft(e,n,a,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),a&&(this.config=a),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Ne.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ne.toJSONObject(this.config),code:this.code,status:this.status}}});const jN=ft.prototype,wN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wN[e]={value:e}});Object.defineProperties(ft,wN);Object.defineProperty(jN,"isAxiosError",{value:!0});ft.from=(e,n,a,r,o,d)=>{const h=Object.create(jN);return Ne.toFlatObject(e,h,function(p){return p!==Error.prototype},g=>g!=="isAxiosError"),ft.call(h,e.message,n,a,r,o),h.cause=e,h.name=e.name,d&&Object.assign(h,d),h};const g4=null;function Nx(e){return Ne.isPlainObject(e)||Ne.isArray(e)}function NN(e){return Ne.endsWith(e,"[]")?e.slice(0,-2):e}function E1(e,n,a){return e?e.concat(n).map(function(o,d){return o=NN(o),!a&&d?"["+o+"]":o}).join(a?".":""):n}function x4(e){return Ne.isArray(e)&&!e.some(Nx)}const y4=Ne.toFlatObject(Ne,{},null,function(n){return/^is[A-Z]/.test(n)});function nf(e,n,a){if(!Ne.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,a=Ne.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,k){return!Ne.isUndefined(k[N])});const r=a.metaTokens,o=a.visitor||v,d=a.dots,h=a.indexes,p=(a.Blob||typeof Blob<"u"&&Blob)&&Ne.isSpecCompliantForm(n);if(!Ne.isFunction(o))throw new TypeError("visitor must be a function");function f(C){if(C===null)return"";if(Ne.isDate(C))return C.toISOString();if(Ne.isBoolean(C))return C.toString();if(!p&&Ne.isBlob(C))throw new ft("Blob is not supported. Use a Buffer instead.");return Ne.isArrayBuffer(C)||Ne.isTypedArray(C)?p&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function v(C,N,k){let A=C;if(C&&!k&&typeof C=="object"){if(Ne.endsWith(N,"{}"))N=r?N:N.slice(0,-2),C=JSON.stringify(C);else if(Ne.isArray(C)&&x4(C)||(Ne.isFileList(C)||Ne.endsWith(N,"[]"))&&(A=Ne.toArray(C)))return N=NN(N),A.forEach(function(O,F){!(Ne.isUndefined(O)||O===null)&&n.append(h===!0?E1([N],F,d):h===null?N:N+"[]",f(O))}),!1}return Nx(C)?!0:(n.append(E1(k,N,d),f(C)),!1)}const j=[],S=Object.assign(y4,{defaultVisitor:v,convertValue:f,isVisitable:Nx});function T(C,N){if(!Ne.isUndefined(C)){if(j.indexOf(C)!==-1)throw Error("Circular reference detected in "+N.join("."));j.push(C),Ne.forEach(C,function(A,D){(!(Ne.isUndefined(A)||A===null)&&o.call(n,A,Ne.isString(D)?D.trim():D,N,S))===!0&&T(A,N?N.concat(D):[D])}),j.pop()}}if(!Ne.isObject(e))throw new TypeError("data must be an object");return T(e),n}function M1(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function b0(e,n){this._pairs=[],e&&nf(e,this,n)}const _N=b0.prototype;_N.append=function(n,a){this._pairs.push([n,a])};_N.toString=function(n){const a=n?function(r){return n.call(this,r,M1)}:M1;return this._pairs.map(function(o){return a(o[0])+"="+a(o[1])},"").join("&")};function b4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SN(e,n,a){if(!n)return e;const r=a&&a.encode||b4;Ne.isFunction(a)&&(a={serialize:a});const o=a&&a.serialize;let d;if(o?d=o(n,a):d=Ne.isURLSearchParams(n)?n.toString():new b0(n,a).toString(r),d){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class R1{constructor(){this.handlers=[]}use(n,a,r){return this.handlers.push({fulfilled:n,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Ne.forEach(this.handlers,function(r){r!==null&&n(r)})}}const CN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v4=typeof URLSearchParams<"u"?URLSearchParams:b0,j4=typeof FormData<"u"?FormData:null,w4=typeof Blob<"u"?Blob:null,N4={isBrowser:!0,classes:{URLSearchParams:v4,FormData:j4,Blob:w4},protocols:["http","https","file","blob","url","data"]},v0=typeof window<"u"&&typeof document<"u",_x=typeof navigator=="object"&&navigator||void 0,_4=v0&&(!_x||["ReactNative","NativeScript","NS"].indexOf(_x.product)<0),S4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",C4=v0&&window.location.href||"http://localhost",k4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:v0,hasStandardBrowserEnv:_4,hasStandardBrowserWebWorkerEnv:S4,navigator:_x,origin:C4},Symbol.toStringTag,{value:"Module"})),wa={...k4,...N4};function T4(e,n){return nf(e,new wa.classes.URLSearchParams,{visitor:function(a,r,o,d){return wa.isNode&&Ne.isBuffer(a)?(this.append(r,a.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...n})}function E4(e){return Ne.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function M4(e){const n={},a=Object.keys(e);let r;const o=a.length;let d;for(r=0;r<o;r++)d=a[r],n[d]=e[d];return n}function kN(e){function n(a,r,o,d){let h=a[d++];if(h==="__proto__")return!0;const g=Number.isFinite(+h),p=d>=a.length;return h=!h&&Ne.isArray(o)?o.length:h,p?(Ne.hasOwnProp(o,h)?o[h]=[o[h],r]:o[h]=r,!g):((!o[h]||!Ne.isObject(o[h]))&&(o[h]=[]),n(a,r,o[h],d)&&Ne.isArray(o[h])&&(o[h]=M4(o[h])),!g)}if(Ne.isFormData(e)&&Ne.isFunction(e.entries)){const a={};return Ne.forEachEntry(e,(r,o)=>{n(E4(r),o,a,0)}),a}return null}function R4(e,n,a){if(Ne.isString(e))try{return(n||JSON.parse)(e),Ne.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(e)}const ju={transitional:CN,adapter:["xhr","http","fetch"],transformRequest:[function(n,a){const r=a.getContentType()||"",o=r.indexOf("application/json")>-1,d=Ne.isObject(n);if(d&&Ne.isHTMLForm(n)&&(n=new FormData(n)),Ne.isFormData(n))return o?JSON.stringify(kN(n)):n;if(Ne.isArrayBuffer(n)||Ne.isBuffer(n)||Ne.isStream(n)||Ne.isFile(n)||Ne.isBlob(n)||Ne.isReadableStream(n))return n;if(Ne.isArrayBufferView(n))return n.buffer;if(Ne.isURLSearchParams(n))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let g;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return T4(n,this.formSerializer).toString();if((g=Ne.isFileList(n))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return nf(g?{"files[]":n}:n,p&&new p,this.formSerializer)}}return d||o?(a.setContentType("application/json",!1),R4(n)):n}],transformResponse:[function(n){const a=this.transitional||ju.transitional,r=a&&a.forcedJSONParsing,o=this.responseType==="json";if(Ne.isResponse(n)||Ne.isReadableStream(n))return n;if(n&&Ne.isString(n)&&(r&&!this.responseType||o)){const h=!(a&&a.silentJSONParsing)&&o;try{return JSON.parse(n)}catch(g){if(h)throw g.name==="SyntaxError"?ft.from(g,ft.ERR_BAD_RESPONSE,this,null,this.response):g}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wa.classes.FormData,Blob:wa.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ne.forEach(["delete","get","head","post","put","patch"],e=>{ju.headers[e]={}});const A4=Ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D4=e=>{const n={};let a,r,o;return e&&e.split(`
`).forEach(function(h){o=h.indexOf(":"),a=h.substring(0,o).trim().toLowerCase(),r=h.substring(o+1).trim(),!(!a||n[a]&&A4[a])&&(a==="set-cookie"?n[a]?n[a].push(r):n[a]=[r]:n[a]=n[a]?n[a]+", "+r:r)}),n},A1=Symbol("internals");function Rd(e){return e&&String(e).trim().toLowerCase()}function jh(e){return e===!1||e==null?e:Ne.isArray(e)?e.map(jh):String(e)}function P4(e){const n=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(e);)n[r[1]]=r[2];return n}const O4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ig(e,n,a,r,o){if(Ne.isFunction(r))return r.call(this,n,a);if(o&&(n=a),!!Ne.isString(n)){if(Ne.isString(r))return n.indexOf(r)!==-1;if(Ne.isRegExp(r))return r.test(n)}}function L4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,a,r)=>a.toUpperCase()+r)}function z4(e,n){const a=Ne.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+a,{value:function(o,d,h){return this[r].call(this,n,o,d,h)},configurable:!0})})}let $a=class{constructor(n){n&&this.set(n)}set(n,a,r){const o=this;function d(g,p,f){const v=Rd(p);if(!v)throw new Error("header name must be a non-empty string");const j=Ne.findKey(o,v);(!j||o[j]===void 0||f===!0||f===void 0&&o[j]!==!1)&&(o[j||p]=jh(g))}const h=(g,p)=>Ne.forEach(g,(f,v)=>d(f,v,p));if(Ne.isPlainObject(n)||n instanceof this.constructor)h(n,a);else if(Ne.isString(n)&&(n=n.trim())&&!O4(n))h(D4(n),a);else if(Ne.isObject(n)&&Ne.isIterable(n)){let g={},p,f;for(const v of n){if(!Ne.isArray(v))throw TypeError("Object iterator must return a key-value pair");g[f=v[0]]=(p=g[f])?Ne.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}h(g,a)}else n!=null&&d(a,n,r);return this}get(n,a){if(n=Rd(n),n){const r=Ne.findKey(this,n);if(r){const o=this[r];if(!a)return o;if(a===!0)return P4(o);if(Ne.isFunction(a))return a.call(this,o,r);if(Ne.isRegExp(a))return a.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,a){if(n=Rd(n),n){const r=Ne.findKey(this,n);return!!(r&&this[r]!==void 0&&(!a||Ig(this,this[r],r,a)))}return!1}delete(n,a){const r=this;let o=!1;function d(h){if(h=Rd(h),h){const g=Ne.findKey(r,h);g&&(!a||Ig(r,r[g],g,a))&&(delete r[g],o=!0)}}return Ne.isArray(n)?n.forEach(d):d(n),o}clear(n){const a=Object.keys(this);let r=a.length,o=!1;for(;r--;){const d=a[r];(!n||Ig(this,this[d],d,n,!0))&&(delete this[d],o=!0)}return o}normalize(n){const a=this,r={};return Ne.forEach(this,(o,d)=>{const h=Ne.findKey(r,d);if(h){a[h]=jh(o),delete a[d];return}const g=n?L4(d):String(d).trim();g!==d&&delete a[d],a[g]=jh(o),r[g]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const a=Object.create(null);return Ne.forEach(this,(r,o)=>{r!=null&&r!==!1&&(a[o]=n&&Ne.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,a])=>n+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...a){const r=new this(n);return a.forEach(o=>r.set(o)),r}static accessor(n){const r=(this[A1]=this[A1]={accessors:{}}).accessors,o=this.prototype;function d(h){const g=Rd(h);r[g]||(z4(o,h),r[g]=!0)}return Ne.isArray(n)?n.forEach(d):d(n),this}};$a.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ne.reduceDescriptors($a.prototype,({value:e},n)=>{let a=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[a]=r}}});Ne.freezeMethods($a);function Bg(e,n){const a=this||ju,r=n||a,o=$a.from(r.headers);let d=r.data;return Ne.forEach(e,function(g){d=g.call(a,d,o.normalize(),n?n.status:void 0)}),o.normalize(),d}function TN(e){return!!(e&&e.__CANCEL__)}function bc(e,n,a){ft.call(this,e??"canceled",ft.ERR_CANCELED,n,a),this.name="CanceledError"}Ne.inherits(bc,ft,{__CANCEL__:!0});function EN(e,n,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?e(a):n(new ft("Request failed with status code "+a.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function I4(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function B4(e,n){e=e||10;const a=new Array(e),r=new Array(e);let o=0,d=0,h;return n=n!==void 0?n:1e3,function(p){const f=Date.now(),v=r[d];h||(h=f),a[o]=p,r[o]=f;let j=d,S=0;for(;j!==o;)S+=a[j++],j=j%e;if(o=(o+1)%e,o===d&&(d=(d+1)%e),f-h<n)return;const T=v&&f-v;return T?Math.round(S*1e3/T):void 0}}function $4(e,n){let a=0,r=1e3/n,o,d;const h=(f,v=Date.now())=>{a=v,o=null,d&&(clearTimeout(d),d=null),e(...f)};return[(...f)=>{const v=Date.now(),j=v-a;j>=r?h(f,v):(o=f,d||(d=setTimeout(()=>{d=null,h(o)},r-j)))},()=>o&&h(o)]}const Rh=(e,n,a=3)=>{let r=0;const o=B4(50,250);return $4(d=>{const h=d.loaded,g=d.lengthComputable?d.total:void 0,p=h-r,f=o(p),v=h<=g;r=h;const j={loaded:h,total:g,progress:g?h/g:void 0,bytes:p,rate:f||void 0,estimated:f&&g&&v?(g-h)/f:void 0,event:d,lengthComputable:g!=null,[n?"download":"upload"]:!0};e(j)},a)},D1=(e,n)=>{const a=e!=null;return[r=>n[0]({lengthComputable:a,total:e,loaded:r}),n[1]]},P1=e=>(...n)=>Ne.asap(()=>e(...n)),F4=wa.hasStandardBrowserEnv?((e,n)=>a=>(a=new URL(a,wa.origin),e.protocol===a.protocol&&e.host===a.host&&(n||e.port===a.port)))(new URL(wa.origin),wa.navigator&&/(msie|trident)/i.test(wa.navigator.userAgent)):()=>!0,U4=wa.hasStandardBrowserEnv?{write(e,n,a,r,o,d){const h=[e+"="+encodeURIComponent(n)];Ne.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),Ne.isString(r)&&h.push("path="+r),Ne.isString(o)&&h.push("domain="+o),d===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function H4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function q4(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function MN(e,n,a){let r=!H4(n);return e&&(r||a==!1)?q4(e,n):n}const O1=e=>e instanceof $a?{...e}:e;function ql(e,n){n=n||{};const a={};function r(f,v,j,S){return Ne.isPlainObject(f)&&Ne.isPlainObject(v)?Ne.merge.call({caseless:S},f,v):Ne.isPlainObject(v)?Ne.merge({},v):Ne.isArray(v)?v.slice():v}function o(f,v,j,S){if(Ne.isUndefined(v)){if(!Ne.isUndefined(f))return r(void 0,f,j,S)}else return r(f,v,j,S)}function d(f,v){if(!Ne.isUndefined(v))return r(void 0,v)}function h(f,v){if(Ne.isUndefined(v)){if(!Ne.isUndefined(f))return r(void 0,f)}else return r(void 0,v)}function g(f,v,j){if(j in n)return r(f,v);if(j in e)return r(void 0,f)}const p={url:d,method:d,data:d,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g,headers:(f,v,j)=>o(O1(f),O1(v),j,!0)};return Ne.forEach(Object.keys({...e,...n}),function(v){const j=p[v]||o,S=j(e[v],n[v],v);Ne.isUndefined(S)&&j!==g||(a[v]=S)}),a}const RN=e=>{const n=ql({},e);let{data:a,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:d,headers:h,auth:g}=n;n.headers=h=$a.from(h),n.url=SN(MN(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&h.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):"")));let p;if(Ne.isFormData(a)){if(wa.hasStandardBrowserEnv||wa.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((p=h.getContentType())!==!1){const[f,...v]=p?p.split(";").map(j=>j.trim()).filter(Boolean):[];h.setContentType([f||"multipart/form-data",...v].join("; "))}}if(wa.hasStandardBrowserEnv&&(r&&Ne.isFunction(r)&&(r=r(n)),r||r!==!1&&F4(n.url))){const f=o&&d&&U4.read(d);f&&h.set(o,f)}return n},Y4=typeof XMLHttpRequest<"u",V4=Y4&&function(e){return new Promise(function(a,r){const o=RN(e);let d=o.data;const h=$a.from(o.headers).normalize();let{responseType:g,onUploadProgress:p,onDownloadProgress:f}=o,v,j,S,T,C;function N(){T&&T(),C&&C(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function A(){if(!k)return;const O=$a.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),R={data:!g||g==="text"||g==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:O,config:e,request:k};EN(function(E){a(E),N()},function(E){r(E),N()},R),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new ft("Request aborted",ft.ECONNABORTED,e,k)),k=null)},k.onerror=function(){r(new ft("Network Error",ft.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let F=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const R=o.transitional||CN;o.timeoutErrorMessage&&(F=o.timeoutErrorMessage),r(new ft(F,R.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,k)),k=null},d===void 0&&h.setContentType(null),"setRequestHeader"in k&&Ne.forEach(h.toJSON(),function(F,R){k.setRequestHeader(R,F)}),Ne.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),g&&g!=="json"&&(k.responseType=o.responseType),f&&([S,C]=Rh(f,!0),k.addEventListener("progress",S)),p&&k.upload&&([j,T]=Rh(p),k.upload.addEventListener("progress",j),k.upload.addEventListener("loadend",T)),(o.cancelToken||o.signal)&&(v=O=>{k&&(r(!O||O.type?new bc(null,e,k):O),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const D=I4(o.url);if(D&&wa.protocols.indexOf(D)===-1){r(new ft("Unsupported protocol "+D+":",ft.ERR_BAD_REQUEST,e));return}k.send(d||null)})},Z4=(e,n)=>{const{length:a}=e=e?e.filter(Boolean):[];if(n||a){let r=new AbortController,o;const d=function(f){if(!o){o=!0,g();const v=f instanceof Error?f:this.reason;r.abort(v instanceof ft?v:new bc(v instanceof Error?v.message:v))}};let h=n&&setTimeout(()=>{h=null,d(new ft(`timeout ${n} of ms exceeded`,ft.ETIMEDOUT))},n);const g=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(d):f.removeEventListener("abort",d)}),e=null)};e.forEach(f=>f.addEventListener("abort",d));const{signal:p}=r;return p.unsubscribe=()=>Ne.asap(g),p}},K4=function*(e,n){let a=e.byteLength;if(a<n){yield e;return}let r=0,o;for(;r<a;)o=r+n,yield e.slice(r,o),r=o},W4=async function*(e,n){for await(const a of G4(e))yield*K4(a,n)},G4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:a,value:r}=await n.read();if(a)break;yield r}}finally{await n.cancel()}},L1=(e,n,a,r)=>{const o=W4(e,n);let d=0,h,g=p=>{h||(h=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:f,value:v}=await o.next();if(f){g(),p.close();return}let j=v.byteLength;if(a){let S=d+=j;a(S)}p.enqueue(new Uint8Array(v))}catch(f){throw g(f),f}},cancel(p){return g(p),o.return()}},{highWaterMark:2})},af=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",AN=af&&typeof ReadableStream=="function",Q4=af&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),DN=(e,...n)=>{try{return!!e(...n)}catch{return!1}},X4=AN&&DN(()=>{let e=!1;const n=new Request(wa.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),z1=64*1024,Sx=AN&&DN(()=>Ne.isReadableStream(new Response("").body)),Ah={stream:Sx&&(e=>e.body)};af&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Ah[n]&&(Ah[n]=Ne.isFunction(e[n])?a=>a[n]():(a,r)=>{throw new ft(`Response type '${n}' is not supported`,ft.ERR_NOT_SUPPORT,r)})})})(new Response);const J4=async e=>{if(e==null)return 0;if(Ne.isBlob(e))return e.size;if(Ne.isSpecCompliantForm(e))return(await new Request(wa.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ne.isArrayBufferView(e)||Ne.isArrayBuffer(e))return e.byteLength;if(Ne.isURLSearchParams(e)&&(e=e+""),Ne.isString(e))return(await Q4(e)).byteLength},e3=async(e,n)=>{const a=Ne.toFiniteNumber(e.getContentLength());return a??J4(n)},t3=af&&(async e=>{let{url:n,method:a,data:r,signal:o,cancelToken:d,timeout:h,onDownloadProgress:g,onUploadProgress:p,responseType:f,headers:v,withCredentials:j="same-origin",fetchOptions:S}=RN(e);f=f?(f+"").toLowerCase():"text";let T=Z4([o,d&&d.toAbortSignal()],h),C;const N=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let k;try{if(p&&X4&&a!=="get"&&a!=="head"&&(k=await e3(v,r))!==0){let R=new Request(n,{method:"POST",body:r,duplex:"half"}),H;if(Ne.isFormData(r)&&(H=R.headers.get("content-type"))&&v.setContentType(H),R.body){const[E,z]=D1(k,Rh(P1(p)));r=L1(R.body,z1,E,z)}}Ne.isString(j)||(j=j?"include":"omit");const A="credentials"in Request.prototype;C=new Request(n,{...S,signal:T,method:a.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:A?j:void 0});let D=await fetch(C,S);const O=Sx&&(f==="stream"||f==="response");if(Sx&&(g||O&&N)){const R={};["status","statusText","headers"].forEach(Z=>{R[Z]=D[Z]});const H=Ne.toFiniteNumber(D.headers.get("content-length")),[E,z]=g&&D1(H,Rh(P1(g),!0))||[];D=new Response(L1(D.body,z1,E,()=>{z&&z(),N&&N()}),R)}f=f||"text";let F=await Ah[Ne.findKey(Ah,f)||"text"](D,e);return!O&&N&&N(),await new Promise((R,H)=>{EN(R,H,{data:F,headers:$a.from(D.headers),status:D.status,statusText:D.statusText,config:e,request:C})})}catch(A){throw N&&N(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,e,C),{cause:A.cause||A}):ft.from(A,A&&A.code,e,C)}}),Cx={http:g4,xhr:V4,fetch:t3};Ne.forEach(Cx,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const I1=e=>`- ${e}`,n3=e=>Ne.isFunction(e)||e===null||e===!1,PN={getAdapter:e=>{e=Ne.isArray(e)?e:[e];const{length:n}=e;let a,r;const o={};for(let d=0;d<n;d++){a=e[d];let h;if(r=a,!n3(a)&&(r=Cx[(h=String(a)).toLowerCase()],r===void 0))throw new ft(`Unknown adapter '${h}'`);if(r)break;o[h||"#"+d]=r}if(!r){const d=Object.entries(o).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=n?d.length>1?`since :
`+d.map(I1).join(`
`):" "+I1(d[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:Cx};function $g(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bc(null,e)}function B1(e){return $g(e),e.headers=$a.from(e.headers),e.data=Bg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),PN.getAdapter(e.adapter||ju.adapter)(e).then(function(r){return $g(e),r.data=Bg.call(e,e.transformResponse,r),r.headers=$a.from(r.headers),r},function(r){return TN(r)||($g(e),r&&r.response&&(r.response.data=Bg.call(e,e.transformResponse,r.response),r.response.headers=$a.from(r.response.headers))),Promise.reject(r)})}const ON="1.11.0",sf={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{sf[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const $1={};sf.transitional=function(n,a,r){function o(d,h){return"[Axios v"+ON+"] Transitional option '"+d+"'"+h+(r?". "+r:"")}return(d,h,g)=>{if(n===!1)throw new ft(o(h," has been removed"+(a?" in "+a:"")),ft.ERR_DEPRECATED);return a&&!$1[h]&&($1[h]=!0,console.warn(o(h," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(d,h,g):!0}};sf.spelling=function(n){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function a3(e,n,a){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const d=r[o],h=n[d];if(h){const g=e[d],p=g===void 0||h(g,d,e);if(p!==!0)throw new ft("option "+d+" must be "+p,ft.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ft("Unknown option "+d,ft.ERR_BAD_OPTION)}}const wh={assertOptions:a3,validators:sf},sr=wh.validators;let Fl=class{constructor(n){this.defaults=n||{},this.interceptors={request:new R1,response:new R1}}async request(n,a){try{return await this._request(n,a)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const d=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(n,a){typeof n=="string"?(a=a||{},a.url=n):a=n||{},a=ql(this.defaults,a);const{transitional:r,paramsSerializer:o,headers:d}=a;r!==void 0&&wh.assertOptions(r,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),o!=null&&(Ne.isFunction(o)?a.paramsSerializer={serialize:o}:wh.assertOptions(o,{encode:sr.function,serialize:sr.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),wh.assertOptions(a,{baseUrl:sr.spelling("baseURL"),withXsrfToken:sr.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let h=d&&Ne.merge(d.common,d[a.method]);d&&Ne.forEach(["delete","get","head","post","put","patch","common"],C=>{delete d[C]}),a.headers=$a.concat(h,d);const g=[];let p=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(p=p&&N.synchronous,g.unshift(N.fulfilled,N.rejected))});const f=[];this.interceptors.response.forEach(function(N){f.push(N.fulfilled,N.rejected)});let v,j=0,S;if(!p){const C=[B1.bind(this),void 0];for(C.unshift(...g),C.push(...f),S=C.length,v=Promise.resolve(a);j<S;)v=v.then(C[j++],C[j++]);return v}S=g.length;let T=a;for(j=0;j<S;){const C=g[j++],N=g[j++];try{T=C(T)}catch(k){N.call(this,k);break}}try{v=B1.call(this,T)}catch(C){return Promise.reject(C)}for(j=0,S=f.length;j<S;)v=v.then(f[j++],f[j++]);return v}getUri(n){n=ql(this.defaults,n);const a=MN(n.baseURL,n.url,n.allowAbsoluteUrls);return SN(a,n.params,n.paramsSerializer)}};Ne.forEach(["delete","get","head","options"],function(n){Fl.prototype[n]=function(a,r){return this.request(ql(r||{},{method:n,url:a,data:(r||{}).data}))}});Ne.forEach(["post","put","patch"],function(n){function a(r){return function(d,h,g){return this.request(ql(g||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:h}))}}Fl.prototype[n]=a(),Fl.prototype[n+"Form"]=a(!0)});let s3=class LN{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(d){a=d});const r=this;this.promise.then(o=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](o);r._listeners=null}),this.promise.then=o=>{let d;const h=new Promise(g=>{r.subscribe(g),d=g}).then(o);return h.cancel=function(){r.unsubscribe(d)},h},n(function(d,h,g){r.reason||(r.reason=new bc(d,h,g),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const n=new AbortController,a=r=>{n.abort(r)};return this.subscribe(a),n.signal.unsubscribe=()=>this.unsubscribe(a),n.signal}static source(){let n;return{token:new LN(function(o){n=o}),cancel:n}}};function r3(e){return function(a){return e.apply(null,a)}}function i3(e){return Ne.isObject(e)&&e.isAxiosError===!0}const kx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kx).forEach(([e,n])=>{kx[n]=e});function zN(e){const n=new Fl(e),a=hN(Fl.prototype.request,n);return Ne.extend(a,Fl.prototype,n,{allOwnKeys:!0}),Ne.extend(a,n,null,{allOwnKeys:!0}),a.create=function(o){return zN(ql(e,o))},a}const zn=zN(ju);zn.Axios=Fl;zn.CanceledError=bc;zn.CancelToken=s3;zn.isCancel=TN;zn.VERSION=ON;zn.toFormData=nf;zn.AxiosError=ft;zn.Cancel=zn.CanceledError;zn.all=function(n){return Promise.all(n)};zn.spread=r3;zn.isAxiosError=i3;zn.mergeConfig=ql;zn.AxiosHeaders=$a;zn.formToJSON=e=>kN(Ne.isHTMLForm(e)?new FormData(e):e);zn.getAdapter=PN.getAdapter;zn.HttpStatusCode=kx;zn.default=zn;const{Axios:PB,AxiosError:OB,CanceledError:LB,isCancel:zB,CancelToken:IB,VERSION:BB,all:$B,Cancel:FB,isAxiosError:UB,spread:HB,toFormData:qB,AxiosHeaders:YB,HttpStatusCode:VB,formToJSON:ZB,getAdapter:KB,mergeConfig:WB}=zn,l3={},o3=(()=>{const e=l3?.VITE_API_BASE_URL;return e&&e.trim().length>0?e:typeof window<"u"&&window.location?`${window.location.origin}`:""})(),je=zn.create({baseURL:o3,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});je.interceptors.request.use(e=>{const n=localStorage.getItem("token");return n&&(e.headers.Authorization=`Bearer ${n}`),e.url?.includes("/availability/bulk")&&(console.log("=== API REQUEST DEBUG ==="),console.log("URL:",e.url),console.log("Method:",e.method),console.log("Headers:",e.headers),console.log("Data:",e.data),console.log("=== END REQUEST DEBUG ===")),e},e=>Promise.reject(e));let Fg=!1,Tx=[];const F1=(e,n=null)=>{Tx.forEach(({resolve:a,reject:r})=>{e?r(e):a(n)}),Tx=[]};je.interceptors.response.use(e=>e,async e=>{const n=e.config;if(e.response?.status===401&&!n._retry){if(Fg)return new Promise((r,o)=>{Tx.push({resolve:r,reject:o})}).then(()=>je(n)).catch(r=>Promise.reject(r));n._retry=!0,Fg=!0;const a=localStorage.getItem("refreshToken");if(a)try{const r=await je.post("/api/common/auth/refresh-token",{refreshToken:a}),{accessToken:o,refreshToken:d}=r.data.data;return localStorage.setItem("token",o),localStorage.setItem("refreshToken",d),n.headers.Authorization=`Bearer ${o}`,F1(null,o),je(n)}catch(r){return F1(r,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login",Promise.reject(r)}finally{Fg=!1}else localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login"}return Promise.reject(e)});const Ug="/api/common/users",ac={getCurrentUser:e=>je.get(`${Ug}/current`,{params:e}).then(n=>n.data),updateProfilePicture:e=>je.put(`${Ug}/profile-picture`,e).then(n=>n.data),updateUserSettings:e=>je.put(`${Ug}/settings`,e).then(n=>n.data)},qi="/api/common/auth",eu={login:e=>je.post(`${qi}/login`,e).then(n=>n.data),refreshToken:e=>je.post(`${qi}/refresh-token`,e).then(n=>n.data),forgotPassword:e=>je.post(`${qi}/forgot-password`,e).then(n=>n.data),resetPassword:e=>je.post(`${qi}/reset-password`,e).then(n=>n.data),resendEmailVerification:e=>je.post(`${qi}/resend-email-verification`,e).then(n=>n.data),resendPasswordResetLink:e=>je.post(`${qi}/resend-password-reset`,e).then(n=>n.data),verifyEmail:e=>je.post(`${qi}/verify-email`,e).then(n=>n.data),changePassword:e=>je.post(`${qi}/change-password`,e).then(n=>n.data)},c3=()=>{const[e,n]=b.useState(null),[a,r]=b.useState(!1),[o,d]=b.useState(!0),h=is();b.useEffect(()=>{(async()=>{const T=localStorage.getItem("token"),C=localStorage.getItem("refreshToken"),N=localStorage.getItem("user");if(T&&N){const k=JSON.parse(N);try{(await ac.getCurrentUser({})).success?(n(k),r(!0)):C?await g(C):p()}catch(A){console.error("خطأ في التحقق من الهوية:",A),C?await g(C):p()}}d(!1)})()},[]);const g=async S=>{try{const T={refreshToken:S},C=await eu.refreshToken(T);if(C.success&&C.data){const N=C.data,k={id:N.userId,name:N.userName,email:N.email,role:N.role,profileImage:N.profileImage,propertyId:N.propertyId,propertyName:N.propertyName,staffId:N.staffId,settingsJson:N.settingsJson,favoritesJson:N.favoritesJson};localStorage.setItem("token",N.accessToken),localStorage.setItem("refreshToken",N.refreshToken),localStorage.setItem("user",JSON.stringify(k)),n(k),r(!0)}else p()}catch(T){console.error("خطأ في تحديث التوكن:",T),p()}},p=()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),n(null),r(!1)};return{user:e,isAuthenticated:a,isLoading:o,login:(S,T,C)=>{localStorage.setItem("token",S),localStorage.setItem("refreshToken",T),localStorage.setItem("user",JSON.stringify(C)),n(C),r(!0)},logout:()=>{p(),h("/auth/login")},updateUser:S=>{if(e){const T={...e,...S};n(T),localStorage.setItem("user",JSON.stringify(T))}}}},IN=b.createContext(void 0),d3=({children:e})=>{const n=c3();return t.jsx(IN.Provider,{value:n,children:e})},BN=()=>{const e=b.useContext(IN);if(e===void 0)throw new Error("useAuthContext يجب أن يُستخدم داخل AuthProvider");return e},j0=()=>{const[e,n]=b.useState([]),a=()=>Math.random().toString(36).substr(2,9),r=b.useCallback((v,j,S,T=5e3)=>{const C=a(),N={id:C,type:v,title:S,message:j,duration:T,isVisible:!0};n(k=>[N,...k]),T>0&&setTimeout(()=>{o(C)},T)},[]),o=b.useCallback(v=>{n(j=>j.filter(S=>S.id!==v))},[]),d=b.useCallback(()=>{n([])},[]),h=b.useCallback((v,j,S)=>{r("success",v,j,S)},[r]),g=b.useCallback((v,j,S)=>{r("error",v,j,S)},[r]),p=b.useCallback((v,j,S)=>{r("warning",v,j,S)},[r]),f=b.useCallback((v,j,S)=>{r("info",v,j,S)},[r]);return{notifications:e,showSuccess:h,showError:g,showWarning:p,showInfo:f,removeNotification:o,clearAll:d}},$N=b.createContext(void 0),u3=({children:e})=>{const n=j0();return b.useEffect(()=>{const a=je.interceptors.response.use(r=>{const o=r.data;if(o&&typeof o.success=="boolean"){if(!o.success)return n.showError(o.message||"حدث خطأ في العملية"),Promise.reject(o);o.success&&o.message&&n.showSuccess(o.message)}return r},r=>(n.showError(r.message||"خطأ في الاتصال بالخادم"),Promise.reject(r)));return()=>je.interceptors.response.eject(a)},[n]),t.jsxs($N.Provider,{value:n,children:[e,t.jsx(m3,{notifications:n.notifications,onRemove:n.removeNotification})]})},m3=({notifications:e,onRemove:n})=>e.length===0?null:t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 w-96",dir:"rtl",children:e.map(a=>t.jsx(h3,{notification:a,onRemove:n},a.id))}),h3=({notification:e,onRemove:n})=>{const a={success:"bg-green-50 border-green-300 text-green-900",error:"bg-red-50 border-red-300 text-red-900",warning:"bg-yellow-50 border-yellow-300 text-yellow-900",info:"bg-blue-50 border-blue-300 text-blue-900"},r={success:"text-green-500",error:"text-red-500",warning:"text-yellow-500",info:"text-blue-500"},o={success:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};return t.jsx("div",{className:`w-full bg-white shadow-xl rounded-xl pointer-events-auto ring-1 ring-black ring-opacity-10 overflow-hidden transform transition-all duration-300 ease-in-out ${a[e.type]}`,children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:`flex-shrink-0 ${r[e.type]}`,children:o[e.type]}),t.jsxs("div",{className:"mr-4 w-0 flex-1 pt-0.5",children:[e.title&&t.jsx("p",{className:"text-base font-semibold leading-6",children:e.title}),t.jsx("p",{className:`text-base leading-6 ${e.title?"mt-2":""}`,children:e.message})]}),t.jsx("div",{className:"mr-4 flex-shrink-0 flex",children:t.jsxs("button",{className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 p-1",onClick:()=>n(e.id),children:[t.jsx("span",{className:"sr-only",children:"إغلاق"}),t.jsx("svg",{className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})})},vc=()=>{const e=b.useContext($N);if(e===void 0)throw new Error("useNotificationContext يجب أن يُستخدم داخل NotificationProvider");return e};async function f3(){const{data:e}=await je.get("/api/admin/dashboard/stats");return e}function p3(){return zt({queryKey:["adminStats"],queryFn:f3,staleTime:60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0})}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ze.apply(null,arguments)}function Ji(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function FN(e){if(b.isValidElement(e)||!Ji(e))return e;const n={};return Object.keys(e).forEach(a=>{n[a]=FN(e[a])}),n}function hr(e,n,a={clone:!0}){const r=a.clone?ze({},e):e;return Ji(e)&&Ji(n)&&Object.keys(n).forEach(o=>{b.isValidElement(n[o])?r[o]=n[o]:Ji(n[o])&&Object.prototype.hasOwnProperty.call(e,o)&&Ji(e[o])?r[o]=hr(e[o],n[o],a):a.clone?r[o]=Ji(n[o])?FN(n[o]):n[o]:r[o]=n[o]}),r}const g3=Object.freeze(Object.defineProperty({__proto__:null,default:hr,isPlainObject:Ji},Symbol.toStringTag,{value:"Module"}));var Hg={exports:{}},qg,U1;function x3(){if(U1)return qg;U1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return qg=e,qg}var Yg,H1;function y3(){if(H1)return Yg;H1=1;var e=x3();function n(){}function a(){}return a.resetWarningCache=n,Yg=function(){function r(h,g,p,f,v,j){if(j!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function o(){return r}var d={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:a,resetWarningCache:n};return d.PropTypes=d,d},Yg}var q1;function b3(){return q1||(q1=1,Hg.exports=y3()()),Hg.exports}var v3=b3();const Jt=pu(v3);function tu(e){let n="https://mui.com/production-error/?code="+e;for(let a=1;a<arguments.length;a+=1)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified MUI error #"+e+"; visit "+n+" for the full message."}const j3=Object.freeze(Object.defineProperty({__proto__:null,default:tu},Symbol.toStringTag,{value:"Module"}));var Vg={exports:{}},Kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function w3(){if(Y1)return Kt;Y1=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),S=Symbol.for("react.view_transition"),T=Symbol.for("react.client.reference");function C(N){if(typeof N=="object"&&N!==null){var k=N.$$typeof;switch(k){case e:switch(N=N.type,N){case a:case o:case r:case p:case f:case S:return N;default:switch(N=N&&N.$$typeof,N){case h:case g:case j:case v:return N;case d:return N;default:return k}}case n:return k}}}return Kt.ContextConsumer=d,Kt.ContextProvider=h,Kt.Element=e,Kt.ForwardRef=g,Kt.Fragment=a,Kt.Lazy=j,Kt.Memo=v,Kt.Portal=n,Kt.Profiler=o,Kt.StrictMode=r,Kt.Suspense=p,Kt.SuspenseList=f,Kt.isContextConsumer=function(N){return C(N)===d},Kt.isContextProvider=function(N){return C(N)===h},Kt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Kt.isForwardRef=function(N){return C(N)===g},Kt.isFragment=function(N){return C(N)===a},Kt.isLazy=function(N){return C(N)===j},Kt.isMemo=function(N){return C(N)===v},Kt.isPortal=function(N){return C(N)===n},Kt.isProfiler=function(N){return C(N)===o},Kt.isStrictMode=function(N){return C(N)===r},Kt.isSuspense=function(N){return C(N)===p},Kt.isSuspenseList=function(N){return C(N)===f},Kt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===o||N===r||N===p||N===f||typeof N=="object"&&N!==null&&(N.$$typeof===j||N.$$typeof===v||N.$$typeof===h||N.$$typeof===d||N.$$typeof===g||N.$$typeof===T||N.getModuleId!==void 0)},Kt.typeOf=C,Kt}var V1;function N3(){return V1||(V1=1,Vg.exports=w3()),Vg.exports}var Z1=N3();const _3=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function UN(e){const n=`${e}`.match(_3);return n&&n[1]||""}function HN(e,n=""){return e.displayName||e.name||UN(e)||n}function K1(e,n,a){const r=HN(n);return e.displayName||(r!==""?`${a}(${r})`:a)}function S3(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return HN(e,"Component");if(typeof e=="object")switch(e.$$typeof){case Z1.ForwardRef:return K1(e,e.render,"ForwardRef");case Z1.Memo:return K1(e,e.type,"memo");default:return}}}const C3=Object.freeze(Object.defineProperty({__proto__:null,default:S3,getFunctionName:UN},Symbol.toStringTag,{value:"Module"}));function Ct(e){if(typeof e!="string")throw new Error(tu(7));return e.charAt(0).toUpperCase()+e.slice(1)}const k3=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"}));function T3(e,n){typeof e=="function"?e(n):e&&(e.current=n)}const qN=typeof window<"u"?b.useLayoutEffect:b.useEffect;let W1=0;function E3(e){const[n,a]=b.useState(e),r=e||n;return b.useEffect(()=>{n==null&&(W1+=1,a(`mui-${W1}`))},[n]),r}const G1=fx.useId;function M3(e){return G1!==void 0?G1():E3(e)}function YN({controlled:e,default:n,name:a,state:r="value"}){const{current:o}=b.useRef(e!==void 0),[d,h]=b.useState(n),g=o?e:d,p=b.useCallback(f=>{o||h(f)},[]);return[g,p]}function nh(e){const n=b.useRef(e);return qN(()=>{n.current=e}),b.useRef((...a)=>(0,n.current)(...a)).current}function Q1(...e){return b.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(a=>{T3(a,n)})},e)}const X1={};function R3(e,n){const a=b.useRef(X1);return a.current===X1&&(a.current=e(n)),a}const A3=[];function D3(e){b.useEffect(e,A3)}class rf{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new rf}start(n,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},n)}}function P3(){const e=R3(rf.create).current;return D3(e.disposeEffect),e}let lf=!0,Ex=!1;const O3=new rf,L3={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function z3(e){const{type:n,tagName:a}=e;return!!(a==="INPUT"&&L3[n]&&!e.readOnly||a==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function I3(e){e.metaKey||e.altKey||e.ctrlKey||(lf=!0)}function Zg(){lf=!1}function B3(){this.visibilityState==="hidden"&&Ex&&(lf=!0)}function $3(e){e.addEventListener("keydown",I3,!0),e.addEventListener("mousedown",Zg,!0),e.addEventListener("pointerdown",Zg,!0),e.addEventListener("touchstart",Zg,!0),e.addEventListener("visibilitychange",B3,!0)}function F3(e){const{target:n}=e;try{return n.matches(":focus-visible")}catch{}return lf||z3(n)}function U3(){const e=b.useCallback(o=>{o!=null&&$3(o.ownerDocument)},[]),n=b.useRef(!1);function a(){return n.current?(Ex=!0,O3.start(100,()=>{Ex=!1}),n.current=!1,!0):!1}function r(o){return F3(o)?(n.current=!0,!0):!1}return{isFocusVisibleRef:n,onFocus:r,onBlur:a,ref:e}}function nu(e,n){const a=ze({},n);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))a[r]=ze({},e[r],a[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const o=e[r]||{},d=n[r];a[r]={},!d||!Object.keys(d)?a[r]=o:!o||!Object.keys(o)?a[r]=d:(a[r]=ze({},d),Object.keys(o).forEach(h=>{a[r][h]=nu(o[h],d[h])}))}else a[r]===void 0&&(a[r]=e[r])}),a}function Jr(e,n,a=void 0){const r={};return Object.keys(e).forEach(o=>{r[o]=e[o].reduce((d,h)=>{if(h){const g=n(h);g!==""&&d.push(g),a&&a[h]&&d.push(a[h])}return d},[]).join(" ")}),r}const J1=e=>e,H3=()=>{let e=J1;return{configure(n){e=n},generate(n){return e(n)},reset(){e=J1}}},VN=H3(),q3={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xr(e,n,a="Mui"){const r=q3[n];return r?`${a}-${r}`:`${VN.generate(e)}-${n}`}function Ys(e,n,a="Mui"){const r={};return n.forEach(o=>{r[o]=xr(e,o,a)}),r}function Y3(e,n=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(e,a))}const V3=Object.freeze(Object.defineProperty({__proto__:null,default:Y3},Symbol.toStringTag,{value:"Module"}));function jn(e,n){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function ZN(e){var n,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(a=ZN(e[n]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Pn(){for(var e,n,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(n=ZN(e))&&(r&&(r+=" "),r+=n);return r}const KN=b.createContext(void 0);function Z3({value:e,children:n}){return t.jsx(KN.Provider,{value:e,children:n})}function K3(e){const{theme:n,name:a,props:r}=e;if(!n||!n.components||!n.components[a])return r;const o=n.components[a];return o.defaultProps?nu(o.defaultProps,r):!o.styleOverrides&&!o.variants?nu(o,r):r}function W3({props:e,name:n}){const a=b.useContext(KN);return K3({props:e,name:n,theme:{components:a}})}function ei(e){return W3(e)}var Dl={},Kg={exports:{}},ej;function WN(){return ej||(ej=1,function(e){function n(a){return a&&a.__esModule?a:{default:a}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Kg)),Kg.exports}var Wg={exports:{}},tj;function G3(){return tj||(tj=1,function(e){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var d in o)({}).hasOwnProperty.call(o,d)&&(a[d]=o[d])}return a},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Wg)),Wg.exports}var Gg={exports:{}},nj;function Q3(){return nj||(nj=1,function(e){function n(a,r){if(a==null)return{};var o={};for(var d in a)if({}.hasOwnProperty.call(a,d)){if(r.indexOf(d)!==-1)continue;o[d]=a[d]}return o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Gg)),Gg.exports}function X3(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function J3(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var eT=function(){function e(a){var r=this;this._insertTag=function(o){var d;r.tags.length===0?r.insertionPoint?d=r.insertionPoint.nextSibling:r.prepend?d=r.container.firstChild:d=r.before:d=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,d),r.tags.push(o)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(r){r.forEach(this._insertTag)},n.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(J3(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var d=X3(o);try{d.insertRule(r,d.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},n.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},e}(),va="-ms-",Dh="-moz-",Ot="-webkit-",GN="comm",w0="rule",N0="decl",tT="@import",QN="@keyframes",nT="@layer",aT=Math.abs,of=String.fromCharCode,sT=Object.assign;function rT(e,n){return pa(e,0)^45?(((n<<2^pa(e,0))<<2^pa(e,1))<<2^pa(e,2))<<2^pa(e,3):0}function XN(e){return e.trim()}function iT(e,n){return(e=n.exec(e))?e[0]:e}function Lt(e,n,a){return e.replace(n,a)}function Mx(e,n){return e.indexOf(n)}function pa(e,n){return e.charCodeAt(n)|0}function au(e,n,a){return e.slice(n,a)}function lr(e){return e.length}function _0(e){return e.length}function ah(e,n){return n.push(e),e}function lT(e,n){return e.map(n).join("")}var cf=1,oc=1,JN=0,Fa=0,Vn=0,jc="";function df(e,n,a,r,o,d,h){return{value:e,root:n,parent:a,type:r,props:o,children:d,line:cf,column:oc,length:h,return:""}}function Ad(e,n){return sT(df("",null,null,"",null,null,0),e,{length:-e.length},n)}function oT(){return Vn}function cT(){return Vn=Fa>0?pa(jc,--Fa):0,oc--,Vn===10&&(oc=1,cf--),Vn}function rs(){return Vn=Fa<JN?pa(jc,Fa++):0,oc++,Vn===10&&(oc=1,cf++),Vn}function fr(){return pa(jc,Fa)}function Nh(){return Fa}function wu(e,n){return au(jc,e,n)}function su(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function e2(e){return cf=oc=1,JN=lr(jc=e),Fa=0,[]}function t2(e){return jc="",e}function _h(e){return XN(wu(Fa-1,Rx(e===91?e+2:e===40?e+1:e)))}function dT(e){for(;(Vn=fr())&&Vn<33;)rs();return su(e)>2||su(Vn)>3?"":" "}function uT(e,n){for(;--n&&rs()&&!(Vn<48||Vn>102||Vn>57&&Vn<65||Vn>70&&Vn<97););return wu(e,Nh()+(n<6&&fr()==32&&rs()==32))}function Rx(e){for(;rs();)switch(Vn){case e:return Fa;case 34:case 39:e!==34&&e!==39&&Rx(Vn);break;case 40:e===41&&Rx(e);break;case 92:rs();break}return Fa}function mT(e,n){for(;rs()&&e+Vn!==57;)if(e+Vn===84&&fr()===47)break;return"/*"+wu(n,Fa-1)+"*"+of(e===47?e:rs())}function hT(e){for(;!su(fr());)rs();return wu(e,Fa)}function fT(e){return t2(Sh("",null,null,null,[""],e=e2(e),0,[0],e))}function Sh(e,n,a,r,o,d,h,g,p){for(var f=0,v=0,j=h,S=0,T=0,C=0,N=1,k=1,A=1,D=0,O="",F=o,R=d,H=r,E=O;k;)switch(C=D,D=rs()){case 40:if(C!=108&&pa(E,j-1)==58){Mx(E+=Lt(_h(D),"&","&\f"),"&\f")!=-1&&(A=-1);break}case 34:case 39:case 91:E+=_h(D);break;case 9:case 10:case 13:case 32:E+=dT(C);break;case 92:E+=uT(Nh()-1,7);continue;case 47:switch(fr()){case 42:case 47:ah(pT(mT(rs(),Nh()),n,a),p);break;default:E+="/"}break;case 123*N:g[f++]=lr(E)*A;case 125*N:case 59:case 0:switch(D){case 0:case 125:k=0;case 59+v:A==-1&&(E=Lt(E,/\f/g,"")),T>0&&lr(E)-j&&ah(T>32?sj(E+";",r,a,j-1):sj(Lt(E," ","")+";",r,a,j-2),p);break;case 59:E+=";";default:if(ah(H=aj(E,n,a,f,v,o,g,O,F=[],R=[],j),d),D===123)if(v===0)Sh(E,n,H,H,F,d,j,g,R);else switch(S===99&&pa(E,3)===110?100:S){case 100:case 108:case 109:case 115:Sh(e,H,H,r&&ah(aj(e,H,H,0,0,o,g,O,o,F=[],j),R),o,R,j,g,r?F:R);break;default:Sh(E,H,H,H,[""],R,0,g,R)}}f=v=T=0,N=A=1,O=E="",j=h;break;case 58:j=1+lr(E),T=C;default:if(N<1){if(D==123)--N;else if(D==125&&N++==0&&cT()==125)continue}switch(E+=of(D),D*N){case 38:A=v>0?1:(E+="\f",-1);break;case 44:g[f++]=(lr(E)-1)*A,A=1;break;case 64:fr()===45&&(E+=_h(rs())),S=fr(),v=j=lr(O=E+=hT(Nh())),D++;break;case 45:C===45&&lr(E)==2&&(N=0)}}return d}function aj(e,n,a,r,o,d,h,g,p,f,v){for(var j=o-1,S=o===0?d:[""],T=_0(S),C=0,N=0,k=0;C<r;++C)for(var A=0,D=au(e,j+1,j=aT(N=h[C])),O=e;A<T;++A)(O=XN(N>0?S[A]+" "+D:Lt(D,/&\f/g,S[A])))&&(p[k++]=O);return df(e,n,a,o===0?w0:g,p,f,v)}function pT(e,n,a){return df(e,n,a,GN,of(oT()),au(e,2,-2),0)}function sj(e,n,a,r){return df(e,n,a,N0,au(e,0,r),au(e,r+1,-1),r)}function sc(e,n){for(var a="",r=_0(e),o=0;o<r;o++)a+=n(e[o],o,e,n)||"";return a}function gT(e,n,a,r){switch(e.type){case nT:if(e.children.length)break;case tT:case N0:return e.return=e.return||e.value;case GN:return"";case QN:return e.return=e.value+"{"+sc(e.children,r)+"}";case w0:e.value=e.props.join(",")}return lr(a=sc(e.children,r))?e.return=e.value+"{"+a+"}":""}function xT(e){var n=_0(e);return function(a,r,o,d){for(var h="",g=0;g<n;g++)h+=e[g](a,r,o,d)||"";return h}}function yT(e){return function(n){n.root||(n=n.return)&&e(n)}}function n2(e){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=e(a)),n[a]}}var bT=function(n,a,r){for(var o=0,d=0;o=d,d=fr(),o===38&&d===12&&(a[r]=1),!su(d);)rs();return wu(n,Fa)},vT=function(n,a){var r=-1,o=44;do switch(su(o)){case 0:o===38&&fr()===12&&(a[r]=1),n[r]+=bT(Fa-1,a,r);break;case 2:n[r]+=_h(o);break;case 4:if(o===44){n[++r]=fr()===58?"&\f":"",a[r]=n[r].length;break}default:n[r]+=of(o)}while(o=rs());return n},jT=function(n,a){return t2(vT(e2(n),a))},rj=new WeakMap,wT=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,r=n.parent,o=n.column===r.column&&n.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!rj.get(r))&&!o){rj.set(n,!0);for(var d=[],h=jT(a,d),g=r.props,p=0,f=0;p<h.length;p++)for(var v=0;v<g.length;v++,f++)n.props[f]=d[p]?h[p].replace(/&\f/g,g[v]):g[v]+" "+h[p]}}},NT=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function a2(e,n){switch(rT(e,n)){case 5103:return Ot+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ot+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ot+e+Dh+e+va+e+e;case 6828:case 4268:return Ot+e+va+e+e;case 6165:return Ot+e+va+"flex-"+e+e;case 5187:return Ot+e+Lt(e,/(\w+).+(:[^]+)/,Ot+"box-$1$2"+va+"flex-$1$2")+e;case 5443:return Ot+e+va+"flex-item-"+Lt(e,/flex-|-self/,"")+e;case 4675:return Ot+e+va+"flex-line-pack"+Lt(e,/align-content|flex-|-self/,"")+e;case 5548:return Ot+e+va+Lt(e,"shrink","negative")+e;case 5292:return Ot+e+va+Lt(e,"basis","preferred-size")+e;case 6060:return Ot+"box-"+Lt(e,"-grow","")+Ot+e+va+Lt(e,"grow","positive")+e;case 4554:return Ot+Lt(e,/([^-])(transform)/g,"$1"+Ot+"$2")+e;case 6187:return Lt(Lt(Lt(e,/(zoom-|grab)/,Ot+"$1"),/(image-set)/,Ot+"$1"),e,"")+e;case 5495:case 3959:return Lt(e,/(image-set\([^]*)/,Ot+"$1$`$1");case 4968:return Lt(Lt(e,/(.+:)(flex-)?(.*)/,Ot+"box-pack:$3"+va+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ot+e+e;case 4095:case 3583:case 4068:case 2532:return Lt(e,/(.+)-inline(.+)/,Ot+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lr(e)-1-n>6)switch(pa(e,n+1)){case 109:if(pa(e,n+4)!==45)break;case 102:return Lt(e,/(.+:)(.+)-([^]+)/,"$1"+Ot+"$2-$3$1"+Dh+(pa(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~Mx(e,"stretch")?a2(Lt(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(pa(e,n+1)!==115)break;case 6444:switch(pa(e,lr(e)-3-(~Mx(e,"!important")&&10))){case 107:return Lt(e,":",":"+Ot)+e;case 101:return Lt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ot+(pa(e,14)===45?"inline-":"")+"box$3$1"+Ot+"$2$3$1"+va+"$2box$3")+e}break;case 5936:switch(pa(e,n+11)){case 114:return Ot+e+va+Lt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ot+e+va+Lt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ot+e+va+Lt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ot+e+va+e+e}return e}var _T=function(n,a,r,o){if(n.length>-1&&!n.return)switch(n.type){case N0:n.return=a2(n.value,n.length);break;case QN:return sc([Ad(n,{value:Lt(n.value,"@","@"+Ot)})],o);case w0:if(n.length)return lT(n.props,function(d){switch(iT(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sc([Ad(n,{props:[Lt(d,/:(read-\w+)/,":"+Dh+"$1")]})],o);case"::placeholder":return sc([Ad(n,{props:[Lt(d,/:(plac\w+)/,":"+Ot+"input-$1")]}),Ad(n,{props:[Lt(d,/:(plac\w+)/,":"+Dh+"$1")]}),Ad(n,{props:[Lt(d,/:(plac\w+)/,va+"input-$1")]})],o)}return""})}},ST=[_T],s2=function(n){var a=n.key;if(a==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(N){var k=N.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var o=n.stylisPlugins||ST,d={},h,g=[];h=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var k=N.getAttribute("data-emotion").split(" "),A=1;A<k.length;A++)d[k[A]]=!0;g.push(N)});var p,f=[wT,NT];{var v,j=[gT,yT(function(N){v.insert(N)})],S=xT(f.concat(o,j)),T=function(k){return sc(fT(k),S)};p=function(k,A,D,O){v=D,T(k?k+"{"+A.styles+"}":A.styles),O&&(C.inserted[A.name]=!0)}}var C={key:a,sheet:new eT({key:a,container:h,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:d,registered:{},insert:p};return C.sheet.hydrate(g),C},Qg={exports:{}},Bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ij;function CT(){if(ij)return Bt;ij=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,d=e?Symbol.for("react.profiler"):60114,h=e?Symbol.for("react.provider"):60109,g=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,v=e?Symbol.for("react.forward_ref"):60112,j=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,C=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,A=e?Symbol.for("react.responder"):60118,D=e?Symbol.for("react.scope"):60119;function O(R){if(typeof R=="object"&&R!==null){var H=R.$$typeof;switch(H){case n:switch(R=R.type,R){case p:case f:case r:case d:case o:case j:return R;default:switch(R=R&&R.$$typeof,R){case g:case v:case C:case T:case h:return R;default:return H}}case a:return H}}}function F(R){return O(R)===f}return Bt.AsyncMode=p,Bt.ConcurrentMode=f,Bt.ContextConsumer=g,Bt.ContextProvider=h,Bt.Element=n,Bt.ForwardRef=v,Bt.Fragment=r,Bt.Lazy=C,Bt.Memo=T,Bt.Portal=a,Bt.Profiler=d,Bt.StrictMode=o,Bt.Suspense=j,Bt.isAsyncMode=function(R){return F(R)||O(R)===p},Bt.isConcurrentMode=F,Bt.isContextConsumer=function(R){return O(R)===g},Bt.isContextProvider=function(R){return O(R)===h},Bt.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===n},Bt.isForwardRef=function(R){return O(R)===v},Bt.isFragment=function(R){return O(R)===r},Bt.isLazy=function(R){return O(R)===C},Bt.isMemo=function(R){return O(R)===T},Bt.isPortal=function(R){return O(R)===a},Bt.isProfiler=function(R){return O(R)===d},Bt.isStrictMode=function(R){return O(R)===o},Bt.isSuspense=function(R){return O(R)===j},Bt.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===r||R===f||R===d||R===o||R===j||R===S||typeof R=="object"&&R!==null&&(R.$$typeof===C||R.$$typeof===T||R.$$typeof===h||R.$$typeof===g||R.$$typeof===v||R.$$typeof===k||R.$$typeof===A||R.$$typeof===D||R.$$typeof===N)},Bt.typeOf=O,Bt}var lj;function kT(){return lj||(lj=1,Qg.exports=CT()),Qg.exports}var Xg,oj;function TT(){if(oj)return Xg;oj=1;var e=kT(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[e.ForwardRef]=r,d[e.Memo]=o;function h(C){return e.isMemo(C)?o:d[C.$$typeof]||n}var g=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,j=Object.getPrototypeOf,S=Object.prototype;function T(C,N,k){if(typeof N!="string"){if(S){var A=j(N);A&&A!==S&&T(C,A,k)}var D=p(N);f&&(D=D.concat(f(N)));for(var O=h(C),F=h(N),R=0;R<D.length;++R){var H=D[R];if(!a[H]&&!(k&&k[H])&&!(F&&F[H])&&!(O&&O[H])){var E=v(N,H);try{g(C,H,E)}catch{}}}}return C}return Xg=T,Xg}TT();var ET=!0;function r2(e,n,a){var r="";return a.split(" ").forEach(function(o){e[o]!==void 0?n.push(e[o]+";"):o&&(r+=o+" ")}),r}var S0=function(n,a,r){var o=n.key+"-"+a.name;(r===!1||ET===!1)&&n.registered[o]===void 0&&(n.registered[o]=a.styles)},C0=function(n,a,r){S0(n,a,r);var o=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var d=a;do n.insert(a===d?"."+o:"",d,n.sheet,!0),d=d.next;while(d!==void 0)}};function MT(e){for(var n=0,a,r=0,o=e.length;o>=4;++r,o-=4)a=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(o){case 3:n^=(e.charCodeAt(r+2)&255)<<16;case 2:n^=(e.charCodeAt(r+1)&255)<<8;case 1:n^=e.charCodeAt(r)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var RT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},AT=/[A-Z]|^ms/g,DT=/_EMO_([^_]+?)_([^]*?)_EMO_/g,i2=function(n){return n.charCodeAt(1)===45},cj=function(n){return n!=null&&typeof n!="boolean"},Jg=n2(function(e){return i2(e)?e:e.replace(AT,"-$&").toLowerCase()}),dj=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(DT,function(r,o,d){return or={name:o,styles:d,next:or},o})}return RT[n]!==1&&!i2(n)&&typeof a=="number"&&a!==0?a+"px":a};function ru(e,n,a){if(a==null)return"";var r=a;if(r.__emotion_styles!==void 0)return r;switch(typeof a){case"boolean":return"";case"object":{var o=a;if(o.anim===1)return or={name:o.name,styles:o.styles,next:or},o.name;var d=a;if(d.styles!==void 0){var h=d.next;if(h!==void 0)for(;h!==void 0;)or={name:h.name,styles:h.styles,next:or},h=h.next;var g=d.styles+";";return g}return PT(e,n,a)}case"function":{if(e!==void 0){var p=or,f=a(e);return or=p,ru(e,n,f)}break}}var v=a;if(n==null)return v;var j=n[v];return j!==void 0?j:v}function PT(e,n,a){var r="";if(Array.isArray(a))for(var o=0;o<a.length;o++)r+=ru(e,n,a[o])+";";else for(var d in a){var h=a[d];if(typeof h!="object"){var g=h;n!=null&&n[g]!==void 0?r+=d+"{"+n[g]+"}":cj(g)&&(r+=Jg(d)+":"+dj(d,g)+";")}else if(Array.isArray(h)&&typeof h[0]=="string"&&(n==null||n[h[0]]===void 0))for(var p=0;p<h.length;p++)cj(h[p])&&(r+=Jg(d)+":"+dj(d,h[p])+";");else{var f=ru(e,n,h);switch(d){case"animation":case"animationName":{r+=Jg(d)+":"+f+";";break}default:r+=d+"{"+f+"}"}}}return r}var uj=/label:\s*([^\s;{]+)\s*(;|$)/g,or;function Nu(e,n,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";or=void 0;var d=e[0];if(d==null||d.raw===void 0)r=!1,o+=ru(a,n,d);else{var h=d;o+=h[0]}for(var g=1;g<e.length;g++)if(o+=ru(a,n,e[g]),r){var p=d;o+=p[g]}uj.lastIndex=0;for(var f="",v;(v=uj.exec(o))!==null;)f+="-"+v[1];var j=MT(o)+f;return{name:j,styles:o,next:or}}var OT=function(n){return n()},l2=fx.useInsertionEffect?fx.useInsertionEffect:!1,o2=l2||OT,mj=l2||b.useLayoutEffect,c2=b.createContext(typeof HTMLElement<"u"?s2({key:"css"}):null),LT=c2.Provider,k0=function(n){return b.forwardRef(function(a,r){var o=b.useContext(c2);return n(a,o,r)})},wc=b.createContext({}),T0={}.hasOwnProperty,Ax="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zT=function(n,a){var r={};for(var o in a)T0.call(a,o)&&(r[o]=a[o]);return r[Ax]=n,r},IT=function(n){var a=n.cache,r=n.serialized,o=n.isStringTag;return S0(a,r,o),o2(function(){return C0(a,r,o)}),null},BT=k0(function(e,n,a){var r=e.css;typeof r=="string"&&n.registered[r]!==void 0&&(r=n.registered[r]);var o=e[Ax],d=[r],h="";typeof e.className=="string"?h=r2(n.registered,d,e.className):e.className!=null&&(h=e.className+" ");var g=Nu(d,void 0,b.useContext(wc));h+=n.key+"-"+g.name;var p={};for(var f in e)T0.call(e,f)&&f!=="css"&&f!==Ax&&(p[f]=e[f]);return p.className=h,a&&(p.ref=a),b.createElement(b.Fragment,null,b.createElement(IT,{cache:n,serialized:g,isStringTag:typeof o=="string"}),b.createElement(o,p))}),$T=BT,hj=function(n,a){var r=arguments;if(a==null||!T0.call(a,"css"))return b.createElement.apply(void 0,r);var o=r.length,d=new Array(o);d[0]=$T,d[1]=zT(n,a);for(var h=2;h<o;h++)d[h]=r[h];return b.createElement.apply(null,d)};(function(e){var n;n||(n=e.JSX||(e.JSX={}))})(hj||(hj={}));var FT=k0(function(e,n){var a=e.styles,r=Nu([a],void 0,b.useContext(wc)),o=b.useRef();return mj(function(){var d=n.key+"-global",h=new n.sheet.constructor({key:d,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),g=!1,p=document.querySelector('style[data-emotion="'+d+" "+r.name+'"]');return n.sheet.tags.length&&(h.before=n.sheet.tags[0]),p!==null&&(g=!0,p.setAttribute("data-emotion",d),h.hydrate([p])),o.current=[h,g],function(){h.flush()}},[n]),mj(function(){var d=o.current,h=d[0],g=d[1];if(g){d[1]=!1;return}if(r.next!==void 0&&C0(n,r.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}n.insert("",r,h,!1)},[n,r.name]),null});function uf(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return Nu(n)}function Nc(){var e=uf.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var UT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,HT=n2(function(e){return UT.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),qT=HT,YT=function(n){return n!=="theme"},fj=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?qT:YT},pj=function(n,a,r){var o;if(a){var d=a.shouldForwardProp;o=n.__emotion_forwardProp&&d?function(h){return n.__emotion_forwardProp(h)&&d(h)}:d}return typeof o!="function"&&r&&(o=n.__emotion_forwardProp),o},VT=function(n){var a=n.cache,r=n.serialized,o=n.isStringTag;return S0(a,r,o),o2(function(){return C0(a,r,o)}),null},ZT=function e(n,a){var r=n.__emotion_real===n,o=r&&n.__emotion_base||n,d,h;a!==void 0&&(d=a.label,h=a.target);var g=pj(n,a,r),p=g||fj(o),f=!p("as");return function(){var v=arguments,j=r&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(d!==void 0&&j.push("label:"+d+";"),v[0]==null||v[0].raw===void 0)j.push.apply(j,v);else{var S=v[0];j.push(S[0]);for(var T=v.length,C=1;C<T;C++)j.push(v[C],S[C])}var N=k0(function(k,A,D){var O=f&&k.as||o,F="",R=[],H=k;if(k.theme==null){H={};for(var E in k)H[E]=k[E];H.theme=b.useContext(wc)}typeof k.className=="string"?F=r2(A.registered,R,k.className):k.className!=null&&(F=k.className+" ");var z=Nu(j.concat(R),A.registered,H);F+=A.key+"-"+z.name,h!==void 0&&(F+=" "+h);var Z=f&&g===void 0?fj(O):p,U={};for(var V in k)f&&V==="as"||Z(V)&&(U[V]=k[V]);return U.className=F,D&&(U.ref=D),b.createElement(b.Fragment,null,b.createElement(VT,{cache:A,serialized:z,isStringTag:typeof O=="string"}),b.createElement(O,U))});return N.displayName=d!==void 0?d:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",N.defaultProps=n.defaultProps,N.__emotion_real=N,N.__emotion_base=o,N.__emotion_styles=j,N.__emotion_forwardProp=g,Object.defineProperty(N,"toString",{value:function(){return"."+h}}),N.withComponent=function(k,A){var D=e(k,ze({},a,A,{shouldForwardProp:pj(N,A,!0)}));return D.apply(void 0,j)},N}},KT=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Dx=ZT.bind(null);KT.forEach(function(e){Dx[e]=Dx(e)});function WT(e,n){const a=s2({key:"css",prepend:e});if(n){const r=a.insert;a.insert=(...o)=>(o[1].styles.match(/^@layer\s+[^{]*$/)||(o[1].styles=`@layer mui {${o[1].styles}}`),r(...o))}return a}const ex=new Map;function GT(e){const{injectFirst:n,enableCssLayer:a,children:r}=e,o=b.useMemo(()=>{const d=`${n}-${a}`;if(typeof document=="object"&&ex.has(d))return ex.get(d);const h=WT(n,a);return ex.set(d,h),h},[n,a]);return n||a?t.jsx(LT,{value:o,children:r}):r}function QT(e){return e==null||Object.keys(e).length===0}function d2(e){const{styles:n,defaultTheme:a={}}=e,r=typeof n=="function"?o=>n(QT(o)?a:o):n;return t.jsx(FT,{styles:r})}function u2(e,n){return Dx(e,n)}const XT=(e,n)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=n(e.__emotion_styles))},gj=[];function m2(e){return gj[0]=e,Nu(gj)}const JT=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:d2,StyledEngineProvider:GT,ThemeContext:wc,css:uf,default:u2,internal_processStyles:XT,internal_serializeStyles:m2,keyframes:Nc},Symbol.toStringTag,{value:"Module"})),eE=nl(JT),tE=nl(g3),nE=nl(k3),aE=nl(C3),sE=["values","unit","step"],rE=e=>{const n=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return n.sort((a,r)=>a.val-r.val),n.reduce((a,r)=>ze({},a,{[r.key]:r.val}),{})};function h2(e){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:r=5}=e,o=jn(e,sE),d=rE(n),h=Object.keys(d);function g(S){return`@media (min-width:${typeof n[S]=="number"?n[S]:S}${a})`}function p(S){return`@media (max-width:${(typeof n[S]=="number"?n[S]:S)-r/100}${a})`}function f(S,T){const C=h.indexOf(T);return`@media (min-width:${typeof n[S]=="number"?n[S]:S}${a}) and (max-width:${(C!==-1&&typeof n[h[C]]=="number"?n[h[C]]:T)-r/100}${a})`}function v(S){return h.indexOf(S)+1<h.length?f(S,h[h.indexOf(S)+1]):g(S)}function j(S){const T=h.indexOf(S);return T===0?g(h[1]):T===h.length-1?p(h[T]):f(S,h[h.indexOf(S)+1]).replace("@media","@media not all and")}return ze({keys:h,values:d,up:g,down:p,between:f,only:v,not:j,unit:a},o)}const iE={borderRadius:4};function qd(e,n){return n?hr(e,n,{clone:!1}):e}const E0={xs:0,sm:600,md:900,lg:1200,xl:1536},xj={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${E0[e]}px)`};function Gr(e,n,a){const r=e.theme||{};if(Array.isArray(n)){const d=r.breakpoints||xj;return n.reduce((h,g,p)=>(h[d.up(d.keys[p])]=a(n[p]),h),{})}if(typeof n=="object"){const d=r.breakpoints||xj;return Object.keys(n).reduce((h,g)=>{if(Object.keys(d.values||E0).indexOf(g)!==-1){const p=d.up(g);h[p]=a(n[g],g)}else{const p=g;h[p]=n[p]}return h},{})}return a(n)}function lE(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,o)=>{const d=e.up(o);return r[d]={},r},{}))||{}}function yj(e,n){return e.reduce((a,r)=>{const o=a[r];return(!o||Object.keys(o).length===0)&&delete a[r],a},n)}function mf(e,n,a=!0){if(!n||typeof n!="string")return null;if(e&&e.vars&&a){const r=`vars.${n}`.split(".").reduce((o,d)=>o&&o[d]?o[d]:null,e);if(r!=null)return r}return n.split(".").reduce((r,o)=>r&&r[o]!=null?r[o]:null,e)}function Ph(e,n,a,r=a){let o;return typeof e=="function"?o=e(a):Array.isArray(e)?o=e[a]||r:o=mf(e,a)||r,n&&(o=n(o,r,e)),o}function Bn(e){const{prop:n,cssProperty:a=e.prop,themeKey:r,transform:o}=e,d=h=>{if(h[n]==null)return null;const g=h[n],p=h.theme,f=mf(p,r)||{};return Gr(h,g,j=>{let S=Ph(f,o,j);return j===S&&typeof j=="string"&&(S=Ph(f,o,`${n}${j==="default"?"":Ct(j)}`,j)),a===!1?S:{[a]:S}})};return d.propTypes={},d.filterProps=[n],d}function oE(e){const n={};return a=>(n[a]===void 0&&(n[a]=e(a)),n[a])}const cE={m:"margin",p:"padding"},dE={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},bj={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},uE=oE(e=>{if(e.length>2)if(bj[e])e=bj[e];else return[e];const[n,a]=e.split(""),r=cE[n],o=dE[a]||"";return Array.isArray(o)?o.map(d=>r+d):[r+o]}),M0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],R0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...M0,...R0];function _u(e,n,a,r){var o;const d=(o=mf(e,n,!1))!=null?o:a;return typeof d=="number"?h=>typeof h=="string"?h:d*h:Array.isArray(d)?h=>typeof h=="string"?h:d[h]:typeof d=="function"?d:()=>{}}function f2(e){return _u(e,"spacing",8)}function Su(e,n){if(typeof n=="string"||n==null)return n;const a=Math.abs(n),r=e(a);return n>=0?r:typeof r=="number"?-r:`-${r}`}function mE(e,n){return a=>e.reduce((r,o)=>(r[o]=Su(n,a),r),{})}function hE(e,n,a,r){if(n.indexOf(a)===-1)return null;const o=uE(a),d=mE(o,r),h=e[a];return Gr(e,h,d)}function p2(e,n){const a=f2(e.theme);return Object.keys(e).map(r=>hE(e,n,r,a)).reduce(qd,{})}function Cn(e){return p2(e,M0)}Cn.propTypes={};Cn.filterProps=M0;function kn(e){return p2(e,R0)}kn.propTypes={};kn.filterProps=R0;function fE(e=8){if(e.mui)return e;const n=f2({spacing:e}),a=(...r)=>(r.length===0?[1]:r).map(d=>{const h=n(d);return typeof h=="number"?`${h}px`:h}).join(" ");return a.mui=!0,a}function hf(...e){const n=e.reduce((r,o)=>(o.filterProps.forEach(d=>{r[d]=o}),r),{}),a=r=>Object.keys(r).reduce((o,d)=>n[d]?qd(o,n[d](r)):o,{});return a.propTypes={},a.filterProps=e.reduce((r,o)=>r.concat(o.filterProps),[]),a}function _s(e){return typeof e!="number"?e:`${e}px solid`}function ks(e,n){return Bn({prop:e,themeKey:"borders",transform:n})}const pE=ks("border",_s),gE=ks("borderTop",_s),xE=ks("borderRight",_s),yE=ks("borderBottom",_s),bE=ks("borderLeft",_s),vE=ks("borderColor"),jE=ks("borderTopColor"),wE=ks("borderRightColor"),NE=ks("borderBottomColor"),_E=ks("borderLeftColor"),SE=ks("outline",_s),CE=ks("outlineColor"),ff=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const n=_u(e.theme,"shape.borderRadius",4),a=r=>({borderRadius:Su(n,r)});return Gr(e,e.borderRadius,a)}return null};ff.propTypes={};ff.filterProps=["borderRadius"];hf(pE,gE,xE,yE,bE,vE,jE,wE,NE,_E,ff,SE,CE);const pf=e=>{if(e.gap!==void 0&&e.gap!==null){const n=_u(e.theme,"spacing",8),a=r=>({gap:Su(n,r)});return Gr(e,e.gap,a)}return null};pf.propTypes={};pf.filterProps=["gap"];const gf=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const n=_u(e.theme,"spacing",8),a=r=>({columnGap:Su(n,r)});return Gr(e,e.columnGap,a)}return null};gf.propTypes={};gf.filterProps=["columnGap"];const xf=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const n=_u(e.theme,"spacing",8),a=r=>({rowGap:Su(n,r)});return Gr(e,e.rowGap,a)}return null};xf.propTypes={};xf.filterProps=["rowGap"];const kE=Bn({prop:"gridColumn"}),TE=Bn({prop:"gridRow"}),EE=Bn({prop:"gridAutoFlow"}),ME=Bn({prop:"gridAutoColumns"}),RE=Bn({prop:"gridAutoRows"}),AE=Bn({prop:"gridTemplateColumns"}),DE=Bn({prop:"gridTemplateRows"}),PE=Bn({prop:"gridTemplateAreas"}),OE=Bn({prop:"gridArea"});hf(pf,gf,xf,kE,TE,EE,ME,RE,AE,DE,PE,OE);function rc(e,n){return n==="grey"?n:e}const LE=Bn({prop:"color",themeKey:"palette",transform:rc}),zE=Bn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rc}),IE=Bn({prop:"backgroundColor",themeKey:"palette",transform:rc});hf(LE,zE,IE);function ns(e){return e<=1&&e!==0?`${e*100}%`:e}const BE=Bn({prop:"width",transform:ns}),A0=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const n=a=>{var r,o;const d=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[a])||E0[a];return d?((o=e.theme)==null||(o=o.breakpoints)==null?void 0:o.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:ns(a)}};return Gr(e,e.maxWidth,n)}return null};A0.filterProps=["maxWidth"];const $E=Bn({prop:"minWidth",transform:ns}),FE=Bn({prop:"height",transform:ns}),UE=Bn({prop:"maxHeight",transform:ns}),HE=Bn({prop:"minHeight",transform:ns});Bn({prop:"size",cssProperty:"width",transform:ns});Bn({prop:"size",cssProperty:"height",transform:ns});const qE=Bn({prop:"boxSizing"});hf(BE,A0,$E,FE,UE,HE,qE);const Cu={border:{themeKey:"borders",transform:_s},borderTop:{themeKey:"borders",transform:_s},borderRight:{themeKey:"borders",transform:_s},borderBottom:{themeKey:"borders",transform:_s},borderLeft:{themeKey:"borders",transform:_s},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_s},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ff},color:{themeKey:"palette",transform:rc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rc},backgroundColor:{themeKey:"palette",transform:rc},p:{style:kn},pt:{style:kn},pr:{style:kn},pb:{style:kn},pl:{style:kn},px:{style:kn},py:{style:kn},padding:{style:kn},paddingTop:{style:kn},paddingRight:{style:kn},paddingBottom:{style:kn},paddingLeft:{style:kn},paddingX:{style:kn},paddingY:{style:kn},paddingInline:{style:kn},paddingInlineStart:{style:kn},paddingInlineEnd:{style:kn},paddingBlock:{style:kn},paddingBlockStart:{style:kn},paddingBlockEnd:{style:kn},m:{style:Cn},mt:{style:Cn},mr:{style:Cn},mb:{style:Cn},ml:{style:Cn},mx:{style:Cn},my:{style:Cn},margin:{style:Cn},marginTop:{style:Cn},marginRight:{style:Cn},marginBottom:{style:Cn},marginLeft:{style:Cn},marginX:{style:Cn},marginY:{style:Cn},marginInline:{style:Cn},marginInlineStart:{style:Cn},marginInlineEnd:{style:Cn},marginBlock:{style:Cn},marginBlockStart:{style:Cn},marginBlockEnd:{style:Cn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:pf},rowGap:{style:xf},columnGap:{style:gf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ns},maxWidth:{style:A0},minWidth:{transform:ns},height:{transform:ns},maxHeight:{transform:ns},minHeight:{transform:ns},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function YE(...e){const n=e.reduce((r,o)=>r.concat(Object.keys(o)),[]),a=new Set(n);return e.every(r=>a.size===Object.keys(r).length)}function VE(e,n){return typeof e=="function"?e(n):e}function g2(){function e(a,r,o,d){const h={[a]:r,theme:o},g=d[a];if(!g)return{[a]:r};const{cssProperty:p=a,themeKey:f,transform:v,style:j}=g;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[a]:r};const S=mf(o,f)||{};return j?j(h):Gr(h,r,C=>{let N=Ph(S,v,C);return C===N&&typeof C=="string"&&(N=Ph(S,v,`${a}${C==="default"?"":Ct(C)}`,C)),p===!1?N:{[p]:N}})}function n(a){var r;const{sx:o,theme:d={},nested:h}=a||{};if(!o)return null;const g=(r=d.unstable_sxConfig)!=null?r:Cu;function p(f){let v=f;if(typeof f=="function")v=f(d);else if(typeof f!="object")return f;if(!v)return null;const j=lE(d.breakpoints),S=Object.keys(j);let T=j;return Object.keys(v).forEach(C=>{const N=VE(v[C],d);if(N!=null)if(typeof N=="object")if(g[C])T=qd(T,e(C,N,d,g));else{const k=Gr({theme:d},N,A=>({[C]:A}));YE(k,N)?T[C]=n({sx:N,theme:d,nested:!0}):T=qd(T,k)}else T=qd(T,e(C,N,d,g))}),!h&&d.modularCssLayers?{"@layer sx":yj(S,T)}:yj(S,T)}return Array.isArray(o)?o.map(p):p(o)}return n}const ku=g2();ku.filterProps=["sx"];function x2(e,n){const a=this;return a.vars&&typeof a.getColorSchemeSelector=="function"?{[a.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:n}:a.palette.mode===e?n:{}}const ZE=["breakpoints","palette","spacing","shape"];function D0(e={},...n){const{breakpoints:a={},palette:r={},spacing:o,shape:d={}}=e,h=jn(e,ZE),g=h2(a),p=fE(o);let f=hr({breakpoints:g,direction:"ltr",components:{},palette:ze({mode:"light"},r),spacing:p,shape:ze({},iE,d)},h);return f.applyStyles=x2,f=n.reduce((v,j)=>hr(v,j),f),f.unstable_sxConfig=ze({},Cu,h?.unstable_sxConfig),f.unstable_sx=function(j){return ku({sx:j,theme:this})},f}const KE=Object.freeze(Object.defineProperty({__proto__:null,default:D0,private_createBreakpoints:h2,unstable_applyStyles:x2},Symbol.toStringTag,{value:"Module"})),WE=nl(KE),GE=["sx"],QE=e=>{var n,a;const r={systemProps:{},otherProps:{}},o=(n=e==null||(a=e.theme)==null?void 0:a.unstable_sxConfig)!=null?n:Cu;return Object.keys(e).forEach(d=>{o[d]?r.systemProps[d]=e[d]:r.otherProps[d]=e[d]}),r};function P0(e){const{sx:n}=e,a=jn(e,GE),{systemProps:r,otherProps:o}=QE(a);let d;return Array.isArray(n)?d=[r,...n]:typeof n=="function"?d=(...h)=>{const g=n(...h);return Ji(g)?ze({},r,g):r}:d=ze({},r,n),ze({},o,{sx:d})}const XE=Object.freeze(Object.defineProperty({__proto__:null,default:ku,extendSxProp:P0,unstable_createStyleFunctionSx:g2,unstable_defaultSxConfig:Cu},Symbol.toStringTag,{value:"Module"})),JE=nl(XE);var vj;function eM(){if(vj)return Dl;vj=1;var e=WN();Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.default=R,Dl.shouldForwardProp=C,Dl.systemDefaultTheme=void 0;var n=e(G3()),a=e(Q3()),r=j(eE),o=tE;e(nE),e(aE);var d=e(WE),h=e(JE);const g=["ownerState"],p=["variants"],f=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function v(H){if(typeof WeakMap!="function")return null;var E=new WeakMap,z=new WeakMap;return(v=function(Z){return Z?z:E})(H)}function j(H,E){if(H&&H.__esModule)return H;if(H===null||typeof H!="object"&&typeof H!="function")return{default:H};var z=v(E);if(z&&z.has(H))return z.get(H);var Z={__proto__:null},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in H)if(V!=="default"&&Object.prototype.hasOwnProperty.call(H,V)){var X=U?Object.getOwnPropertyDescriptor(H,V):null;X&&(X.get||X.set)?Object.defineProperty(Z,V,X):Z[V]=H[V]}return Z.default=H,z&&z.set(H,Z),Z}function S(H){return Object.keys(H).length===0}function T(H){return typeof H=="string"&&H.charCodeAt(0)>96}function C(H){return H!=="ownerState"&&H!=="theme"&&H!=="sx"&&H!=="as"}function N(H,E){return E&&H&&typeof H=="object"&&H.styles&&!H.styles.startsWith("@layer")&&(H.styles=`@layer ${E}{${String(H.styles)}}`),H}const k=Dl.systemDefaultTheme=(0,d.default)(),A=H=>H&&H.charAt(0).toLowerCase()+H.slice(1);function D({defaultTheme:H,theme:E,themeId:z}){return S(E)?H:E[z]||E}function O(H){return H?(E,z)=>z[H]:null}function F(H,E,z){let{ownerState:Z}=E,U=(0,a.default)(E,g);const V=typeof H=="function"?H((0,n.default)({ownerState:Z},U)):H;if(Array.isArray(V))return V.flatMap(X=>F(X,(0,n.default)({ownerState:Z},U),z));if(V&&typeof V=="object"&&Array.isArray(V.variants)){const{variants:X=[]}=V;let B=(0,a.default)(V,p);return X.forEach(te=>{let G=!0;if(typeof te.props=="function"?G=te.props((0,n.default)({ownerState:Z},U,Z)):Object.keys(te.props).forEach(J=>{Z?.[J]!==te.props[J]&&U[J]!==te.props[J]&&(G=!1)}),G){Array.isArray(B)||(B=[B]);const J=typeof te.style=="function"?te.style((0,n.default)({ownerState:Z},U,Z)):te.style;B.push(z?N((0,r.internal_serializeStyles)(J),z):J)}}),B}return z?N((0,r.internal_serializeStyles)(V),z):V}function R(H={}){const{themeId:E,defaultTheme:z=k,rootShouldForwardProp:Z=C,slotShouldForwardProp:U=C}=H,V=X=>(0,h.default)((0,n.default)({},X,{theme:D((0,n.default)({},X,{defaultTheme:z,themeId:E}))}));return V.__mui_systemSx=!0,(X,W={})=>{(0,r.internal_processStyles)(X,Pe=>Pe.filter(ie=>!(ie!=null&&ie.__mui_systemSx)));const{name:B,slot:te,skipVariantsResolver:G,skipSx:J,overridesResolver:q=O(A(te))}=W,K=(0,a.default)(W,f),I=B&&B.startsWith("Mui")||te?"components":"custom",se=G!==void 0?G:te&&te!=="Root"&&te!=="root"||!1,ne=J||!1;let ae,ee=C;te==="Root"||te==="root"?ee=Z:te?ee=U:T(X)&&(ee=void 0);const le=(0,r.default)(X,(0,n.default)({shouldForwardProp:ee,label:ae},K)),me=Pe=>typeof Pe=="function"&&Pe.__emotion_real!==Pe||(0,o.isPlainObject)(Pe)?ie=>{const Q=D({theme:ie.theme,defaultTheme:z,themeId:E});return F(Pe,(0,n.default)({},ie,{theme:Q}),Q.modularCssLayers?I:void 0)}:Pe,Re=(Pe,...ie)=>{let Q=me(Pe);const we=ie?ie.map(me):[];B&&q&&we.push(Qe=>{const it=D((0,n.default)({},Qe,{defaultTheme:z,themeId:E}));if(!it.components||!it.components[B]||!it.components[B].styleOverrides)return null;const Ce=it.components[B].styleOverrides,Fe={};return Object.entries(Ce).forEach(([Nt,_t])=>{Fe[Nt]=F(_t,(0,n.default)({},Qe,{theme:it}),it.modularCssLayers?"theme":void 0)}),q(Qe,Fe)}),B&&!se&&we.push(Qe=>{var it;const Ce=D((0,n.default)({},Qe,{defaultTheme:z,themeId:E})),Fe=Ce==null||(it=Ce.components)==null||(it=it[B])==null?void 0:it.variants;return F({variants:Fe},(0,n.default)({},Qe,{theme:Ce}),Ce.modularCssLayers?"theme":void 0)}),ne||we.push(V);const Be=we.length-ie.length;if(Array.isArray(Pe)&&Be>0){const Qe=new Array(Be).fill("");Q=[...Pe,...Qe],Q.raw=[...Pe.raw,...Qe]}const nt=le(Q,...we);return X.muiName&&(nt.muiName=X.muiName),nt};return le.withConfig&&(Re.withConfig=le.withConfig),Re}}return Dl}var tM=eM();const nM=pu(tM);function aM(e,n){return ze({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},n)}var xn={};const sM=nl(j3),rM=nl(V3);var jj;function iM(){if(jj)return xn;jj=1;var e=WN();Object.defineProperty(xn,"__esModule",{value:!0}),xn.alpha=C,xn.blend=H,xn.colorChannel=void 0,xn.darken=k,xn.decomposeColor=h,xn.emphasize=F,xn.getContrastRatio=T,xn.getLuminance=S,xn.hexToRgb=o,xn.hslToRgb=j,xn.lighten=D,xn.private_safeAlpha=N,xn.private_safeColorChannel=void 0,xn.private_safeDarken=A,xn.private_safeEmphasize=R,xn.private_safeLighten=O,xn.recomposeColor=f,xn.rgbToHex=v;var n=e(sM),a=e(rM);function r(E,z=0,Z=1){return(0,a.default)(E,z,Z)}function o(E){E=E.slice(1);const z=new RegExp(`.{1,${E.length>=6?2:1}}`,"g");let Z=E.match(z);return Z&&Z[0].length===1&&(Z=Z.map(U=>U+U)),Z?`rgb${Z.length===4?"a":""}(${Z.map((U,V)=>V<3?parseInt(U,16):Math.round(parseInt(U,16)/255*1e3)/1e3).join(", ")})`:""}function d(E){const z=E.toString(16);return z.length===1?`0${z}`:z}function h(E){if(E.type)return E;if(E.charAt(0)==="#")return h(o(E));const z=E.indexOf("("),Z=E.substring(0,z);if(["rgb","rgba","hsl","hsla","color"].indexOf(Z)===-1)throw new Error((0,n.default)(9,E));let U=E.substring(z+1,E.length-1),V;if(Z==="color"){if(U=U.split(" "),V=U.shift(),U.length===4&&U[3].charAt(0)==="/"&&(U[3]=U[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(V)===-1)throw new Error((0,n.default)(10,V))}else U=U.split(",");return U=U.map(X=>parseFloat(X)),{type:Z,values:U,colorSpace:V}}const g=E=>{const z=h(E);return z.values.slice(0,3).map((Z,U)=>z.type.indexOf("hsl")!==-1&&U!==0?`${Z}%`:Z).join(" ")};xn.colorChannel=g;const p=(E,z)=>{try{return g(E)}catch{return E}};xn.private_safeColorChannel=p;function f(E){const{type:z,colorSpace:Z}=E;let{values:U}=E;return z.indexOf("rgb")!==-1?U=U.map((V,X)=>X<3?parseInt(V,10):V):z.indexOf("hsl")!==-1&&(U[1]=`${U[1]}%`,U[2]=`${U[2]}%`),z.indexOf("color")!==-1?U=`${Z} ${U.join(" ")}`:U=`${U.join(", ")}`,`${z}(${U})`}function v(E){if(E.indexOf("#")===0)return E;const{values:z}=h(E);return`#${z.map((Z,U)=>d(U===3?Math.round(255*Z):Z)).join("")}`}function j(E){E=h(E);const{values:z}=E,Z=z[0],U=z[1]/100,V=z[2]/100,X=U*Math.min(V,1-V),W=(G,J=(G+Z/30)%12)=>V-X*Math.max(Math.min(J-3,9-J,1),-1);let B="rgb";const te=[Math.round(W(0)*255),Math.round(W(8)*255),Math.round(W(4)*255)];return E.type==="hsla"&&(B+="a",te.push(z[3])),f({type:B,values:te})}function S(E){E=h(E);let z=E.type==="hsl"||E.type==="hsla"?h(j(E)).values:E.values;return z=z.map(Z=>(E.type!=="color"&&(Z/=255),Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4)),Number((.2126*z[0]+.7152*z[1]+.0722*z[2]).toFixed(3))}function T(E,z){const Z=S(E),U=S(z);return(Math.max(Z,U)+.05)/(Math.min(Z,U)+.05)}function C(E,z){return E=h(E),z=r(z),(E.type==="rgb"||E.type==="hsl")&&(E.type+="a"),E.type==="color"?E.values[3]=`/${z}`:E.values[3]=z,f(E)}function N(E,z,Z){try{return C(E,z)}catch{return E}}function k(E,z){if(E=h(E),z=r(z),E.type.indexOf("hsl")!==-1)E.values[2]*=1-z;else if(E.type.indexOf("rgb")!==-1||E.type.indexOf("color")!==-1)for(let Z=0;Z<3;Z+=1)E.values[Z]*=1-z;return f(E)}function A(E,z,Z){try{return k(E,z)}catch{return E}}function D(E,z){if(E=h(E),z=r(z),E.type.indexOf("hsl")!==-1)E.values[2]+=(100-E.values[2])*z;else if(E.type.indexOf("rgb")!==-1)for(let Z=0;Z<3;Z+=1)E.values[Z]+=(255-E.values[Z])*z;else if(E.type.indexOf("color")!==-1)for(let Z=0;Z<3;Z+=1)E.values[Z]+=(1-E.values[Z])*z;return f(E)}function O(E,z,Z){try{return D(E,z)}catch{return E}}function F(E,z=.15){return S(E)>.5?k(E,z):D(E,z)}function R(E,z,Z){try{return F(E,z)}catch{return E}}function H(E,z,Z,U=1){const V=(te,G)=>Math.round((te**(1/U)*(1-Z)+G**(1/U)*Z)**U),X=h(E),W=h(z),B=[V(X.values[0],W.values[0]),V(X.values[1],W.values[1]),V(X.values[2],W.values[2])];return f({type:"rgb",values:B})}return xn}var za=iM();const iu={black:"#000",white:"#fff"},lM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$o={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Fo={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Dd={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Uo={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ho={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},qo={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},oM=["mode","contrastThreshold","tonalOffset"],wj={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:iu.white,default:iu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},tx={text:{primary:iu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:iu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Nj(e,n,a,r){const o=r.light||r,d=r.dark||r*1.5;e[n]||(e.hasOwnProperty(a)?e[n]=e[a]:n==="light"?e.light=za.lighten(e.main,o):n==="dark"&&(e.dark=za.darken(e.main,d)))}function cM(e="light"){return e==="dark"?{main:Uo[200],light:Uo[50],dark:Uo[400]}:{main:Uo[700],light:Uo[400],dark:Uo[800]}}function dM(e="light"){return e==="dark"?{main:$o[200],light:$o[50],dark:$o[400]}:{main:$o[500],light:$o[300],dark:$o[700]}}function uM(e="light"){return e==="dark"?{main:Fo[500],light:Fo[300],dark:Fo[700]}:{main:Fo[700],light:Fo[400],dark:Fo[800]}}function mM(e="light"){return e==="dark"?{main:Ho[400],light:Ho[300],dark:Ho[700]}:{main:Ho[700],light:Ho[500],dark:Ho[900]}}function hM(e="light"){return e==="dark"?{main:qo[400],light:qo[300],dark:qo[700]}:{main:qo[800],light:qo[500],dark:qo[900]}}function fM(e="light"){return e==="dark"?{main:Dd[400],light:Dd[300],dark:Dd[700]}:{main:"#ed6c02",light:Dd[500],dark:Dd[900]}}function pM(e){const{mode:n="light",contrastThreshold:a=3,tonalOffset:r=.2}=e,o=jn(e,oM),d=e.primary||cM(n),h=e.secondary||dM(n),g=e.error||uM(n),p=e.info||mM(n),f=e.success||hM(n),v=e.warning||fM(n);function j(N){return za.getContrastRatio(N,tx.text.primary)>=a?tx.text.primary:wj.text.primary}const S=({color:N,name:k,mainShade:A=500,lightShade:D=300,darkShade:O=700})=>{if(N=ze({},N),!N.main&&N[A]&&(N.main=N[A]),!N.hasOwnProperty("main"))throw new Error(tu(11,k?` (${k})`:"",A));if(typeof N.main!="string")throw new Error(tu(12,k?` (${k})`:"",JSON.stringify(N.main)));return Nj(N,"light",D,r),Nj(N,"dark",O,r),N.contrastText||(N.contrastText=j(N.main)),N},T={dark:tx,light:wj};return hr(ze({common:ze({},iu),mode:n,primary:S({color:d,name:"primary"}),secondary:S({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:g,name:"error"}),warning:S({color:v,name:"warning"}),info:S({color:p,name:"info"}),success:S({color:f,name:"success"}),grey:lM,contrastThreshold:a,getContrastText:j,augmentColor:S,tonalOffset:r},T[n]),o)}const gM=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function xM(e){return Math.round(e*1e5)/1e5}const _j={textTransform:"uppercase"},Sj='"Roboto", "Helvetica", "Arial", sans-serif';function yM(e,n){const a=typeof n=="function"?n(e):n,{fontFamily:r=Sj,fontSize:o=14,fontWeightLight:d=300,fontWeightRegular:h=400,fontWeightMedium:g=500,fontWeightBold:p=700,htmlFontSize:f=16,allVariants:v,pxToRem:j}=a,S=jn(a,gM),T=o/14,C=j||(A=>`${A/f*T}rem`),N=(A,D,O,F,R)=>ze({fontFamily:r,fontWeight:A,fontSize:C(D),lineHeight:O},r===Sj?{letterSpacing:`${xM(F/D)}em`}:{},R,v),k={h1:N(d,96,1.167,-1.5),h2:N(d,60,1.2,-.5),h3:N(h,48,1.167,0),h4:N(h,34,1.235,.25),h5:N(h,24,1.334,0),h6:N(g,20,1.6,.15),subtitle1:N(h,16,1.75,.15),subtitle2:N(g,14,1.57,.1),body1:N(h,16,1.5,.15),body2:N(h,14,1.43,.15),button:N(g,14,1.75,.4,_j),caption:N(h,12,1.66,.4),overline:N(h,12,2.66,1,_j),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return hr(ze({htmlFontSize:f,pxToRem:C,fontFamily:r,fontSize:o,fontWeightLight:d,fontWeightRegular:h,fontWeightMedium:g,fontWeightBold:p},k),S,{clone:!1})}const bM=.2,vM=.14,jM=.12;function dn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${bM})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${vM})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${jM})`].join(",")}const wM=["none",dn(0,2,1,-1,0,1,1,0,0,1,3,0),dn(0,3,1,-2,0,2,2,0,0,1,5,0),dn(0,3,3,-2,0,3,4,0,0,1,8,0),dn(0,2,4,-1,0,4,5,0,0,1,10,0),dn(0,3,5,-1,0,5,8,0,0,1,14,0),dn(0,3,5,-1,0,6,10,0,0,1,18,0),dn(0,4,5,-2,0,7,10,1,0,2,16,1),dn(0,5,5,-3,0,8,10,1,0,3,14,2),dn(0,5,6,-3,0,9,12,1,0,3,16,2),dn(0,6,6,-3,0,10,14,1,0,4,18,3),dn(0,6,7,-4,0,11,15,1,0,4,20,3),dn(0,7,8,-4,0,12,17,2,0,5,22,4),dn(0,7,8,-4,0,13,19,2,0,5,24,4),dn(0,7,9,-4,0,14,21,2,0,5,26,4),dn(0,8,9,-5,0,15,22,2,0,6,28,5),dn(0,8,10,-5,0,16,24,2,0,6,30,5),dn(0,8,11,-5,0,17,26,2,0,6,32,5),dn(0,9,11,-5,0,18,28,2,0,7,34,6),dn(0,9,12,-6,0,19,29,2,0,7,36,6),dn(0,10,13,-6,0,20,31,3,0,8,38,7),dn(0,10,13,-6,0,21,33,3,0,8,40,7),dn(0,10,14,-6,0,22,35,3,0,8,42,7),dn(0,11,14,-7,0,23,36,3,0,9,44,8),dn(0,11,15,-7,0,24,38,3,0,9,46,8)],NM=["duration","easing","delay"],_M={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},SM={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Cj(e){return`${Math.round(e)}ms`}function CM(e){if(!e)return 0;const n=e/36;return Math.round((4+15*n**.25+n/5)*10)}function kM(e){const n=ze({},_M,e.easing),a=ze({},SM,e.duration);return ze({getAutoHeightDuration:CM,create:(o=["all"],d={})=>{const{duration:h=a.standard,easing:g=n.easeInOut,delay:p=0}=d;return jn(d,NM),(Array.isArray(o)?o:[o]).map(f=>`${f} ${typeof h=="string"?h:Cj(h)} ${g} ${typeof p=="string"?p:Cj(p)}`).join(",")}},e,{easing:n,duration:a})}const TM={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},EM=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function O0(e={},...n){const{mixins:a={},palette:r={},transitions:o={},typography:d={}}=e,h=jn(e,EM);if(e.vars&&e.generateCssVars===void 0)throw new Error(tu(18));const g=pM(r),p=D0(e);let f=hr(p,{mixins:aM(p.breakpoints,a),palette:g,shadows:wM.slice(),typography:yM(g,d),transitions:kM(o),zIndex:ze({},TM)});return f=hr(f,h),f=n.reduce((v,j)=>hr(v,j),f),f.unstable_sxConfig=ze({},Cu,h?.unstable_sxConfig),f.unstable_sx=function(j){return ku({sx:j,theme:this})},f}const y2=O0(),lu="$$material";function MM(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const yf=e=>MM(e)&&e!=="classes",Xn=nM({themeId:lu,defaultTheme:y2,rootShouldForwardProp:yf});function RM(e){return xr("MuiSvgIcon",e)}Ys("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const AM=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],DM=e=>{const{color:n,fontSize:a,classes:r}=e,o={root:["root",n!=="inherit"&&`color${Ct(n)}`,`fontSize${Ct(a)}`]};return Jr(o,RM,r)},PM=Xn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.color!=="inherit"&&n[`color${Ct(a.color)}`],n[`fontSize${Ct(a.fontSize)}`]]}})(({theme:e,ownerState:n})=>{var a,r,o,d,h,g,p,f,v,j,S,T,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(a=e.transitions)==null||(r=a.create)==null?void 0:r.call(a,"fill",{duration:(o=e.transitions)==null||(o=o.duration)==null?void 0:o.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(h=d.pxToRem)==null?void 0:h.call(d,20))||"1.25rem",medium:((g=e.typography)==null||(p=g.pxToRem)==null?void 0:p.call(g,24))||"1.5rem",large:((f=e.typography)==null||(v=f.pxToRem)==null?void 0:v.call(f,35))||"2.1875rem"}[n.fontSize],color:(j=(S=(e.vars||e).palette)==null||(S=S[n.color])==null?void 0:S.main)!=null?j:{action:(T=(e.vars||e).palette)==null||(T=T.action)==null?void 0:T.active,disabled:(C=(e.vars||e).palette)==null||(C=C.action)==null?void 0:C.disabled,inherit:void 0}[n.color]}}),Px=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiSvgIcon"}),{children:o,className:d,color:h="inherit",component:g="svg",fontSize:p="medium",htmlColor:f,inheritViewBox:v=!1,titleAccess:j,viewBox:S="0 0 24 24"}=r,T=jn(r,AM),C=b.isValidElement(o)&&o.type==="svg",N=ze({},r,{color:h,component:g,fontSize:p,instanceFontSize:n.fontSize,inheritViewBox:v,viewBox:S,hasSvgAsChild:C}),k={};v||(k.viewBox=S);const A=DM(N);return t.jsxs(PM,ze({as:g,className:Pn(A.root,d),focusable:"false",color:f,"aria-hidden":j?void 0:!0,role:j?"img":void 0,ref:a},k,T,C&&o.props,{ownerState:N,children:[C?o.props.children:o,j?t.jsx("title",{children:j}):null]}))});Px.muiName="SvgIcon";function al(e,n){function a(r,o){return t.jsx(Px,ze({"data-testid":`${n}Icon`,ref:o},r,{children:e}))}return a.muiName=Px.muiName,b.memo(b.forwardRef(a))}const OM=al(t.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),ou=({children:e})=>{const n=Hs(),a=is(),[r,o]=b.useState(!1),[d,h]=b.useState(!1),{user:g,isAuthenticated:p,isLoading:f,logout:v}=BN(),{data:j}=p3();if(f)return null;if(!p||!g)return t.jsx($l,{to:"/auth/login",replace:!0});const S=g.role==="Admin",T=g.role==="Owner",C=[{path:"/admin/dashboard",label:"لوحة التحكم",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})},{path:"/admin/users",label:"المستخدمون",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),badge:j?j.unverifiedUsers.toString():"0"},{path:"/admin/inputs",label:"إدارة المدخلات",icon:t.jsx(OM,{className:"w-5 h-5"})},{path:"/admin/properties",label:"الكيانات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),badge:j?j.unapprovedProperties.toString():"0"},{path:"/admin/property-types",label:"أنواع الكيانات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},{path:"/admin/units",label:"الوحدات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})},{path:"/admin/property-images",label:"صور الكيانات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h4l1-2h8l1 2h4v13H3V7z"}),t.jsx("circle",{cx:"12",cy:"13",r:"4"})]})},{path:"/admin/unit-images",label:"صور الوحدات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h4l1-2h8l1 2h4v13H3V7z"}),t.jsx("circle",{cx:"12",cy:"13",r:"4"})]})},{path:"/admin/amenities",label:"المرافق",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})},{path:"/admin/property-services",label:"الخدمات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5L12 12l9-4.5v9L12 21l-9-4.5v-9z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 12V3.5"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5l9 4.5 9-4.5"})]})},{path:"/admin/bookings",label:"الحجوزات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),badge:j?j.unconfirmedBookings.toString():"0"},{path:"/admin/payments",label:"المدفوعات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},{path:"/admin/reviews",label:"التقييمات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{path:"/admin/notifications",label:"الإشعارات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a6 6 0 10-12 0v3l-5 5h5m7 0v1a3 3 0 01-6 0v-1m6 0H9"})}),badge:j?j.unreadNotifications.toString():"0"},{path:"/admin/reports",label:"البلاغات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{path:"/admin/audit-logs",label:"سجلات النشاط",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{path:"/admin/settings",label:"الإعدادات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{path:"/admin/home-sections",label:"إدارة أقسام الصفحة الرئيسية",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h7v7H3V3zm11 0h7v7h-7V3zM3 14h7v7H3v-7zm11 0h7v7h-7v-7z"})})}],N=[{path:"/property-owner/dashboard",label:"لوحة التحكم",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})},{path:"/property-owner/properties",label:"كياناتي",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{path:"/property-owner/units",label:"الوحدات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})},{path:"/property-owner/bookings",label:"الحجوزات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{path:"/property-owner/staff",label:"الموظفون",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}];let k;S?k=C.filter(D=>D.label!=="صور الكيانات"&&D.label!=="صور الوحدات"):T||g?.role==="Staff"?(k=[...N],g?.propertyId&&k.push({path:`/admin/property-images/${g.propertyId}`,label:"صور الكيانات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h4l1-2h8l1 2h4v13H3V7z"}),t.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})):k=[];const A=({item:D,isActive:O})=>t.jsxs(Bs,{to:D.path,onClick:()=>h(!1),className:`
        group relative flex items-center px-4 py-3 text-sm font-medium rounded-xl
        transition-all duration-300 ease-in-out transform
        ${O?"bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-600 text-white shadow-lg scale-105":"text-gray-700 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 hover:text-indigo-600 hover:scale-102"}
        ${r?"justify-center":""}
      `,children:[t.jsxs("div",{className:`
        relative flex items-center justify-center w-6 h-6
        ${O?"text-white":"text-gray-400 group-hover:text-indigo-500"}
        transition-colors duration-300
      `,children:[D.icon,O&&t.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})]}),!r&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-3 font-medium",children:D.label}),D.badge&&t.jsx("span",{className:`
              ml-auto px-2 py-1 text-xs font-bold rounded-full
              ${O?"bg-white/20 text-white":"bg-indigo-100 text-indigo-600 group-hover:bg-indigo-200"}
              transition-colors duration-300
            `,children:D.badge})]}),O&&t.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-gradient-to-b from-white/50 to-white/20 rounded-l-full"})]});return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",dir:"rtl",children:[t.jsx("nav",{className:"fixed top-0 left-0 right-0 z-30 bg-white/80 backdrop-blur-xl border-b border-white/20 shadow-lg",children:t.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>h(!d),className:"md:hidden p-2 rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsx("button",{onClick:()=>o(!r),className:"hidden lg:block p-2 rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200 ml-3",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsxs("div",{className:"flex items-center ml-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx("span",{className:"text-white text-lg font-bold",children:"B"})}),t.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse"})]}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-blue-600 to-purple-600 bg-clip-text text-transparent",children:"BookN"}),t.jsx("p",{className:"text-xs text-gray-500",children:"نظام إدارة الحجوزات"})]})]})]}),t.jsx("div",{className:"hidden md:flex flex-1 max-w-lg mx-8",children:t.jsxs("div",{className:"relative w-full",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"بحث...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl bg-white/50 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"})]})}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors duration-200",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a6 6 0 10-12 0v3l-5 5h5m7 0v1a3 3 0 01-6 0v-1m6 0H9"})}),t.jsx("span",{className:"absolute top-1 left-1 w-3 h-3 bg-red-400 rounded-full animate-pulse"})]}),t.jsxs("button",{type:"button",onClick:()=>a("/profile"),className:"flex items-center p-2 rounded-xl hover:bg-gray-100 transition-colors duration-200",children:[g?.profileImage?t.jsx("img",{src:g.profileImage,alt:g.name,className:"w-8 h-8 rounded-xl object-cover shadow-md"}):t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:t.jsx("span",{className:"text-white text-sm font-bold",children:g?.name?.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"ml-3 hidden sm:block",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:g?.name}),t.jsx("div",{className:"text-xs text-gray-500",children:g?.role==="Admin"?"مدير النظام":"مالك كيان"})]})]}),t.jsx("div",{className:"relative",children:t.jsx("button",{type:"button",onClick:()=>a("/settings"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors duration-200",children:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),t.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-colors duration-200",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}),t.jsxs("div",{className:"pt-16 min-h-screen relative lg:flex",children:[t.jsx("aside",{className:`
          fixed right-0 top-16 bottom-0 z-20
          ${r?"w-20":"w-64"}
          bg-white/90 backdrop-blur-xl border-l border-white/20 shadow-xl
          transition-all duration-300 ease-in-out
          ${d?"translate-x-0":"translate-x-full lg:translate-x-0"}
          lg:static lg:z-auto
        `,children:t.jsxs("div",{className:"h-full px-3 py-6 overflow-y-auto",children:[t.jsx("nav",{className:"space-y-2",children:k.map(D=>{const O=n.pathname===D.path;return t.jsx(A,{item:D,isActive:O},D.path)})}),t.jsx("div",{className:"absolute bottom-6 left-0 right-0 px-3",children:t.jsx("div",{className:"border-t border-gray-200/50 pt-4",children:t.jsxs(Bs,{to:"/profile",className:"flex items-center px-4 py-3 text-sm text-gray-600 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 hover:text-indigo-600 transition-all duration-300",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),!r&&t.jsx("span",{className:"mr-3",children:"الملف الشخصي"})]})})})]})}),d&&t.jsx("div",{className:"fixed inset-0 z-10 bg-black/40 backdrop-blur-sm md:hidden",onClick:()=>h(!1)}),t.jsx("main",{className:"w-full min-h-screen transition-all duration-300 ease-in-out lg:flex-1",children:t.jsx("div",{className:"w-full h-full p-4 md:p-6",children:e})})]})]})},LM=()=>t.jsx(ou,{children:t.jsx(u0,{})}),zM=()=>t.jsx(ou,{children:t.jsx(u0,{})}),b2=({children:e,restricted:n=!1})=>{const a=localStorage.getItem("token"),r=localStorage.getItem("user");if(n&&a)try{const o=JSON.parse(r||"{}");return o.role==="Admin"?t.jsx($l,{to:"/admin/dashboard",replace:!0}):o.role==="Owner"?t.jsx($l,{to:"/property-owner/dashboard",replace:!0}):t.jsx($l,{to:"/dashboard",replace:!0})}catch(o){console.error("خطأ في تحليل بيانات المستخدم:",o),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}return t.jsx(t.Fragment,{children:e})},IM=()=>t.jsx(b2,{restricted:!0,children:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",dir:"rtl",children:t.jsxs("div",{className:"w-full max-w-md relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),t.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-gradient-to-r from-indigo-400 to-pink-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),t.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-yellow-400 to-red-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-600 rounded-3xl shadow-2xl mb-6 relative",children:[t.jsx("span",{className:"text-white text-3xl font-bold",children:"B"}),t.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-green-400 rounded-full border-4 border-white animate-pulse"})]}),t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-purple-900 bg-clip-text text-transparent mb-3",children:"BookN"}),t.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"نظام إدارة الحجوزات المتطور"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"منصة شاملة لإدارة الكيانات والحجوزات"})]}),t.jsx("div",{className:"glass-card shadow-2xl rounded-3xl px-8 py-8 border border-white/30",children:t.jsx(u0,{})}),t.jsx("div",{className:"text-center mt-6",children:t.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 BookN. جميع الحقوق محفوظة."})})]})]})})});function We(...e){return e.filter(Boolean).join(" ")}const Oh=({content:e,children:n,position:a="top",delay:r=200,className:o=""})=>{const[d,h]=b.useState(!1),[g,p]=b.useState({x:0,y:0}),f=b.useRef(null),v=b.useRef(null),j=()=>{v.current=setTimeout(()=>{h(!0),T()},r)},S=()=>{v.current&&clearTimeout(v.current),h(!1)},T=()=>{if(!f.current)return;const N=f.current.getBoundingClientRect(),k={top:{x:N.left+N.width/2,y:N.top},bottom:{x:N.left+N.width/2,y:N.bottom},left:{x:N.left,y:N.top+N.height/2},right:{x:N.right,y:N.top+N.height/2}};p(k[a])};b.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const C={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"};return t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:f,onMouseEnter:j,onMouseLeave:S,className:"inline-block",children:n}),d&&t.jsx("div",{className:We("fixed z-50 px-2 py-1 text-xs text-white bg-gray-900 rounded shadow-lg","animate-in fade-in zoom-in-95 duration-100","pointer-events-none",C[a],o),style:{left:a==="left"||a==="right"?g.x:void 0,top:a==="top"||a==="bottom"?g.y:void 0},children:e})]})},pr=({size:e="md",text:n="",center:a=!1,className:r=""})=>{const o={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},d={sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg"},h=a?"flex flex-col items-center justify-center min-h-[200px]":"flex items-center space-x-2 space-x-reverse";return t.jsxs("div",{className:`${h} ${r}`,children:[t.jsx("div",{className:`animate-spin border-2 border-gray-300 border-t-blue-600 rounded-full ${o[e]}`}),n&&t.jsx("span",{className:`text-gray-600 ${d[e]} ${a?"mt-2":""}`,children:n})]})},rt=({onClick:e,icon:n,label:a,tooltip:r,variant:o="primary",size:d="md",loading:h=!1,disabled:g=!1,className:p="",children:f,type:v="button"})=>{const j=()=>({primary:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",secondary:"bg-gray-600 hover:bg-gray-700 text-white border-gray-600",success:"bg-green-600 hover:bg-green-700 text-white border-green-600",warning:"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-600",danger:"bg-red-600 hover:bg-red-700 text-white border-red-600",info:"bg-cyan-600 hover:bg-cyan-700 text-white border-cyan-600"})[o],S=()=>({sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"})[d],T=t.jsx("button",{type:v,onClick:e,disabled:g||h,className:`
        inline-flex items-center justify-center space-x-2 space-x-reverse
        border rounded-md font-medium transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        disabled:opacity-50 disabled:cursor-not-allowed
        ${j()}
        ${S()}
        ${p}
      `,children:h?t.jsx(pr,{size:"sm"}):t.jsxs(t.Fragment,{children:[n&&t.jsx("span",{className:"text-base",children:n}),t.jsx("span",{children:a}),f]})});return r?t.jsx(Oh,{content:r,children:T}):T},BM=()=>{const e=is(),{showSuccess:n,showError:a}=vc(),{login:r}=BN(),[o,d]=b.useState({email:"",password:"",rememberMe:!1}),[h,g]=b.useState(!1),[p,f]=b.useState({}),v=Ie({mutationFn:eu.login,onSuccess:C=>{if(C.success&&C.data){const N=C.data;console.log("سسسسسسسسسسسسسسسسس");const k={id:N.userId,name:N.userName,email:N.email,role:N.role,profileImage:N.profileImage||void 0,propertyId:N.propertyId,propertyName:N.propertyName,staffId:N.staffId,settingsJson:N.settingsJson,favoritesJson:N.favoritesJson};console.log("hhhhhhhhhhhhhhhhhhhhhhhhhhhhh"),r(N.accessToken,N.refreshToken,k),console.log("hhhhhhhhhhhhhhhhhhhhhhhhhhhhh"),n("تم تسجيل الدخول بنجاح"),N.role==="Owner"?e("/owner/dashboard"):N.role==="Admin"?e("/admin/dashboard"):e("/dashboard")}else a(C.message||"فشل في تسجيل الدخول")},onError:C=>{console.log("Login error:",C),console.log("Error response:",C.response?.data),a(C.response?.data?.message||"حدث خطأ أثناء تسجيل الدخول")}}),j=()=>{const C={};return o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(C.email="البريد الإلكتروني غير صحيح"):C.email="البريد الإلكتروني مطلوب",o.password.trim()?o.password.length<6&&(C.password="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):C.password="كلمة المرور مطلوبة",f(C),Object.keys(C).length===0},S=C=>{C.preventDefault(),console.log("handleSubmit called with:",o),j()?(console.log("Form is valid, submitting..."),v.mutate(o)):console.log("Form validation failed")},T=(C,N)=>{d(k=>({...k,[C]:N})),p[C]&&f(k=>({...k,[C]:void 0}))};return t.jsxs("div",{children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"تسجيل الدخول"}),t.jsx("p",{className:"text-gray-600",children:"أدخل بياناتك للوصول إلى النظام"})]}),t.jsxs("form",{onSubmit:S,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:o.email,onChange:C=>T("email",C.target.value),placeholder:"admin@example.com",disabled:v.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${p.email?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),p.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:h?"text":"password",value:o.password,onChange:C=>T("password",C.target.value),placeholder:"كلمة المرور",disabled:v.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${p.password?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:v.isPending,children:h?"إخفاء":"إظهار"})]}),p.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.password})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:o.rememberMe,onChange:C=>T("rememberMe",C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:v.isPending}),t.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"تذكرني"})]}),t.jsx(Bs,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"نسيت كلمة المرور؟"})]}),t.jsx(rt,{type:"submit",variant:"primary",label:v.isPending?"جاري تسجيل الدخول...":"تسجيل الدخول",onClick:()=>{},className:"w-full py-3",disabled:v.isPending})]}),t.jsxs("div",{className:"mt-8 text-center space-y-4",children:[t.jsx("div",{className:"border-t border-gray-200 pt-6",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["مالك كيان جديد؟"," ",t.jsx(Bs,{to:"/auth/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"سجل الآن"})]})}),t.jsx("div",{className:"text-xs text-gray-500",children:t.jsx("p",{children:"للحصول على حساب إدارة، تواصل مع الدعم الفني"})})]})]})},$M="/api/property/users",FM={registerPropertyOwner:e=>je.post(`${$M}/register`,e).then(n=>n.data)},UM="/api/admin/property-types",HM={getAll:e=>je.get(UM,{params:e}).then(n=>n.data)};function v2(e,n){const a=b.useRef(n);b.useEffect(function(){n!==a.current&&e.attributionControl!=null&&(a.current!=null&&e.attributionControl.removeAttribution(a.current),n!=null&&e.attributionControl.addAttribution(n)),a.current=n},[e,n])}const qM=1;function YM(e){return Object.freeze({__version:qM,map:e})}function VM(e,n){return Object.freeze({...e,...n})}const L0=b.createContext(null);function z0(){const e=b.use(L0);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function ZM(e){function n(a,r){const{instance:o,context:d}=e(a).current;b.useImperativeHandle(r,()=>o);const{children:h}=a;return h==null?null:Ke.createElement(L0,{value:d},h)}return b.forwardRef(n)}function KM(e){function n(a,r){const[o,d]=b.useState(!1),{instance:h}=e(a,d).current;b.useImperativeHandle(r,()=>h),b.useEffect(function(){o&&h.update()},[h,o,a.children]);const g=h._contentNode;return g?ec.createPortal(a.children,g):null}return b.forwardRef(n)}function WM(e){function n(a,r){const{instance:o}=e(a).current;return b.useImperativeHandle(r,()=>o),null}return b.forwardRef(n)}function j2(e,n){const a=b.useRef(void 0);b.useEffect(function(){return n!=null&&e.instance.on(n),a.current=n,function(){a.current!=null&&e.instance.off(a.current),a.current=null}},[e,n])}function I0(e,n){const a=e.pane??n.pane;return a?{...e,pane:a}:e}function GM(e,n){return function(r,o){const d=z0(),h=e(I0(r,d),d);return v2(d.map,r.attribution),j2(h.current,r.eventHandlers),n(h.current,d,r,o),h}}var Ud={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var QM=Ud.exports,kj;function XM(){return kj||(kj=1,function(e,n){(function(a,r){r(n)})(QM,function(a){var r="1.9.4";function o(l){var u,x,_,M;for(x=1,_=arguments.length;x<_;x++){M=arguments[x];for(u in M)l[u]=M[u]}return l}var d=Object.create||function(){function l(){}return function(u){return l.prototype=u,new l}}();function h(l,u){var x=Array.prototype.slice;if(l.bind)return l.bind.apply(l,x.call(arguments,1));var _=x.call(arguments,2);return function(){return l.apply(u,_.length?_.concat(x.call(arguments)):arguments)}}var g=0;function p(l){return"_leaflet_id"in l||(l._leaflet_id=++g),l._leaflet_id}function f(l,u,x){var _,M,$,oe;return oe=function(){_=!1,M&&($.apply(x,M),M=!1)},$=function(){_?M=arguments:(l.apply(x,arguments),setTimeout(oe,u),_=!0)},$}function v(l,u,x){var _=u[1],M=u[0],$=_-M;return l===_&&x?l:((l-M)%$+$)%$+M}function j(){return!1}function S(l,u){if(u===!1)return l;var x=Math.pow(10,u===void 0?6:u);return Math.round(l*x)/x}function T(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function C(l){return T(l).split(/\s+/)}function N(l,u){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?d(l.options):{});for(var x in u)l.options[x]=u[x];return l.options}function k(l,u,x){var _=[];for(var M in l)_.push(encodeURIComponent(x?M.toUpperCase():M)+"="+encodeURIComponent(l[M]));return(!u||u.indexOf("?")===-1?"?":"&")+_.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(l,u){return l.replace(A,function(x,_){var M=u[_];if(M===void 0)throw new Error("No value provided for variable "+x);return typeof M=="function"&&(M=M(u)),M})}var O=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function F(l,u){for(var x=0;x<l.length;x++)if(l[x]===u)return x;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var E=0;function z(l){var u=+new Date,x=Math.max(0,16-(u-E));return E=u+x,window.setTimeout(l,x)}var Z=window.requestAnimationFrame||H("RequestAnimationFrame")||z,U=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function V(l,u,x){if(x&&Z===z)l.call(u);else return Z.call(window,h(l,u))}function X(l){l&&U.call(window,l)}var W={__proto__:null,extend:o,create:d,bind:h,get lastId(){return g},stamp:p,throttle:f,wrapNum:v,falseFn:j,formatNum:S,trim:T,splitWords:C,setOptions:N,getParamString:k,template:D,isArray:O,indexOf:F,emptyImageUrl:R,requestFn:Z,cancelFn:U,requestAnimFrame:V,cancelAnimFrame:X};function B(){}B.extend=function(l){var u=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=u.__super__=this.prototype,_=d(x);_.constructor=u,u.prototype=_;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(u[M]=this[M]);return l.statics&&o(u,l.statics),l.includes&&(te(l.includes),o.apply(null,[_].concat(l.includes))),o(_,l),delete _.statics,delete _.includes,_.options&&(_.options=x.options?d(x.options):{},o(_.options,l.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,oe=_._initHooks.length;$<oe;$++)_._initHooks[$].call(this)}},u},B.include=function(l){var u=this.prototype.options;return o(this.prototype,l),l.options&&(this.prototype.options=u,this.mergeOptions(l.options)),this},B.mergeOptions=function(l){return o(this.prototype.options,l),this},B.addInitHook=function(l){var u=Array.prototype.slice.call(arguments,1),x=typeof l=="function"?l:function(){this[l].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function te(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=O(l)?l:[l];for(var u=0;u<l.length;u++)l[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(l,u,x){if(typeof l=="object")for(var _ in l)this._on(_,l[_],u);else{l=C(l);for(var M=0,$=l.length;M<$;M++)this._on(l[M],u,x)}return this},off:function(l,u,x){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var _ in l)this._off(_,l[_],u);else{l=C(l);for(var M=arguments.length===1,$=0,oe=l.length;$<oe;$++)M?this._off(l[$]):this._off(l[$],u,x)}return this},_on:function(l,u,x,_){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(l,u,x)===!1){x===this&&(x=void 0);var M={fn:u,ctx:x};_&&(M.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(M)}},_off:function(l,u,x){var _,M,$;if(this._events&&(_=this._events[l],!!_)){if(arguments.length===1){if(this._firingCount)for(M=0,$=_.length;M<$;M++)_[M].fn=j;delete this._events[l];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var oe=this._listens(l,u,x);if(oe!==!1){var pe=_[oe];this._firingCount&&(pe.fn=j,this._events[l]=_=_.slice()),_.splice(oe,1)}}},fire:function(l,u,x){if(!this.listens(l,x))return this;var _=o({},u,{type:l,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var M=this._events[l];if(M){this._firingCount=this._firingCount+1||1;for(var $=0,oe=M.length;$<oe;$++){var pe=M[$],ve=pe.fn;pe.once&&this.off(l,ve,pe.ctx),ve.call(pe.ctx||this,_)}this._firingCount--}}return x&&this._propagateEvent(_),this},listens:function(l,u,x,_){typeof l!="string"&&console.warn('"string" type argument expected');var M=u;typeof u!="function"&&(_=!!u,M=void 0,x=void 0);var $=this._events&&this._events[l];if($&&$.length&&this._listens(l,M,x)!==!1)return!0;if(_){for(var oe in this._eventParents)if(this._eventParents[oe].listens(l,u,x,_))return!0}return!1},_listens:function(l,u,x){if(!this._events)return!1;var _=this._events[l]||[];if(!u)return!!_.length;x===this&&(x=void 0);for(var M=0,$=_.length;M<$;M++)if(_[M].fn===u&&_[M].ctx===x)return M;return!1},once:function(l,u,x){if(typeof l=="object")for(var _ in l)this._on(_,l[_],u,!0);else{l=C(l);for(var M=0,$=l.length;M<$;M++)this._on(l[M],u,x,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[p(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[p(l)],this},_propagateEvent:function(l){for(var u in this._eventParents)this._eventParents[u].fire(l.type,o({layer:l.target,propagatedFrom:l.target},l),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var J=B.extend(G);function q(l,u,x){this.x=x?Math.round(l):l,this.y=x?Math.round(u):u}var K=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(l){return this.clone()._add(I(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(I(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new q(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new q(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(l){l=I(l);var u=l.x-this.x,x=l.y-this.y;return Math.sqrt(u*u+x*x)},equals:function(l){return l=I(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=I(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function I(l,u,x){return l instanceof q?l:O(l)?new q(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new q(l.x,l.y):new q(l,u,x)}function se(l,u){if(l)for(var x=u?[l,u]:l,_=0,M=x.length;_<M;_++)this.extend(x[_])}se.prototype={extend:function(l){var u,x;if(!l)return this;if(l instanceof q||typeof l[0]=="number"||"x"in l)u=x=I(l);else if(l=ne(l),u=l.min,x=l.max,!u||!x)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=x.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(l){return I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return I(this.min.x,this.max.y)},getTopRight:function(){return I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var u,x;return typeof l[0]=="number"||l instanceof q?l=I(l):l=ne(l),l instanceof se?(u=l.min,x=l.max):u=x=l,u.x>=this.min.x&&x.x<=this.max.x&&u.y>=this.min.y&&x.y<=this.max.y},intersects:function(l){l=ne(l);var u=this.min,x=this.max,_=l.min,M=l.max,$=M.x>=u.x&&_.x<=x.x,oe=M.y>=u.y&&_.y<=x.y;return $&&oe},overlaps:function(l){l=ne(l);var u=this.min,x=this.max,_=l.min,M=l.max,$=M.x>u.x&&_.x<x.x,oe=M.y>u.y&&_.y<x.y;return $&&oe},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var u=this.min,x=this.max,_=Math.abs(u.x-x.x)*l,M=Math.abs(u.y-x.y)*l;return ne(I(u.x-_,u.y-M),I(x.x+_,x.y+M))},equals:function(l){return l?(l=ne(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function ne(l,u){return!l||l instanceof se?l:new se(l,u)}function ae(l,u){if(l)for(var x=u?[l,u]:l,_=0,M=x.length;_<M;_++)this.extend(x[_])}ae.prototype={extend:function(l){var u=this._southWest,x=this._northEast,_,M;if(l instanceof le)_=l,M=l;else if(l instanceof ae){if(_=l._southWest,M=l._northEast,!_||!M)return this}else return l?this.extend(me(l)||ee(l)):this;return!u&&!x?(this._southWest=new le(_.lat,_.lng),this._northEast=new le(M.lat,M.lng)):(u.lat=Math.min(_.lat,u.lat),u.lng=Math.min(_.lng,u.lng),x.lat=Math.max(M.lat,x.lat),x.lng=Math.max(M.lng,x.lng)),this},pad:function(l){var u=this._southWest,x=this._northEast,_=Math.abs(u.lat-x.lat)*l,M=Math.abs(u.lng-x.lng)*l;return new ae(new le(u.lat-_,u.lng-M),new le(x.lat+_,x.lng+M))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof le||"lat"in l?l=me(l):l=ee(l);var u=this._southWest,x=this._northEast,_,M;return l instanceof ae?(_=l.getSouthWest(),M=l.getNorthEast()):_=M=l,_.lat>=u.lat&&M.lat<=x.lat&&_.lng>=u.lng&&M.lng<=x.lng},intersects:function(l){l=ee(l);var u=this._southWest,x=this._northEast,_=l.getSouthWest(),M=l.getNorthEast(),$=M.lat>=u.lat&&_.lat<=x.lat,oe=M.lng>=u.lng&&_.lng<=x.lng;return $&&oe},overlaps:function(l){l=ee(l);var u=this._southWest,x=this._northEast,_=l.getSouthWest(),M=l.getNorthEast(),$=M.lat>u.lat&&_.lat<x.lat,oe=M.lng>u.lng&&_.lng<x.lng;return $&&oe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,u){return l?(l=ee(l),this._southWest.equals(l.getSouthWest(),u)&&this._northEast.equals(l.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(l,u){return l instanceof ae?l:new ae(l,u)}function le(l,u,x){if(isNaN(l)||isNaN(u))throw new Error("Invalid LatLng object: ("+l+", "+u+")");this.lat=+l,this.lng=+u,x!==void 0&&(this.alt=+x)}le.prototype={equals:function(l,u){if(!l)return!1;l=me(l);var x=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return x<=(u===void 0?1e-9:u)},toString:function(l){return"LatLng("+S(this.lat,l)+", "+S(this.lng,l)+")"},distanceTo:function(l){return Pe.distance(this,me(l))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(l){var u=180*l/40075017,x=u/Math.cos(Math.PI/180*this.lat);return ee([this.lat-u,this.lng-x],[this.lat+u,this.lng+x])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function me(l,u,x){return l instanceof le?l:O(l)&&typeof l[0]!="object"?l.length===3?new le(l[0],l[1],l[2]):l.length===2?new le(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new le(l.lat,"lng"in l?l.lng:l.lon,l.alt):u===void 0?null:new le(l,u,x)}var Re={latLngToPoint:function(l,u){var x=this.projection.project(l),_=this.scale(u);return this.transformation._transform(x,_)},pointToLatLng:function(l,u){var x=this.scale(u),_=this.transformation.untransform(l,x);return this.projection.unproject(_)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var u=this.projection.bounds,x=this.scale(l),_=this.transformation.transform(u.min,x),M=this.transformation.transform(u.max,x);return new se(_,M)},infinite:!1,wrapLatLng:function(l){var u=this.wrapLng?v(l.lng,this.wrapLng,!0):l.lng,x=this.wrapLat?v(l.lat,this.wrapLat,!0):l.lat,_=l.alt;return new le(x,u,_)},wrapLatLngBounds:function(l){var u=l.getCenter(),x=this.wrapLatLng(u),_=u.lat-x.lat,M=u.lng-x.lng;if(_===0&&M===0)return l;var $=l.getSouthWest(),oe=l.getNorthEast(),pe=new le($.lat-_,$.lng-M),ve=new le(oe.lat-_,oe.lng-M);return new ae(pe,ve)}},Pe=o({},Re,{wrapLng:[-180,180],R:6371e3,distance:function(l,u){var x=Math.PI/180,_=l.lat*x,M=u.lat*x,$=Math.sin((u.lat-l.lat)*x/2),oe=Math.sin((u.lng-l.lng)*x/2),pe=$*$+Math.cos(_)*Math.cos(M)*oe*oe,ve=2*Math.atan2(Math.sqrt(pe),Math.sqrt(1-pe));return this.R*ve}}),ie=6378137,Q={R:ie,MAX_LATITUDE:85.0511287798,project:function(l){var u=Math.PI/180,x=this.MAX_LATITUDE,_=Math.max(Math.min(x,l.lat),-x),M=Math.sin(_*u);return new q(this.R*l.lng*u,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(l){var u=180/Math.PI;return new le((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*u,l.x*u/this.R)},bounds:function(){var l=ie*Math.PI;return new se([-l,-l],[l,l])}()};function we(l,u,x,_){if(O(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=u,this._c=x,this._d=_}we.prototype={transform:function(l,u){return this._transform(l.clone(),u)},_transform:function(l,u){return u=u||1,l.x=u*(this._a*l.x+this._b),l.y=u*(this._c*l.y+this._d),l},untransform:function(l,u){return u=u||1,new q((l.x/u-this._b)/this._a,(l.y/u-this._d)/this._c)}};function Be(l,u,x,_){return new we(l,u,x,_)}var nt=o({},Pe,{code:"EPSG:3857",projection:Q,transformation:function(){var l=.5/(Math.PI*Q.R);return Be(l,.5,-l,.5)}()}),Qe=o({},nt,{code:"EPSG:900913"});function it(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Ce(l,u){var x="",_,M,$,oe,pe,ve;for(_=0,$=l.length;_<$;_++){for(pe=l[_],M=0,oe=pe.length;M<oe;M++)ve=pe[M],x+=(M?"L":"M")+ve.x+" "+ve.y;x+=u?Ve.svg?"z":"x":""}return x||"M0 0"}var Fe=document.documentElement.style,Nt="ActiveXObject"in window,_t=Nt&&!document.addEventListener,ut="msLaunchUri"in navigator&&!("documentMode"in document),ke=Un("webkit"),Oe=Un("android"),qe=Un("android 2")||Un("android 3"),Ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),He=Oe&&Un("Google")&&Ae<537&&!("AudioNode"in window),ct=!!window.opera,de=!ut&&Un("chrome"),De=Un("gecko")&&!ke&&!ct&&!Nt,Le=!de&&Un("safari"),kt=Un("phantom"),sn="OTransition"in Fe,$n=navigator.platform.indexOf("Win")===0,Fn=Nt&&"transition"in Fe,wn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!qe,rn="MozPerspective"in Fe,la=!window.L_DISABLE_3D&&(Fn||wn||rn)&&!sn&&!kt,En=typeof orientation<"u"||Un("mobile"),he=En&&ke,tt=En&&wn,re=!window.PointerEvent&&window.MSPointerEvent,Te=!!(window.PointerEvent||re),$e="ontouchstart"in window||!!window.TouchEvent,Xe=!window.L_NO_TOUCH&&($e||Te),qt=En&&ct,Rt=En&&De,Mn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Nn=function(){var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",j,u),window.removeEventListener("testPassiveEventSupport",j,u)}catch{}return l}(),oa=function(){return!!document.createElement("canvas").getContext}(),Ma=!!(document.createElementNS&&it("svg").createSVGRect),Pt=!!Ma&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gt=!Ma&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var u=l.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Qt=navigator.platform.indexOf("Mac")===0,Jn=navigator.platform.indexOf("Linux")===0;function Un(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Ve={ie:Nt,ielt9:_t,edge:ut,webkit:ke,android:Oe,android23:qe,androidStock:He,opera:ct,chrome:de,gecko:De,safari:Le,phantom:kt,opera12:sn,win:$n,ie3d:Fn,webkit3d:wn,gecko3d:rn,any3d:la,mobile:En,mobileWebkit:he,mobileWebkit3d:tt,msPointer:re,pointer:Te,touch:Xe,touchNative:$e,mobileOpera:qt,mobileGecko:Rt,retina:Mn,passiveEvents:Nn,canvas:oa,svg:Ma,vml:Gt,inlineSvg:Pt,mac:Qt,linux:Jn},Ha=Ve.msPointer?"MSPointerDown":"pointerdown",Ts=Ve.msPointer?"MSPointerMove":"pointermove",os=Ve.msPointer?"MSPointerUp":"pointerup",Xl=Ve.msPointer?"MSPointerCancel":"pointercancel",Vs={touchstart:Ha,touchmove:Ts,touchend:os,touchcancel:Xl},yr={touchstart:zu,touchmove:rl,touchend:rl,touchcancel:rl},cs={},br=!1;function Hn(l,u,x){return u==="touchstart"&&Bf(),yr[u]?(x=yr[u].bind(this,x),l.addEventListener(Vs[u],x,!1),x):(console.warn("wrong event specified:",u),j)}function Ou(l,u,x){if(!Vs[u]){console.warn("wrong event specified:",u);return}l.removeEventListener(Vs[u],x,!1)}function Lu(l){cs[l.pointerId]=l}function vr(l){cs[l.pointerId]&&(cs[l.pointerId]=l)}function jr(l){delete cs[l.pointerId]}function Bf(){br||(document.addEventListener(Ha,Lu,!0),document.addEventListener(Ts,vr,!0),document.addEventListener(os,jr,!0),document.addEventListener(Xl,jr,!0),br=!0)}function rl(l,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var x in cs)u.touches.push(cs[x]);u.changedTouches=[u],l(u)}}function zu(l,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&_n(u),rl(l,u)}function $f(l){var u={},x,_;for(_ in l)x=l[_],u[_]=x&&x.bind?x.bind(l):x;return l=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Jl=200;function eo(l,u){l.addEventListener("dblclick",u);var x=0,_;function M($){if($.detail!==1){_=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var oe=Pc($);if(!(oe.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!oe.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var pe=Date.now();pe-x<=Jl?(_++,_===2&&u($f($))):_=1,x=pe}}}return l.addEventListener("click",M),{dblclick:u,simDblclick:M}}function Es(l,u){l.removeEventListener("dblclick",u.dblclick),l.removeEventListener("click",u.simDblclick)}var il=ri(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ni=ri(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wr=ni==="webkitTransition"||ni==="OTransition"?ni+"End":"transitionend";function to(l){return typeof l=="string"?document.getElementById(l):l}function Nr(l,u){var x=l.style[u]||l.currentStyle&&l.currentStyle[u];if((!x||x==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(l,null);x=_?_[u]:null}return x==="auto"?null:x}function Tt(l,u,x){var _=document.createElement(l);return _.className=u||"",x&&x.appendChild(_),_}function en(l){var u=l.parentNode;u&&u.removeChild(l)}function ca(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function _r(l){var u=l.parentNode;u&&u.lastChild!==l&&u.appendChild(l)}function ai(l){var u=l.parentNode;u&&u.firstChild!==l&&u.insertBefore(l,u.firstChild)}function si(l,u){if(l.classList!==void 0)return l.classList.contains(u);var x=da(l);return x.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(x)}function ht(l,u){if(l.classList!==void 0)for(var x=C(u),_=0,M=x.length;_<M;_++)l.classList.add(x[_]);else if(!si(l,u)){var $=da(l);Ac(l,($?$+" ":"")+u)}}function tn(l,u){l.classList!==void 0?l.classList.remove(u):Ac(l,T((" "+da(l)+" ").replace(" "+u+" "," ")))}function Ac(l,u){l.className.baseVal===void 0?l.className=u:l.className.baseVal=u}function da(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function ga(l,u){"opacity"in l.style?l.style.opacity=u:"filter"in l.style&&Iu(l,u)}function Iu(l,u){var x=!1,_="DXImageTransform.Microsoft.Alpha";try{x=l.filters.item(_)}catch{if(u===1)return}u=Math.round(u*100),x?(x.Enabled=u!==100,x.Opacity=u):l.style.filter+=" progid:"+_+"(opacity="+u+")"}function ri(l){for(var u=document.documentElement.style,x=0;x<l.length;x++)if(l[x]in u)return l[x];return!1}function Ra(l,u,x){var _=u||new q(0,0);l.style[il]=(Ve.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(x?" scale("+x+")":"")}function fn(l,u){l._leaflet_pos=u,Ve.any3d?Ra(l,u):(l.style.left=u.x+"px",l.style.top=u.y+"px")}function Zs(l){return l._leaflet_pos||new q(0,0)}var ds,ll,no;if("onselectstart"in document)ds=function(){mt(window,"selectstart",_n)},ll=function(){At(window,"selectstart",_n)};else{var ii=ri(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ds=function(){if(ii){var l=document.documentElement.style;no=l[ii],l[ii]="none"}},ll=function(){ii&&(document.documentElement.style[ii]=no,no=void 0)}}function ol(){mt(window,"dragstart",_n)}function Dc(){At(window,"dragstart",_n)}var ao,li;function cl(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(oi(),ao=l,li=l.style.outlineStyle,l.style.outlineStyle="none",mt(window,"keydown",oi))}function oi(){ao&&(ao.style.outlineStyle=li,ao=void 0,li=void 0,At(window,"keydown",oi))}function Sr(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Ks(l){var u=l.getBoundingClientRect();return{x:u.width/l.offsetWidth||1,y:u.height/l.offsetHeight||1,boundingClientRect:u}}var Bu={__proto__:null,TRANSFORM:il,TRANSITION:ni,TRANSITION_END:wr,get:to,getStyle:Nr,create:Tt,remove:en,empty:ca,toFront:_r,toBack:ai,hasClass:si,addClass:ht,removeClass:tn,setClass:Ac,getClass:da,setOpacity:ga,testProp:ri,setTransform:Ra,setPosition:fn,getPosition:Zs,get disableTextSelection(){return ds},get enableTextSelection(){return ll},disableImageDrag:ol,enableImageDrag:Dc,preventOutline:cl,restoreOutline:oi,getSizedParentNode:Sr,getScale:Ks};function mt(l,u,x,_){if(u&&typeof u=="object")for(var M in u)Cr(l,M,u[M],x);else{u=C(u);for(var $=0,oe=u.length;$<oe;$++)Cr(l,u[$],x,_)}return this}var qa="_leaflet_events";function At(l,u,x,_){if(arguments.length===1)us(l),delete l[qa];else if(u&&typeof u=="object")for(var M in u)ms(l,M,u[M],x);else if(u=C(u),arguments.length===2)us(l,function(pe){return F(u,pe)!==-1});else for(var $=0,oe=u.length;$<oe;$++)ms(l,u[$],x,_);return this}function us(l,u){for(var x in l[qa]){var _=x.split(/\d/)[0];(!u||u(_))&&ms(l,_,null,null,x)}}var dl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cr(l,u,x,_){var M=u+p(x)+(_?"_"+p(_):"");if(l[qa]&&l[qa][M])return this;var $=function(pe){return x.call(_||l,pe||window.event)},oe=$;!Ve.touchNative&&Ve.pointer&&u.indexOf("touch")===0?$=Hn(l,u,$):Ve.touch&&u==="dblclick"?$=eo(l,$):"addEventListener"in l?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?l.addEventListener(dl[u]||u,$,Ve.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?($=function(pe){pe=pe||window.event,Tr(l,pe)&&oe(pe)},l.addEventListener(dl[u],$,!1)):l.addEventListener(u,oe,!1):l.attachEvent("on"+u,$),l[qa]=l[qa]||{},l[qa][M]=$}function ms(l,u,x,_,M){M=M||u+p(x)+(_?"_"+p(_):"");var $=l[qa]&&l[qa][M];if(!$)return this;!Ve.touchNative&&Ve.pointer&&u.indexOf("touch")===0?Ou(l,u,$):Ve.touch&&u==="dblclick"?Es(l,$):"removeEventListener"in l?l.removeEventListener(dl[u]||u,$,!1):l.detachEvent("on"+u,$),l[qa][M]=null}function Ms(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function ci(l){return Cr(l,"wheel",Ms),this}function di(l){return mt(l,"mousedown touchstart dblclick contextmenu",Ms),l._leaflet_disable_click=!0,this}function _n(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function hs(l){return _n(l),Ms(l),this}function Pc(l){if(l.composedPath)return l.composedPath();for(var u=[],x=l.target;x;)u.push(x),x=x.parentNode;return u}function ua(l,u){if(!u)return new q(l.clientX,l.clientY);var x=Ks(u),_=x.boundingClientRect;return new q((l.clientX-_.left)/x.x-u.clientLeft,(l.clientY-_.top)/x.y-u.clientTop)}var kr=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ul(l){return Ve.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/kr:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Tr(l,u){var x=u.relatedTarget;if(!x)return!0;try{for(;x&&x!==l;)x=x.parentNode}catch{return!1}return x!==l}var Ff={__proto__:null,on:mt,off:At,stopPropagation:Ms,disableScrollPropagation:ci,disableClickPropagation:di,preventDefault:_n,stop:hs,getPropagationPath:Pc,getMousePosition:ua,getWheelDelta:ul,isExternalTarget:Tr,addListener:mt,removeListener:At},so=J.extend({run:function(l,u,x,_){this.stop(),this._el=l,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Zs(l),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(l){var u=+new Date-this._startTime,x=this._duration*1e3;u<x?this._runFrame(this._easeOut(u/x),l):(this._runFrame(1),this._complete())},_runFrame:function(l,u){var x=this._startPos.add(this._offset.multiplyBy(l));u&&x._round(),fn(this._el,x),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),bt=J.extend({options:{crs:nt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,u){u=N(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(me(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ni&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mt(this._proxy,wr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,u,x){if(u=u===void 0?this._zoom:this._limitZoom(u),l=this._limitCenter(me(l),u,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=o({animate:x.animate},x.zoom),x.pan=o({animate:x.animate,duration:x.duration},x.pan));var _=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,u,x.zoom):this._tryAnimatedPan(l,x.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(l,u,x.pan&&x.pan.noMoveStart),this},setZoom:function(l,u){return this._loaded?this.setView(this.getCenter(),l,{zoom:u}):(this._zoom=l,this)},zoomIn:function(l,u){return l=l||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,u)},zoomOut:function(l,u){return l=l||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,u)},setZoomAround:function(l,u,x){var _=this.getZoomScale(u),M=this.getSize().divideBy(2),$=l instanceof q?l:this.latLngToContainerPoint(l),oe=$.subtract(M).multiplyBy(1-1/_),pe=this.containerPointToLatLng(M.add(oe));return this.setView(pe,u,{zoom:x})},_getBoundsCenterZoom:function(l,u){u=u||{},l=l.getBounds?l.getBounds():ee(l);var x=I(u.paddingTopLeft||u.padding||[0,0]),_=I(u.paddingBottomRight||u.padding||[0,0]),M=this.getBoundsZoom(l,!1,x.add(_));if(M=typeof u.maxZoom=="number"?Math.min(u.maxZoom,M):M,M===1/0)return{center:l.getCenter(),zoom:M};var $=_.subtract(x).divideBy(2),oe=this.project(l.getSouthWest(),M),pe=this.project(l.getNorthEast(),M),ve=this.unproject(oe.add(pe).divideBy(2).add($),M);return{center:ve,zoom:M}},fitBounds:function(l,u){if(l=ee(l),!l.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(l,u);return this.setView(x.center,x.zoom,u)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,u){return this.setView(l,this._zoom,{pan:u})},panBy:function(l,u){if(l=I(l).round(),u=u||{},!l.x&&!l.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new so,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){ht(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,x,u.duration||.25,u.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,u,x){if(x=x||{},x.animate===!1||!Ve.any3d)return this.setView(l,u,x);this._stop();var _=this.project(this.getCenter()),M=this.project(l),$=this.getSize(),oe=this._zoom;l=me(l),u=u===void 0?oe:u;var pe=Math.max($.x,$.y),ve=pe*this.getZoomScale(oe,u),Me=M.distanceTo(_)||1,Ue=1.42,Ye=Ue*Ue;function Ge(on){var gs=on?-1:1,Ds=on?ve:pe,Js=ve*ve-pe*pe+gs*Ye*Ye*Me*Me,Ps=2*Ds*Ye*Me,_l=Js/Ps,yo=Math.sqrt(_l*_l+1)-_l,Sl=yo<1e-9?-18:Math.log(yo);return Sl}function dt(on){return(Math.exp(on)-Math.exp(-on))/2}function nn(on){return(Math.exp(on)+Math.exp(-on))/2}function pn(on){return dt(on)/nn(on)}var ta=Ge(0);function Aa(on){return pe*(nn(ta)/nn(ta+Ue*on))}function sm(on){return pe*(nn(ta)*pn(ta+Ue*on)-dt(ta))/Ye}function rm(on){return 1-Math.pow(1-on,1.5)}var Nl=Date.now(),wi=(Ge(1)-ta)/Ue,im=x.duration?1e3*x.duration:1e3*wi*.8;function Ni(){var on=(Date.now()-Nl)/im,gs=rm(on)*wi;on<=1?(this._flyToFrame=V(Ni,this),this._move(this.unproject(_.add(M.subtract(_).multiplyBy(sm(gs)/Me)),oe),this.getScaleZoom(pe/Aa(gs),oe),{flyTo:!0})):this._move(l,u)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),Ni.call(this),this},flyToBounds:function(l,u){var x=this._getBoundsCenterZoom(l,u);return this.flyTo(x.center,x.zoom,u)},setMaxBounds:function(l){return l=ee(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var u=this.options.minZoom;return this.options.minZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var u=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,u){this._enforcingBounds=!0;var x=this.getCenter(),_=this._limitCenter(x,this._zoom,ee(l));return x.equals(_)||this.panTo(_,u),this._enforcingBounds=!1,this},panInside:function(l,u){u=u||{};var x=I(u.paddingTopLeft||u.padding||[0,0]),_=I(u.paddingBottomRight||u.padding||[0,0]),M=this.project(this.getCenter()),$=this.project(l),oe=this.getPixelBounds(),pe=ne([oe.min.add(x),oe.max.subtract(_)]),ve=pe.getSize();if(!pe.contains($)){this._enforcingBounds=!0;var Me=$.subtract(pe.getCenter()),Ue=pe.extend($).getSize().subtract(ve);M.x+=Me.x<0?-Ue.x:Ue.x,M.y+=Me.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(M),u),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=o({animate:!1,pan:!0},l===!0?{animate:!0}:l);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),_=u.divideBy(2).round(),M=x.divideBy(2).round(),$=_.subtract(M);return!$.x&&!$.y?this:(l.animate&&l.pan?this.panBy($):(l.pan&&this._rawPanBy($),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=o({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=h(this._handleGeolocationResponse,this),x=h(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,x,l):navigator.geolocation.getCurrentPosition(u,x,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var u=l.code,x=l.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var u=l.coords.latitude,x=l.coords.longitude,_=new le(u,x),M=_.toBounds(l.coords.accuracy*2),$=this._locateOptions;if($.setView){var oe=this.getBoundsZoom(M);this.setView(_,$.maxZoom?Math.min(oe,$.maxZoom):oe)}var pe={latlng:_,bounds:M,timestamp:l.timestamp};for(var ve in l.coords)typeof l.coords[ve]=="number"&&(pe[ve]=l.coords[ve]);this.fire("locationfound",pe)}},addHandler:function(l,u){if(!u)return this;var x=this[l]=new u(this);return this._handlers.push(x),this.options[l]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),en(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)en(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,u){var x="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),_=Tt("div",x,u||this._mapPane);return l&&(this._panes[l]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),u=this.unproject(l.getBottomLeft()),x=this.unproject(l.getTopRight());return new ae(u,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,u,x){l=ee(l),x=I(x||[0,0]);var _=this.getZoom()||0,M=this.getMinZoom(),$=this.getMaxZoom(),oe=l.getNorthWest(),pe=l.getSouthEast(),ve=this.getSize().subtract(x),Me=ne(this.project(pe,_),this.project(oe,_)).getSize(),Ue=Ve.any3d?this.options.zoomSnap:1,Ye=ve.x/Me.x,Ge=ve.y/Me.y,dt=u?Math.max(Ye,Ge):Math.min(Ye,Ge);return _=this.getScaleZoom(dt,_),Ue&&(_=Math.round(_/(Ue/100))*(Ue/100),_=u?Math.ceil(_/Ue)*Ue:Math.floor(_/Ue)*Ue),Math.max(M,Math.min($,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,u){var x=this._getTopLeftPoint(l,u);return new se(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,u){var x=this.options.crs;return u=u===void 0?this._zoom:u,x.scale(l)/x.scale(u)},getScaleZoom:function(l,u){var x=this.options.crs;u=u===void 0?this._zoom:u;var _=x.zoom(l*x.scale(u));return isNaN(_)?1/0:_},project:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(me(l),u)},unproject:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(I(l),u)},layerPointToLatLng:function(l){var u=I(l).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(l){var u=this.project(me(l))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(me(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(ee(l))},distance:function(l,u){return this.options.crs.distance(me(l),me(u))},containerPointToLayerPoint:function(l){return I(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return I(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var u=this.containerPointToLayerPoint(I(l));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(l)))},mouseEventToContainerPoint:function(l){return ua(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var u=this._container=to(l);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mt(u,"scroll",this._onScroll,this),this._containerId=p(u)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,ht(l,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Nr(l,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fn(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ht(l.markerPane,"leaflet-zoom-hide"),ht(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,u,x){fn(this._mapPane,new q(0,0));var _=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var M=this._zoom!==u;this._moveStart(M,x)._move(l,u)._moveEnd(M),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(l,u){return l&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(l,u,x,_){u===void 0&&(u=this._zoom);var M=this._zoom!==u;return this._zoom=u,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),_?x&&x.pinch&&this.fire("zoom",x):((M||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){fn(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[p(this._container)]=this;var u=l?At:mt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,u){for(var x=[],_,M=u==="mouseout"||u==="mouseover",$=l.target||l.srcElement,oe=!1;$;){if(_=this._targets[p($)],_&&(u==="click"||u==="preclick")&&this._draggableMoved(_)){oe=!0;break}if(_&&_.listens(u,!0)&&(M&&!Tr($,l)||(x.push(_),M))||$===this._container)break;$=$.parentNode}return!x.length&&!oe&&!M&&this.listens(u,!0)&&(x=[this]),x},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var u=l.target||l.srcElement;if(!(!this._loaded||u._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(u))){var x=l.type;x==="mousedown"&&cl(u),this._fireDOMEvent(l,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,u,x){if(l.type==="click"){var _=o({},l);_.type="preclick",this._fireDOMEvent(_,_.type,x)}var M=this._findEventTargets(l,u);if(x){for(var $=[],oe=0;oe<x.length;oe++)x[oe].listens(u,!0)&&$.push(x[oe]);M=$.concat(M)}if(M.length){u==="contextmenu"&&_n(l);var pe=M[0],ve={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Me=pe.getLatLng&&(!pe._radius||pe._radius<=10);ve.containerPoint=Me?this.latLngToContainerPoint(pe.getLatLng()):this.mouseEventToContainerPoint(l),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Me?pe.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(oe=0;oe<M.length;oe++)if(M[oe].fire(u,ve,!0),ve.originalEvent._stopped||M[oe].options.bubblingMouseEvents===!1&&F(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,u=this._handlers.length;l<u;l++)this._handlers[l].disable()},whenReady:function(l,u){return this._loaded?l.call(u||this,{target:this}):this.on("load",l,u),this},_getMapPanePos:function(){return Zs(this._mapPane)||new q(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,u){var x=l&&u!==void 0?this._getNewPixelOrigin(l,u):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,u){var x=this.getSize()._divideBy(2);return this.project(l,u)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,u,x){var _=this._getNewPixelOrigin(x,u);return this.project(l,u)._subtract(_)},_latLngBoundsToNewLayerBounds:function(l,u,x){var _=this._getNewPixelOrigin(x,u);return ne([this.project(l.getSouthWest(),u)._subtract(_),this.project(l.getNorthWest(),u)._subtract(_),this.project(l.getSouthEast(),u)._subtract(_),this.project(l.getNorthEast(),u)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,u,x){if(!x)return l;var _=this.project(l,u),M=this.getSize().divideBy(2),$=new se(_.subtract(M),_.add(M)),oe=this._getBoundsOffset($,x,u);return Math.abs(oe.x)<=1&&Math.abs(oe.y)<=1?l:this.unproject(_.add(oe),u)},_limitOffset:function(l,u){if(!u)return l;var x=this.getPixelBounds(),_=new se(x.min.add(l),x.max.add(l));return l.add(this._getBoundsOffset(_,u))},_getBoundsOffset:function(l,u,x){var _=ne(this.project(u.getNorthEast(),x),this.project(u.getSouthWest(),x)),M=_.min.subtract(l.min),$=_.max.subtract(l.max),oe=this._rebound(M.x,-$.x),pe=this._rebound(M.y,-$.y);return new q(oe,pe)},_rebound:function(l,u){return l+u>0?Math.round(l-u)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(u))},_limitZoom:function(l){var u=this.getMinZoom(),x=this.getMaxZoom(),_=Ve.any3d?this.options.zoomSnap:1;return _&&(l=Math.round(l/_)*_),Math.max(u,Math.min(x,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,u){var x=this._getCenterOffset(l)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,u),!0)},_createAnimProxy:function(){var l=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(u){var x=il,_=this._proxy.style[x];Ra(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),_===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){en(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),u=this.getZoom();Ra(this._proxy,this.project(l,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,u,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(u),M=this._getCenterOffset(l)._divideBy(1-1/_);return x.animate!==!0&&!this.getSize().contains(M)?!1:(V(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(l,u,!0)},this),!0)},_animateZoom:function(l,u,x,_){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=u,ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:u,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ml(l,u){return new bt(l,u)}var xa=B.extend({options:{position:"topright"},initialize:function(l){N(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var u=this._map;return u&&u.removeControl(this),this.options.position=l,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var u=this._container=this.onAdd(l),x=this.getPosition(),_=l._controlCorners[x];return ht(u,"leaflet-control"),x.indexOf("bottom")!==-1?_.insertBefore(u,_.firstChild):_.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(en(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),ui=function(l){return new xa(l)};bt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},u="leaflet-",x=this._controlContainer=Tt("div",u+"control-container",this._container);function _(M,$){var oe=u+M+" "+u+$;l[M+$]=Tt("div",oe,x)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)en(this._controlCorners[l]);en(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $u=xa.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,u,x,_){return x<_?-1:_<x?1:0}},initialize:function(l,u,x){N(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in l)this._addLayer(l[_],_);for(_ in u)this._addLayer(u[_],_,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return xa.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,u){return this._addLayer(l,u),this._map?this._update():this},addOverlay:function(l,u){return this._addLayer(l,u,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var u=this._getLayer(p(l));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):tn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",u=this._container=Tt("div",l),x=this.options.collapsed;u.setAttribute("aria-haspopup",!0),di(u),ci(u);var _=this._section=Tt("section",l+"-list");x&&(this._map.on("click",this.collapse,this),mt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=Tt("a",l+"-toggle",u);M.href="#",M.title="Layers",M.setAttribute("role","button"),mt(M,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){_n($),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=Tt("div",l+"-base",_),this._separator=Tt("div",l+"-separator",_),this._overlaysList=Tt("div",l+"-overlays",_),u.appendChild(_)},_getLayer:function(l){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&p(this._layers[u].layer)===l)return this._layers[u]},_addLayer:function(l,u,x){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:u,overlay:x}),this.options.sortLayers&&this._layers.sort(h(function(_,M){return this.options.sortFunction(_.layer,M.layer,_.name,M.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ca(this._baseLayersList),ca(this._overlaysList),this._layerControlInputs=[];var l,u,x,_,M=0;for(x=0;x<this._layers.length;x++)_=this._layers[x],this._addItem(_),u=u||_.overlay,l=l||!_.overlay,M+=_.overlay?0:1;return this.options.hideSingleBase&&(l=l&&M>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=u&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var u=this._getLayer(p(l.target)),x=u.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;x&&this._map.fire(x,u)},_createRadioElement:function(l,u){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(u?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=x,_.firstChild},_addItem:function(l){var u=document.createElement("label"),x=this._map.hasLayer(l.layer),_;l.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=x):_=this._createRadioElement("leaflet-base-layers_"+p(this),x),this._layerControlInputs.push(_),_.layerId=p(l.layer),mt(_,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+l.name;var $=document.createElement("span");u.appendChild($),$.appendChild(_),$.appendChild(M);var oe=l.overlay?this._overlaysList:this._baseLayersList;return oe.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,u,x,_=[],M=[];this._handlingClick=!0;for(var $=l.length-1;$>=0;$--)u=l[$],x=this._getLayer(u.layerId).layer,u.checked?_.push(x):u.checked||M.push(x);for($=0;$<M.length;$++)this._map.hasLayer(M[$])&&this._map.removeLayer(M[$]);for($=0;$<_.length;$++)this._map.hasLayer(_[$])||this._map.addLayer(_[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,u,x,_=this._map.getZoom(),M=l.length-1;M>=0;M--)u=l[M],x=this._getLayer(u.layerId).layer,u.disabled=x.options.minZoom!==void 0&&_<x.options.minZoom||x.options.maxZoom!==void 0&&_>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,mt(l,"click",_n),this.expand();var u=this;setTimeout(function(){At(l,"click",_n),u._preventClick=!1})}}),Uf=function(l,u,x){return new $u(l,u,x)},Oc=xa.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var u="leaflet-control-zoom",x=Tt("div",u+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,u+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,u+"-out",x,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,u,x,_,M){var $=Tt("a",x,_);return $.innerHTML=l,$.href="#",$.title=u,$.setAttribute("role","button"),$.setAttribute("aria-label",u),di($),mt($,"click",hs),mt($,"click",M,this),mt($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var l=this._map,u="leaflet-disabled";tn(this._zoomInButton,u),tn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(ht(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(ht(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});bt.mergeOptions({zoomControl:!0}),bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oc,this.addControl(this.zoomControl))});var Lc=function(l){return new Oc(l)},Fu=xa.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var u="leaflet-control-scale",x=Tt("div",u),_=this.options;return this._addScales(_,u+"-line",x),l.on(_.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),x},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,u,x){l.metric&&(this._mScale=Tt("div",u,x)),l.imperial&&(this._iScale=Tt("div",u,x))},_update:function(){var l=this._map,u=l.getSize().y/2,x=l.distance(l.containerPointToLatLng([0,u]),l.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(x)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var u=this._getRoundNum(l),x=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,x,u/l)},_updateImperial:function(l){var u=l*3.2808399,x,_,M;u>5280?(x=u/5280,_=this._getRoundNum(x),this._updateScale(this._iScale,_+" mi",_/x)):(M=this._getRoundNum(u),this._updateScale(this._iScale,M+" ft",M/u))},_updateScale:function(l,u,x){l.style.width=Math.round(this.options.maxWidth*x)+"px",l.innerHTML=u},_getRoundNum:function(l){var u=Math.pow(10,(Math.floor(l)+"").length-1),x=l/u;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,u*x}}),Hf=function(l){return new Fu(l)},qf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zc=xa.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?qf+" ":"")+"Leaflet</a>"},initialize:function(l){N(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),di(this._container);for(var u in l._layers)l._layers[u].getAttribution&&this.addAttribution(l._layers[u].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var u in this._attributions)this._attributions[u]&&l.push(u);var x=[];this.options.prefix&&x.push(this.options.prefix),l.length&&x.push(l.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});bt.mergeOptions({attributionControl:!0}),bt.addInitHook(function(){this.options.attributionControl&&new zc().addTo(this)});var Yf=function(l){return new zc(l)};xa.Layers=$u,xa.Zoom=Oc,xa.Scale=Fu,xa.Attribution=zc,ui.layers=Uf,ui.zoom=Lc,ui.scale=Hf,ui.attribution=Yf;var Ya=B.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ya.addTo=function(l,u){return l.addHandler(u,this),this};var Vf={Events:G},Uu=Ve.touch?"touchstart mousedown":"mousedown",Ws=J.extend({options:{clickTolerance:3},initialize:function(l,u,x,_){N(this,_),this._element=l,this._dragStartTarget=u||l,this._preventOutline=x},enable:function(){this._enabled||(mt(this._dragStartTarget,Uu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ws._dragging===this&&this.finishDrag(!0),At(this._dragStartTarget,Uu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!si(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Ws._dragging===this&&this.finishDrag();return}if(!(Ws._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Ws._dragging=this,this._preventOutline&&cl(this._element),ol(),ds(),!this._moving)){this.fire("down");var u=l.touches?l.touches[0]:l,x=Sr(this._element);this._startPoint=new q(u.clientX,u.clientY),this._startPos=Zs(this._element),this._parentScale=Ks(x);var _=l.type==="mousedown";mt(document,_?"mousemove":"touchmove",this._onMove,this),mt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var u=l.touches&&l.touches.length===1?l.touches[0]:l,x=new q(u.clientX,u.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,_n(l),this._moved||(this.fire("dragstart"),this._moved=!0,ht(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),fn(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){tn(document.body,"leaflet-dragging"),this._lastTarget&&(tn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),At(document,"mousemove touchmove",this._onMove,this),At(document,"mouseup touchend touchcancel",this._onUp,this),Dc(),ll();var u=this._moved&&this._moving;this._moving=!1,Ws._dragging=!1,u&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Hu(l,u,x){var _,M=[1,4,2,8],$,oe,pe,ve,Me,Ue,Ye,Ge;for($=0,Ue=l.length;$<Ue;$++)l[$]._code=Er(l[$],u);for(pe=0;pe<4;pe++){for(Ye=M[pe],_=[],$=0,Ue=l.length,oe=Ue-1;$<Ue;oe=$++)ve=l[$],Me=l[oe],ve._code&Ye?Me._code&Ye||(Ge=io(Me,ve,Ye,u,x),Ge._code=Er(Ge,u),_.push(Ge)):(Me._code&Ye&&(Ge=io(Me,ve,Ye,u,x),Ge._code=Er(Ge,u),_.push(Ge)),_.push(ve));l=_}return l}function ro(l,u){var x,_,M,$,oe,pe,ve,Me,Ue;if(!l||l.length===0)throw new Error("latlngs not passed");ea(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ye=me([0,0]),Ge=ee(l),dt=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());dt<1700&&(Ye=Ic(l));var nn=l.length,pn=[];for(x=0;x<nn;x++){var ta=me(l[x]);pn.push(u.project(me([ta.lat-Ye.lat,ta.lng-Ye.lng])))}for(pe=ve=Me=0,x=0,_=nn-1;x<nn;_=x++)M=pn[x],$=pn[_],oe=M.y*$.x-$.y*M.x,ve+=(M.x+$.x)*oe,Me+=(M.y+$.y)*oe,pe+=oe*3;pe===0?Ue=pn[0]:Ue=[ve/pe,Me/pe];var Aa=u.unproject(I(Ue));return me([Aa.lat+Ye.lat,Aa.lng+Ye.lng])}function Ic(l){for(var u=0,x=0,_=0,M=0;M<l.length;M++){var $=me(l[M]);u+=$.lat,x+=$.lng,_++}return me([u/_,x/_])}var Zf={__proto__:null,clipPolygon:Hu,polygonCenter:ro,centroid:Ic};function qu(l,u){if(!u||!l.length)return l.slice();var x=u*u;return l=Gf(l,x),l=Wf(l,x),l}function Bc(l,u,x){return Math.sqrt(Mr(l,u,x,!0))}function Kf(l,u,x){return Mr(l,u,x)}function Wf(l,u){var x=l.length,_=typeof Uint8Array<"u"?Uint8Array:Array,M=new _(x);M[0]=M[x-1]=1,$c(l,M,u,0,x-1);var $,oe=[];for($=0;$<x;$++)M[$]&&oe.push(l[$]);return oe}function $c(l,u,x,_,M){var $=0,oe,pe,ve;for(pe=_+1;pe<=M-1;pe++)ve=Mr(l[pe],l[_],l[M],!0),ve>$&&(oe=pe,$=ve);$>x&&(u[oe]=1,$c(l,u,x,_,oe),$c(l,u,x,oe,M))}function Gf(l,u){for(var x=[l[0]],_=1,M=0,$=l.length;_<$;_++)Qf(l[_],l[M])>u&&(x.push(l[_]),M=_);return M<$-1&&x.push(l[$-1]),x}var Yu;function Vu(l,u,x,_,M){var $=_?Yu:Er(l,x),oe=Er(u,x),pe,ve,Me;for(Yu=oe;;){if(!($|oe))return[l,u];if($&oe)return!1;pe=$||oe,ve=io(l,u,pe,x,M),Me=Er(ve,x),pe===$?(l=ve,$=Me):(u=ve,oe=Me)}}function io(l,u,x,_,M){var $=u.x-l.x,oe=u.y-l.y,pe=_.min,ve=_.max,Me,Ue;return x&8?(Me=l.x+$*(ve.y-l.y)/oe,Ue=ve.y):x&4?(Me=l.x+$*(pe.y-l.y)/oe,Ue=pe.y):x&2?(Me=ve.x,Ue=l.y+oe*(ve.x-l.x)/$):x&1&&(Me=pe.x,Ue=l.y+oe*(pe.x-l.x)/$),new q(Me,Ue,M)}function Er(l,u){var x=0;return l.x<u.min.x?x|=1:l.x>u.max.x&&(x|=2),l.y<u.min.y?x|=4:l.y>u.max.y&&(x|=8),x}function Qf(l,u){var x=u.x-l.x,_=u.y-l.y;return x*x+_*_}function Mr(l,u,x,_){var M=u.x,$=u.y,oe=x.x-M,pe=x.y-$,ve=oe*oe+pe*pe,Me;return ve>0&&(Me=((l.x-M)*oe+(l.y-$)*pe)/ve,Me>1?(M=x.x,$=x.y):Me>0&&(M+=oe*Me,$+=pe*Me)),oe=l.x-M,pe=l.y-$,_?oe*oe+pe*pe:new q(M,$)}function ea(l){return!O(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Zu(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ea(l)}function Fc(l,u){var x,_,M,$,oe,pe,ve,Me;if(!l||l.length===0)throw new Error("latlngs not passed");ea(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ue=me([0,0]),Ye=ee(l),Ge=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());Ge<1700&&(Ue=Ic(l));var dt=l.length,nn=[];for(x=0;x<dt;x++){var pn=me(l[x]);nn.push(u.project(me([pn.lat-Ue.lat,pn.lng-Ue.lng])))}for(x=0,_=0;x<dt-1;x++)_+=nn[x].distanceTo(nn[x+1])/2;if(_===0)Me=nn[0];else for(x=0,$=0;x<dt-1;x++)if(oe=nn[x],pe=nn[x+1],M=oe.distanceTo(pe),$+=M,$>_){ve=($-_)/M,Me=[pe.x-ve*(pe.x-oe.x),pe.y-ve*(pe.y-oe.y)];break}var ta=u.unproject(I(Me));return me([ta.lat+Ue.lat,ta.lng+Ue.lng])}var Ku={__proto__:null,simplify:qu,pointToSegmentDistance:Bc,closestPointOnSegment:Kf,clipSegment:Vu,_getEdgeIntersection:io,_getBitCode:Er,_sqClosestPointOnSegment:Mr,isFlat:ea,_flat:Zu,polylineCenter:Fc},lo={project:function(l){return new q(l.lng,l.lat)},unproject:function(l){return new le(l.y,l.x)},bounds:new se([-180,-90],[180,90])},oo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var u=Math.PI/180,x=this.R,_=l.lat*u,M=this.R_MINOR/x,$=Math.sqrt(1-M*M),oe=$*Math.sin(_),pe=Math.tan(Math.PI/4-_/2)/Math.pow((1-oe)/(1+oe),$/2);return _=-x*Math.log(Math.max(pe,1e-10)),new q(l.lng*u*x,_)},unproject:function(l){for(var u=180/Math.PI,x=this.R,_=this.R_MINOR/x,M=Math.sqrt(1-_*_),$=Math.exp(-l.y/x),oe=Math.PI/2-2*Math.atan($),pe=0,ve=.1,Me;pe<15&&Math.abs(ve)>1e-7;pe++)Me=M*Math.sin(oe),Me=Math.pow((1-Me)/(1+Me),M/2),ve=Math.PI/2-2*Math.atan($*Me)-oe,oe+=ve;return new le(oe*u,l.x*u/x)}},Wu={__proto__:null,LonLat:lo,Mercator:oo,SphericalMercator:Q},mi=o({},Pe,{code:"EPSG:3395",projection:oo,transformation:function(){var l=.5/(Math.PI*oo.R);return Be(l,.5,-l,.5)}()}),Gu=o({},Pe,{code:"EPSG:4326",projection:lo,transformation:Be(1/180,1,-1/180,.5)}),Xf=o({},Re,{projection:lo,transformation:Be(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,u){var x=u.lng-l.lng,_=u.lat-l.lat;return Math.sqrt(x*x+_*_)},infinite:!0});Re.Earth=Pe,Re.EPSG3395=mi,Re.EPSG3857=nt,Re.EPSG900913=Qe,Re.EPSG4326=Gu,Re.Simple=Xf;var Va=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[p(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[p(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var u=l.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var x=this.getEvents();u.on(x,this),this.once("remove",function(){u.off(x,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});bt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var u=p(l);return this._layers[u]?this:(this._layers[u]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var u=p(l);return this._layers[u]?(this._loaded&&l.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return p(l)in this._layers},eachLayer:function(l,u){for(var x in this._layers)l.call(u,this._layers[x]);return this},_addLayers:function(l){l=l?O(l)?l:[l]:[];for(var u=0,x=l.length;u<x;u++)this.addLayer(l[u])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[p(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var u=p(l);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,u=-1/0,x=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var M=this._zoomBoundLayers[_].options;l=M.minZoom===void 0?l:Math.min(l,M.minZoom),u=M.maxZoom===void 0?u:Math.max(u,M.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=l===1/0?void 0:l,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Rr=Va.extend({initialize:function(l,u){N(this,u),this._layers={};var x,_;if(l)for(x=0,_=l.length;x<_;x++)this.addLayer(l[x])},addLayer:function(l){var u=this.getLayerId(l);return this._layers[u]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var u=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(l){var u=typeof l=="number"?l:this.getLayerId(l);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var u=Array.prototype.slice.call(arguments,1),x,_;for(x in this._layers)_=this._layers[x],_[l]&&_[l].apply(_,u);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,u){for(var x in this._layers)l.call(u,this._layers[x]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return p(l)}}),Qu=function(l,u){return new Rr(l,u)},Na=Rr.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Rr.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Rr.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ae;for(var u in this._layers){var x=this._layers[u];l.extend(x.getBounds?x.getBounds():x.getLatLng())}return l}}),hl=function(l,u){return new Na(l,u)},hi=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){N(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,u){var x=this._getIconUrl(l);if(!x){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(x,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(_,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(l,u){var x=this.options,_=x[u+"Size"];typeof _=="number"&&(_=[_,_]);var M=I(_),$=I(u==="shadow"&&x.shadowAnchor||x.iconAnchor||M&&M.divideBy(2,!0));l.className="leaflet-marker-"+u+" "+(x.className||""),$&&(l.style.marginLeft=-$.x+"px",l.style.marginTop=-$.y+"px"),M&&(l.style.width=M.x+"px",l.style.height=M.y+"px")},_createImg:function(l,u){return u=u||document.createElement("img"),u.src=l,u},_getIconUrl:function(l){return Ve.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function co(l){return new hi(l)}var fi=hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof fi.imagePath!="string"&&(fi.imagePath=this._detectIconPath()),(this.options.imagePath||fi.imagePath)+hi.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var u=function(x,_,M){var $=_.exec(x);return $&&$[M]};return l=u(l,/^url\((['"])?(.+)\1\)$/,2),l&&u(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Tt("div","leaflet-default-icon-path",document.body),u=Nr(l,"background-image")||Nr(l,"backgroundImage");if(document.body.removeChild(l),u=this._stripUrl(u),u)return u;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),Uc=Ya.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Ws(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ht(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var u=this._marker,x=u._map,_=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,$=Zs(u._icon),oe=x.getPixelBounds(),pe=x.getPixelOrigin(),ve=ne(oe.min._subtract(pe).add(M),oe.max._subtract(pe).subtract(M));if(!ve.contains($)){var Me=I((Math.max(ve.max.x,$.x)-ve.max.x)/(oe.max.x-ve.max.x)-(Math.min(ve.min.x,$.x)-ve.min.x)/(oe.min.x-ve.min.x),(Math.max(ve.max.y,$.y)-ve.max.y)/(oe.max.y-ve.max.y)-(Math.min(ve.min.y,$.y)-ve.min.y)/(oe.min.y-ve.min.y)).multiplyBy(_);x.panBy(Me,{animate:!1}),this._draggable._newPos._add(Me),this._draggable._startPos._add(Me),fn(u._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=V(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,l)))},_onDrag:function(l){var u=this._marker,x=u._shadow,_=Zs(u._icon),M=u._map.layerPointToLatLng(_);x&&fn(x,_),u._latlng=M,l.latlng=M,l.oldLatLng=this._oldLatLng,u.fire("move",l).fire("drag",l)},_onDragEnd:function(l){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),pi=Va.extend({options:{icon:new fi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,u){N(this,u),this._latlng=me(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var u=this._latlng;return this._latlng=me(l),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=l.icon.createIcon(this._icon),_=!1;x!==this._icon&&(this._icon&&this._removeIcon(),_=!0,l.title&&(x.title=l.title),x.tagName==="IMG"&&(x.alt=l.alt||"")),ht(x,u),l.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(x,"focus",this._panOnFocus,this);var M=l.icon.createShadow(this._shadow),$=!1;M!==this._shadow&&(this._removeShadow(),$=!0),M&&(ht(M,u),M.alt=""),this._shadow=M,l.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&$&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(this._icon,"focus",this._panOnFocus,this),en(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&en(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&fn(this._icon,l),this._shadow&&fn(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Uc)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Uc(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&ga(this._icon,l),this._shadow&&ga(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var u=this.options.icon.options,x=u.iconSize?I(u.iconSize):I(0,0),_=u.iconAnchor?I(u.iconAnchor):I(0,0);l.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:x.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Hc(l,u){return new pi(l,u)}var Rs=Va.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return N(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fl=Rs.extend({options:{fill:!0,radius:10},initialize:function(l,u){N(this,u),this._latlng=me(l),this._radius=this.options.radius},setLatLng:function(l){var u=this._latlng;return this._latlng=me(l),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var u=l&&l.radius||this._radius;return Rs.prototype.setStyle.call(this,l),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,u=this._radiusY||l,x=this._clickTolerance(),_=[l+x,u+x];this._pxBounds=new se(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Xu(l,u){return new fl(l,u)}var qc=fl.extend({initialize:function(l,u,x){if(typeof u=="number"&&(u=o({},x,{radius:u})),N(this,u),this._latlng=me(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Rs.prototype.setStyle,_project:function(){var l=this._latlng.lng,u=this._latlng.lat,x=this._map,_=x.options.crs;if(_.distance===Pe.distance){var M=Math.PI/180,$=this._mRadius/Pe.R/M,oe=x.project([u+$,l]),pe=x.project([u-$,l]),ve=oe.add(pe).divideBy(2),Me=x.unproject(ve).lat,Ue=Math.acos((Math.cos($*M)-Math.sin(u*M)*Math.sin(Me*M))/(Math.cos(u*M)*Math.cos(Me*M)))/M;(isNaN(Ue)||Ue===0)&&(Ue=$/Math.cos(Math.PI/180*u)),this._point=ve.subtract(x.getPixelOrigin()),this._radius=isNaN(Ue)?0:ve.x-x.project([Me,l-Ue]).x,this._radiusY=ve.y-oe.y}else{var Ye=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(Ye).x}this._updateBounds()}});function Jf(l,u,x){return new qc(l,u,x)}var As=Rs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,u){N(this,u),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var u=1/0,x=null,_=Mr,M,$,oe=0,pe=this._parts.length;oe<pe;oe++)for(var ve=this._parts[oe],Me=1,Ue=ve.length;Me<Ue;Me++){M=ve[Me-1],$=ve[Me];var Ye=_(l,M,$,!0);Ye<u&&(u=Ye,x=_(l,M,$))}return x&&(x.distance=Math.sqrt(u)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,u){return u=u||this._defaultShape(),l=me(l),u.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ae,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return ea(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var u=[],x=ea(l),_=0,M=l.length;_<M;_++)x?(u[_]=me(l[_]),this._bounds.extend(u[_])):u[_]=this._convertLatLngs(l[_]);return u},_project:function(){var l=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),u=new q(l,l);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(l,u,x){var _=l[0]instanceof le,M=l.length,$,oe;if(_){for(oe=[],$=0;$<M;$++)oe[$]=this._map.latLngToLayerPoint(l[$]),x.extend(oe[$]);u.push(oe)}else for($=0;$<M;$++)this._projectLatlngs(l[$],u,x)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,x,_,M,$,oe,pe,ve;for(x=0,M=0,$=this._rings.length;x<$;x++)for(ve=this._rings[x],_=0,oe=ve.length;_<oe-1;_++)pe=Vu(ve[_],ve[_+1],l,_,!0),pe&&(u[M]=u[M]||[],u[M].push(pe[0]),(pe[1]!==ve[_+1]||_===oe-2)&&(u[M].push(pe[1]),M++))}},_simplifyPoints:function(){for(var l=this._parts,u=this.options.smoothFactor,x=0,_=l.length;x<_;x++)l[x]=qu(l[x],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,u){var x,_,M,$,oe,pe,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(x=0,$=this._parts.length;x<$;x++)for(pe=this._parts[x],_=0,oe=pe.length,M=oe-1;_<oe;M=_++)if(!(!u&&_===0)&&Bc(l,pe[M],pe[_])<=ve)return!0;return!1}});function ep(l,u){return new As(l,u)}As._flat=Zu;var gi=As.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var u=As.prototype._convertLatLngs.call(this,l),x=u.length;return x>=2&&u[0]instanceof le&&u[0].equals(u[x-1])&&u.pop(),u},_setLatLngs:function(l){As.prototype._setLatLngs.call(this,l),ea(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ea(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,u=this.options.weight,x=new q(u,u);if(l=new se(l.min.subtract(x),l.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,M=this._rings.length,$;_<M;_++)$=Hu(this._rings[_],l,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var u=!1,x,_,M,$,oe,pe,ve,Me;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for($=0,ve=this._parts.length;$<ve;$++)for(x=this._parts[$],oe=0,Me=x.length,pe=Me-1;oe<Me;pe=oe++)_=x[oe],M=x[pe],_.y>l.y!=M.y>l.y&&l.x<(M.x-_.x)*(l.y-_.y)/(M.y-_.y)+_.x&&(u=!u);return u||As.prototype._containsPoint.call(this,l,!0)}});function _a(l,u){return new gi(l,u)}var Sa=Na.extend({initialize:function(l,u){N(this,u),this._layers={},l&&this.addData(l)},addData:function(l){var u=O(l)?l:l.features,x,_,M;if(u){for(x=0,_=u.length;x<_;x++)M=u[x],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var $=this.options;if($.filter&&!$.filter(l))return this;var oe=pl(l,$);return oe?(oe.feature=xi(l),oe.defaultOptions=oe.options,this.resetStyle(oe),$.onEachFeature&&$.onEachFeature(l,oe),this.addLayer(oe)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=o({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(u){this._setLayerStyle(u,l)},this)},_setLayerStyle:function(l,u){l.setStyle&&(typeof u=="function"&&(u=u(l.feature)),l.setStyle(u))}});function pl(l,u){var x=l.type==="Feature"?l.geometry:l,_=x?x.coordinates:null,M=[],$=u&&u.pointToLayer,oe=u&&u.coordsToLatLng||uo,pe,ve,Me,Ue;if(!_&&!x)return null;switch(x.type){case"Point":return pe=oe(_),Yc($,l,pe,u);case"MultiPoint":for(Me=0,Ue=_.length;Me<Ue;Me++)pe=oe(_[Me]),M.push(Yc($,l,pe,u));return new Na(M);case"LineString":case"MultiLineString":return ve=gl(_,x.type==="LineString"?0:1,oe),new As(ve,u);case"Polygon":case"MultiPolygon":return ve=gl(_,x.type==="Polygon"?1:2,oe),new gi(ve,u);case"GeometryCollection":for(Me=0,Ue=x.geometries.length;Me<Ue;Me++){var Ye=pl({geometry:x.geometries[Me],type:"Feature",properties:l.properties},u);Ye&&M.push(Ye)}return new Na(M);case"FeatureCollection":for(Me=0,Ue=x.features.length;Me<Ue;Me++){var Ge=pl(x.features[Me],u);Ge&&M.push(Ge)}return new Na(M);default:throw new Error("Invalid GeoJSON object.")}}function Yc(l,u,x,_){return l?l(u,x):new pi(x,_&&_.markersInheritOptions&&_)}function uo(l){return new le(l[1],l[0],l[2])}function gl(l,u,x){for(var _=[],M=0,$=l.length,oe;M<$;M++)oe=u?gl(l[M],u-1,x):(x||uo)(l[M]),_.push(oe);return _}function xl(l,u){return l=me(l),l.alt!==void 0?[S(l.lng,u),S(l.lat,u),S(l.alt,u)]:[S(l.lng,u),S(l.lat,u)]}function mo(l,u,x,_){for(var M=[],$=0,oe=l.length;$<oe;$++)M.push(u?mo(l[$],ea(l[$])?0:u-1,x,_):xl(l[$],_));return!u&&x&&M.length>0&&M.push(M[0].slice()),M}function Za(l,u){return l.feature?o({},l.feature,{geometry:u}):xi(u)}function xi(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Ar={toGeoJSON:function(l){return Za(this,{type:"Point",coordinates:xl(this.getLatLng(),l)})}};pi.include(Ar),qc.include(Ar),fl.include(Ar),As.include({toGeoJSON:function(l){var u=!ea(this._latlngs),x=mo(this._latlngs,u?1:0,!1,l);return Za(this,{type:(u?"Multi":"")+"LineString",coordinates:x})}}),gi.include({toGeoJSON:function(l){var u=!ea(this._latlngs),x=u&&!ea(this._latlngs[0]),_=mo(this._latlngs,x?2:u?1:0,!0,l);return u||(_=[_]),Za(this,{type:(x?"Multi":"")+"Polygon",coordinates:_})}}),Rr.include({toMultiPoint:function(l){var u=[];return this.eachLayer(function(x){u.push(x.toGeoJSON(l).geometry.coordinates)}),Za(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(l){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(l);var x=u==="GeometryCollection",_=[];return this.eachLayer(function(M){if(M.toGeoJSON){var $=M.toGeoJSON(l);if(x)_.push($.geometry);else{var oe=xi($);oe.type==="FeatureCollection"?_.push.apply(_,oe.features):_.push(oe)}}}),x?Za(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function ho(l,u){return new Sa(l,u)}var Ju=ho,fs=Va.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,u,x){this._url=l,this._bounds=ee(u),N(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){en(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&_r(this._image),this},bringToBack:function(){return this._map&&ai(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=ee(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",u=this._image=l?this._url:Tt("img");if(ht(u,"leaflet-image-layer"),this._zoomAnimated&&ht(u,"leaflet-zoom-animated"),this.options.className&&ht(u,this.options.className),u.onselectstart=j,u.onmousemove=j,u.onload=h(this.fire,this,"load"),u.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(l){var u=this._map.getZoomScale(l.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Ra(this._image,x,u)},_reset:function(){var l=this._image,u=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=u.getSize();fn(l,u.min),l.style.width=x.x+"px",l.style.height=x.y+"px"},_updateOpacity:function(){ga(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),yi=function(l,u,x){return new fs(l,u,x)},fo=fs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",u=this._image=l?this._url:Tt("video");if(ht(u,"leaflet-image-layer"),this._zoomAnimated&&ht(u,"leaflet-zoom-animated"),this.options.className&&ht(u,this.options.className),u.onselectstart=j,u.onmousemove=j,u.onloadeddata=h(this.fire,this,"load"),l){for(var x=u.getElementsByTagName("source"),_=[],M=0;M<x.length;M++)_.push(x[M].src);this._url=x.length>0?_:[u.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var oe=Tt("source");oe.src=this._url[$],u.appendChild(oe)}}});function em(l,u,x){return new fo(l,u,x)}var Gs=fs.extend({_initImage:function(){var l=this._image=this._url;ht(l,"leaflet-image-layer"),this._zoomAnimated&&ht(l,"leaflet-zoom-animated"),this.options.className&&ht(l,this.options.className),l.onselectstart=j,l.onmousemove=j}});function tm(l,u,x){return new Gs(l,u,x)}var Ka=Va.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,u){l&&(l instanceof le||O(l))?(this._latlng=me(l),N(this,u)):(N(this,l),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&ga(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&ga(this._container,1),this.bringToFront(),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(ga(this._container,0),this._removeTimeout=setTimeout(h(en,void 0,this._container),200)):en(this._container),this.options.interactive&&(tn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=me(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_r(this._container),this},bringToBack:function(){return this._map&&ai(this._container),this},_prepareOpen:function(l){var u=this._source;if(!u._map)return!1;if(u instanceof Na){u=null;var x=this._source._layers;for(var _ in x)if(x[_]._map){u=x[_];break}if(!u)return!1;this._source=u}if(!l)if(u.getCenter)l=u.getCenter();else if(u.getLatLng)l=u.getLatLng();else if(u.getBounds)l=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")l.innerHTML=u;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),u=I(this.options.offset),x=this._getAnchor();this._zoomAnimated?fn(this._container,l.add(x)):u=u.add(l).add(x);var _=this._containerBottom=-u.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=_+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});bt.include({_initOverlay:function(l,u,x,_){var M=u;return M instanceof l||(M=new l(_).setContent(u)),x&&M.setLatLng(x),M}}),Va.include({_initOverlay:function(l,u,x,_){var M=x;return M instanceof l?(N(M,_),M._source=this):(M=u&&!_?u:new l(_,this),M.setContent(x)),M}});var yl=Ka.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Ka.prototype.openOn.call(this,l)},onAdd:function(l){Ka.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rs||this._source.on("preclick",Ms))},onRemove:function(l){Ka.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rs||this._source.off("preclick",Ms))},getEvents:function(){var l=Ka.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",u=this._container=Tt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=Tt("div",l+"-content-wrapper",u);if(this._contentNode=Tt("div",l+"-content",x),di(u),ci(this._contentNode),mt(u,"contextmenu",Ms),this._tipContainer=Tt("div",l+"-tip-container",u),this._tip=Tt("div",l+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Tt("a",l+"-close-button",u);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',mt(_,"click",function(M){_n(M),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,u=l.style;u.width="",u.whiteSpace="nowrap";var x=l.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),u.width=x+1+"px",u.whiteSpace="",u.height="";var _=l.offsetHeight,M=this.options.maxHeight,$="leaflet-popup-scrolled";M&&_>M?(u.height=M+"px",ht(l,$)):tn(l,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),x=this._getAnchor();fn(this._container,u.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,u=parseInt(Nr(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+u,_=this._containerWidth,M=new q(this._containerLeft,-x-this._containerBottom);M._add(Zs(this._container));var $=l.layerPointToContainerPoint(M),oe=I(this.options.autoPanPadding),pe=I(this.options.autoPanPaddingTopLeft||oe),ve=I(this.options.autoPanPaddingBottomRight||oe),Me=l.getSize(),Ue=0,Ye=0;$.x+_+ve.x>Me.x&&(Ue=$.x+_-Me.x+ve.x),$.x-Ue-pe.x<0&&(Ue=$.x-pe.x),$.y+x+ve.y>Me.y&&(Ye=$.y+x-Me.y+ve.y),$.y-Ye-pe.y<0&&(Ye=$.y-pe.y),(Ue||Ye)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ue,Ye]))}},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tp=function(l,u){return new yl(l,u)};bt.mergeOptions({closePopupOnClick:!0}),bt.include({openPopup:function(l,u,x){return this._initOverlay(yl,l,u,x).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Va.include({bindPopup:function(l,u){return this._popup=this._initOverlay(yl,this._popup,l,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Na||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){hs(l);var u=l.layer||l.target;if(this._popup._source===u&&!(u instanceof Rs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=u,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var po=Ka.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Ka.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Ka.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Ka.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",u=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var u,x,_=this._map,M=this._container,$=_.latLngToContainerPoint(_.getCenter()),oe=_.layerPointToContainerPoint(l),pe=this.options.direction,ve=M.offsetWidth,Me=M.offsetHeight,Ue=I(this.options.offset),Ye=this._getAnchor();pe==="top"?(u=ve/2,x=Me):pe==="bottom"?(u=ve/2,x=0):pe==="center"?(u=ve/2,x=Me/2):pe==="right"?(u=0,x=Me/2):pe==="left"?(u=ve,x=Me/2):oe.x<$.x?(pe="right",u=0,x=Me/2):(pe="left",u=ve+(Ue.x+Ye.x)*2,x=Me/2),l=l.subtract(I(u,x,!0)).add(Ue).add(Ye),tn(M,"leaflet-tooltip-right"),tn(M,"leaflet-tooltip-left"),tn(M,"leaflet-tooltip-top"),tn(M,"leaflet-tooltip-bottom"),ht(M,"leaflet-tooltip-"+pe),fn(M,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&ga(this._container,l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(u)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),np=function(l,u){return new po(l,u)};bt.include({openTooltip:function(l,u,x){return this._initOverlay(po,l,u,x).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Va.include({bindTooltip:function(l,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(po,this._tooltip,l,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var u=l?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[u](x),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Na||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&(mt(u,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),mt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var u=l.latlng,x,_;this._tooltip.options.sticky&&l.originalEvent&&(x=this._map.mouseEventToContainerPoint(l.originalEvent),_=this._map.containerPointToLayerPoint(x),u=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(u)}});var Vc=hi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var u=l&&l.tagName==="DIV"?l:document.createElement("div"),x=this.options;if(x.html instanceof Element?(ca(u),u.appendChild(x.html)):u.innerHTML=x.html!==!1?x.html:"",x.bgPos){var _=I(x.bgPos);u.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function nm(l){return new Vc(l)}hi.Default=fi;var Dr=Va.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){N(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),en(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ai(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof q?l:new q(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var u=this.getPane().children,x=-l(-1/0,1/0),_=0,M=u.length,$;_<M;_++)$=u[_].style.zIndex,u[_]!==this._container&&$&&(x=l(x,+$));isFinite(x)&&(this.options.zIndex=x+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){ga(this._container,this.options.opacity);var l=+new Date,u=!1,x=!1;for(var _ in this._tiles){var M=this._tiles[_];if(!(!M.current||!M.loaded)){var $=Math.min(1,(l-M.loaded)/200);ga(M.el,$),$<1?u=!0:(M.active?x=!0:this._onOpaqueTile(M),M.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),u&&(X(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:j,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,u=this.options.maxZoom;if(l!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===l?(this._levels[x].el.style.zIndex=u-Math.abs(l-x),this._onUpdateLevel(x)):(en(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var _=this._levels[l],M=this._map;return _||(_=this._levels[l]={},_.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=u,_.origin=M.project(M.unproject(M.getPixelOrigin()),l).round(),_.zoom=l,this._setZoomTransform(_,M.getCenter(),M.getZoom()),j(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:j,_onRemoveLevel:j,_onCreateLevel:j,_pruneTiles:function(){if(this._map){var l,u,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)u=this._tiles[l],u.retain=u.current;for(l in this._tiles)if(u=this._tiles[l],u.current&&!u.active){var _=u.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var u in this._tiles)this._tiles[u].coords.z===l&&this._removeTile(u)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)en(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,u,x,_){var M=Math.floor(l/2),$=Math.floor(u/2),oe=x-1,pe=new q(+M,+$);pe.z=+oe;var ve=this._tileCoordsToKey(pe),Me=this._tiles[ve];return Me&&Me.active?(Me.retain=!0,!0):(Me&&Me.loaded&&(Me.retain=!0),oe>_?this._retainParent(M,$,oe,_):!1)},_retainChildren:function(l,u,x,_){for(var M=2*l;M<2*l+2;M++)for(var $=2*u;$<2*u+2;$++){var oe=new q(M,$);oe.z=x+1;var pe=this._tileCoordsToKey(oe),ve=this._tiles[pe];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);x+1<_&&this._retainChildren(M,$,x+1,_)}},_resetView:function(l){var u=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var u=this.options;return u.minNativeZoom!==void 0&&l<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<l?u.maxNativeZoom:l},_setView:function(l,u,x,_){var M=Math.round(u);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var $=this.options.updateWhenZooming&&M!==this._tileZoom;(!_||$)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(l),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(l,u)},_setZoomTransforms:function(l,u){for(var x in this._levels)this._setZoomTransform(this._levels[x],l,u)},_setZoomTransform:function(l,u,x){var _=this._map.getZoomScale(x,l.zoom),M=l.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(u,x)).round();Ve.any3d?Ra(l.el,M,_):fn(l.el,M)},_resetGrid:function(){var l=this._map,u=l.options.crs,x=this._tileSize=this.getTileSize(),_=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,u.wrapLng[0]],_).x/x.x),Math.ceil(l.project([0,u.wrapLng[1]],_).x/x.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([u.wrapLat[0],0],_).y/x.x),Math.ceil(l.project([u.wrapLat[1],0],_).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var u=this._map,x=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),_=u.getZoomScale(x,this._tileZoom),M=u.project(l,this._tileZoom).floor(),$=u.getSize().divideBy(_*2);return new se(M.subtract($),M.add($))},_update:function(l){var u=this._map;if(u){var x=this._clampZoom(u.getZoom());if(l===void 0&&(l=u.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(l),M=this._pxBoundsToTileRange(_),$=M.getCenter(),oe=[],pe=this.options.keepBuffer,ve=new se(M.getBottomLeft().subtract([pe,-pe]),M.getTopRight().add([pe,-pe]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Me in this._tiles){var Ue=this._tiles[Me].coords;(Ue.z!==this._tileZoom||!ve.contains(new q(Ue.x,Ue.y)))&&(this._tiles[Me].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(l,x);return}for(var Ye=M.min.y;Ye<=M.max.y;Ye++)for(var Ge=M.min.x;Ge<=M.max.x;Ge++){var dt=new q(Ge,Ye);if(dt.z=this._tileZoom,!!this._isValidTile(dt)){var nn=this._tiles[this._tileCoordsToKey(dt)];nn?nn.current=!0:oe.push(dt)}}if(oe.sort(function(ta,Aa){return ta.distanceTo($)-Aa.distanceTo($)}),oe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pn=document.createDocumentFragment();for(Ge=0;Ge<oe.length;Ge++)this._addTile(oe[Ge],pn);this._level.el.appendChild(pn)}}}},_isValidTile:function(l){var u=this._map.options.crs;if(!u.infinite){var x=this._globalTileRange;if(!u.wrapLng&&(l.x<x.min.x||l.x>x.max.x)||!u.wrapLat&&(l.y<x.min.y||l.y>x.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(l);return ee(this.options.bounds).overlaps(_)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var u=this._map,x=this.getTileSize(),_=l.scaleBy(x),M=_.add(x),$=u.unproject(_,l.z),oe=u.unproject(M,l.z);return[$,oe]},_tileCoordsToBounds:function(l){var u=this._tileCoordsToNwSe(l),x=new ae(u[0],u[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var u=l.split(":"),x=new q(+u[0],+u[1]);return x.z=+u[2],x},_removeTile:function(l){var u=this._tiles[l];u&&(en(u.el),delete this._tiles[l],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){ht(l,"leaflet-tile");var u=this.getTileSize();l.style.width=u.x+"px",l.style.height=u.y+"px",l.onselectstart=j,l.onmousemove=j,Ve.ielt9&&this.options.opacity<1&&ga(l,this.options.opacity)},_addTile:function(l,u){var x=this._getTilePos(l),_=this._tileCoordsToKey(l),M=this.createTile(this._wrapCoords(l),h(this._tileReady,this,l));this._initTile(M),this.createTile.length<2&&V(h(this._tileReady,this,l,null,M)),fn(M,x),this._tiles[_]={el:M,coords:l,current:!0},u.appendChild(M),this.fire("tileloadstart",{tile:M,coords:l})},_tileReady:function(l,u,x){u&&this.fire("tileerror",{error:u,tile:x,coords:l});var _=this._tileCoordsToKey(l);x=this._tiles[_],x&&(x.loaded=+new Date,this._map._fadeAnimated?(ga(x.el,0),X(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),u||(ht(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var u=new q(this._wrapX?v(l.x,this._wrapX):l.x,this._wrapY?v(l.y,this._wrapY):l.y);return u.z=l.z,u},_pxBoundsToTileRange:function(l){var u=this.getTileSize();return new se(l.min.unscaleBy(u).floor(),l.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Wa(l){return new Dr(l)}var Pr=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,u){this._url=l,u=N(this,u),u.detectRetina&&Ve.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,u){return this._url===l&&u===void 0&&(u=!0),this._url=l,u||this.redraw(),this},createTile:function(l,u){var x=document.createElement("img");return mt(x,"load",h(this._tileOnLoad,this,u,x)),mt(x,"error",h(this._tileOnError,this,u,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(l),x},getTileUrl:function(l){var u={r:Ve.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-l.y;this.options.tms&&(u.y=x),u["-y"]=x}return D(this._url,o(u,this.options))},_tileOnLoad:function(l,u){Ve.ielt9?setTimeout(h(l,this,null,u),0):l(null,u)},_tileOnError:function(l,u,x){var _=this.options.errorTileUrl;_&&u.getAttribute("src")!==_&&(u.src=_),l(x,u)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,u=this.options.maxZoom,x=this.options.zoomReverse,_=this.options.zoomOffset;return x&&(l=u-l),l+_},_getSubdomain:function(l){var u=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var l,u;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(u=this._tiles[l].el,u.onload=j,u.onerror=j,!u.complete)){u.src=R;var x=this._tiles[l].coords;en(u),delete this._tiles[l],this.fire("tileabort",{tile:u,coords:x})}},_removeTile:function(l){var u=this._tiles[l];if(u)return u.el.setAttribute("src",R),Dr.prototype._removeTile.call(this,l)},_tileReady:function(l,u,x){if(!(!this._map||x&&x.getAttribute("src")===R))return Dr.prototype._tileReady.call(this,l,u,x)}});function Ca(l,u){return new Pr(l,u)}var ka=Pr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,u){this._url=l;var x=o({},this.defaultWmsParams);for(var _ in u)_ in this.options||(x[_]=u[_]);u=N(this,u);var M=u.detectRetina&&Ve.retina?2:1,$=this.getTileSize();x.width=$.x*M,x.height=$.y*M,this.wmsParams=x},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Pr.prototype.onAdd.call(this,l)},getTileUrl:function(l){var u=this._tileCoordsToNwSe(l),x=this._crs,_=ne(x.project(u[0]),x.project(u[1])),M=_.min,$=_.max,oe=(this._wmsVersion>=1.3&&this._crs===Gu?[M.y,M.x,$.y,$.x]:[M.x,M.y,$.x,$.y]).join(","),pe=Pr.prototype.getTileUrl.call(this,l);return pe+k(this.wmsParams,pe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+oe},setParams:function(l,u){return o(this.wmsParams,l),u||this.redraw(),this}});function bi(l,u){return new ka(l,u)}Pr.WMS=ka,Ca.wms=bi;var Ga=Va.extend({options:{padding:.1},initialize:function(l){N(this,l),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,u){var x=this._map.getZoomScale(u,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,u),$=_.multiplyBy(-x).add(M).subtract(this._map._getNewPixelOrigin(l,u));Ve.any3d?Ra(this._container,$,x):fn(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,u=this._map.getSize(),x=this._map.containerPointToLayerPoint(u.multiplyBy(-l)).round();this._bounds=new se(x,x.add(u.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bl=Ga.extend({options:{tolerance:0},getEvents:function(){var l=Ga.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ga.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");mt(l,"mousemove",this._onMouseMove,this),mt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,en(this._container),At(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var u in this._layers)l=this._layers[u],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ga.prototype._update.call(this);var l=this._bounds,u=this._container,x=l.getSize(),_=Ve.retina?2:1;fn(u,l.min),u.width=_*x.x,u.height=_*x.y,u.style.width=x.x+"px",u.style.height=x.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Ga.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[p(l)]=l;var u=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var u=l._order,x=u.next,_=u.prev;x?x.prev=_:this._drawLast=_,_?_.next=x:this._drawFirst=x,delete l._order,delete this._layers[p(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var u=l.options.dashArray.split(/[, ]+/),x=[],_,M;for(M=0;M<u.length;M++){if(_=Number(u[M]),isNaN(_))return;x.push(_)}l.options._dashArray=x}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var u=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(l._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(l._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var u=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,u=this._redrawBounds;if(this._ctx.save(),u){var x=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)l=_.layer,(!u||l._pxBounds&&l._pxBounds.intersects(u))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,u){if(this._drawing){var x,_,M,$,oe=l._parts,pe=oe.length,ve=this._ctx;if(pe){for(ve.beginPath(),x=0;x<pe;x++){for(_=0,M=oe[x].length;_<M;_++)$=oe[x][_],ve[_?"lineTo":"moveTo"]($.x,$.y);u&&ve.closePath()}this._fillStroke(ve,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var u=l._point,x=this._ctx,_=Math.max(Math.round(l._radius),1),M=(Math.max(Math.round(l._radiusY),1)||_)/_;M!==1&&(x.save(),x.scale(1,M)),x.beginPath(),x.arc(u.x,u.y/M,_,0,Math.PI*2,!1),M!==1&&x.restore(),this._fillStroke(x,l)}},_fillStroke:function(l,u){var x=u.options;x.fill&&(l.globalAlpha=x.fillOpacity,l.fillStyle=x.fillColor||x.color,l.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(l.setLineDash&&l.setLineDash(u.options&&u.options._dashArray||[]),l.globalAlpha=x.opacity,l.lineWidth=x.weight,l.strokeStyle=x.color,l.lineCap=x.lineCap,l.lineJoin=x.lineJoin,l.stroke())},_onClick:function(l){for(var u=this._map.mouseEventToLayerPoint(l),x,_,M=this._drawFirst;M;M=M.next)x=M.layer,x.options.interactive&&x._containsPoint(u)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(x))&&(_=x);this._fireEvent(_?[_]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,u)}},_handleMouseOut:function(l){var u=this._hoveredLayer;u&&(tn(this._container,"leaflet-interactive"),this._fireEvent([u],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,u){if(!this._mouseHoverThrottled){for(var x,_,M=this._drawFirst;M;M=M.next)x=M.layer,x.options.interactive&&x._containsPoint(u)&&(_=x);_!==this._hoveredLayer&&(this._handleMouseOut(l),_&&(ht(this._container,"leaflet-interactive"),this._fireEvent([_],l,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,u,x){this._map._fireDOMEvent(u,x||u.type,l)},_bringToFront:function(l){var u=l._order;if(u){var x=u.next,_=u.prev;if(x)x.prev=_;else return;_?_.next=x:x&&(this._drawFirst=x),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(l)}},_bringToBack:function(l){var u=l._order;if(u){var x=u.next,_=u.prev;if(_)_.next=x;else return;x?x.prev=_:_&&(this._drawLast=_),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(l)}}});function vl(l){return Ve.canvas?new bl(l):null}var Or=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vi={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ga.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var u=l._container=Or("shape");ht(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",l._path=Or("path"),u.appendChild(l._path),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){var u=l._container;this._container.appendChild(u),l.options.interactive&&l.addInteractiveTarget(u)},_removePath:function(l){var u=l._container;en(u),l.removeInteractiveTarget(u),delete this._layers[p(l)]},_updateStyle:function(l){var u=l._stroke,x=l._fill,_=l.options,M=l._container;M.stroked=!!_.stroke,M.filled=!!_.fill,_.stroke?(u||(u=l._stroke=Or("stroke")),M.appendChild(u),u.weight=_.weight+"px",u.color=_.color,u.opacity=_.opacity,_.dashArray?u.dashStyle=O(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=_.lineCap.replace("butt","flat"),u.joinstyle=_.lineJoin):u&&(M.removeChild(u),l._stroke=null),_.fill?(x||(x=l._fill=Or("fill")),M.appendChild(x),x.color=_.fillColor||_.color,x.opacity=_.fillOpacity):x&&(M.removeChild(x),l._fill=null)},_updateCircle:function(l){var u=l._point.round(),x=Math.round(l._radius),_=Math.round(l._radiusY||x);this._setPath(l,l._empty()?"M0 0":"AL "+u.x+","+u.y+" "+x+","+_+" 0,"+65535*360)},_setPath:function(l,u){l._path.v=u},_bringToFront:function(l){_r(l._container)},_bringToBack:function(l){ai(l._container)}},jl=Ve.vml?Or:it,Qs=Ga.extend({_initContainer:function(){this._container=jl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=jl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){en(this._container),At(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ga.prototype._update.call(this);var l=this._bounds,u=l.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,x.setAttribute("width",u.x),x.setAttribute("height",u.y)),fn(x,l.min),x.setAttribute("viewBox",[l.min.x,l.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(l){var u=l._path=jl("path");l.options.className&&ht(u,l.options.className),l.options.interactive&&ht(u,"leaflet-interactive"),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){en(l._path),l.removeInteractiveTarget(l._path),delete this._layers[p(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var u=l._path,x=l.options;u&&(x.stroke?(u.setAttribute("stroke",x.color),u.setAttribute("stroke-opacity",x.opacity),u.setAttribute("stroke-width",x.weight),u.setAttribute("stroke-linecap",x.lineCap),u.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?u.setAttribute("stroke-dasharray",x.dashArray):u.removeAttribute("stroke-dasharray"),x.dashOffset?u.setAttribute("stroke-dashoffset",x.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),x.fill?(u.setAttribute("fill",x.fillColor||x.color),u.setAttribute("fill-opacity",x.fillOpacity),u.setAttribute("fill-rule",x.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(l,u){this._setPath(l,Ce(l._parts,u))},_updateCircle:function(l){var u=l._point,x=Math.max(Math.round(l._radius),1),_=Math.max(Math.round(l._radiusY),1)||x,M="a"+x+","+_+" 0 1,0 ",$=l._empty()?"M0 0":"M"+(u.x-x)+","+u.y+M+x*2+",0 "+M+-x*2+",0 ";this._setPath(l,$)},_setPath:function(l,u){l._path.setAttribute("d",u)},_bringToFront:function(l){_r(l._path)},_bringToBack:function(l){ai(l._path)}});Ve.vml&&Qs.include(vi);function Lr(l){return Ve.svg||Ve.vml?new Qs(l):null}bt.include({getRenderer:function(l){var u=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var u=this._paneRenderers[l];return u===void 0&&(u=this._createRenderer({pane:l}),this._paneRenderers[l]=u),u},_createRenderer:function(l){return this.options.preferCanvas&&vl(l)||Lr(l)}});var am=gi.extend({initialize:function(l,u){gi.prototype.initialize.call(this,this._boundsToLatLngs(l),u)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=ee(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Ta(l,u){return new am(l,u)}Qs.create=jl,Qs.pointsToPath=Ce,Sa.geometryToLayer=pl,Sa.coordsToLatLng=uo,Sa.coordsToLatLngs=gl,Sa.latLngToCoords=xl,Sa.latLngsToCoords=mo,Sa.getFeature=Za,Sa.asFeature=xi,bt.mergeOptions({boxZoom:!0});var go=Ya.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){en(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ds(),ol(),this._startPoint=this._map.mouseEventToContainerPoint(l),mt(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var u=new se(this._point,this._startPoint),x=u.getSize();fn(this._box,u.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(en(this._box),tn(this._container,"leaflet-crosshair")),ll(),Dc(),At(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var u=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});bt.addInitHook("addHandler","boxZoom",go),bt.mergeOptions({doubleClickZoom:!0});var ps=Ya.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var u=this._map,x=u.getZoom(),_=u.options.zoomDelta,M=l.originalEvent.shiftKey?x-_:x+_;u.options.doubleClickZoom==="center"?u.setZoom(M):u.setZoomAround(l.containerPoint,M)}});bt.addInitHook("addHandler","doubleClickZoom",ps),bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zc=Ya.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Ws(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tn(this._map._container,"leaflet-grab"),tn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ee(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var u=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(u),this._prunePositions(u)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,u){return l-(l-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;l.x<u.min.x&&(l.x=this._viscousLimit(l.x,u.min.x)),l.y<u.min.y&&(l.y=this._viscousLimit(l.y,u.min.y)),l.x>u.max.x&&(l.x=this._viscousLimit(l.x,u.max.x)),l.y>u.max.y&&(l.y=this._viscousLimit(l.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,u=Math.round(l/2),x=this._initialWorldOffset,_=this._draggable._newPos.x,M=(_-u+x)%l+u-x,$=(_+u+x)%l-u-x,oe=Math.abs(M+x)<Math.abs($+x)?M:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=oe},_onDragEnd:function(l){var u=this._map,x=u.options,_=!x.inertia||l.noInertia||this._times.length<2;if(u.fire("dragend",l),_)u.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,oe=x.easeLinearity,pe=M.multiplyBy(oe/$),ve=pe.distanceTo([0,0]),Me=Math.min(x.inertiaMaxSpeed,ve),Ue=pe.multiplyBy(Me/ve),Ye=Me/(x.inertiaDeceleration*oe),Ge=Ue.multiplyBy(-Ye/2).round();!Ge.x&&!Ge.y?u.fire("moveend"):(Ge=u._limitOffset(Ge,u.options.maxBounds),V(function(){u.panBy(Ge,{duration:Ye,easeLinearity:oe,noMoveStart:!0,animate:!0})}))}}});bt.addInitHook("addHandler","dragging",Zc),bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wl=Ya.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),mt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),At(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,u=document.documentElement,x=l.scrollTop||u.scrollTop,_=l.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(_,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var u=this._panKeys={},x=this.keyCodes,_,M;for(_=0,M=x.left.length;_<M;_++)u[x.left[_]]=[-1*l,0];for(_=0,M=x.right.length;_<M;_++)u[x.right[_]]=[l,0];for(_=0,M=x.down.length;_<M;_++)u[x.down[_]]=[0,l];for(_=0,M=x.up.length;_<M;_++)u[x.up[_]]=[0,-1*l]},_setZoomDelta:function(l){var u=this._zoomKeys={},x=this.keyCodes,_,M;for(_=0,M=x.zoomIn.length;_<M;_++)u[x.zoomIn[_]]=l;for(_=0,M=x.zoomOut.length;_<M;_++)u[x.zoomOut[_]]=-l},_addHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){At(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=l.keyCode,x=this._map,_;if(u in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(_=this._panKeys[u],l.shiftKey&&(_=I(_).multiplyBy(3)),x.options.maxBounds&&(_=x._limitOffset(I(_),x.options.maxBounds)),x.options.worldCopyJump){var M=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(_)));x.panTo(M)}else x.panBy(_)}else if(u in this._zoomKeys)x.setZoom(x.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;hs(l)}}});bt.addInitHook("addHandler","keyboard",wl),bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xs=Ya.extend({addHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var u=ul(l),x=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var _=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),_),hs(l)},_performZoom:function(){var l=this._map,u=l.getZoom(),x=this._map.options.zoomSnap||0;l._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,$=x?Math.ceil(M/x)*x:M,oe=l._limitZoom(u+(this._delta>0?$:-$))-u;this._delta=0,this._startTime=null,oe&&(l.options.scrollWheelZoom==="center"?l.setZoom(u+oe):l.setZoomAround(this._lastMousePos,u+oe))}});bt.addInitHook("addHandler","scrollWheelZoom",Xs);var Kc=600;bt.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var xo=Ya.extend({addHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var u=l.touches[0];this._startPos=this._newPos=new q(u.clientX,u.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(mt(document,"touchend",_n),mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Kc),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){At(document,"touchend",_n),At(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)},_onMove:function(l){var u=l.touches[0];this._newPos=new q(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,u){var x=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});x._simulated=!0,u.target.dispatchEvent(x)}});bt.addInitHook("addHandler","tapHold",xo),bt.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var zr=Ya.extend({addHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tn(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var u=this._map;if(!(!l.touches||l.touches.length!==2||u._animatingZoom||this._zooming)){var x=u.mouseEventToContainerPoint(l.touches[0]),_=u.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(x.add(_)._divideBy(2))),this._startDist=x.distanceTo(_),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),_n(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var u=this._map,x=u.mouseEventToContainerPoint(l.touches[0]),_=u.mouseEventToContainerPoint(l.touches[1]),M=x.distanceTo(_)/this._startDist;if(this._zoom=u.getScaleZoom(M,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&M<1||this._zoom>u.getMaxZoom()&&M>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var $=x._add(_)._divideBy(2)._subtract(this._centerPoint);if(M===1&&$.x===0&&$.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var oe=h(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(oe,this,!0),_n(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});bt.addInitHook("addHandler","touchZoom",zr),bt.BoxZoom=go,bt.DoubleClickZoom=ps,bt.Drag=Zc,bt.Keyboard=wl,bt.ScrollWheelZoom=Xs,bt.TapHold=xo,bt.TouchZoom=zr,a.Bounds=se,a.Browser=Ve,a.CRS=Re,a.Canvas=bl,a.Circle=qc,a.CircleMarker=fl,a.Class=B,a.Control=xa,a.DivIcon=Vc,a.DivOverlay=Ka,a.DomEvent=Ff,a.DomUtil=Bu,a.Draggable=Ws,a.Evented=J,a.FeatureGroup=Na,a.GeoJSON=Sa,a.GridLayer=Dr,a.Handler=Ya,a.Icon=hi,a.ImageOverlay=fs,a.LatLng=le,a.LatLngBounds=ae,a.Layer=Va,a.LayerGroup=Rr,a.LineUtil=Ku,a.Map=bt,a.Marker=pi,a.Mixin=Vf,a.Path=Rs,a.Point=q,a.PolyUtil=Zf,a.Polygon=gi,a.Polyline=As,a.Popup=yl,a.PosAnimation=so,a.Projection=Wu,a.Rectangle=am,a.Renderer=Ga,a.SVG=Qs,a.SVGOverlay=Gs,a.TileLayer=Pr,a.Tooltip=po,a.Transformation=we,a.Util=W,a.VideoOverlay=fo,a.bind=h,a.bounds=ne,a.canvas=vl,a.circle=Jf,a.circleMarker=Xu,a.control=ui,a.divIcon=nm,a.extend=o,a.featureGroup=hl,a.geoJSON=ho,a.geoJson=Ju,a.gridLayer=Wa,a.icon=co,a.imageOverlay=yi,a.latLng=me,a.latLngBounds=ee,a.layerGroup=Qu,a.map=ml,a.marker=Hc,a.point=I,a.polygon=_a,a.polyline=ep,a.popup=tp,a.rectangle=Ta,a.setOptions=N,a.stamp=p,a.svg=Lr,a.svgOverlay=tm,a.tileLayer=Ca,a.tooltip=np,a.transformation=Be,a.version=r,a.videoOverlay=em;var ji=window.L;a.noConflict=function(){return window.L=ji,this},window.L=a})}(Ud,Ud.exports)),Ud.exports}var Tu=XM();const _c=pu(Tu);function B0(e,n,a){return Object.freeze({instance:e,context:n,container:a})}function $0(e,n){return n==null?function(r,o){const d=b.useRef(void 0);return d.current||(d.current=e(r,o)),d}:function(r,o){const d=b.useRef(void 0);d.current||(d.current=e(r,o));const h=b.useRef(r),{instance:g}=d.current;return b.useEffect(function(){h.current!==r&&(n(g,r,h.current),h.current=r)},[g,r,n]),d}}function JM(e,n){b.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function w2(e){return function(a){const r=z0(),o=e(I0(a,r),r);return v2(r.map,a.attribution),j2(o.current,a.eventHandlers),JM(o.current,r),o}}function eR(e,n){const a=$0(e,n),r=w2(a);return ZM(r)}function tR(e,n){const a=$0(e),r=GM(a,n);return KM(r)}function nR(e,n){const a=$0(e,n),r=w2(a);return WM(r)}function aR(e,n,a){const{opacity:r,zIndex:o}=n;r!=null&&r!==a.opacity&&e.setOpacity(r),o!=null&&o!==a.zIndex&&e.setZIndex(o)}function N2(){return z0().map}function _2(e){const n=N2();return b.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}function sR({bounds:e,boundsOptions:n,center:a,children:r,className:o,id:d,placeholder:h,style:g,whenReady:p,zoom:f,...v},j){const[S]=b.useState({className:o,id:d,style:g}),[T,C]=b.useState(null),N=b.useRef(void 0);b.useImperativeHandle(j,()=>T?.map??null,[T]);const k=b.useCallback(D=>{if(D!==null&&!N.current){const O=new Tu.Map(D,v);N.current=O,a!=null&&f!=null?O.setView(a,f):e!=null&&O.fitBounds(e,n),p!=null&&O.whenReady(p),C(YM(O))}},[]);b.useEffect(()=>()=>{T?.map.remove()},[T]);const A=T?Ke.createElement(L0,{value:T},r):h??null;return Ke.createElement("div",{...S,ref:k},A)}const S2=b.forwardRef(sR),Ox=eR(function({position:n,...a},r){const o=new Tu.Marker(n,a);return B0(o,VM(r,{overlayContainer:o}))},function(n,a,r){a.position!==r.position&&n.setLatLng(a.position),a.icon!=null&&a.icon!==r.icon&&n.setIcon(a.icon),a.zIndexOffset!=null&&a.zIndexOffset!==r.zIndexOffset&&n.setZIndexOffset(a.zIndexOffset),a.opacity!=null&&a.opacity!==r.opacity&&n.setOpacity(a.opacity),n.dragging!=null&&a.draggable!==r.draggable&&(a.draggable===!0?n.dragging.enable():n.dragging.disable())}),Tj=tR(function(n,a){const r=new Tu.Popup(n,a.overlayContainer);return B0(r,a)},function(n,a,{position:r},o){b.useEffect(function(){const{instance:h}=n;function g(f){f.popup===h&&(h.update(),o(!0))}function p(f){f.popup===h&&o(!1)}return a.map.on({popupopen:g,popupclose:p}),a.overlayContainer==null?(r!=null&&h.setLatLng(r),h.openOn(a.map)):a.overlayContainer.bindPopup(h),function(){a.map.off({popupopen:g,popupclose:p}),a.overlayContainer?.unbindPopup(),a.map.removeLayer(h)}},[n,a,o,r])}),C2=nR(function({url:n,...a},r){const o=new Tu.TileLayer(n,I0(a,r));return B0(o,r)},function(n,a,r){aR(n,a,r);const{url:o}=a;o!=null&&o!==r.url&&n.setUrl(o)});delete _c.Icon.Default.prototype._getIconUrl;_c.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Lx=({latitude:e=15.279272,longitude:n=44.227494,onChange:a,className:r="",disabled:o=!1,showMap:d=!0,allowManualInput:h=!0,placeholder:g="حدد الموقع",required:p=!1})=>{const[f,v]=b.useState(e),[j,S]=b.useState(n),[T,C]=b.useState(""),[N,k]=b.useState(!1),[A,D]=b.useState(!1),[O,F]=b.useState("");b.useRef(null),b.useEffect(()=>{v(e),S(n)},[e,n]);const R=async(X,W)=>{try{D(!0),F("");const B=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${X}&lon=${W}&accept-language=ar`);if(B.ok){const G=(await B.json()).display_name||`${X.toFixed(6)}, ${W.toFixed(6)}`;return C(G),G}}catch(B){console.error("خطأ في الحصول على العنوان:",B),F("لا يمكن الحصول على العنوان")}finally{D(!1)}return`${X.toFixed(6)}, ${W.toFixed(6)}`},H=async X=>{try{D(!0),F("");const W=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(X)}&countrycodes=ye&limit=1&accept-language=ar`);if(W.ok){const B=await W.json();if(B&&B.length>0){const te=B[0],G=parseFloat(te.lat),J=parseFloat(te.lon);return v(G),S(J),C(te.display_name),a(G,J,te.display_name),{lat:G,lng:J,address:te.display_name}}else F("لم يتم العثور على الموقع")}}catch(W){console.error("خطأ في البحث:",W),F("خطأ في البحث عن الموقع")}finally{D(!1)}return null},E=()=>{if(!navigator.geolocation){F("الجهاز لا يدعم تحديد الموقع");return}D(!0),F(""),navigator.geolocation.getCurrentPosition(async X=>{const W=X.coords.latitude,B=X.coords.longitude;v(W),S(B);const te=await R(W,B);a(W,B,te),D(!1)},X=>{console.error("خطأ في تحديد الموقع:",X),F("لا يمكن تحديد موقعك الحالي"),D(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},z=(X,W)=>{const B=parseFloat(W);isNaN(B)||(X==="lat"?(v(B),a(B,j)):(S(B),a(f,B)))},Z=X=>{X.preventDefault();const B=new FormData(X.currentTarget).get("search");B.trim()&&H(B.trim())},U=()=>{k(!N)},V=()=>(_2({click:async X=>{const W=X.latlng.lat,B=X.latlng.lng;v(W),S(B);const te=await R(W,B);a(W,B,te)}}),null);return t.jsxs("div",{className:`space-y-3 ${r}`,children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[t.jsx("div",{className:"flex-1",children:A?t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("span",{className:"text-sm text-gray-600",children:"جارٍ التحديد..."})]}):T?t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:T}),t.jsxs("p",{className:"text-xs text-gray-500",children:["📍 ",f.toFixed(6),", ",j.toFixed(6)]})]}):t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:g}),t.jsxs("p",{className:"text-xs text-gray-400",children:["📍 ",f.toFixed(6),", ",j.toFixed(6)]})]})}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[d&&t.jsx("button",{type:"button",onClick:U,disabled:o,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:N?"إخفاء الخريطة":"عرض الخريطة",children:"🗺️"}),t.jsx("button",{type:"button",onClick:E,disabled:o||A,className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"موقعي الحالي",children:"📍"})]})]}),t.jsxs("form",{onSubmit:Z,className:"flex space-x-2 space-x-reverse",children:[t.jsx("input",{type:"text",name:"search",placeholder:"ابحث عن موقع (مثل: صنعاء، الاصبحي شارع المقالح)",disabled:o,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),t.jsx("button",{type:"submit",disabled:o||A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"🔍"})]}),h&&t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"خط العرض (Latitude)"}),t.jsx("input",{type:"number",step:"0.000001",value:f,onChange:X=>z("lat",X.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"15.279272",min:"-90",max:"90"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"خط الطول (Longitude)"}),t.jsx("input",{type:"number",step:"0.000001",value:j,onChange:X=>z("lng",X.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"44.227494",min:"-180",max:"180"})]})]}),O&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:t.jsxs("p",{className:"text-sm text-red-800",children:["⚠️ ",O]})}),p&&(!f||!j)&&t.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:t.jsx("p",{className:"text-xs text-yellow-800",children:"⚠️ تحديد الموقع مطلوب"})}),N&&t.jsxs("div",{className:"border border-gray-300 rounded-md overflow-hidden",children:[t.jsx("div",{className:"h-64 w-full",children:t.jsxs(S2,{center:[f,j],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[t.jsx(C2,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.jsx(Ox,{position:[f,j]}),t.jsx(V,{})]})}),t.jsx("div",{className:"p-2 bg-gray-50 border-t border-gray-200",children:t.jsx("p",{className:"text-xs text-gray-600 text-center",children:"💡 اضغط على أي مكان في الخريطة لتحديد الموقع"})})]}),t.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[t.jsx("p",{children:"💡 نصائح:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 mr-4",children:[t.jsx("li",{children:"اضغط على 📍 للحصول على موقعك الحالي"}),t.jsx("li",{children:"ابحث بالاسم أو العنوان للعثور على الموقع"}),t.jsx("li",{children:"يمكنك إدخال الإحداثيات يدوياً بدقة 6 خانات عشرية"}),t.jsx("li",{children:"اضغط على 🗺️ لعرض/إخفاء الخريطة التفاعلية"}),t.jsx("li",{children:"اضغط على أي مكان في الخريطة لتحديد موقع جديد"})]})]})]})},rR=()=>{const e=is(),{showSuccess:n,showError:a}=vc(),[r,o]=b.useState(""),[d,h]=b.useState(!1),[g,p]=b.useState({name:"",email:"",password:"",phone:"",propertyTypeId:"",propertyName:"",description:"",address:"",city:"",latitude:void 0,longitude:void 0,starRating:3}),[f,v]=b.useState(""),[j,S]=b.useState(!1),[T,C]=b.useState(!1),[N,k]=b.useState({}),[A,D]=b.useState(!1),O={hotel:{gradient:"from-blue-500 via-purple-500 to-pink-500",bgImage:"bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",icon:"🏨",title:"انضم إلى شبكة الفنادق الرائدة",subtitle:"اجعل فندقك وجهة مفضلة للمسافرين والزوار",benefits:["إدارة ذكية للحجوزات","تحليلات متقدمة للإيرادات","نظام تقييم موثوق","دعم فني 24/7"],cta:"ابدأ رحلتك في صناعة الضيافة",animation:"animate-pulse"},"car-rental":{gradient:"from-green-500 via-emerald-500 to-teal-500",bgImage:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50",icon:"🚗",title:"قد أسطول سياراتك نحو النجاح",subtitle:"منصة متطورة لإدارة تأجير السيارات بكفاءة عالية",benefits:["تتبع دقيق للمركبات","إدارة عقود التأجير","تقارير مالية شاملة","صيانة مجدولة"],cta:"احجز مكانك في سوق تأجير السيارات",animation:"animate-bounce"},chalet:{gradient:"from-orange-500 via-amber-500 to-yellow-500",bgImage:"bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50",icon:"🏡",title:"اجعل شاليهك ومزرعتك واحة للاسترخاء",subtitle:"منصة حصرية لإدارة الشاليهات والمزارع السياحية",benefits:["حجوزات المناسبات الخاصة","إدارة المرافق والخدمات","تسويق موسمي ذكي","ضمان الجودة"],cta:"حول ممتلكاتك إلى مصدر دخل مستدام",animation:"animate-swing"},"sports-lounge":{gradient:"from-red-500 via-rose-500 to-pink-500",bgImage:"bg-gradient-to-br from-red-50 via-rose-50 to-pink-50",icon:"⚽",title:"ناديك الرياضي.. مركز للإثارة والمتعة",subtitle:"إدارة احترافية للنوادي الرياضية ومراكز الترفيه",benefits:["جدولة الفعاليات الرياضية","إدارة الملاعب والمرافق","نظام العضويات","تنظيم البطولات"],cta:"كن شريكنا وضاعف ربحك من ناديك الرياضي",animation:"animate-ping"},majlis:{gradient:"from-green-500 via-emerald-500 to-teal-500",bgImage:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50",icon:"🍃",title:"مجلسك التراثي.. أصالة وضيافة",subtitle:"منصة مخصصة لإدارة حجوزات المجالس والطيرمانات",benefits:["حجوزات جمعات الاصدقاء","إدارة الخدمات التقليدية","الحفاظ على الطابع الأصيل","ضيافة راقية"],cta:"بوابتك الاوسع لجلب ضيوفك",animation:"animate-sway"}};b.useEffect(()=>{if(r){h(!0);const B=setTimeout(()=>h(!1),800);return()=>clearTimeout(B)}},[r]);const{data:F,isLoading:R,error:H}=zt({queryKey:["property-types"],queryFn:()=>HM.getAll({pageNumber:1,pageSize:100})}),E=Ie({mutationFn:FM.registerPropertyOwner,onSuccess:B=>{B.success?(n("تم إنشاء الحساب بنجاح! سيتم توجيهك لتسجيل الدخول"),e("/auth/login")):a(B.message||"فشل في إنشاء الحساب")},onError:B=>{a(B.response?.data?.message||"حدث خطأ أثناء إنشاء الحساب")}}),z=()=>{const B={};return g.name.trim()||(B.name="الاسم مطلوب"),g.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)||(B.email="البريد الإلكتروني غير صحيح"):B.email="البريد الإلكتروني مطلوب",g.phone.trim()?/^[0-9+\-\s()]+$/.test(g.phone)||(B.phone="رقم الهاتف غير صحيح"):B.phone="رقم الهاتف مطلوب",g.password.trim()?g.password.length<6&&(B.password="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):B.password="كلمة المرور مطلوبة",f.trim()?g.password!==f&&(B.confirmPassword="كلمة المرور غير متطابقة"):B.confirmPassword="تأكيد كلمة المرور مطلوب",g.propertyTypeId||(B.propertyTypeId="نوع الكيان مطلوب"),g.propertyName.trim()||(B.propertyName="اسم الكيان مطلوب"),g.address.trim()||(B.address="عنوان الكيان مطلوب"),g.city.trim()||(B.city="المدينة مطلوبة"),A?(k(B),Object.keys(B).length===0):(a("يجب الموافقة على الشروط والأحكام"),!1)},Z=B=>{B.preventDefault(),z()&&E.mutate(g)},U=(B,te)=>{if(p(G=>({...G,[B]:te})),B==="propertyTypeId"){const G=F?.items.find(J=>J.id===te);if(G){const J=V(G.name);o(J)}}N[B]&&k(G=>({...G,[B]:void 0}))},V=B=>{const te=B.toLowerCase();return te.includes("فند")||te.includes("hotel")?"hotel":te.includes("سيار")||te.includes("car")?"car-rental":te.includes("شال")||te.includes("مزرع")||te.includes("chalet")?"chalet":te.includes("رياض")||te.includes("sport")?"sports-lounge":te.includes("مجل")||te.includes("قات")||te.includes("majlis")?"majlis":"hotel"},W=O[r]||O.hotel;return t.jsx(b2,{restricted:!0,children:t.jsxs("div",{className:"min-h-screen bg-white flex flex-col lg:flex-row",children:[t.jsx("div",{className:"lg:hidden w-full bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden py-6 px-4",children:t.jsx("div",{className:"relative z-10 text-center",children:r?t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-r ${W.gradient} text-white text-2xl shadow-lg transform transition-all duration-500 ${W.animation}`,children:W.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white mb-1 leading-tight",children:W.title}),t.jsx("p",{className:"text-sm text-blue-100 leading-relaxed",children:W.subtitle})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white text-2xl shadow-lg",children:"🏢"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:"منصة BookN"}),t.jsx("p",{className:"text-sm text-blue-100",children:"حلول ذكية وشاملة لإدارة جميع أنواع خدمات الحجوزات والتأجير"})]})]})})}),t.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col justify-center px-4 sm:px-8 lg:px-12 py-4 lg:py-8 bg-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 opacity-5",children:t.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),t.jsxs("div",{className:"relative z-10 max-w-md mx-auto w-full",children:[t.jsxs("div",{className:"text-center mb-6 lg:mb-8",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center text-white text-lg sm:text-2xl font-bold mx-auto mb-3 sm:mb-4 shadow-lg",children:"B"}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"إنشاء حساب جديد"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"انضم إلى منصة BookN واستمتع بإدارة احترافية"})]}),t.jsxs("form",{onSubmit:Z,className:"space-y-4 lg:space-y-6",children:[t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"البيانات الشخصية"}),t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم الكامل"}),t.jsx("input",{type:"text",value:g.name,onChange:B=>U("name",B.target.value),placeholder:"أدخل اسمك الكامل",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${N.name?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),N.name&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),t.jsx("input",{type:"tel",value:g.phone,onChange:B=>U("phone",B.target.value),placeholder:"781272968",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${N.phone?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),N.phone&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.phone})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:g.email,onChange:B=>U("email",B.target.value),placeholder:"owner@example.com",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${N.email?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),N.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.email})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:j?"text":"password",value:g.password,onChange:B=>U("password",B.target.value),placeholder:"كلمة المرور",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 pr-10 lg:pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${N.password?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>S(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:E.isPending,children:j?"إخفاء":"إظهار"})]}),N.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.password})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:T?"text":"password",value:f,onChange:B=>{v(B.target.value),N.confirmPassword&&k(te=>({...te,confirmPassword:void 0}))},placeholder:"تأكيد كلمة المرور",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 pr-10 lg:pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${N.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>C(!T),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:E.isPending,children:T?"إخفاء":"إظهار"})]}),N.confirmPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.confirmPassword})]})]})]})]}),t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"بيانات الكيان"}),t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الكيان"}),t.jsxs("select",{value:g.propertyTypeId,onChange:B=>U("propertyTypeId",B.target.value),disabled:E.isPending||R,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${N.propertyTypeId?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,children:[t.jsx("option",{value:"",children:"اختر نوع الكيان"}),F?.items.map(B=>t.jsx("option",{value:B.id,children:B.name},B.id))]}),H&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:"خطأ في تحميل أنواع الكيانات"}),N.propertyTypeId&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.propertyTypeId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الكيان"}),t.jsx("input",{type:"text",value:g.propertyName,onChange:B=>U("propertyName",B.target.value),placeholder:"فندق الراحة",disabled:E.isPending,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${N.propertyName?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),N.propertyName&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.propertyName})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المدينة"}),t.jsx("input",{type:"text",value:g.city,onChange:B=>U("city",B.target.value),placeholder:"صنعاء",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${N.city?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),N.city&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.city})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التقييم الأولي"}),t.jsxs("select",{value:g.starRating,onChange:B=>U("starRating",parseInt(B.target.value)),disabled:E.isPending,className:"w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[t.jsx("option",{value:1,children:"نجمة واحدة"}),t.jsx("option",{value:2,children:"نجمتان"}),t.jsx("option",{value:3,children:"3 نجوم"}),t.jsx("option",{value:4,children:"4 نجوم"}),t.jsx("option",{value:5,children:"5 نجوم"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الكيان"}),t.jsx("input",{type:"text",value:g.address,onChange:B=>U("address",B.target.value),placeholder:"مثل : الاصبحي شارع المقالح",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${N.address?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),N.address&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.address})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموقع الجغرافي"}),t.jsx(Lx,{latitude:g.latitude,longitude:g.longitude,onChange:(B,te)=>{U("latitude",B),U("longitude",te)},placeholder:"حدد موقع الكيان",disabled:E.isPending,showMap:!0,allowManualInput:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف الكيان (اختياري)"}),t.jsx("textarea",{value:g.description||"",onChange:B=>U("description",B.target.value),placeholder:"وصف مختصر عن الكيان وخدماته",disabled:E.isPending,rows:3,className:"w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]})]}),t.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[t.jsx("input",{type:"checkbox",checked:A,onChange:B=>D(B.target.checked),className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:E.isPending}),t.jsx("div",{className:"text-sm",children:t.jsxs("p",{className:"text-gray-700",children:["أوافق على"," ",t.jsx(Bs,{to:"/terms",className:"text-blue-600 hover:text-blue-500 font-medium",children:"الشروط والأحكام"})," ","و"," ",t.jsx(Bs,{to:"/privacy",className:"text-blue-600 hover:text-blue-500 font-medium",children:"سياسة الخصوصية"})]})})]}),t.jsx("button",{type:"submit",disabled:E.isPending||!A,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2.5 sm:py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin ml-2"}),"جاري إنشاء الحساب..."]}):"إنشاء الحساب"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",t.jsx(Bs,{to:"/auth/login",className:"text-blue-600 hover:text-blue-500 font-medium",children:"سجل الدخول"})]})})]})]}),t.jsxs("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden items-center justify-center",children:[t.jsxs("div",{className:"absolute inset-0",children:[t.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),t.jsx("div",{className:"absolute top-1/3 right-20 w-48 h-48 bg-purple-500/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute bottom-20 left-1/3 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"2s"}}),t.jsx("div",{className:"absolute inset-0 opacity-10",children:t.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='white' fill-opacity='0.1'%3E%3Cpath d='M0 0h40v1H0zm0 20h40v1H0z'/%3E%3Cpath d='M0 0v40h1V0zm20 0v40h1V0z'/%3E%3C/g%3E%3C/svg%3E")`}})})]}),t.jsx("div",{className:"relative z-10 text-center px-12 max-w-lg",children:r?t.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-2xl bg-gradient-to-r ${W.gradient} text-white text-4xl shadow-2xl transform transition-all duration-500 ${W.animation}`,children:W.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-4xl font-bold text-white mb-4 leading-tight",children:W.title}),t.jsx("p",{className:"text-xl text-blue-100 leading-relaxed",children:W.subtitle})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:W.benefits.map((B,te)=>t.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20 transform hover:scale-105 transition-all duration-300",style:{animationDelay:`${te*.1}s`},children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`w-8 h-8 mx-auto mb-2 bg-gradient-to-r ${W.gradient} rounded-full flex items-center justify-center`,children:t.jsx("span",{className:"text-white text-sm",children:"✓"})}),t.jsx("p",{className:"text-sm font-medium text-white",children:B})]})},te))}),t.jsx("div",{className:`inline-block px-8 py-4 bg-gradient-to-r ${W.gradient} text-white rounded-xl shadow-xl text-lg font-semibold transform hover:scale-105 transition-all duration-300`,children:W.cta})]}):t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-2xl bg-gradient-to-r from-blue-600 to-purple-600 text-white text-4xl shadow-2xl",children:"🏢"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-4xl font-bold text-white mb-4 leading-tight",children:"منصة BookN"}),t.jsx("p",{className:"text-xl text-blue-100 leading-relaxed",children:"حلول ذكية وشاملة لإدارة جميع أنواع خدمات الحجوزات والتأجير"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:["إدارة ذكية للحجوزات","تحليلات متقدمة","نظام مدفوعات آمن","دعم فني 24/7"].map((B,te)=>t.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20 transform hover:scale-105 transition-all duration-300",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm",children:"✓"})}),t.jsx("p",{className:"text-sm font-medium text-white",children:B})]})},te))}),t.jsx("div",{className:"text-blue-100 text-lg",children:"اختر نوع الكيان لرؤية المزايا المخصصة"})]})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes sway {
          0%, 100% { transform: rotate(-3deg) scale(1); }
          50% { transform: rotate(3deg) scale(1.05); }
        }
        .animate-sway {
          animation: sway 2s ease-in-out infinite;
        }
      `})]})})},Ej=e=>{let n;const a=new Set,r=(f,v)=>{const j=typeof f=="function"?f(n):f;if(!Object.is(j,n)){const S=n;n=v??(typeof j!="object"||j===null)?j:Object.assign({},n,j),a.forEach(T=>T(n,S))}},o=()=>n,g={setState:r,getState:o,getInitialState:()=>p,subscribe:f=>(a.add(f),()=>a.delete(f))},p=n=e(r,o,g);return g},iR=e=>e?Ej(e):Ej,lR=e=>e;function oR(e,n=lR){const a=Ke.useSyncExternalStore(e.subscribe,Ke.useCallback(()=>n(e.getState()),[e,n]),Ke.useCallback(()=>n(e.getInitialState()),[e,n]));return Ke.useDebugValue(a),a}const cR=e=>{const n=iR(e),a=r=>oR(n,r);return Object.assign(a,n),a},dR=e=>cR;function uR(e,n){let a;try{a=e()}catch{return}return{getItem:o=>{var d;const h=p=>p===null?null:JSON.parse(p,void 0),g=(d=a.getItem(o))!=null?d:null;return g instanceof Promise?g.then(h):h(g)},setItem:(o,d)=>a.setItem(o,JSON.stringify(d,void 0)),removeItem:o=>a.removeItem(o)}}const zx=e=>n=>{try{const a=e(n);return a instanceof Promise?a:{then(r){return zx(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return zx(r)(a)}}}},mR=(e,n)=>(a,r,o)=>{let d={storage:uR(()=>localStorage),partialize:N=>N,version:0,merge:(N,k)=>({...k,...N}),...n},h=!1;const g=new Set,p=new Set;let f=d.storage;if(!f)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),a(...N)},r,o);const v=()=>{const N=d.partialize({...r()});return f.setItem(d.name,{state:N,version:d.version})},j=o.setState;o.setState=(N,k)=>{j(N,k),v()};const S=e((...N)=>{a(...N),v()},r,o);o.getInitialState=()=>S;let T;const C=()=>{var N,k;if(!f)return;h=!1,g.forEach(D=>{var O;return D((O=r())!=null?O:S)});const A=((k=d.onRehydrateStorage)==null?void 0:k.call(d,(N=r())!=null?N:S))||void 0;return zx(f.getItem.bind(f))(d.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==d.version){if(d.migrate){const O=d.migrate(D.state,D.version);return O instanceof Promise?O.then(F=>[!0,F]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var O;const[F,R]=D;if(T=d.merge(R,(O=r())!=null?O:S),a(T,!0),F)return v()}).then(()=>{A?.(T,void 0),T=r(),h=!0,p.forEach(D=>D(T))}).catch(D=>{A?.(void 0,D)})};return o.persist={setOptions:N=>{d={...d,...N},N.storage&&(f=N.storage)},clearStorage:()=>{f?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>C(),hasHydrated:()=>h,onHydrate:N=>(g.add(N),()=>{g.delete(N)}),onFinishHydration:N=>(p.add(N),()=>{p.delete(N)})},d.skipHydration||C(),T||S},hR=mR,Pd={currentUser:null,settings:{theme:"light",language:"ar",currency:"YER",timezone:"Asia/Riyadh",pageSize:20,dateFormat:"DD/MM/YYYY",notifications:{email:!0,push:!0,sms:!1}},ui:{sidebarCollapsed:!1,loading:!1,error:null,success:null,activeModal:null,breadcrumbs:[]},cache:{properties:[],users:[],unitTypes:[],lastUpdated:{}}},Yd=dR()(hR((e,n)=>({...Pd,setCurrentUser:a=>e(r=>({currentUser:a,ui:{...r.ui,error:null}})),logout:()=>e(a=>({currentUser:null,cache:Pd.cache,ui:{...a.ui,activeModal:null,error:null,success:null}})),updateSettings:a=>e(r=>({settings:{...r.settings,...a}})),setSidebarCollapsed:a=>e(r=>({ui:{...r.ui,sidebarCollapsed:a}})),setLoading:a=>e(r=>({ui:{...r.ui,loading:a}})),setError:a=>e(r=>({ui:{...r.ui,error:a,success:a?null:r.ui.success}})),setSuccess:a=>e(r=>({ui:{...r.ui,success:a,error:a?null:r.ui.error}})),setActiveModal:a=>e(r=>({ui:{...r.ui,activeModal:a}})),setBreadcrumbs:a=>e(r=>({ui:{...r.ui,breadcrumbs:a}})),updateCache:(a,r)=>e(o=>({cache:{...o.cache,[a]:r,lastUpdated:{...o.cache.lastUpdated,[a]:Date.now()}}})),clearCache:a=>e(r=>{if(a){const o={...r.cache};return o[a]=Pd.cache[a],delete o.lastUpdated[a],{cache:o}}else return{cache:Pd.cache}}),clearNotifications:()=>e(a=>({ui:{...a.ui,error:null,success:null}})),resetState:()=>e(Pd)}),{name:"bookn-app-store",partialize:e=>({currentUser:e.currentUser,settings:e.settings,ui:{sidebarCollapsed:e.ui.sidebarCollapsed}})})),fR=()=>Yd(e=>e.ui.error),pR=()=>Yd(e=>e.ui.success),k2=()=>{const e=Yd(g=>g.setError),n=Yd(g=>g.setSuccess),a=Yd(g=>g.clearNotifications),r=fR(),o=pR();return{error:r,success:o,showError:g=>e(g),showSuccess:g=>n(g),clearNotifications:a}},Mt=({isOpen:e,onClose:n,title:a,children:r,size:o="md",footer:d,closable:h=!0,maskClosable:g=!0})=>{const p={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl"};return b.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),b.useEffect(()=>{const f=v=>{v.key==="Escape"&&h&&n()};return e&&document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[e,h,n]),e?t.jsx("div",{className:"fixed inset-0 z-[10000] overflow-y-auto",children:t.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:g?n:void 0}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),t.jsxs("div",{className:`inline-block align-bottom bg-white rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full ${p[o]}`,children:[t.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a}),h&&t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("span",{className:"text-xl",children:"×"})})]})}),t.jsx("div",{className:"bg-white px-6 py-4 max-h-96 overflow-y-auto",children:r}),d&&t.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:d})]})]})}):null},T2=({isOpen:e,onClose:n,onConfirm:a,title:r,message:o,confirmText:d="تأكيد",cancelText:h="إلغاء",type:g="info",loading:p=!1})=>{const f=()=>{switch(g){case"danger":return"🗑️";case"warning":return"⚠️";case"info":return"ℹ️";default:return"ℹ️"}},j=(()=>{switch(g){case"danger":return{bg:"bg-red-50",border:"border-red-200",icon:"text-red-400",title:"text-red-800",message:"text-red-700",button:"bg-red-600 hover:bg-red-700 text-white"};case"warning":return{bg:"bg-yellow-50",border:"border-yellow-200",icon:"text-yellow-400",title:"text-yellow-800",message:"text-yellow-700",button:"bg-yellow-600 hover:bg-yellow-700 text-white"};case"info":return{bg:"bg-blue-50",border:"border-blue-200",icon:"text-blue-400",title:"text-blue-800",message:"text-blue-700",button:"bg-blue-600 hover:bg-blue-700 text-white"};default:return{bg:"bg-gray-50",border:"border-gray-200",icon:"text-gray-400",title:"text-gray-800",message:"text-gray-700",button:"bg-gray-600 hover:bg-gray-700 text-white"}}})();return t.jsx(Mt,{isOpen:e,onClose:n,title:"",size:"sm",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:n,disabled:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 disabled:opacity-50",children:h}),t.jsx("button",{onClick:a,disabled:p,className:`px-4 py-2 rounded-md disabled:opacity-50 transition-colors ${j.button}`,children:p?t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),t.jsx("span",{children:"جارٍ التنفيذ..."})]}):d})]}),children:t.jsx("div",{className:`rounded-md p-4 ${j.bg} ${j.border} border`,children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:`text-2xl ${j.icon}`,children:f()})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:`text-lg font-medium ${j.title}`,children:r}),t.jsx("div",{className:`mt-2 text-sm ${j.message}`,children:t.jsx("p",{children:o})})]})]})})})},Lh=({icon:e="📋",title:n,description:a,actionLabel:r,onAction:o,className:d="",size:h="md"})=>{const p=(()=>{switch(h){case"sm":return{container:"py-8",icon:"text-4xl",title:"text-lg",description:"text-sm"};case"lg":return{container:"py-16",icon:"text-8xl",title:"text-2xl",description:"text-lg"};default:return{container:"py-12",icon:"text-6xl",title:"text-xl",description:"text-base"}}})();return t.jsxs("div",{className:`text-center ${p.container} ${d}`,children:[t.jsx("div",{className:`${p.icon} mb-4`,children:e}),t.jsx("h3",{className:`${p.title} font-semibold text-gray-900 mb-2`,children:n}),a&&t.jsx("p",{className:`${p.description} text-gray-600 mb-6 max-w-md mx-auto`,children:a}),r&&o&&t.jsx(rt,{onClick:o,label:r,variant:"primary",size:h==="lg"?"lg":"md"})]})},Kr=({status:e,variant:n="default",size:a="md",className:r=""})=>{const o=()=>({sm:"px-2 py-0.5 text-xs",md:"px-2 py-1 text-xs",lg:"px-3 py-1.5 text-sm"})[a],h=(()=>{const g={booking:{Pending:{label:"معلق",color:"bg-yellow-100 text-yellow-800",icon:"⏳"},Confirmed:{label:"مؤكد",color:"bg-blue-100 text-blue-800",icon:"✅"},Cancelled:{label:"ملغي",color:"bg-red-100 text-red-800",icon:"❌"},Completed:{label:"مكتمل",color:"bg-green-100 text-green-800",icon:"🏁"},CheckedIn:{label:"تم تسجيل الدخول",color:"bg-purple-100 text-purple-800",icon:"🚪"},CheckedOut:{label:"تم تسجيل الخروج",color:"bg-gray-100 text-gray-800",icon:"🚶‍♂️"}},payment:{Successful:{label:"ناجح",color:"bg-green-100 text-green-800",icon:"✅"},Failed:{label:"فاشل",color:"bg-red-100 text-red-800",icon:"❌"},Pending:{label:"معلق",color:"bg-yellow-100 text-yellow-800",icon:"⏳"},Refunded:{label:"مسترد",color:"bg-blue-100 text-blue-800",icon:"↩️"},Voided:{label:"ملغي",color:"bg-gray-100 text-gray-800",icon:"🚫"},PartiallyRefunded:{label:"مسترد جزئياً",color:"bg-purple-100 text-purple-800",icon:"↪️"}},user:{Active:{label:"نشط",color:"bg-green-100 text-green-800",icon:"✅"},Inactive:{label:"غير نشط",color:"bg-gray-100 text-gray-800",icon:"⭕"},Suspended:{label:"معلق",color:"bg-red-100 text-red-800",icon:"🚫"},Pending:{label:"في الانتظار",color:"bg-yellow-100 text-yellow-800",icon:"⏳"}},property:{Available:{label:"متاح",color:"bg-green-100 text-green-800",icon:"✅"},Occupied:{label:"مشغول",color:"bg-red-100 text-red-800",icon:"🔴"},Maintenance:{label:"صيانة",color:"bg-yellow-100 text-yellow-800",icon:"🔧"},Unavailable:{label:"غير متاح",color:"bg-gray-100 text-gray-800",icon:"⭕"}},default:{active:{label:"نشط",color:"bg-green-100 text-green-800",icon:"✅"},inactive:{label:"غير نشط",color:"bg-gray-100 text-gray-800",icon:"⭕"},pending:{label:"معلق",color:"bg-yellow-100 text-yellow-800",icon:"⏳"},success:{label:"نجح",color:"bg-green-100 text-green-800",icon:"✅"},error:{label:"خطأ",color:"bg-red-100 text-red-800",icon:"❌"},warning:{label:"تحذير",color:"bg-yellow-100 text-yellow-800",icon:"⚠️"},info:{label:"معلومات",color:"bg-blue-100 text-blue-800",icon:"ℹ️"}}};return(g[n]||g.default)[e]||{label:e,color:"bg-gray-100 text-gray-800",icon:"📍"}})();return t.jsxs("span",{className:`
        inline-flex items-center space-x-1 space-x-reverse font-medium rounded-full
        ${o()}
        ${h.color}
        ${r}
      `,children:[t.jsx("span",{children:h.icon}),t.jsx("span",{children:h.label})]})},Ia=({variant:e="default",padding:n="md",hover:a=!1,className:r="",children:o,...d})=>{const h={default:"bg-white border border-gray-200",bordered:"bg-white border-2 border-gray-300",shadow:"bg-white shadow-lg",ghost:"bg-gray-50 border border-gray-100"},g={none:"",sm:"p-3",md:"p-4",lg:"p-6"};return t.jsx("div",{className:We("rounded-lg transition-all duration-200",h[e],g[n],a&&"hover:shadow-md hover:border-gray-300 cursor-pointer",r),...d,children:o})},gR=({currentImage:e,onImageUpload:n,onImageDelete:a,isUploading:r=!1,disabled:o=!1,size:d="md",showDeleteButton:h=!0,acceptedTypes:g=["image/jpeg","image/png","image/jpg"],maxFileSize:p=2,placeholder:f})=>{const[v,j]=b.useState(!1),S=b.useRef(null),T={sm:"w-16 h-16",md:"w-24 h-24",lg:"w-32 h-32"},C=F=>{if(!F)return;if(!g.includes(F.type)){alert(`نوع الملف غير مدعوم. الأنواع المدعومة: ${g.join(", ")}`);return}const R=p*1024*1024;if(F.size>R){alert(`حجم الملف كبير جداً. الحد الأقصى: ${p}MB`);return}n(F)},N=F=>{F.preventDefault(),j(!0)},k=F=>{F.preventDefault(),j(!1)},A=F=>{F.preventDefault(),j(!1);const R=F.dataTransfer.files;R&&R[0]&&C(R[0])},D=F=>{const R=F.target.files;R&&R[0]&&C(R[0])},O=()=>{!o&&!r&&S.current&&S.current.click()};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-6 space-x-reverse",children:[t.jsxs("div",{className:`${T[d]} bg-gray-200 rounded-full flex items-center justify-center overflow-hidden relative cursor-pointer border-2 border-dashed transition-colors ${v?"border-blue-500 bg-blue-50":"border-gray-300"} ${o||r?"opacity-50 cursor-not-allowed":"hover:border-blue-400"}`,onDragOver:N,onDragLeave:k,onDrop:A,onClick:O,children:[e?t.jsx("img",{src:e,alt:"الصورة الحالية",className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-center",children:r?t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}):t.jsxs("div",{className:"text-gray-400",children:[t.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),t.jsx("p",{className:"text-xs",children:f||"اختر صورة"})]})}),e&&!r&&t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:t.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{ref:S,type:"file",accept:g.join(","),onChange:D,className:"hidden",disabled:o||r}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(rt,{variant:"secondary",label:r?"جاري الرفع...":e?"تغيير الصورة":"اختيار صورة",onClick:O,disabled:o||r,className:"text-sm"}),e&&h&&a&&t.jsx(rt,{variant:"danger",label:"حذف الصورة",onClick:a,disabled:o||r,className:"text-sm"})]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[g.includes("image/jpeg")?"JPG":"",g.includes("image/png")?" أو PNG":"",". حد أقصى ",p,"MB"]})]})]}),!e&&t.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${v?"border-blue-500 bg-blue-50":"border-gray-300"} ${o||r?"opacity-50 cursor-not-allowed":"hover:border-blue-400 cursor-pointer"}`,onDragOver:N,onDragLeave:k,onDrop:A,onClick:O,children:[t.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("p",{className:"text-gray-600 mb-2",children:"اسحب وأفلت الصورة هنا"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"أو انقر للاختيار من الجهاز"})]})]})},Ix=({actions:e,size:n="md"})=>{const[a,r]=b.useState(!1),o=b.useRef(null);b.useEffect(()=>{const p=f=>{o.current&&!o.current.contains(f.target)&&r(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const d=p=>{p.disabled||(p.onClick(),r(!1))},h=n==="sm"?"p-1.5 text-xs":"p-2 text-sm",g=n==="sm"?"text-xs py-1":"text-sm py-2";return t.jsxs("div",{className:"relative inline-block",ref:o,children:[t.jsx("button",{onClick:()=>r(!a),className:`${h} text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1`,"aria-label":"إجراءات",children:t.jsx("svg",{className:`${n==="sm"?"w-4 h-4":"w-5 h-5"}`,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),a&&t.jsx("div",{className:`absolute left-0 mt-1 ${n==="sm"?"w-32":"w-40"} bg-white rounded-md shadow-lg border border-gray-200 z-50`,children:t.jsx("div",{className:`${g}`,children:e.map((p,f)=>t.jsxs("button",{onClick:()=>d(p),disabled:p.disabled,className:`
                  w-full text-right px-3 py-2 flex items-center gap-2 transition-colors
                  ${p.disabled?"text-gray-400 cursor-not-allowed":p.variant==="danger"?"text-red-600 hover:bg-red-50 hover:text-red-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                  ${f!==e.length-1?"border-b border-gray-100":""}
                `,children:[t.jsx("span",{className:"text-base",children:p.icon}),t.jsx("span",{className:"flex-1",children:p.label})]},f))})})]})},xR=()=>{const{showSuccess:e,showError:n}=vc(),[a,r]=b.useState(""),[o,d]=b.useState(""),[h,g]=b.useState(!1),p=Ie({mutationFn:eu.forgotPassword,onSuccess:C=>{C.success?(g(!0),e("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني")):n(C.message||"فشل في إرسال البريد الإلكتروني")},onError:C=>{n(C.response?.data?.message||"حدث خطأ أثناء إرسال البريد الإلكتروني")}}),f=Ie({mutationFn:eu.resendPasswordResetLink,onSuccess:C=>{C.success?e("تم إعادة إرسال الرابط بنجاح"):n(C.message||"فشل في إعادة الإرسال")},onError:C=>{n(C.response?.data?.message||"حدث خطأ أثناء إعادة الإرسال")}}),v=()=>{if(a.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return d("البريد الإلكتروني غير صحيح"),!1}else return d("البريد الإلكتروني مطلوب"),!1;return d(""),!0},j=C=>{if(C.preventDefault(),v()){const N={email:a};p.mutate(N)}},S=()=>{const C={email:a};f.mutate(C)},T=C=>{r(C),o&&d("")};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:t.jsxs(Ia,{className:"w-full max-w-md p-8 shadow-xl",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-white text-2xl font-bold",children:"B"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"BookN"}),t.jsx("p",{className:"text-gray-600",children:h?"تم إرسال البريد الإلكتروني":"نسيت كلمة المرور؟"})]}),h?t.jsxs("div",{className:"text-center space-y-6",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"تم إرسال البريد الإلكتروني"}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"تم إرسال رابط إعادة تعيين كلمة المرور إلى:"}),t.jsx("p",{className:"font-medium text-gray-900 text-sm mb-6",children:a}),t.jsx("p",{className:"text-gray-500 text-xs mb-6",children:"تحقق من صندوق الوارد أو مجلد الرسائل غير المرغوب فيها"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(rt,{variant:"secondary",label:f.isPending?"جاري الإرسال...":"إعادة إرسال البريد",onClick:S,className:"w-full",disabled:f.isPending}),t.jsx(rt,{variant:"secondary",label:"تغيير البريد الإلكتروني",onClick:()=>{g(!1),r("")},className:"w-full"})]})]}):t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 text-center",children:t.jsx("p",{className:"text-gray-600 text-sm",children:"أدخل بريدك الإلكتروني وسنرسل لك رابط لإعادة تعيين كلمة المرور"})}),t.jsxs("form",{onSubmit:j,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:a,onChange:C=>T(C.target.value),placeholder:"admin@example.com",disabled:p.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${o?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),o&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:o})]}),t.jsx(rt,{type:"submit",variant:"primary",label:p.isPending?"جاري الإرسال...":"إرسال رابط إعادة التعيين",onClick:()=>{},className:"w-full py-3",disabled:p.isPending})]})]}),t.jsxs("div",{className:"mt-8 text-center space-y-4",children:[t.jsx("div",{className:"border-t border-gray-200 pt-6",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["تذكرت كلمة المرور؟"," ",t.jsx(Bs,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"تسجيل الدخول"})]})}),t.jsxs("div",{className:"text-xs text-gray-500",children:[t.jsx("p",{children:"هل تحتاج مساعدة؟"}),t.jsx(Bs,{to:"/contact",className:"text-blue-600 hover:text-blue-500",children:"تواصل مع الدعم الفني"})]})]})]})})},yR=()=>t.jsx("div",{className:"w-full bg-gradient-to-br from-blue-50 to-indigo-100",dir:"rtl",children:t.jsxs("div",{className:"w-full space-y-6",children:[t.jsx("h1",{className:"text-4xl font-bold text-center text-gray-800 mb-8",children:"اختبار التصاميم"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"بطاقة بسيطة"}),t.jsx("p",{className:"text-gray-600",children:"هذا نص تجريبي للتأكد من أن التصاميم تعمل بشكل صحيح"})]}),t.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[t.jsx("h3",{className:"text-xl font-bold mb-3",children:"بطاقة متدرجة"}),t.jsx("p",{children:"تصميم بخلفية متدرجة ونص أبيض"})]}),t.jsxs("div",{className:"glass-card rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"بطاقة زجاجية"}),t.jsx("p",{className:"text-gray-600",children:"تأثير الزجاج المطلوب"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[t.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"زر أزرق"}),t.jsx("button",{className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"زر أخضر متدرج"}),t.jsx("button",{className:"bg-transparent border-2 border-gray-300 hover:border-blue-500 text-gray-700 hover:text-blue-500 px-6 py-3 rounded-xl transition-all duration-300",children:"زر شفاف"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"أيقونات واختبارات"}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.998 16.5c-.77.833.192 2.5 1.732 2.5z"})})})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"نموذج اختبار"}),t.jsxs("form",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم"}),t.jsx("input",{type:"text",placeholder:"أدخل اسمك",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",placeholder:"example@domain.com",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",dir:"ltr"})]}),t.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-xl font-medium transition-colors duration-300",children:"إرسال"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>t.jsx("div",{className:"bg-gray-100 hover:bg-gray-200 rounded-lg p-4 text-center transition-colors duration-300",children:t.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e})},e))})]})}),bR=()=>{const{showSuccess:e,showError:n}=j0(),[a,r]=b.useState("profile"),[o,d]=b.useState({name:"",email:"",phone:"",profileImage:""}),[h,g]=b.useState({userId:"",currentPassword:"",newPassword:""}),[p,f]=b.useState(""),[v,j]=b.useState(!1),[S,T]=b.useState(!1),[C,N]=b.useState(!1),[k,A]=b.useState({}),[D,O]=b.useState({}),{data:F,isLoading:R,refetch:H}=zt({queryKey:["current-user"],queryFn:()=>ac.getCurrentUser({})}),E=Ie({mutationFn:ac.updateProfilePicture,onSuccess:K=>{K.success?(e("تم تحديث الصورة الشخصية بنجاح"),H()):n(K.message||"فشل في تحديث الصورة الشخصية")},onError:K=>{n(K.response?.data?.message||"حدث خطأ أثناء تحديث الصورة الشخصية")}}),z=Ie({mutationFn:ac.updateUserSettings,onSuccess:K=>{K.success?(e("تم تحديث الملف الشخصي بنجاح"),H()):n(K.message||"فشل في تحديث الملف الشخصي")},onError:K=>{n(K.response?.data?.message||"حدث خطأ أثناء تحديث الملف الشخصي")}}),Z=Ie({mutationFn:eu.changePassword,onSuccess:K=>{K.success?(e("تم تغيير كلمة المرور بنجاح"),g({userId:h.userId,currentPassword:"",newPassword:""}),f("")):n(K.message||"فشل في تغيير كلمة المرور")},onError:K=>{n(K.response?.data?.message||"حدث خطأ أثناء تغيير كلمة المرور")}});b.useEffect(()=>{const K=F?.data;K&&(d({name:K.name||"",email:K.email||"",phone:K.phone||"",profileImage:K.profileImage||""}),g(I=>({...I,userId:K.id})))},[F]);const U=()=>{const K={};return o.name.trim()||(K.name="الاسم مطلوب"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(K.email="البريد الإلكتروني غير صحيح"):K.email="البريد الإلكتروني مطلوب",o.phone.trim()?/^[0-9+\-\s()]+$/.test(o.phone)||(K.phone="رقم الهاتف غير صحيح"):K.phone="رقم الهاتف مطلوب",A(K),Object.keys(K).length===0},V=()=>{const K={};return h.currentPassword.trim()||(K.currentPassword="كلمة المرور الحالية مطلوبة"),h.newPassword.trim()?h.newPassword.length<6&&(K.newPassword="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):K.newPassword="كلمة المرور الجديدة مطلوبة",p.trim()?h.newPassword!==p&&(K.confirmPassword="كلمة المرور غير متطابقة"):K.confirmPassword="تأكيد كلمة المرور مطلوب",h.currentPassword===h.newPassword&&(K.newPassword="كلمة المرور الجديدة يجب أن تكون مختلفة عن الحالية"),O(K),Object.keys(K).length===0},X=K=>{if(K.preventDefault(),U()){const I={settingsJson:JSON.stringify(o)};z.mutate(I)}},W=K=>{K.preventDefault(),V()&&Z.mutate(h)},B=(K,I)=>{d(se=>({...se,[K]:I})),k[K]&&A(se=>({...se,[K]:void 0}))},te=(K,I)=>{g(se=>({...se,[K]:I})),D[K]&&O(se=>({...se,[K]:void 0}))},G=async K=>{try{const I=await q(K),se=F?.data;if(se?.id){const ne={userId:se.id,profileImageUrl:I};E.mutate(ne)}}catch{n("حدث خطأ أثناء معالجة الصورة")}},J=()=>{const K=F?.data;if(K?.id){const I={userId:K.id,profileImageUrl:""};E.mutate(I)}},q=K=>new Promise((I,se)=>{const ne=new FileReader;ne.onload=()=>{ne.result?I(ne.result):se(new Error("فشل في قراءة الملف"))},ne.onerror=()=>se(new Error("فشل في قراءة الملف")),ne.readAsDataURL(K)});return R?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"جارٍ تحميل بيانات الملف الشخصي..."})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"الملف الشخصي"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"إدارة بياناتك الشخصية وإعدادات الحساب"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 space-x-reverse px-6",children:[t.jsx("button",{onClick:()=>r("profile"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="profile"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"البيانات الشخصية"}),t.jsx("button",{onClick:()=>r("password"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="password"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"تغيير كلمة المرور"})]})}),t.jsxs("div",{className:"p-6",children:[a==="profile"&&t.jsxs("form",{onSubmit:X,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"صورة الملف الشخصي"}),t.jsx(gR,{currentImage:o.profileImage,onImageUpload:G,onImageDelete:J,isUploading:E.isPending,disabled:z.isPending,size:"md",placeholder:o.name.charAt(0).toUpperCase(),maxFileSize:2,acceptedTypes:["image/jpeg","image/png","image/jpg"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم الكامل"}),t.jsx("input",{type:"text",value:o.name,onChange:K=>B("name",K.target.value),disabled:z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 ${k.name?"border-red-300 focus:ring-red-500":"border-gray-300"}`}),k.name&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:o.email,onChange:K=>B("email",K.target.value),disabled:z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${k.email?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),k.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),t.jsx("input",{type:"tel",value:o.phone,onChange:K=>B("phone",K.target.value),disabled:z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${k.phone?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),k.phone&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.phone})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"ملاحظة مهمة"}),t.jsx("div",{className:"mt-2 text-sm text-blue-700",children:t.jsx("p",{children:"تغيير البريد الإلكتروني قد يتطلب التحقق من العنوان الجديد. ستتلقى رسالة تأكيد على البريد الجديد."})})]})]})})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(rt,{type:"submit",variant:"primary",label:z.isPending?"جارٍ الحفظ...":"حفظ التغييرات",onClick:()=>{},disabled:z.isPending})})]}),a==="password"&&t.jsxs("form",{onSubmit:W,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الحالية"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:h.currentPassword,onChange:K=>te("currentPassword",K.target.value),disabled:Z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${D.currentPassword?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>j(!v),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:Z.isPending,children:v?"إخفاء":"إظهار"})]}),D.currentPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.currentPassword})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الجديدة"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:S?"text":"password",value:h.newPassword,onChange:K=>te("newPassword",K.target.value),disabled:Z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${D.newPassword?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>T(!S),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:Z.isPending,children:S?"إخفاء":"إظهار"})]}),D.newPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.newPassword})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور الجديدة"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:C?"text":"password",value:p,onChange:K=>{f(K.target.value),D.confirmPassword&&O(I=>({...I,confirmPassword:void 0}))},disabled:Z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${D.confirmPassword?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>N(!C),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:Z.isPending,children:C?"إخفاء":"إظهار"})]}),D.confirmPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.confirmPassword})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"نصائح لكلمة مرور قوية"}),t.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:t.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"استخدم على الأقل 8 أحرف"}),t.jsx("li",{children:"امزج بين الأحرف الكبيرة والصغيرة"}),t.jsx("li",{children:"أضف أرقام ورموز خاصة"}),t.jsx("li",{children:"تجنب استخدام معلومات شخصية"})]})})]})]})})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(rt,{type:"submit",variant:"primary",label:Z.isPending?"جارٍ التغيير...":"تغيير كلمة المرور",onClick:()=>{},disabled:Z.isPending})})]})]})]})]})})},vR=()=>{const{showSuccess:e,showError:n}=j0(),[a,r]=b.useState({language:"ar",theme:"light",notifications:{email:!0,sms:!0,push:!0,marketing:!1},privacy:{profileVisibility:"public",showEmail:!1,showPhone:!1},preferences:{dateFormat:"dd/mm/yyyy",currency:"YER",timezone:"Asia/Riyadh"}}),[o,d]=b.useState("general"),{data:h,isLoading:g}=zt({queryKey:["current-user"],queryFn:()=>ac.getCurrentUser({})}),p=Ie({mutationFn:ac.updateUserSettings,onSuccess:j=>{j.success?e("تم حفظ الإعدادات بنجاح"):n(j.message||"فشل في حفظ الإعدادات")},onError:j=>{n(j.response?.data?.message||"حدث خطأ أثناء حفظ الإعدادات")}});b.useEffect(()=>{if(h?.data?.settingsJson)try{const j=JSON.parse(h.data.settingsJson);r(S=>Object.assign({},S,j))}catch(j){console.error("خطأ في تحليل الإعدادات المحفوظة:",j)}},[h]);const f=(j,S,T)=>{r(C=>j==="notifications"||j==="privacy"||j==="preferences"?{...C,[j]:{...C[j],[S]:T}}:{...C,[j]:T})},v=()=>{if(h?.data?.id){const j={userId:h.data.id,settingsJson:JSON.stringify(a)};p.mutate(j)}};return g?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"جارٍ تحميل الإعدادات..."})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"الإعدادات"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"إدارة تفضيلاتك وإعدادات التطبيق"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 space-x-reverse px-6 overflow-x-auto",children:[t.jsx("button",{onClick:()=>d("general"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"الإعدادات العامة"}),t.jsx("button",{onClick:()=>d("notifications"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"الإشعارات"}),t.jsx("button",{onClick:()=>d("privacy"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="privacy"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"الخصوصية"}),t.jsx("button",{onClick:()=>d("preferences"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="preferences"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"التفضيلات"})]})}),t.jsxs("div",{className:"p-6",children:[o==="general"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"الإعدادات العامة"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اللغة"}),t.jsxs("select",{value:a.language,onChange:j=>f("language","",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"ar",children:"العربية"}),t.jsx("option",{value:"en",children:"English"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المظهر"}),t.jsxs("select",{value:a.theme,onChange:j=>f("theme","",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"light",children:"فاتح"}),t.jsx("option",{value:"dark",children:"داكن"}),t.jsx("option",{value:"system",children:"تلقائي (حسب النظام)"})]})]})]})]})}),o==="notifications"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"إعدادات الإشعارات"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إشعارات البريد الإلكتروني"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي الإشعارات عبر البريد الإلكتروني"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.email,onChange:j=>f("notifications","email",j.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إشعارات الرسائل النصية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي الإشعارات عبر الرسائل النصية"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.sms,onChange:j=>f("notifications","sms",j.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"الإشعارات الفورية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي الإشعارات الفورية على المتصفح"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.push,onChange:j=>f("notifications","push",j.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"الإشعارات التسويقية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي إشعارات العروض والأخبار"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.marketing,onChange:j=>f("notifications","marketing",j.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})}),o==="privacy"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"إعدادات الخصوصية"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مستوى ظهور الملف الشخصي"}),t.jsxs("select",{value:a.privacy.profileVisibility,onChange:j=>f("privacy","profileVisibility",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"public",children:"عام - يمكن للجميع رؤيته"}),t.jsx("option",{value:"contacts",children:"جهات الاتصال فقط"}),t.jsx("option",{value:"private",children:"خاص - لا يظهر للآخرين"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إظهار البريد الإلكتروني"}),t.jsx("p",{className:"text-sm text-gray-500",children:"السماح للآخرين برؤية بريدك الإلكتروني"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.privacy.showEmail,onChange:j=>f("privacy","showEmail",j.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إظهار رقم الهاتف"}),t.jsx("p",{className:"text-sm text-gray-500",children:"السماح للآخرين برؤية رقم هاتفك"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.privacy.showPhone,onChange:j=>f("privacy","showPhone",j.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]})}),o==="preferences"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"التفضيلات"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صيغة التاريخ"}),t.jsxs("select",{value:a.preferences.dateFormat,onChange:j=>f("preferences","dateFormat",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"dd/mm/yyyy",children:"يوم/شهر/سنة (31/12/2023)"}),t.jsx("option",{value:"mm/dd/yyyy",children:"شهر/يوم/سنة (12/31/2023)"}),t.jsx("option",{value:"yyyy-mm-dd",children:"سنة-شهر-يوم (2023-12-31)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العملة المفضلة"}),t.jsxs("select",{value:a.preferences.currency,onChange:j=>f("preferences","currency",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"YER",children:"ريال يمني (YER)"}),t.jsx("option",{value:"USD",children:"دولار أمريكي (USD)"}),t.jsx("option",{value:"EUR",children:"يورو (EUR)"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المنطقة الزمنية"}),t.jsxs("select",{value:a.preferences.timezone,onChange:j=>f("preferences","timezone",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"Asia/Riyadh",children:"صنعاء (GMT+3)"}),t.jsx("option",{value:"Asia/Dubai",children:"دبي (GMT+4)"}),t.jsx("option",{value:"Europe/London",children:"لندن (GMT+0)"}),t.jsx("option",{value:"America/New_York",children:"نيويورك (GMT-5)"})]})]})]})]})}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsx("div",{className:"flex justify-end",children:t.jsx(rt,{variant:"primary",label:p.isPending?"جارٍ الحفظ...":"حفظ الإعدادات",onClick:v,disabled:p.isPending})})})]})]}),t.jsx(Ia,{className:"p-6",children:t.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"ملاحظة حول الإعدادات"}),t.jsx("div",{className:"mt-2 text-sm text-gray-600",children:t.jsx("p",{children:"يتم حفظ إعداداتك تلقائياً في حسابك. بعض التغييرات قد تتطلب إعادة تسجيل الدخول لتظهر بشكل كامل. في حالة واجهت أي مشاكل، يمكنك التواصل مع الدعم الفني."})})]})]})})]})})},Yo=({title:e,value:n,icon:a,color:r,change:o,changeType:d,prefix:h,suffix:g})=>{const p=v=>({blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",red:"bg-red-50 text-red-600 border-red-200"})[v],f=v=>new Intl.NumberFormat("ar-SA").format(v);return t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h&&t.jsx("span",{className:"text-sm font-normal ml-1",children:h}),f(n),g&&t.jsx("span",{className:"text-sm font-normal mr-1",children:g})]}),o&&t.jsx("p",{className:`text-sm mt-1 ${d==="increase"?"text-green-600":"text-red-600"}`,children:t.jsxs("span",{className:"inline-flex items-center",children:[d==="increase"?"↗️":"↘️",t.jsx("span",{className:"mr-1",children:o})]})})]}),t.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${p(r)}`,children:t.jsx("span",{className:"text-xl",children:a})})]})})},jR=({activities:e})=>{const n=r=>{const o={booking:"📝",property:"🏢",payment:"💰",review:"⭐",user:"👤",default:"📋"};return o[r]||o.default},a=r=>{const o={booking:"bg-blue-50 text-blue-600",property:"bg-green-50 text-green-600",payment:"bg-yellow-50 text-yellow-600",review:"bg-purple-50 text-purple-600",user:"bg-indigo-50 text-indigo-600",default:"bg-gray-50 text-gray-600"};return o[r]||o.default};return t.jsxs("div",{className:"space-y-4",children:[e.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أنشطة حديثة"})}):e.map(r=>t.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a(r.type)}`,children:t.jsx("span",{className:"text-sm",children:n(r.type)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.message}),t.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[t.jsx("span",{children:r.user}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{children:r.time})]})]})]},r.id)),e.length>0&&t.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:t.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"عرض جميع الأنشطة"})})]})},Mj=()=>{const[e,n]=b.useState({totalUsers:0,totalProperties:0,totalBookings:0,totalRevenue:0,activeBookings:0,pendingApprovals:0}),[a,r]=b.useState(!0);b.useEffect(()=>{(async()=>{r(!0),setTimeout(()=>{n({totalUsers:1284,totalProperties:456,totalBookings:2341,totalRevenue:847650,activeBookings:89,pendingApprovals:12}),r(!1)},1e3)})()},[]);const o=[{id:1,type:"booking",message:"حجز جديد في فندق الريتز",time:"منذ 5 دقائق",user:"أحمد محمد"},{id:2,type:"property",message:"تم إضافة كيان جديد للمراجعة",time:"منذ 15 دقيقة",user:"سارة أحمد"},{id:3,type:"payment",message:"تم استلام دفعة بقيمة 2,500 ريال",time:"منذ 30 دقيقة",user:"محمد عبدالله"},{id:4,type:"review",message:"تقييم جديد يحتاج للمراجعة",time:"منذ ساعة",user:"فاطمة علي"}];return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"لوحة المعلومات الإدارية"}),t.jsx("p",{className:"text-gray-600",children:"مرحباً بك في لوحة التحكم الرئيسية لإدارة نظام الحجوزات"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[t.jsx(Yo,{title:"إجمالي المستخدمين",value:e.totalUsers,icon:"👥",color:"blue",change:"+12%",changeType:"increase"}),t.jsx(Yo,{title:"الكيانات المسجلة",value:e.totalProperties,icon:"🏢",color:"green",change:"+8%",changeType:"increase"}),t.jsx(Yo,{title:"إجمالي الحجوزات",value:e.totalBookings,icon:"📝",color:"purple",change:"+15%",changeType:"increase"}),t.jsx(Yo,{title:"الإيرادات الإجمالية",value:e.totalRevenue,icon:"💰",color:"yellow",change:"+23%",changeType:"increase",prefix:"ريال"}),t.jsx(Yo,{title:"الحجوزات النشطة",value:e.activeBookings,icon:"📅",color:"indigo",change:"-3%",changeType:"decrease"}),t.jsx(Yo,{title:"في انتظار الموافقة",value:e.pendingApprovals,icon:"⏳",color:"red",change:"+2",changeType:"increase"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"الإيرادات الشهرية"}),t.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:t.jsx("p",{children:"مخطط الإيرادات سيتم إضافته هنا"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"النشاطات الأخيرة"}),t.jsx(jR,{activities:o})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"إجراءات سريعة"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("button",{className:"p-4 bg-blue-50 rounded-lg text-center hover:bg-blue-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"👤"}),t.jsx("div",{className:"text-sm font-medium text-blue-700",children:"إضافة مستخدم"})]}),t.jsxs("button",{className:"p-4 bg-green-50 rounded-lg text-center hover:bg-green-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"🏢"}),t.jsx("div",{className:"text-sm font-medium text-green-700",children:"موافقة على كيان"})]}),t.jsxs("button",{className:"p-4 bg-purple-50 rounded-lg text-center hover:bg-purple-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"📊"}),t.jsx("div",{className:"text-sm font-medium text-purple-700",children:"عرض التقارير"})]}),t.jsxs("button",{className:"p-4 bg-orange-50 rounded-lg text-center hover:bg-orange-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"⚙️"}),t.jsx("div",{className:"text-sm font-medium text-orange-700",children:"إعدادات النظام"})]})]})]})]})},Xo={getAll:e=>je.get("/api/admin/Users",{params:e}).then(n=>n.data),create:e=>je.post("/api/admin/Users",e).then(n=>n.data),update:(e,n)=>je.put(`/api/admin/Users/${e}`,n).then(a=>a.data),activate:e=>je.post(`/api/admin/Users/${e}/activate`).then(n=>n.data),deactivate:e=>je.post(`/api/admin/Users/${e}/deactivate`).then(n=>n.data),assignRole:e=>je.post(`/api/admin/Users/${e.userId}/assign-role`,e).then(n=>n.data),getByRole:e=>je.get("/api/admin/Users/by-role",{params:e}).then(n=>n.data),getLifetimeStats:e=>je.get(`/api/admin/Users/${e.userId}/lifetime-stats`).then(n=>n.data),getNotifications:e=>{const{userId:n,...a}=e;return je.get(`/api/admin/Users/${n}/notifications`,{params:a}).then(r=>r.data)},getDetails:e=>je.get(`/api/admin/Users/${e}/details`).then(n=>n.data)},F0=e=>{const n=In(),a=["admin-users",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>Xo.getAll(e)}),h=Ie({mutationFn:v=>Xo.create(v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}}),g=Ie({mutationFn:({userId:v,data:j})=>Xo.update(v,j),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}}),p=Ie({mutationFn:v=>Xo.activate(v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}}),f=Ie({mutationFn:v=>Xo.deactivate(v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}});return{usersData:r,isLoading:o,error:d,createUser:h,updateUser:g,activateUser:p,deactivateUser:f}},wR=e=>{const n=["user-details",e],{data:a,isLoading:r,error:o,refetch:d}=zt({queryKey:n,queryFn:()=>Xo.getDetails(e),enabled:!!e});return{userDetails:a?.data||null,isLoading:r,error:o,refetch:d,isSuccess:a?.success||!1,message:a?.message||null}},ls=({data:e,columns:n,loading:a=!1,pagination:r,onRowClick:o,rowSelection:d,actions:h,mobileCardTitle:g,mobileCardSubtitle:p,mobileCardImage:f})=>{const[v,j]=b.useState(""),[S,T]=b.useState("asc"),[C,N]=b.useState("table"),[k,A]=b.useState(!1);b.useEffect(()=>{const E=()=>{A(window.innerWidth<768),window.innerWidth<768&&N("cards")};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const D=E=>{v===E?T(S==="asc"?"desc":"asc"):(j(E),T("asc"))},O=E=>v!==E?"⚬":S==="asc"?"↑":"↓",F=E=>{const z={blue:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",green:"text-green-600 hover:text-green-800 hover:bg-green-50",red:"text-red-600 hover:text-red-800 hover:bg-red-50",yellow:"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-50",orange:"text-orange-600 hover:text-orange-800 hover:bg-orange-50"};return z[E]||z.blue},R=()=>n.filter(E=>!E.hideOnMobile).sort((E,z)=>{const Z={high:1,medium:2,low:3},U=Z[E.priority||"medium"],V=Z[z.priority||"medium"];return U-V}).slice(0,4),H=()=>{const E=R();return t.jsx("div",{className:"space-y-4 p-4",children:e.map((z,Z)=>t.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-200 ${o?"cursor-pointer hover:shadow-md hover:border-blue-300":""}`,onClick:()=>o?.(z,Z),children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[f&&t.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center overflow-hidden",children:f(z)?t.jsx("img",{src:f(z),alt:"صورة",className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-blue-600 text-xl",children:"📄"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:g?g(z):`عنصر ${Z+1}`}),p&&t.jsx("p",{className:"text-sm text-gray-500 truncate",children:p(z)})]})]}),d&&t.jsx("div",{className:"flex items-center",children:t.jsx("input",{type:"checkbox",className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:d.selectedRowKeys.includes(Z.toString()),onChange:U=>{U.stopPropagation();const V=Z.toString();U.target.checked?d.onChange([...d.selectedRowKeys,V],[...d.selectedRowKeys.map(X=>e[parseInt(X)]),z]):d.onChange(d.selectedRowKeys.filter(X=>X!==V),d.selectedRowKeys.filter(X=>X!==V).map(X=>e[parseInt(X)]))}})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:E.map((U,V)=>{const X=z[U.key],W=U.render?U.render(X,z,Z):X;return t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[U.mobileLabel||U.title,":"]})}),t.jsx("div",{className:"text-sm text-gray-900 font-medium text-left",children:W})]},V)})}),h&&h.length>0&&t.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2 space-x-reverse",children:[h.filter(U=>!U.show||U.show(z)).slice(0,3).map((U,V)=>t.jsxs("button",{onClick:X=>{X.stopPropagation(),U.onClick(z)},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${F(U.color||"blue")}`,children:[U.icon&&t.jsx("span",{className:"ml-1",children:U.icon}),U.label]},V)),h.filter(U=>!U.show||U.show(z)).length>3&&t.jsx("div",{onClick:U=>U.stopPropagation(),children:t.jsx(Ix,{actions:h.filter(U=>!U.show||U.show(z)).slice(3).map(U=>({label:U.label,icon:U.icon||"",onClick:()=>U.onClick(z),variant:U.color==="red"?"danger":"default"}))})})]})})]})},Z))})};return a?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[k&&t.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"عرض البيانات"}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("button",{onClick:()=>N("table"),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${C==="table"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"📊 جدول"}),t.jsx("button",{onClick:()=>N("cards"),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${C==="cards"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"📱 بطاقات"})]})]})}),k&&C==="cards"&&t.jsx("div",{children:e.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-3xl",children:"📄"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"لا توجد بيانات"}),t.jsx("p",{className:"text-sm text-gray-500 text-center",children:"لا توجد بيانات لعرضها في الوقت الحالي"})]}):H()}),(!k||C==="table")&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[d&&t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:t.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onChange:E=>{if(E.target.checked){const z=e.map((Z,U)=>U.toString());d.onChange(z,e)}else d.onChange([],[])},checked:d.selectedRowKeys.length===e.length&&e.length>0})}),n.map((E,z)=>t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:E.width},children:t.jsxs("div",{className:`flex items-center justify-${E.align||"right"}`,children:[t.jsx("span",{children:E.title}),E.sortable&&t.jsx("button",{onClick:()=>D(E.key),className:"mr-2 text-gray-400 hover:text-gray-600",children:O(E.key)})]})},z)),h&&h.length>0&&t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:n.length+(d?1:0)+(h?1:0),className:"px-6 py-12 text-center text-gray-500",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-4xl mb-2",children:"📄"}),t.jsx("p",{children:"لا توجد بيانات للعرض"})]})})}):e.map((E,z)=>t.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${o?"cursor-pointer":""}`,onClick:()=>o?.(E,z),children:[d&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d.selectedRowKeys.includes(z.toString()),onChange:Z=>{const U=z.toString();Z.target.checked?d.onChange([...d.selectedRowKeys,U],[...d.selectedRowKeys.map(V=>e[parseInt(V)]),E]):d.onChange(d.selectedRowKeys.filter(V=>V!==U),d.selectedRowKeys.filter(V=>V!==U).map(V=>e[parseInt(V)]))},onClick:Z=>Z.stopPropagation()})}),n.map((Z,U)=>t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${Z.align||"right"}`,children:Z.render?Z.render(E[Z.key],E,z):E[Z.key]},U)),h&&h.length>0&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",onClick:Z=>Z.stopPropagation(),children:t.jsx(Ix,{actions:h.filter(Z=>!Z.show||Z.show(E)).map(Z=>({label:Z.label,icon:Z.icon||"",onClick:()=>Z.onClick(E),variant:Z.color==="red"?"danger":"default"}))})})]},z))})]})}),r&&t.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>r.onChange(r.current-1,r.pageSize),disabled:r.current<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),t.jsx("button",{onClick:()=>r.onChange(r.current+1,r.pageSize),disabled:r.current*r.pageSize>=r.total,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["عرض"," ",t.jsx("span",{className:"font-medium",children:(r.current-1)*r.pageSize+1})," ","إلى"," ",t.jsx("span",{className:"font-medium",children:Math.min(r.current*r.pageSize,r.total)})," ","من"," ",t.jsx("span",{className:"font-medium",children:r.total})," نتيجة"]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsx("button",{onClick:()=>r.onChange(r.current-1,r.pageSize),disabled:r.current<=1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"}),Array.from({length:Math.ceil(r.total/r.pageSize)},(E,z)=>z+1).slice(Math.max(0,r.current-3),Math.min(Math.ceil(r.total/r.pageSize),r.current+2)).map(E=>t.jsx("button",{onClick:()=>r.onChange(E,r.pageSize),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${E===r.current?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:E},E)),t.jsx("button",{onClick:()=>r.onChange(r.current+1,r.pageSize),disabled:r.current*r.pageSize>=r.total,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"})]})})]})]})]})},ti=({searchPlaceholder:e="البحث...",searchValue:n,onSearchChange:a,filters:r=[],filterValues:o,onFilterChange:d,onReset:h,showAdvanced:g=!1,onToggleAdvanced:p})=>{const[f,v]=b.useState(n),j=C=>{C.preventDefault(),a(f)},S=C=>{const N=o[C.key];switch(C.type){case"select":return t.jsxs("select",{value:N||"",onChange:k=>d(C.key,k.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"جميع الخيارات"}),C.options?.map(k=>t.jsx("option",{value:k.value,children:k.label},k.value))]});case"boolean":return t.jsxs("select",{value:N!==void 0?N.toString():"",onChange:k=>{const A=k.target.value;d(C.key,A===""?void 0:A==="true")},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"جميع الحالات"}),t.jsx("option",{value:"true",children:"نعم"}),t.jsx("option",{value:"false",children:"لا"})]});case"date":return t.jsx("input",{type:"date",value:N||"",onChange:k=>d(C.key,k.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"});case"number":return t.jsx("input",{type:"number",value:N||"",onChange:k=>d(C.key,k.target.value?Number(k.target.value):""),placeholder:C.placeholder,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"});case"text":return t.jsx("input",{type:"text",value:N||"",onChange:k=>d(C.key,k.target.value),placeholder:C.placeholder,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"});case"dateRange":return t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"date",value:N?.from||"",onChange:k=>d(C.key,{...N,from:k.target.value}),placeholder:"من",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("input",{type:"date",value:N?.to||"",onChange:k=>d(C.key,{...N,to:k.target.value}),placeholder:"إلى",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]});case"custom":return C.render?C.render(N,k=>d(C.key,k)):null;default:return null}},T=Object.values(o).some(C=>C!==void 0&&C!==""&&C!==null);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("form",{onSubmit:j,className:"mb-4",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",value:f,onChange:C=>v(C.target.value),placeholder:e,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})}),t.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"🔍 بحث"}),r.length>0&&p&&t.jsxs("button",{type:"button",onClick:p,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["⚙️ ",g?"إخفاء الفلاتر":"فلاتر متقدمة"]})]})}),g&&r.length>0&&t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:r.map(C=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:C.label}),S(C)]},C.key))}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>a(f),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✓ تطبيق الفلاتر"}),t.jsx("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"🔄 إعادة تعيين"})]}),T&&t.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"✓ تم تطبيق فلاتر"})]})]})]})};class un{static BASE_URL="/api/images";static async uploadImage(n,a){const r=new FormData;return r.append("file",n.file),n.propertyId&&r.append("propertyId",n.propertyId),n.unitId&&r.append("unitId",n.unitId),r.append("category",n.category),n.alt&&r.append("alt",n.alt),n.isPrimary!==void 0&&r.append("isPrimary",String(n.isPrimary)),n.order!==void 0&&r.append("order",String(n.order)),n.tags&&r.append("tags",JSON.stringify(n.tags)),(await je.post(`${this.BASE_URL}/upload`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:d=>{if(a&&d.total){const h=Math.round(d.loaded*100/d.total);a(h)}}})).data}static async uploadMultipleImages(n,a){const r=n.map(o=>this.uploadImage({...a,file:o}));return Promise.all(r)}static async getImages(n={}){const a=new URLSearchParams;return n.propertyId&&a.append("propertyId",n.propertyId),n.unitId&&a.append("unitId",n.unitId),n.category&&a.append("category",n.category),n.page&&a.append("page",String(n.page)),n.limit&&a.append("limit",String(n.limit)),n.sortBy&&a.append("sortBy",n.sortBy),n.sortOrder&&a.append("sortOrder",n.sortOrder),n.search&&a.append("search",n.search),(await je.get(`${this.BASE_URL}?${a.toString()}`)).data}static async getImage(n){return(await je.get(`${this.BASE_URL}/${n}`)).data}static async updateImage(n){const{id:a,...r}=n;return(await je.put(`${this.BASE_URL}/${a}`,r)).data}static async deleteImage(n,a=!1){await je.delete(`${this.BASE_URL}/${n}?permanent=${a}`)}static async deleteImages(n){await je.post(`${un.BASE_URL}/bulk-delete`,n)}static async reorderImages(n){await je.post(`${un.BASE_URL}/reorder`,n)}static async setPrimaryImage(n,a,r){await je.post(`${un.BASE_URL}/${n}/set-primary`,{propertyId:a,unitId:r})}static async getImageStatistics(n,a){const r=new URLSearchParams;return n&&r.append("propertyId",n),a&&r.append("unitId",a),(await je.get(`${this.BASE_URL}/statistics?${r.toString()}`)).data}static async searchImages(n){return(await je.post(`${this.BASE_URL}/search`,n)).data}static async getUploadProgress(n){return(await je.get(`${this.BASE_URL}/upload-progress/${n}`)).data}static async getDownloadUrl(n,a){const r=a?`?size=${a}`:"";return(await je.get(`${this.BASE_URL}/${n}/download${r}`)).data.url}static async optimizeImage(n,a){return(await je.post(`${this.BASE_URL}/${n}/optimize`,a)).data}static async generateThumbnails(n,a){return(await je.post(`${this.BASE_URL}/${n}/thumbnails`,{sizes:a})).data}static async copyImage(n,a,r){return(await je.post(`${this.BASE_URL}/${n}/copy`,{targetPropertyId:a,targetUnitId:r})).data}static async convertImageFormat(n,a,r){return(await je.post(`${this.BASE_URL}/${n}/convert`,{format:a,quality:r})).data}static async addWatermark(n,a,r="bottom-right"){return(await je.post(`${this.BASE_URL}/${n}/watermark`,{text:a,position:r})).data}static async rotateImage(n,a){return(await je.post(`${this.BASE_URL}/${n}/rotate`,{degrees:a})).data}static async flipImage(n,a){return(await je.post(`${this.BASE_URL}/${n}/flip`,{direction:a})).data}static async cropImage(n,a){return(await je.post(`${this.BASE_URL}/${n}/crop`,a)).data}static async applyFilter(n,a,r=50){return(await je.post(`${this.BASE_URL}/${n}/filter`,{filter:a,intensity:r})).data}static async restoreOriginal(n){return(await je.post(`${this.BASE_URL}/${n}/restore`)).data}static async getEditHistory(n){return(await je.get(`${this.BASE_URL}/${n}/history`)).data}static validateImageFile(n){if(!["image/jpeg","image/png","image/webp","image/gif"].includes(n.type))return{valid:!1,error:"نوع الملف غير مدعوم. يرجى اختيار صورة بصيغة JPEG أو PNG أو WebP أو GIF"};const r=10*1024*1024;return n.size>r?{valid:!1,error:"حجم الملف كبير جداً. الحد الأقصى هو 10 ميجابايت"}:{valid:!0}}static async compressImage(n,a=.8){return new Promise(r=>{const o=document.createElement("canvas"),d=o.getContext("2d"),h=new Image;h.onload=()=>{let{width:f,height:v}=h;f>1920&&(v=v*1920/f,f=1920),v>1080&&(f=f*1080/v,v=1080),o.width=f,o.height=v,d?.drawImage(h,0,0,f,v),o.toBlob(j=>{if(j){const S=new File([j],n.name,{type:n.type,lastModified:Date.now()});r(S)}else r(n)},n.type,a)},h.src=URL.createObjectURL(n)})}}const Yl=({value:e="",onChange:n,multiple:a=!1,maxFiles:r=10,maxSize:o=5,acceptedFormats:d=["jpg","jpeg","png","gif","webp"],showPreview:h=!0,className:g="",disabled:p=!1,required:f=!1,placeholder:v="اضغط لاختيار الصور أو اسحبها هنا",uploadEndpoint:j="/api/upload/images"})=>{const[S,T]=b.useState([]),[C,N]=b.useState(!1),[k,A]=b.useState(!1),D=b.useRef(null),O=Array.isArray(e)?e:e?[e]:[],F=B=>{if(B.size>o*1024*1024)return`حجم الملف كبير جداً (الحد الأقصى ${o}MB)`;const te=B.name.split(".").pop()?.toLowerCase();return!te||!d.includes(te)?`نوع الملف غير مدعوم (المدعوم: ${d.join(", ")})`:!a&&O.length+S.length>=1?"يمكن رفع صورة واحدة فقط":O.length+S.length>=r?`تم الوصول للحد الأقصى (${r} صور)`:null},R=b.useCallback(B=>{const te=[];Array.from(B).forEach(G=>{const J=F(G),q={file:G,url:URL.createObjectURL(G),uploading:!1,uploaded:!1,error:J||void 0,progress:0};te.push(q)}),T(G=>[...G,...te])},[O.length,S.length,r,a]),H=async()=>{if(S.length===0)return;A(!0);const B=[...O];T(G=>G.map(J=>({...J,uploading:!0,error:void 0})));for(let G=0;G<S.length;G++){const J=S[G];if(!J.error)try{const q=await un.uploadImage({file:J.file,category:"gallery"},K=>{T(I=>I.map((se,ne)=>ne===G?{...se,progress:K}:se))});q&&(B.push(q.image?.url||""),T(K=>K.map((I,se)=>se===G?{...I,uploading:!1,uploaded:!0,progress:100}:I)))}catch{T(K=>K.map((I,se)=>se===G?{...I,uploading:!1,error:"فشل في رفع الصورة"}:I))}}const te=a?B:B[B.length-1]||"";n(te),T(G=>G.filter(J=>!J.uploaded)),A(!1)},E=B=>{T(te=>{const G=[...te];return URL.revokeObjectURL(G[B].url),G.splice(B,1),G})},z=B=>{const te=[...O];te.splice(B,1);const G=a?te:te[0]||"";n(G)},Z=B=>{B.preventDefault(),N(!0)},U=B=>{B.preventDefault(),N(!1)},V=B=>{if(B.preventDefault(),N(!1),p)return;const te=B.dataTransfer.files;te.length>0&&R(te)},X=B=>{const te=B.target.files;te&&te.length>0&&R(te),B.target.value=""},W=()=>{!p&&D.current&&D.current.click()};return t.jsxs("div",{className:`space-y-4 ${g}`,children:[t.jsxs("div",{onDragOver:Z,onDragLeave:U,onDrop:V,onClick:W,className:`
          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors
          ${C?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${p?"opacity-50 cursor-not-allowed":""}
          ${f&&O.length===0&&S.length===0?"border-red-300 bg-red-50":""}
        `,children:[t.jsx("input",{ref:D,type:"file",multiple:a,accept:d.map(B=>`.${B}`).join(","),onChange:X,disabled:p,className:"hidden"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-4xl",children:"📸"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:v}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["الأنواع المدعومة: ",d.join(", ")," • الحد الأقصى: ",o,"MB"]}),a&&t.jsxs("p",{className:"text-xs text-gray-400",children:["يمكن رفع حتى ",r," صور"]})]})]})]}),h&&O.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"الصور الحالية:"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:O.map((B,te)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:B,alt:`صورة ${te+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),!p&&t.jsx("button",{type:"button",onClick:()=>z(te),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]},te))})]}),h&&S.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"صور جديدة:"}),t.jsx("button",{type:"button",onClick:H,disabled:p||k||S.every(B=>B.error),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"جارٍ الرفع...":"رفع الصور"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:S.map((B,te)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:B.url,alt:`معاينة ${te+1}`,className:`
                    w-full h-24 object-cover rounded-lg border-2
                    ${B.error?"border-red-300":"border-gray-200"}
                    ${B.uploading?"opacity-50":""}
                  `}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-1",children:[B.uploading&&t.jsxs(t.Fragment,{children:[t.jsx("progress",{value:B.progress||0,max:100,className:"w-10 h-2"}),t.jsxs("span",{className:"text-white text-xs",children:[B.progress||0,"%"]})]}),B.uploaded&&t.jsx("div",{className:"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs",children:"✓"}),B.error&&t.jsx("div",{className:"w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:"✗"})]}),!p&&!B.uploading&&t.jsx("button",{type:"button",onClick:()=>E(te),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"×"}),B.error&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-500 text-white text-xs p-1 rounded-b-lg",children:B.error})]},te))})]}),f&&O.length===0&&S.length===0&&t.jsx("div",{className:"text-sm text-red-600",children:"⚠️ رفع صورة واحدة على الأقل مطلوب"}),(O.length>0||S.length>0)&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["الصور الحالية: ",O.length," • صور جديدة: ",S.length," • المجموع: ",O.length+S.length,"/",r]})]})},NR=()=>{const e=is(),[n,a]=b.useState(""),[r,o]=b.useState(!1),[d,h]=b.useState(1),[g,p]=b.useState(20),[f,v]=b.useState({roleId:"",isActive:void 0,createdAfter:"",createdBefore:""}),[j,S]=b.useState(!1),[T,C]=b.useState(!1),[N,k]=b.useState(null),[A,D]=b.useState([]),[O,F]=b.useState({name:"",email:"",password:"",phone:"",profileImage:""}),[R,H]=b.useState({userId:"",name:"",email:"",phone:"",profileImage:""}),E={pageNumber:d,pageSize:g,searchTerm:n||void 0,roleId:f.roleId||void 0,isActive:f.isActive,createdAfter:f.createdAfter||void 0,createdBefore:f.createdBefore||void 0},{usersData:z,isLoading:Z,error:U,createUser:V,updateUser:X,activateUser:W,deactivateUser:B}=F0(E),te=ae=>{k(ae),H({userId:ae.id,name:ae.name,email:ae.email,phone:ae.phone,profileImage:ae.profileImage}),C(!0)},G=ae=>{ae.isActive?B.mutate(ae.id):W.mutate(ae.id)},J=(ae,ee)=>{v(le=>({...le,[ae]:ee})),h(1)},q=()=>{v({roleId:"",isActive:void 0,createdAfter:"",createdBefore:""}),a(""),h(1)},K=[{key:"roleId",label:"الدور",type:"select",options:[{value:"ADMIN",label:"مدير"},{value:"HOTEL_OWNER",label:"مالك كيان"},{value:"HOTEL_MANAGER",label:"مدير كيان"},{value:"RECEPTIONIST",label:"موظف استقبال"},{value:"CUSTOMER",label:"عميل"}]},{key:"isActive",label:"الحالة",type:"boolean"},{key:"createdAfter",label:"تاريخ التسجيل من",type:"date"},{key:"createdBefore",label:"تاريخ التسجيل إلى",type:"date"}],I=[{key:"profileImage",title:"الصورة",width:"80px",priority:"high",mobileLabel:"الصورة",render:(ae,ee)=>t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:ae?t.jsx("img",{src:ae,alt:ee.name,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-gray-500 text-sm",children:ee.name.charAt(0).toUpperCase()})})},{key:"name",title:"الاسم",sortable:!0,priority:"high",mobileLabel:"الاسم"},{key:"email",title:"البريد الإلكتروني",sortable:!0,priority:"medium",mobileLabel:"البريد"},{key:"phone",title:"رقم الهاتف",priority:"medium",mobileLabel:"الهاتف"},{key:"isActive",title:"الحالة",priority:"high",mobileLabel:"الحالة",render:ae=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ae?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae?"نشط":"غير نشط"})},{key:"createdAt",title:"تاريخ التسجيل",sortable:!0,priority:"low",mobileLabel:"التاريخ",hideOnMobile:!0,render:ae=>new Date(ae).toLocaleDateString("ar-SA")}],se=ae=>{e(`/admin/users/${ae.id}`)},ne=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:se},{label:"تعديل",icon:"✏️",color:"blue",onClick:te},{label:"تفعيل/إلغاء تفعيل",icon:"🔄",color:"yellow",onClick:G},{label:"أدوار",icon:"👤",color:"green",onClick:ae=>{}}];return U?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات المستخدمين. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المستخدمين"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع المستخدمين في النظام وتعيين الأدوار والصلاحيات"})]}),t.jsx("div",{className:"flex gap-3",children:t.jsx("button",{onClick:()=>S(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة مستخدم جديد"})})]})}),t.jsx(ti,{searchPlaceholder:"البحث في المستخدمين...",searchValue:n,onSearchChange:a,filters:K,filterValues:f,onFilterChange:J,onReset:q,showAdvanced:r,onToggleAdvanced:()=>o(!r)}),t.jsx(ls,{data:z?.items||[],columns:I,loading:Z,pagination:{current:d,total:z?.totalCount||0,pageSize:g,onChange:(ae,ee)=>{h(ae),p(ee)}},rowSelection:{selectedRowKeys:A,onChange:D},actions:ne,onRowClick:ae=>se(ae),mobileCardTitle:ae=>ae.name,mobileCardSubtitle:ae=>ae.email,mobileCardImage:ae=>ae.profileImage}),t.jsx(Mt,{isOpen:j,onClose:()=>S(!1),title:"إضافة مستخدم جديد",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>V.mutate(O),disabled:V.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:V.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الكامل *"}),t.jsx("input",{type:"text",value:O.name,onChange:ae=>F(ee=>({...ee,name:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل الاسم الكامل"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني *"}),t.jsx("input",{type:"email",value:O.email,onChange:ae=>F(ee=>({...ee,email:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل البريد الإلكتروني"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور *"}),t.jsx("input",{type:"password",value:O.password,onChange:ae=>F(ee=>({...ee,password:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل كلمة المرور"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الهاتف *"}),t.jsx("input",{type:"tel",value:O.phone,onChange:ae=>F(ee=>({...ee,phone:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل رقم الهاتف"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة الشخصية"}),t.jsx(Yl,{value:O.profileImage,onChange:ae=>F(ee=>({...ee,profileImage:Array.isArray(ae)?ae[0]:ae})),multiple:!1,maxFiles:1,maxSize:2,showPreview:!0,placeholder:"اضغط لرفع الصورة الشخصية أو اسحبها هنا",uploadEndpoint:"/api/upload/profile-images"})]})]})}),t.jsx(Mt,{isOpen:T,onClose:()=>{C(!1),k(null)},title:"تعديل بيانات المستخدم",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{C(!1),k(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>X.mutate({userId:R.userId,data:R}),disabled:X.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:X.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:N&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الكامل"}),t.jsx("input",{type:"text",value:R.name,onChange:ae=>H(ee=>({...ee,name:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:R.email,onChange:ae=>H(ee=>({...ee,email:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الهاتف"}),t.jsx("input",{type:"tel",value:R.phone,onChange:ae=>H(ee=>({...ee,phone:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة الشخصية"}),t.jsx(Yl,{value:R.profileImage,onChange:ae=>H(ee=>({...ee,profileImage:Array.isArray(ae)?ae[0]:ae})),multiple:!1,maxFiles:1,maxSize:2,showPreview:!0,placeholder:"اضغط لرفع صورة جديدة أو اسحبها هنا",uploadEndpoint:"/api/upload/profile-images"})]})]})})]})},Yi="/api/admin/Properties",Ki={create:e=>je.post(Yi,e).then(n=>n.data),update:(e,n)=>je.put(`${Yi}/${e}`,n).then(a=>a.data),delete:e=>je.delete(`${Yi}/${e}`).then(n=>n.data),getAll:e=>je.get(`${Yi}`,{params:e}).then(n=>n.data),approve:e=>je.post(`${Yi}/${e}/approve`).then(n=>n.data),reject:e=>je.post(`${Yi}/${e}/reject`).then(n=>n.data),getPending:e=>je.get(`${Yi}/pending`,{params:e}).then(n=>n.data),getDetails:e=>je.get(`${Yi}/${e.propertyId}/details`,{params:{includeUnits:e.includeUnits}}).then(n=>n.data),addPropertyToSections:(e,n)=>je.post(`/api/admin/properties/${e}/sections`,{sectionIds:n}).then(a=>a.data)},Sc=e=>{const n=In(),a=["admin-properties",e],r=["admin-properties-pending"],{data:o,isLoading:d,error:h}=zt({queryKey:a,queryFn:()=>Ki.getAll(e)}),{data:g}=zt({queryKey:r,queryFn:()=>Ki.getPending({pageNumber:1,pageSize:50})}),p=Ie({mutationFn:T=>Ki.create(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),f=Ie({mutationFn:({propertyId:T,data:C})=>Ki.update(T,C),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),v=Ie({mutationFn:T=>Ki.approve(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),j=Ie({mutationFn:T=>Ki.reject(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),S=Ie({mutationFn:T=>Ki.delete(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}});return{propertiesData:o,pendingPropertiesData:g,isLoading:d,error:h,createProperty:p,updateProperty:f,approveProperty:v,rejectProperty:j,deleteProperty:S}},sh="/api/admin/property-types",rh={create:e=>je.post(sh,e).then(n=>n.data),update:(e,n)=>je.put(`${sh}/${e}`,n).then(a=>a.data),delete:e=>je.delete(`${sh}/${e}`).then(n=>n.data),getAll:e=>je.get(`${sh}`,{params:e}).then(n=>n.data)},E2=e=>{const n=In(),a=["admin-property-types",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>rh.getAll(e)}),h=Ie({mutationFn:f=>rh.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Ie({mutationFn:({propertyTypeId:f,data:v})=>rh.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Ie({mutationFn:f=>rh.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{propertyTypesData:r,isLoading:o,error:d,createPropertyType:h,updatePropertyType:g,deletePropertyType:p}},M2=({data:e,loading:n=!1,renderCard:a,emptyMessage:r="لا توجد بيانات للعرض",emptyIcon:o="📄",columns:d=3,pagination:h})=>{const g=p=>{const f={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",5:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",6:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6"};return f[p]||f[3]};return n?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:o}),t.jsx("p",{className:"text-gray-500",children:r})]})}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsx("div",{className:`grid ${g(d)} gap-6`,children:e.map((p,f)=>t.jsx("div",{className:"animate-fade-in",children:a(p,f)},f))})}),h&&t.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border border-gray-200 rounded-lg shadow-sm sm:px-6",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>h.onChange(h.current-1,h.pageSize),disabled:h.current<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),t.jsx("button",{onClick:()=>h.onChange(h.current+1,h.pageSize),disabled:h.current*h.pageSize>=h.total,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["عرض"," ",t.jsx("span",{className:"font-medium",children:(h.current-1)*h.pageSize+1})," ","إلى"," ",t.jsx("span",{className:"font-medium",children:Math.min(h.current*h.pageSize,h.total)})," ","من"," ",t.jsx("span",{className:"font-medium",children:h.total})," نتيجة"]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsx("button",{onClick:()=>h.onChange(h.current-1,h.pageSize),disabled:h.current<=1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"}),Array.from({length:Math.ceil(h.total/h.pageSize)},(p,f)=>f+1).slice(Math.max(0,h.current-3),Math.min(Math.ceil(h.total/h.pageSize),h.current+2)).map(p=>t.jsx("button",{onClick:()=>h.onChange(p,h.pageSize),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${p===h.current?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:p},p)),t.jsx("button",{onClick:()=>h.onChange(h.current+1,h.pageSize),disabled:h.current*h.pageSize>=h.total,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"})]})})]})]})]})};class Gi{static NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org";static ROUTING_BASE_URL="https://router.project-osrm.org";static async geocodeAddress(n){try{const a=new URLSearchParams({q:n.query,format:"jsonv2",addressdetails:"1",limit:(n.limit||5).toString(),"accept-language":n.language||"ar,en"});if(n.bounds){const{northeast:d,southwest:h}=n.bounds;a.append("viewbox",`${h.longitude},${h.latitude},${d.longitude},${d.latitude}`),a.append("bounded","1")}n.country&&a.append("countrycodes",n.country);const r=await fetch(`${this.NOMINATIM_BASE_URL}/search?${a}`);if(!r.ok)throw new Error(`خطأ في البحث الجغرافي: ${r.status}`);return(await r.json()).map(d=>({displayName:d.display_name,coordinates:{latitude:parseFloat(d.lat),longitude:parseFloat(d.lon)},bounds:d.boundingbox?{northeast:{latitude:parseFloat(d.boundingbox[1]),longitude:parseFloat(d.boundingbox[3])},southwest:{latitude:parseFloat(d.boundingbox[0]),longitude:parseFloat(d.boundingbox[2])}}:void 0,type:d.type||"unknown",importance:parseFloat(d.importance||"0"),details:{country:d.address?.country,state:d.address?.state,city:d.address?.city||d.address?.town||d.address?.village,district:d.address?.suburb||d.address?.neighbourhood,street:d.address?.road,houseNumber:d.address?.house_number,postcode:d.address?.postcode}}))}catch(a){throw console.error("خطأ في البحث الجغرافي:",a),new Error("فشل في البحث الجغرافي. تحقق من الاتصال بالإنترنت.")}}static async reverseGeocode(n,a="ar,en"){try{const r=new URLSearchParams({lat:n.latitude.toString(),lon:n.longitude.toString(),format:"jsonv2",addressdetails:"1","accept-language":a}),o=await fetch(`${this.NOMINATIM_BASE_URL}/reverse?${r}`);if(!o.ok)throw new Error(`خطأ في البحث العكسي: ${o.status}`);const d=await o.json();return!d||d.error?null:{displayName:d.display_name,coordinates:{latitude:parseFloat(d.lat),longitude:parseFloat(d.lon)},bounds:d.boundingbox?{northeast:{latitude:parseFloat(d.boundingbox[1]),longitude:parseFloat(d.boundingbox[3])},southwest:{latitude:parseFloat(d.boundingbox[0]),longitude:parseFloat(d.boundingbox[2])}}:void 0,type:d.type||"unknown",importance:parseFloat(d.importance||"0"),details:{country:d.address?.country,state:d.address?.state,city:d.address?.city||d.address?.town||d.address?.village,district:d.address?.suburb||d.address?.neighbourhood,street:d.address?.road,houseNumber:d.address?.house_number,postcode:d.address?.postcode}}}catch(r){throw console.error("خطأ في البحث العكسي:",r),new Error("فشل في تحديد العنوان. تحقق من الاتصال بالإنترنت.")}}static async calculateRoute(n){try{const{start:a,end:r,transportMode:o="driving"}=n,d=o==="walking"?"foot":o==="cycling"?"bike":"car",h=`${this.ROUTING_BASE_URL}/route/v1/${d}/${a.longitude},${a.latitude};${r.longitude},${r.latitude}?overview=full&steps=true&geometries=geojson`,g=await fetch(h);if(!g.ok)throw new Error(`خطأ في حساب المسار: ${g.status}`);const p=await g.json();if(p.code!=="Ok"||!p.routes||p.routes.length===0)throw new Error("لم يتم العثور على مسار مناسب");const f=p.routes[0],v=f.legs[0];return{distance:Math.round(f.distance/1e3*100)/100,duration:Math.round(f.duration/60),geometry:f.geometry.coordinates.map(([j,S])=>({latitude:S,longitude:j})),steps:v.steps.map(j=>({instruction:this.translateInstruction(j.maneuver.type,n.language),distance:Math.round(j.distance),duration:Math.round(j.duration/60),startLocation:{latitude:j.maneuver.location[1],longitude:j.maneuver.location[0]},endLocation:{latitude:j.geometry.coordinates[j.geometry.coordinates.length-1][1],longitude:j.geometry.coordinates[j.geometry.coordinates.length-1][0]},maneuver:j.maneuver.type})),summary:{totalDistance:`${Math.round(f.distance/1e3*100)/100} كم`,totalDuration:this.formatDuration(Math.round(f.duration/60)),transportMode:this.translateTransportMode(o)}}}catch(a){throw console.error("خطأ في حساب المسار:",a),new Error("فشل في حساب المسار. تحقق من الاتصال بالإنترنت.")}}static calculateDistance(n,a){const o=this.toRadians(a.latitude-n.latitude),d=this.toRadians(a.longitude-n.longitude),h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.toRadians(n.latitude))*Math.cos(this.toRadians(a.latitude))*Math.sin(d/2)*Math.sin(d/2),g=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return Math.round(6371*g*100)/100}static async getCurrentLocation(n=!0){return new Promise((a,r)=>{if(!navigator.geolocation){r(new Error("خدمة تحديد الموقع غير مدعومة في هذا المتصفح"));return}navigator.geolocation.getCurrentPosition(o=>{a({latitude:o.coords.latitude,longitude:o.coords.longitude})},o=>{let d="فشل في تحديد الموقع الحالي";switch(o.code){case o.PERMISSION_DENIED:d="تم رفض الإذن للوصول إلى الموقع";break;case o.POSITION_UNAVAILABLE:d="معلومات الموقع غير متاحة";break;case o.TIMEOUT:d="انتهت مهلة طلب الموقع";break}r(new Error(d))},{enableHighAccuracy:n,timeout:1e4,maximumAge:3e5})})}static watchLocation(n,a={}){if(!navigator.geolocation)throw new Error("خدمة تحديد الموقع غير مدعومة في هذا المتصفح");return navigator.geolocation.watchPosition(r=>{n({latitude:r.coords.latitude,longitude:r.coords.longitude})},r=>{console.error("خطأ في مراقبة الموقع:",r)},{enableHighAccuracy:a.highAccuracy??!0,timeout:a.timeout??1e4,maximumAge:a.maximumAge??6e4})}static clearLocationWatch(n){navigator.geolocation.clearWatch(n)}static calculateBounds(n){if(n.length===0)return null;let a=n[0].latitude,r=n[0].latitude,o=n[0].longitude,d=n[0].longitude;n.forEach(p=>{a=Math.min(a,p.latitude),r=Math.max(r,p.latitude),o=Math.min(o,p.longitude),d=Math.max(d,p.longitude)});const h=(r-a)*.1,g=(d-o)*.1;return{northeast:{latitude:r+h,longitude:d+g},southwest:{latitude:a-h,longitude:o-g}}}static toRadians(n){return n*(Math.PI/180)}static translateInstruction(n,a){return{"turn-straight":"استمر مباشرة","turn-slight-right":"انعطف يميناً قليلاً","turn-right":"انعطف يميناً","turn-sharp-right":"انعطف يميناً بشدة","turn-slight-left":"انعطف يساراً قليلاً","turn-left":"انعطف يساراً","turn-sharp-left":"انعطف يساراً بشدة",uturn:"اعكس الاتجاه",arrive:"وصلت إلى الوجهة",depart:"ابدأ الرحلة",merge:"ادمج مع الطريق الرئيسي","on-ramp":"ادخل إلى الطريق السريع","off-ramp":"اخرج من الطريق السريع",fork:"خذ التفرع",roundabout:"ادخل الدوار"}[n]||"تابع المسار"}static translateTransportMode(n){return{driving:"بالسيارة",walking:"سيراً على الأقدام",cycling:"بالدراجة",transit:"بالمواصلات العامة"}[n]||n}static formatDuration(n){if(n<60)return`${n} دقيقة`;const a=Math.floor(n/60),r=n%60;return r===0?`${a} ساعة`:`${a} ساعة و ${r} دقيقة`}}const Rj=()=>{const[e,n]=b.useState(null),[a,r]=b.useState(null),[o,d]=b.useState(!1),h=b.useRef(null),g=b.useCallback(async(S=!0)=>{d(!0),r(null);try{const T=await Gi.getCurrentLocation(S);return n(T),T}catch(T){const C=T instanceof Error?T.message:"خطأ في تحديد الموقع";throw r(C),T}finally{d(!1)}},[]),p=b.useCallback((S,T)=>{try{h.current&&Gi.clearLocationWatch(h.current),h.current=Gi.watchLocation(C=>{n(C),S?.(C)},T)}catch(C){const N=C instanceof Error?C.message:"خطأ في مراقبة الموقع";r(N)}},[]),f=b.useCallback(()=>{h.current&&(Gi.clearLocationWatch(h.current),h.current=null)},[]);b.useEffect(()=>()=>{f()},[f]);const v=b.useCallback((S,T)=>Gi.calculateDistance(S,T),[]),j=b.useCallback(S=>{const T=S.filter(C=>C.coordinates).map(C=>C.coordinates);return Gi.calculateBounds(T)},[]);return{currentLocation:e,locationError:a,isLocationLoading:o,getCurrentLocation:g,startLocationWatch:p,stopLocationWatch:f,calculateDistance:v,calculateBounds:j}},_R=()=>{const e=Ie({mutationFn:o=>Gi.geocodeAddress(o)}),n=Ie({mutationFn:({coordinates:o,language:d})=>Gi.reverseGeocode(o,d)}),a=b.useCallback(async(o,d)=>e.mutateAsync({query:o,...d}),[e]),r=b.useCallback(async(o,d)=>n.mutateAsync({coordinates:o,language:d}),[n]);return{isSearching:e.isPending||n.isPending,searchError:e.error||n.error,searchByText:a,searchByCoordinates:r,resetSearch:()=>{e.reset(),n.reset()}}};delete _c.Icon.Default.prototype._getIconUrl;_c.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const SR=e=>{const n=e.color||"#3B82F6",a=e.type==="property"?32:24,r=`
    <svg width="${a}" height="${a}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" fill="${n}" stroke="white" stroke-width="2"/>
      <circle cx="12" cy="9" r="3" fill="white"/>
      ${e.icon?`<text x="12" y="13" text-anchor="middle" fill="${n}" font-size="8">${e.icon}</text>`:""}
    </svg>
  `;return new _c.Icon({iconUrl:`data:image/svg+xml;base64,${btoa(r)}`,iconSize:[a,a],iconAnchor:[a/2,a],popupAnchor:[0,-a],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",shadowSize:[a*1.5,a],shadowAnchor:[a*.75,a]})},CR=({onMapClick:e,onZoomChange:n,onMoveEnd:a})=>{const r=_2({click:o=>{e&&e({latitude:o.latlng.lat,longitude:o.latlng.lng})},zoomend:()=>{n&&n(r.getZoom())},moveend:()=>{if(a){const o=r.getCenter(),d=r.getBounds();a({latitude:o.lat,longitude:o.lng},d)}}});return null},kR=({center:e,zoom:n,bounds:a})=>{const r=N2();return b.useEffect(()=>{a?r.fitBounds(a,{padding:[20,20]}):e&&r.setView([e.latitude,e.longitude],n||r.getZoom())},[r,e,n,a]),null},TR=({onLocationSelect:e,placeholder:n="ابحث عن موقع..."})=>{const[a,r]=b.useState(""),[o,d]=b.useState([]),[h,g]=b.useState(!1),{searchByText:p}=_R(),f=b.useCallback(async j=>{if(j.length<3){d([]),g(!1);return}try{const S=await p(j,{language:"ar,en",limit:5});d(S),g(!0)}catch(S){console.error("خطأ في البحث:",S),d([]),g(!1)}},[p]),v=j=>{e(j.coordinates),r(j.displayName),g(!1)};return t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:a,onChange:j=>{r(j.target.value),f(j.target.value)},placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),h&&o.length>0&&t.jsx("div",{className:"absolute z-[9999] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:o.map((j,S)=>t.jsxs("button",{onClick:()=>v(j),className:"w-full px-3 py-2 text-right hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:j.displayName}),t.jsx("p",{className:"text-xs text-gray-500",children:j.type})]},S))})]})},R2=({markers:e=[],center:n={latitude:15.279272,longitude:44.227494},zoom:a=10,height:r="500px",width:o="100%",interactive:d=!0,onMarkerClick:h,onLocationChange:g,onZoomChange:p,showCurrentLocation:f=!0,showControls:v=!0,emptyMessage:j="لا توجد مواقع لعرضها على الخريطة",enableClustering:S=!1,mapStyle:T="default",pagination:C})=>{const[N,k]=b.useState(n),[A,D]=b.useState(a),[O,F]=b.useState(null),[R,H]=b.useState(!1),{currentLocation:E,getCurrentLocation:z}=Rj(),{calculateBounds:Z}=Rj(),U=e.filter(q=>q.coordinates&&q.coordinates.latitude!==0&&q.coordinates.longitude!==0),V=()=>{switch(T){case"satellite":return"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png";case"terrain":return"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png";default:return"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},X=b.useCallback(async()=>{try{const q=await z();k(q),D(15),g?.(q)}catch(q){console.error("خطأ في تحديد الموقع:",q)}},[z,g]),W=b.useCallback(()=>{if(U.length>0){const q=Z(U);if(q){const K=(q.northeast.latitude+q.southwest.latitude)/2,I=(q.northeast.longitude+q.southwest.longitude)/2;k({latitude:K,longitude:I})}}},[U,Z]),B=b.useCallback(q=>{F(q),h?.(q)},[h]),te=b.useCallback(q=>{F(null),g?.(q)},[g]),G=b.useCallback(q=>{D(q),p?.(q)},[p]),J=b.useCallback(q=>{k(q),D(15),H(!1),g?.(q)},[g]);return U.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",style:{height:r,width:o},children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[t.jsx("div",{className:"text-6xl mb-4",children:"🗺️"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد مواقع للعرض"}),t.jsx("p",{className:"text-gray-500",children:j})]})}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",style:{width:o},children:[v&&t.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[R?t.jsx("div",{className:"flex-1",children:t.jsx(TR,{onLocationSelect:J})}):t.jsx("div",{className:"flex-1",children:t.jsxs("span",{className:"text-sm text-gray-600",children:["عدد المواقع: ",U.length]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(rt,{label:R?"إخفاء البحث":"بحث",variant:"secondary",onClick:()=>H(!R)}),f&&t.jsx(rt,{label:"موقعي",variant:"secondary",onClick:X}),t.jsx(rt,{label:"عرض الكل",variant:"secondary",onClick:W})]})]})}),t.jsx("div",{style:{height:r,position:"relative"},children:t.jsxs(S2,{center:[N.latitude,N.longitude],zoom:A,style:{height:"100%",width:"100%"},scrollWheelZoom:d,dragging:d,touchZoom:d,doubleClickZoom:d,boxZoom:d,keyboard:d,zoomControl:!1,children:[t.jsx(C2,{url:V(),attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.jsx(kR,{center:N,zoom:A}),t.jsx(CR,{onMapClick:te,onZoomChange:G}),U.map(q=>t.jsx(Ox,{position:[q.coordinates.latitude,q.coordinates.longitude],icon:SR(q),eventHandlers:{click:()=>B(q)},children:t.jsx(Tj,{children:t.jsxs("div",{className:"p-2 min-w-48 text-right",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:q.name}),q.address&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:q.address}),q.description&&t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:q.description}),q.price&&t.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[q.price.amount," ",q.price.currency]}),q.rating&&t.jsxs("p",{className:"text-xs text-yellow-600",children:[q.rating,"/5 تقييم"]})]})})},q.id)),E&&f&&t.jsx(Ox,{position:[E.latitude,E.longitude],icon:new _c.Icon({iconUrl:"data:image/svg+xml;base64,"+btoa(`
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="8" fill="#3B82F6" stroke="white" stroke-width="3"/>
                    <circle cx="12" cy="12" r="3" fill="white"/>
                  </svg>
                `),iconSize:[16,16],iconAnchor:[8,8]}),children:t.jsx(Tj,{children:t.jsxs("div",{className:"p-2 text-right",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"موقعك الحالي"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[E.latitude.toFixed(6),", ",E.longitude.toFixed(6)]})]})})})]})}),C&&t.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>C.onChange(C.current-1,C.pageSize),disabled:C.current<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),t.jsx("button",{onClick:()=>C.onChange(C.current+1,C.pageSize),disabled:C.current*C.pageSize>=C.total,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["عرض"," ",t.jsx("span",{className:"font-medium",children:(C.current-1)*C.pageSize+1})," ","إلى"," ",t.jsx("span",{className:"font-medium",children:Math.min(C.current*C.pageSize,C.total)})," ","من"," ",t.jsx("span",{className:"font-medium",children:C.total})," موقع"]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsx("button",{onClick:()=>C.onChange(C.current-1,C.pageSize),disabled:C.current<=1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"}),Array.from({length:Math.ceil(C.total/C.pageSize)},(q,K)=>K+1).slice(Math.max(0,C.current-3),Math.min(Math.ceil(C.total/C.pageSize),C.current+2)).map(q=>t.jsx("button",{onClick:()=>C.onChange(q,C.pageSize),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${q===C.current?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:q},q)),t.jsx("button",{onClick:()=>C.onChange(C.current+1,C.pageSize),disabled:C.current*C.pageSize>=C.total,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"})]})})]})]})})]})},A2=({currentView:e,onViewChange:n,availableViews:a=["table","cards","map"],className:r=""})=>{const d=[{type:"table",label:"جدول",icon:"📋"},{type:"cards",label:"كروت",icon:"🎴"},{type:"map",label:"خريطة",icon:"🗺️"}].filter(h=>a.includes(h.type));return t.jsx("div",{className:`inline-flex rounded-lg border border-gray-300 bg-white ${r}`,children:d.map((h,g)=>t.jsx("button",{onClick:()=>n(h.type),className:`px-4 py-2 text-sm font-medium transition-colors ${e===h.type?"bg-blue-50 text-blue-700 border-blue-200":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"} ${g===0?"rounded-r-md border-l-0":g===d.length-1?"rounded-l-md border-r-0":"border-l-0 border-r-0"}`,title:h.label,children:t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{children:h.icon}),t.jsx("span",{children:h.label})]})},h.type))})},Vl=({value:e="",onChange:n,placeholder:a="اختر المستخدم",className:r="",disabled:o=!1,activeOnly:d=!1,showAvatar:h=!0,required:g=!1})=>{const[p,f]=b.useState(!1),[v,j]=b.useState(""),[S,T]=b.useState(null),C=b.useRef(null),N={pageNumber:1,pageSize:50,nameContains:v||void 0},{usersData:k,isLoading:A}=F0(N),D=k?.items?.filter(E=>!d||E.isActive)||[];b.useEffect(()=>{if(e&&k?.items){const E=k.items.find(z=>z.id===e);T(E||null)}else T(null)},[e,k]),b.useEffect(()=>{const E=z=>{C.current&&!C.current.contains(z.target)&&f(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const O=E=>{T(E),n(E.id,E),f(!1),j("")},F=()=>{T(null),n(""),j("")},R=E=>E?"نشط":"غير نشط",H=E=>E?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return t.jsxs("div",{className:`relative ${r}`,ref:C,children:[t.jsxs("button",{type:"button",onClick:()=>f(!p),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!S&&g?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:S?t.jsxs(t.Fragment,{children:[h&&t.jsx("div",{className:"flex-shrink-0",children:S.profileImage?t.jsx("img",{src:S.profileImage,alt:S.name,className:"w-8 h-8 rounded-full object-cover"}):t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-gray-600",children:S.name?.[0]?.toUpperCase()})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:S.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${H(S.isActive)}`,children:R(S.isActive)})]}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:S.email})]})]}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[S&&!o&&t.jsx("span",{role:"button",tabIndex:0,onClick:E=>{E.stopPropagation(),E.preventDefault(),F()},onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),E.stopPropagation(),F())},className:"p-1 hover:bg-gray-100 rounded cursor-pointer",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:p?"▲":"▼"})]})]}),p&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:v,onChange:E=>j(E.target.value),placeholder:"البحث في المستخدمين...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:A?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):D.length>0?D.map(E=>t.jsxs("button",{type:"button",onClick:()=>O(E),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[h&&t.jsx("div",{className:"flex-shrink-0 ml-3",children:E.profileImage?t.jsx("img",{src:E.profileImage,alt:E.name,className:"w-10 h-10 rounded-full object-cover"}):t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-gray-600",children:E.name?.[0]?.toUpperCase()})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:E.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${H(E.isActive)}`,children:R(E.isActive)})]}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:E.email}),E.phone&&t.jsx("p",{className:"text-xs text-gray-400 truncate",children:E.phone})]})]},E.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:v?`لا توجد نتائج للبحث "${v}"`:"لا توجد مستخدمين"})}),D.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[D.length," من ",k?.totalCount||0," مستخدم"]})]})]})};var yn=(e=>(e.SINGLE_PROPERTY_AD="SINGLE_PROPERTY_AD",e.FEATURED_PROPERTY_AD="FEATURED_PROPERTY_AD",e.MULTI_PROPERTY_AD="MULTI_PROPERTY_AD",e.UNIT_SHOWCASE_AD="UNIT_SHOWCASE_AD",e.SINGLE_PROPERTY_OFFER="SINGLE_PROPERTY_OFFER",e.LIMITED_TIME_OFFER="LIMITED_TIME_OFFER",e.SEASONAL_OFFER="SEASONAL_OFFER",e.MULTI_PROPERTY_OFFERS_GRID="MULTI_PROPERTY_OFFERS_GRID",e.OFFERS_CAROUSEL="OFFERS_CAROUSEL",e.FLASH_DEALS="FLASH_DEALS",e.HORIZONTAL_PROPERTY_LIST="HORIZONTAL_PROPERTY_LIST",e.VERTICAL_PROPERTY_GRID="VERTICAL_PROPERTY_GRID",e.MIXED_LAYOUT_LIST="MIXED_LAYOUT_LIST",e.COMPACT_PROPERTY_LIST="COMPACT_PROPERTY_LIST",e.FEATURED_PROPERTIES_SHOWCASE="FEATURED_PROPERTIES_SHOWCASE",e.CITY_CARDS_GRID="CITY_CARDS_GRID",e.DESTINATION_CAROUSEL="DESTINATION_CAROUSEL",e.EXPLORE_CITIES="EXPLORE_CITIES",e.PREMIUM_CAROUSEL="PREMIUM_CAROUSEL",e.INTERACTIVE_SHOWCASE="INTERACTIVE_SHOWCASE",e))(yn||{}),Is=(e=>(e.PROPERTIES="PROPERTIES",e.UNITS="UNITS",e))(Is||{});const Od="/api/admin/sections",Aj=e=>{switch(e){case yn.SINGLE_PROPERTY_AD:return"SinglePropertyAd";case yn.MULTI_PROPERTY_AD:return"MultiPropertyAd";case yn.UNIT_SHOWCASE_AD:return"UnitShowcaseAd";case yn.SINGLE_PROPERTY_OFFER:return"SinglePropertyOffer";case yn.LIMITED_TIME_OFFER:return"LimitedTimeOffer";case yn.SEASONAL_OFFER:return"SeasonalOffer";case yn.MULTI_PROPERTY_OFFERS_GRID:return"MultiPropertyOffersGrid";case yn.OFFERS_CAROUSEL:return"OffersCarousel";case yn.FLASH_DEALS:return"FlashDeals";case yn.HORIZONTAL_PROPERTY_LIST:return"HorizontalPropertyList";case yn.VERTICAL_PROPERTY_GRID:return"VerticalPropertyGrid";case yn.MIXED_LAYOUT_LIST:return"MixedLayoutList";case yn.COMPACT_PROPERTY_LIST:return"CompactPropertyList";case yn.CITY_CARDS_GRID:return"CityCardsGrid";case yn.DESTINATION_CAROUSEL:return"DestinationCarousel";case yn.EXPLORE_CITIES:return"ExploreCities";case yn.PREMIUM_CAROUSEL:return"PremiumCarousel";case yn.INTERACTIVE_SHOWCASE:return"InteractiveShowcase";default:return"HorizontalPropertyList"}},Dj=e=>e===Is.PROPERTIES?"Properties":"Units";class ER{async getSections(n){const{data:a}=await je.get(Od,{params:n});return a}async createSection(n){const a={...n,type:Aj(n.type),target:Dj(n.target)},{data:r}=await je.post(Od,a);return r.data}async updateSection(n,a){const r={...a,type:Aj(a.type),target:Dj(a.target)},{data:o}=await je.put(`${Od}/${n}`,r);return o.data}async deleteSection(n){await je.delete(`${Od}/${n}`)}async assignItems(n,a){await je.post(`${Od}/${n}/assign-items`,a)}}const tc=new ER,MR=()=>{const[e,n]=b.useState("table"),[a,r]=b.useState(""),[o,d]=b.useState(!1),[h,g]=b.useState(1),[p,f]=b.useState(20),[v,j]=b.useState({propertyTypeId:"",isApproved:void 0,starRatings:[],minPrice:"",maxPrice:"",hasActiveBookings:void 0}),[S,T]=b.useState(!1),[C,N]=b.useState(!1),[k,A]=b.useState(!1),[D,O]=b.useState(null),[F,R]=b.useState([]),[H,E]=b.useState(!1),[z,Z]=b.useState([]),[U,V]=b.useState([]),[X,W]=b.useState({name:"",address:"",propertyTypeId:"",ownerId:"",description:"",latitude:0,longitude:0,city:"",starRating:3,images:[]}),[B,te]=b.useState({propertyId:"",name:"",address:"",description:"",latitude:0,longitude:0,city:"",starRating:3,images:[]}),G={pageNumber:h,pageSize:p,searchTerm:a||void 0,propertyTypeId:v.propertyTypeId||void 0,isApproved:v.isApproved,starRatings:v.starRatings.length>0?v.starRatings:void 0,minPrice:v.minPrice||void 0,maxPrice:v.maxPrice||void 0,hasActiveBookings:v.hasActiveBookings},{propertiesData:J,pendingPropertiesData:q,isLoading:K,error:I,createProperty:se,updateProperty:ne,approveProperty:ae,rejectProperty:ee,deleteProperty:le}=Sc(G),me=is(),{propertyTypesData:Re,isLoading:Pe,error:ie}=E2({pageNumber:1,pageSize:100}),Q=de=>{me(`/admin/property-images/${de.id}`,{state:{propertyName:de.name}})},we=()=>{W({name:"",address:"",propertyTypeId:"",ownerId:"",description:"",latitude:0,longitude:0,city:"",starRating:3,images:[]})},Be=async de=>{O(de),V([]);const De=await tc.getSections({pageNumber:1,pageSize:100,target:Is.PROPERTIES});Z(De.items),E(!0)},nt=async()=>{D&&(await Ki.addPropertyToSections(D.id,U),E(!1))},Qe=de=>{O(de),te({propertyId:de.id,name:de.name,address:de.address,description:de.description,latitude:de.latitude,longitude:de.longitude,city:de.city,starRating:de.starRating,images:de.images?.map(De=>De.url)||[]}),N(!0)},it=de=>{O(de),A(!0)},Ce=de=>{confirm(`هل أنت متأكد من الموافقة على الكيان "${de.name}"؟`)&&ae.mutate(de.id)},Fe=de=>{confirm(`هل أنت متأكد من رفض الكيان "${de.name}"؟`)&&ee.mutate(de.id)},Nt=de=>{confirm(`هل أنت متأكد من حذف الكيان "${de.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`)&&le.mutate(de.id)},_t=(de,De)=>{j(Le=>({...Le,[de]:De})),g(1)},ut=()=>{j({propertyTypeId:"",isApproved:void 0,starRatings:[],minPrice:"",maxPrice:"",hasActiveBookings:void 0}),r(""),g(1)},ke=[{key:"propertyTypeId",label:"نوع الكيان",type:"select",options:[{value:"hotel",label:"فندق"},{value:"resort",label:"منتجع"},{value:"apartment",label:"شقة مفروشة"},{value:"villa",label:"فيلا"}]},{key:"isApproved",label:"حالة الموافقة",type:"boolean"},{key:"starRatings",label:"تقييم النجوم",type:"select",options:[{value:"5",label:"5 نجوم"},{value:"4",label:"4 نجوم"},{value:"3",label:"3 نجوم"},{value:"2",label:"2 نجوم"},{value:"1",label:"1 نجمة"}]},{key:"minPrice",label:"الحد الأدنى للسعر",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxPrice",label:"الحد الأقصى للسعر",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"hasActiveBookings",label:"يحتوي على حجوزات نشطة",type:"boolean"}],Oe=[{key:"name",title:"اسم الكيان",sortable:!0,priority:"high",mobileLabel:"الاسم",render:(de,De)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:de}),t.jsx("span",{className:"text-sm text-gray-500",children:De.typeName})]})},{key:"ownerName",title:"المالك",sortable:!0,priority:"medium",mobileLabel:"المالك"},{key:"city",title:"المدينة",sortable:!0,priority:"medium",mobileLabel:"المدينة"},{key:"starRating",title:"تقييم النجوم",priority:"high",mobileLabel:"التقييم",render:de=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"ml-1",children:de}),t.jsxs("span",{className:"text-yellow-400",children:["★".repeat(de),"☆".repeat(5-de)]})]})},{key:"isApproved",title:"حالة الموافقة",priority:"high",mobileLabel:"الحالة",render:de=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${de?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:de?"معتمد":"في انتظار الموافقة"})},{key:"createdAt",title:"تاريخ الإنشاء",sortable:!0,priority:"low",mobileLabel:"التاريخ",hideOnMobile:!0,render:de=>new Date(de).toLocaleDateString("ar-SA")}],qe=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:it},{label:"معرض الصور",icon:"🖼️",color:"orange",onClick:Q},{label:"تعديل",icon:"✏️",color:"blue",onClick:Qe},{label:"موافقة",icon:"✅",color:"green",onClick:Ce,show:de=>!de.isApproved},{label:"رفض",icon:"❌",color:"red",onClick:Fe,show:de=>!de.isApproved},{label:"حذف",icon:"🗑️",color:"red",onClick:Nt},{label:"إسناد للأقسام",icon:"📚",color:"blue",onClick:de=>Be(de)}],Ae=de=>!de||de.length===0?null:de.find(Le=>Le.isMain)||de[0],He=de=>{const De=Ae(de.images);return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[t.jsxs("div",{className:"relative h-48 bg-gray-200",children:[De?t.jsx("img",{src:De.url,alt:De.altText||de.name,className:"w-full h-full object-cover",onError:Le=>{const kt=Le.target;kt.style.display="none",kt.nextElementSibling?.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-full h-full flex items-center justify-center bg-gray-100 ${De?"hidden":""}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-4xl text-gray-400",children:"🏢"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"لا توجد صورة"})]})}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${de.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:de.isApproved?"معتمد":"في انتظار الموافقة"})}),de.images&&de.images.length>0&&t.jsxs("div",{className:"absolute bottom-3 left-3 bg-black bg-opacity-60 text-white px-2 py-1 rounded text-xs",children:["📸 ",de.images.length," صورة"]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:de.name}),t.jsx("p",{className:"text-sm text-gray-600",children:de.address})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"المالك:"}),t.jsx("span",{className:"text-sm text-gray-900",children:de.ownerName})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"المدينة:"}),t.jsx("span",{className:"text-sm text-gray-900",children:de.city})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"التقييم:"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm text-gray-900 ml-1",children:de.starRating}),t.jsxs("span",{className:"text-yellow-400 text-sm",children:["★".repeat(de.starRating),"☆".repeat(5-de.starRating)]})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"تاريخ الإنشاء:"}),t.jsx("span",{className:"text-sm text-gray-900",children:new Date(de.createdAt).toLocaleDateString("ar-SA")})]})]}),t.jsx("div",{className:"space-y-2 mt-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>it(de),className:"flex-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors",children:"👁️ عرض التفاصيل"}),t.jsx("button",{onClick:()=>Qe(de),className:"flex-1 px-3 py-2 text-sm bg-gray-50 text-gray-600 rounded-md hover:bg-gray-100 transition-colors",children:"✏️ تعديل"}),!de.isApproved&&t.jsx("button",{onClick:()=>Ce(de),className:"flex-1 px-3 py-2 text-sm bg-green-50 text-green-600 rounded-md hover:bg-green-100 transition-colors",children:"✅ موافقة"})]})})]})]})},ct=(J?.items||[]).map(de=>({...de,latitude:de.latitude,longitude:de.longitude}));return I?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات الكيانات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الكيانات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراجعة وموافقة الكيانات الجديدة وإدارة الكيانات المسجلة مع 3 طرق عرض مختلفة"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(A2,{currentView:e,onViewChange:n,availableViews:["table","cards","map"]}),t.jsx("button",{onClick:()=>T(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة كيان جديد"})]})]})}),q&&q.totalCount>0&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-yellow-600 text-xl ml-3",children:"⚠️"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"كيانات في انتظار الموافقة"}),t.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["يوجد ",q.totalCount," كيان في انتظار المراجعة والموافقة"]})]})]})}),t.jsx(ti,{searchPlaceholder:"البحث في الكيانات...",searchValue:a,onSearchChange:r,filters:ke,filterValues:v,onFilterChange:_t,onReset:ut,showAdvanced:o,onToggleAdvanced:()=>d(!o)}),e==="table"&&t.jsx(ls,{data:J?.items||[],columns:Oe,loading:K,pagination:{current:h,total:J?.totalCount||0,pageSize:p,onChange:(de,De)=>{g(de),f(De)}},rowSelection:{selectedRowKeys:F,onChange:R},actions:qe,onRowClick:it,mobileCardTitle:de=>de.name,mobileCardSubtitle:de=>`${de.typeName} - ${de.city}`,mobileCardImage:de=>{const De=de.images?.find(Le=>Le.isMain);return De?De.url:de.images?.[0]?.url||""}}),e==="cards"&&t.jsx(M2,{data:J?.items||[],loading:K,renderCard:He,emptyMessage:"لا توجد كيانات للعرض",emptyIcon:"🏢",columns:3,pagination:{current:h,total:J?.totalCount||0,pageSize:p,onChange:(de,De)=>{g(de),f(De)}}}),e==="map"&&t.jsx(R2,{markers:ct.map(de=>({id:de.id,name:de.name,address:de.address,description:`${de.city} - تقييم ${de.starRating} نجوم`,coordinates:de.latitude&&de.longitude?{latitude:de.latitude,longitude:de.longitude}:void 0,type:"property",color:de.isApproved?"#10B981":"#F59E0B",isApproved:de.isApproved,rating:de.starRating})).filter(de=>de.coordinates),onMarkerClick:de=>{const De=(J?.items||[]).find(Le=>Le.id===de.id);De&&it(De)},emptyMessage:"لا توجد كيانات بمواقع محددة لعرضها على الخريطة",height:"600px",pagination:{current:h,total:J?.totalCount||0,pageSize:p,onChange:(de,De)=>{g(de),f(De)}}}),t.jsx(Mt,{isOpen:S,onClose:()=>T(!1),title:"إضافة كيان جديد",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>se.mutate(X,{onSuccess:()=>{T(!1),we()}}),disabled:se.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:se.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الكيان *"}),t.jsx("input",{type:"text",value:X.name,onChange:de=>W(De=>({...De,name:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم الكيان"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الكيان *"}),t.jsxs("select",{value:X.propertyTypeId,onChange:de=>W(De=>({...De,propertyTypeId:de.target.value})),disabled:Pe,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"اختر نوع الكيان"}),Re?.items.map(de=>t.jsx("option",{value:de.id,children:de.name},de.id))]}),ie&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:"خطأ في تحميل أنواع الكيانات"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"مالك الكيان *"}),t.jsx(Vl,{value:X.ownerId,onChange:de=>W(De=>({...De,ownerId:de})),placeholder:"اختر مالك الكيان",allowedRoles:["Owner"],required:!0,className:""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المدينة *"}),t.jsx("input",{type:"text",value:X.city,onChange:de=>W(De=>({...De,city:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم المدينة"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان *"}),t.jsx("input",{type:"text",value:X.address,onChange:de=>W(De=>({...De,address:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل العنوان الكامل"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموقع الجغرافي *"}),t.jsx(Lx,{latitude:X.latitude,longitude:X.longitude,onChange:(de,De,Le)=>{W(kt=>({...kt,latitude:de,longitude:De}))},placeholder:"حدد موقع الكيان",required:!0,showMap:!0,allowManualInput:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تقييم النجوم"}),t.jsxs("select",{value:X.starRating,onChange:de=>W(De=>({...De,starRating:Number(de.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:1,children:"1 نجمة"}),t.jsx("option",{value:2,children:"2 نجمة"}),t.jsx("option",{value:3,children:"3 نجوم"}),t.jsx("option",{value:4,children:"4 نجوم"}),t.jsx("option",{value:5,children:"5 نجوم"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف الكيان"}),t.jsx("textarea",{rows:3,value:X.description,onChange:de=>W(De=>({...De,description:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل وصف مفصل للكيان"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صور الكيان"}),t.jsx(Yl,{value:X.images||[],onChange:de=>W(De=>({...De,images:Array.isArray(de)?de:[de]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور الكيان أو اسحبها هنا",uploadEndpoint:"/api/images/upload"})]})]})}),t.jsx(Mt,{isOpen:C,onClose:()=>{N(!1),O(null)},title:"تعديل بيانات الكيان",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{N(!1),O(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>ne.mutate({propertyId:B.propertyId,data:B}),disabled:ne.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:ne.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:D&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الكيان"}),t.jsx("input",{type:"text",value:B.name,onChange:de=>te(De=>({...De,name:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المدينة"}),t.jsx("input",{type:"text",value:B.city,onChange:de=>te(De=>({...De,city:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),t.jsx("input",{type:"text",value:B.address,onChange:de=>te(De=>({...De,address:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموقع الجغرافي"}),t.jsx(Lx,{latitude:B.latitude||0,longitude:B.longitude||0,onChange:(de,De,Le)=>{te(kt=>({...kt,latitude:de,longitude:De}))},placeholder:"حدث موقع الكيان",showMap:!0,allowManualInput:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تقييم النجوم"}),t.jsxs("select",{value:B.starRating,onChange:de=>te(De=>({...De,starRating:Number(de.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:1,children:"1 نجمة"}),t.jsx("option",{value:2,children:"2 نجمة"}),t.jsx("option",{value:3,children:"3 نجوم"}),t.jsx("option",{value:4,children:"4 نجوم"}),t.jsx("option",{value:5,children:"5 نجوم"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف الكيان"}),t.jsx("textarea",{rows:3,value:B.description,onChange:de=>te(De=>({...De,description:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صور الكيان"}),t.jsx(Yl,{value:B.images||D?.images?.map(de=>de.url)||[],onChange:de=>te(De=>({...De,images:Array.isArray(de)?de:[de]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور جديدة أو اسحبها هنا",uploadEndpoint:"/api/upload/property-images"})]})]})}),t.jsx(Mt,{isOpen:k,onClose:()=>{A(!1),O(null)},title:"تفاصيل الكيان",size:"xl",children:D&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الكيان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الكيان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.typeName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المالك"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.ownerName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المدينة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.city})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تقييم النجوم"}),t.jsxs("div",{className:"mt-1 flex items-center",children:[t.jsxs("span",{className:"text-yellow-400",children:["★".repeat(D.starRating),"☆".repeat(5-D.starRating)]}),t.jsxs("span",{className:"mr-2 text-sm text-gray-600",children:["(",D.starRating,"/5)"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة الموافقة"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${D.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:D.isApproved?"معتمد":"في انتظار الموافقة"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.address})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"خط العرض"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.latitude})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"خط الطول"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.longitude})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الإنشاء"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(D.createdAt).toLocaleString("ar-SA")})]})]})}),t.jsx(Mt,{isOpen:H,onClose:()=>E(!1),title:"إضافة الكيان للأقسام",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:nt,disabled:U.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:U.length===0?"لا يوجد أقسام متاحة":"حفظ"})]}),children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-80 overflow-auto",children:z.map(de=>t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:U.includes(de.id),onChange:De=>{V(Le=>De.target.checked?[...Le,de.id]:Le.filter(kt=>kt!==de.id))}}),t.jsxs("span",{children:["#",de.displayOrder," - ",de.type]})]},de.id))}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{className:"btn",onClick:()=>E(!1),children:"إلغاء"}),t.jsx("button",{className:"btn btn-primary",onClick:nt,children:"حفظ"})]})]})})]})},Ld="/api/admin/unit-types",Hd={getAll:e=>je.get(`${Ld}`,{params:e}).then(n=>n.data),create:e=>je.post(`${Ld}`,e).then(n=>n.data),update:(e,n)=>je.put(`${Ld}/${e}`,n).then(a=>a.data),delete:e=>je.delete(`${Ld}/${e}`).then(n=>n.data),getByPropertyType:e=>{const{propertyTypeId:n,pageNumber:a,pageSize:r}=e;return je.get(`${Ld}/property-type/${n}`,{params:{pageNumber:a,pageSize:r}}).then(o=>o.data)}},D2=e=>{const n=In(),a=["admin-unit-types-by-property",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>Hd.getByPropertyType(e),enabled:!!e.propertyTypeId}),h=Ie({mutationFn:f=>Hd.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Ie({mutationFn:({unitTypeId:f,data:v})=>Hd.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Ie({mutationFn:f=>Hd.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{unitTypesData:r,isLoading:o,error:d,createUnitType:h,updateUnitType:g,deleteUnitType:p}},ih="/api/admin/fieldgroups",lh={create:e=>je.post(ih,e).then(n=>n.data),update:e=>je.put(`${ih}/${e.groupId}`,e).then(n=>n.data),delete:e=>je.delete(`${ih}/${e.groupId}`).then(n=>n.data),getByUnitType:e=>je.get(`${ih}/unit-type/${e.unitTypeId}`).then(n=>n.data)},RR=e=>{const n=In(),a=["admin-field-groups-by-unit",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>lh.getByUnitType(e),enabled:!!e.unitTypeId}),h=Ie({mutationFn:f=>lh.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Ie({mutationFn:f=>lh.update(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Ie({mutationFn:f=>lh.delete({groupId:f}),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{fieldGroupsData:r,isLoading:o,error:d,createFieldGroup:h,updateFieldGroup:g,deleteFieldGroup:p}},oh={create:e=>je.post("/api/admin/unit-type-fields",e).then(n=>n.data),update:(e,n)=>je.put(`/api/admin/unit-type-fields/${e}`,n).then(a=>a.data),delete:e=>je.delete(`/api/admin/unit-type-fields/${e}`).then(n=>n.data),getByUnitType:({unitTypeId:e,...n})=>je.get(`/api/admin/unit-type-fields/unit-type/${e}`,{params:n}).then(a=>a.data)},Bx=e=>{const n=In(),a=["admin-unit-type-fields-by-unit",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>oh.getByUnitType(e),enabled:!!e.unitTypeId}),h=Ie({mutationFn:f=>oh.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Ie({mutationFn:({fieldId:f,data:v})=>oh.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Ie({mutationFn:f=>oh.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{unitTypeFieldsData:r,isLoading:o,error:d,createUnitTypeField:h,updateUnitTypeField:g,deleteUnitTypeField:p}},zh=({value:e="",onChange:n,placeholder:a="أدخل الميزات واضغط Enter أو الفاصلة للإضافة...",label:r,disabled:o=!1,required:d=!1,error:h,maxTags:g=20,className:p="",variant:f="modern",size:v="md",direction:j="rtl",separator:S=",",allowDuplicates:T=!1,suggestions:C=[]})=>{const[N,k]=b.useState(""),[A,D]=b.useState(!1),[O,F]=b.useState(!1),R=b.useRef(null),H=e?e.split(S).map(se=>se.trim()).filter(se=>se.length>0):[],E=C.filter(se=>se.toLowerCase().includes(N.toLowerCase())&&(T||!H.includes(se))),z={sm:{container:"min-h-[32px] text-sm",input:"px-2 py-1 text-sm",tag:"px-2 py-0.5 text-xs",icon:"w-3 h-3"},md:{container:"min-h-[40px] text-base",input:"px-3 py-2 text-base",tag:"px-2.5 py-1 text-sm",icon:"w-4 h-4"},lg:{container:"min-h-[48px] text-lg",input:"px-4 py-3 text-lg",tag:"px-3 py-1.5 text-base",icon:"w-5 h-5"}},Z={default:{container:"border-gray-300 bg-white shadow-sm rounded-lg",focused:"ring-2 ring-blue-500 border-blue-500",error:"border-red-500 ring-2 ring-red-200",tag:"bg-blue-100 text-blue-800 border border-blue-200",tagHover:"hover:bg-blue-200"},modern:{container:"border-gray-200 bg-white shadow-lg rounded-xl",focused:"ring-2 ring-blue-500/20 border-blue-400 shadow-xl",error:"border-red-400 ring-2 ring-red-200 shadow-red-100",tag:"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200 rounded-full",tagHover:"hover:from-blue-100 hover:to-indigo-100"},minimal:{container:"border-gray-200 bg-transparent rounded-md",focused:"border-blue-400",error:"border-red-400",tag:"bg-gray-100 text-gray-700 border border-gray-200 rounded-md",tagHover:"hover:bg-gray-200"}},U=z[v],V=Z[f],X=se=>{const ne=se.trim();if(!ne)return;if(!T&&H.includes(ne)){k("");return}if(H.length>=g){k("");return}const ae=[...H,ne];n(ae.join(S)),k(""),F(!1)},W=se=>{const ne=H.filter((ae,ee)=>ee!==se);n(ne.join(S))},B=se=>{se.key==="Enter"||se.key===S?(se.preventDefault(),X(N)):se.key==="Backspace"&&!N&&H.length>0?W(H.length-1):se.key==="Escape"&&(F(!1),R.current?.blur())},te=se=>{const ne=se.target.value;if(ne.includes(S)){const ae=ne.split(S);ae.slice(0,-1).forEach(le=>X(le)),k(ae[ae.length-1])}else k(ne),F(ne.length>0&&E.length>0)},G=()=>{D(!0),N&&E.length>0&&F(!0)},J=()=>{D(!1),setTimeout(()=>{F(!1),N.trim()&&X(N)},200)},q=()=>{R.current?.focus()},K=se=>{X(se),R.current?.focus()},I=()=>{let se=`
      ${V.container} 
      ${U.container}
      transition-all duration-200 ease-in-out
      cursor-text
    `;return h?se+=` ${V.error}`:A&&(se+=` ${V.focused}`),o&&(se+=" opacity-50 cursor-not-allowed bg-gray-50"),se};return t.jsxs("div",{className:`relative space-y-2 ${p}`,children:[r&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[r,d&&t.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:`border flex flex-wrap items-center gap-1 p-2 ${I()}`,onClick:q,dir:j,children:[H.map((se,ne)=>t.jsxs("span",{className:`
                inline-flex items-center gap-1 
                ${V.tag} ${V.tagHover}
                ${U.tag}
                transition-all duration-200
                transform hover:scale-105 animate-in slide-in-from-left-2
              `,children:[t.jsx("span",{children:se}),!o&&t.jsx("button",{type:"button",onClick:ae=>{ae.stopPropagation(),W(ne)},className:`
                    ${U.icon} 
                    hover:text-red-600 transition-colors duration-200
                    rounded-full hover:bg-red-100 p-0.5
                  `,children:t.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},ne)),t.jsx("input",{ref:R,type:"text",value:N,onChange:te,onKeyDown:B,onFocus:G,onBlur:J,disabled:o,placeholder:H.length===0?a:"إضافة ميزة...",className:`
              flex-1 min-w-[120px] bg-transparent border-none outline-none
              ${U.input.replace("px-3 py-2","p-0")}
              ${o?"cursor-not-allowed":""}
              placeholder-gray-400
            `,dir:j})]}),O&&E.length>0&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:E.map((se,ne)=>t.jsx("button",{type:"button",onClick:()=>K(se),className:"w-full px-3 py-2 text-right hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:t.jsx("span",{className:"text-sm text-gray-700",children:se})},ne))})]}),t.jsxs("div",{className:"space-y-1",children:[H.length>0&&t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("span",{children:[H.length," من ",g," ميزة"]}),H.length>=g&&t.jsx("span",{className:"text-orange-600",children:"تم الوصول للحد الأقصى"})]}),h&&t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("span",{className:"text-red-500",children:"⚠️"}),t.jsx("span",{className:"text-sm text-red-600",children:h})]}),A&&!h&&t.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),t.jsxs("div",{className:"text-xs text-blue-800",children:[t.jsx("div",{className:"font-medium mb-1",children:"نصائح:"}),t.jsxs("ul",{className:"space-y-0.5",children:[t.jsxs("li",{children:["• اضغط Enter أو الفاصلة (",S,") لإضافة ميزة"]}),t.jsx("li",{children:"• اضغط Backspace لحذف آخر ميزة"}),t.jsx("li",{children:"• انقر على ✕ لحذف ميزة محددة"})]})]})]})})]})]})},$x=[{name:"home",label:"منزل",icon:"🏠",category:"عقارات"},{name:"apartment",label:"شقة",icon:"🏢",category:"عقارات"},{name:"villa",label:"فيلا",icon:"🏡",category:"عقارات"},{name:"business",label:"مكتب",icon:"🏛️",category:"عقارات"},{name:"store",label:"محل",icon:"🏪",category:"عقارات"},{name:"hotel",label:"فندق",icon:"🏨",category:"عقارات"},{name:"house",label:"بيت",icon:"🏘️",category:"عقارات"},{name:"cabin",label:"شاليه",icon:"🛖",category:"عقارات"},{name:"meeting_room",label:"استوديو",icon:"🚪",category:"عقارات"},{name:"stairs",label:"دوبلكس",icon:"🪜",category:"عقارات"},{name:"roofing",label:"بنتهاوس",icon:"🏗️",category:"عقارات"},{name:"warehouse",label:"مستودع",icon:"🏭",category:"عقارات"},{name:"terrain",label:"أرض",icon:"🏞️",category:"عقارات"},{name:"grass",label:"مزرعة",icon:"🌾",category:"عقارات"},{name:"location_city",label:"مدينة",icon:"🌆",category:"عقارات"},{name:"cottage",label:"كوخ",icon:"🏚️",category:"عقارات"},{name:"holiday_village",label:"قرية سياحية",icon:"🏘️",category:"عقارات"},{name:"gite",label:"نزل",icon:"🏠",category:"عقارات"},{name:"domain",label:"نطاق",icon:"🌐",category:"عقارات"},{name:"foundation",label:"أساس",icon:"🏗️",category:"عقارات"},{name:"bed",label:"سرير",icon:"🛏️",category:"غرف"},{name:"king_bed",label:"سرير كبير",icon:"🛏️",category:"غرف"},{name:"single_bed",label:"سرير مفرد",icon:"🛏️",category:"غرف"},{name:"bedroom_parent",label:"غرفة نوم رئيسية",icon:"🛏️",category:"غرف"},{name:"bedroom_child",label:"غرفة أطفال",icon:"🛏️",category:"غرف"},{name:"living_room",label:"غرفة معيشة",icon:"🛋️",category:"غرف"},{name:"dining_room",label:"غرفة طعام",icon:"🍽️",category:"غرف"},{name:"kitchen",label:"مطبخ",icon:"🍳",category:"غرف"},{name:"bathroom",label:"حمام",icon:"🚿",category:"غرف"},{name:"bathtub",label:"حوض استحمام",icon:"🛁",category:"غرف"},{name:"shower",label:"دش",icon:"🚿",category:"غرف"},{name:"garage",label:"كراج",icon:"🚗",category:"غرف"},{name:"balcony",label:"شرفة",icon:"🌅",category:"غرف"},{name:"deck",label:"سطح",icon:"☀️",category:"غرف"},{name:"yard",label:"فناء",icon:"🏡",category:"غرف"},{name:"pool",label:"مسبح",icon:"🏊",category:"مرافق"},{name:"hot_tub",label:"جاكوزي",icon:"♨️",category:"مرافق"},{name:"fitness_center",label:"صالة رياضية",icon:"💪",category:"مرافق"},{name:"sports_tennis",label:"ملعب تنس",icon:"🎾",category:"مرافق"},{name:"sports_soccer",label:"ملعب كرة قدم",icon:"⚽",category:"مرافق"},{name:"sports_basketball",label:"ملعب كرة سلة",icon:"🏀",category:"مرافق"},{name:"spa",label:"سبا",icon:"💆",category:"مرافق"},{name:"local_parking",label:"موقف سيارات",icon:"🅿️",category:"مرافق"},{name:"elevator",label:"مصعد",icon:"🛗",category:"مرافق"},{name:"stairs",label:"درج",icon:"📶",category:"مرافق"},{name:"wifi",label:"واي فاي",icon:"📶",category:"مرافق"},{name:"ac_unit",label:"تكييف",icon:"❄️",category:"مرافق"},{name:"fireplace",label:"مدفأة",icon:"🔥",category:"مرافق"},{name:"water_drop",label:"ماء",icon:"💧",category:"مرافق"},{name:"electric_bolt",label:"كهرباء",icon:"⚡",category:"مرافق"},{name:"cleaning_services",label:"خدمة تنظيف",icon:"🧹",category:"خدمات"},{name:"room_service",label:"خدمة الغرف",icon:"🛎️",category:"خدمات"},{name:"local_laundry_service",label:"غسيل",icon:"👔",category:"خدمات"},{name:"dry_cleaning",label:"تنظيف جاف",icon:"👗",category:"خدمات"},{name:"iron",label:"كوي",icon:"👔",category:"خدمات"},{name:"breakfast_dining",label:"إفطار",icon:"🍳",category:"خدمات"},{name:"lunch_dining",label:"غداء",icon:"🍽️",category:"خدمات"},{name:"dinner_dining",label:"عشاء",icon:"🍽️",category:"خدمات"},{name:"restaurant",label:"مطعم",icon:"🍴",category:"خدمات"},{name:"local_cafe",label:"مقهى",icon:"☕",category:"خدمات"},{name:"local_bar",label:"بار",icon:"🍺",category:"خدمات"},{name:"security",label:"أمن",icon:"🔒",category:"أمان"},{name:"lock",label:"قفل",icon:"🔒",category:"أمان"},{name:"key",label:"مفتاح",icon:"🔑",category:"أمان"},{name:"shield",label:"درع",icon:"🛡️",category:"أمان"},{name:"verified_user",label:"مستخدم موثق",icon:"✅",category:"أمان"},{name:"safety_check",label:"فحص أمان",icon:"✅",category:"أمان"},{name:"emergency",label:"طوارئ",icon:"🚨",category:"أمان"},{name:"local_police",label:"شرطة",icon:"👮",category:"أمان"},{name:"local_fire_department",label:"إطفاء",icon:"🚒",category:"أمان"},{name:"medical_services",label:"خدمات طبية",icon:"🏥",category:"أمان"},{name:"location_on",label:"موقع",icon:"📍",category:"مواقع"},{name:"map",label:"خريطة",icon:"🗺️",category:"مواقع"},{name:"place",label:"مكان",icon:"📍",category:"مواقع"},{name:"near_me",label:"قريب مني",icon:"📍",category:"مواقع"},{name:"my_location",label:"موقعي",icon:"🎯",category:"مواقع"},{name:"directions",label:"اتجاهات",icon:"🧭",category:"مواقع"},{name:"navigation",label:"ملاحة",icon:"🧭",category:"مواقع"},{name:"directions_car",label:"سيارة",icon:"🚗",category:"مواصلات"},{name:"directions_bus",label:"حافلة",icon:"🚌",category:"مواصلات"},{name:"directions_subway",label:"مترو",icon:"🚇",category:"مواصلات"},{name:"directions_train",label:"قطار",icon:"🚂",category:"مواصلات"},{name:"directions_boat",label:"قارب",icon:"⛵",category:"مواصلات"},{name:"flight",label:"طيران",icon:"✈️",category:"مواصلات"},{name:"directions_walk",label:"مشي",icon:"🚶",category:"مواصلات"},{name:"directions_bike",label:"دراجة",icon:"🚴",category:"مواصلات"},{name:"star",label:"نجمة",icon:"⭐",category:"عام"},{name:"favorite",label:"مفضل",icon:"❤️",category:"عام"},{name:"bookmark",label:"علامة",icon:"🔖",category:"عام"},{name:"share",label:"مشاركة",icon:"📤",category:"عام"},{name:"info",label:"معلومات",icon:"ℹ️",category:"عام"},{name:"help",label:"مساعدة",icon:"❓",category:"عام"},{name:"settings",label:"إعدادات",icon:"⚙️",category:"عام"},{name:"phone",label:"هاتف",icon:"📞",category:"عام"},{name:"email",label:"بريد",icon:"📧",category:"عام"},{name:"message",label:"رسالة",icon:"💬",category:"عام"},{name:"notifications",label:"إشعارات",icon:"🔔",category:"عام"}],AR=({selectedIcon:e,onSelectIcon:n,onClose:a})=>{const[r,o]=b.useState(""),[d,h]=b.useState("الكل"),g=["الكل",...new Set($x.map(f=>f.category))],p=$x.filter(f=>{const v=f.label.toLowerCase().includes(r.toLowerCase())||f.name.toLowerCase().includes(r.toLowerCase()),j=d==="الكل"||f.category===d;return v&&j});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"اختر أيقونة"}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsx("input",{type:"text",placeholder:"ابحث عن أيقونة...",value:r,onChange:f=>o(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>t.jsx("button",{onClick:()=>h(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${d===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsx("div",{className:"grid grid-cols-8 gap-2",children:p.map(f=>t.jsx("button",{onClick:()=>n(f.name),className:`p-3 rounded-lg border-2 transition-all hover:scale-105 ${e===f.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:`${f.label} (${f.name})`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl mb-1",children:f.icon}),t.jsx("span",{className:"text-xs text-gray-600",children:f.label}),t.jsx("code",{className:"text-xs text-gray-400 mt-1",children:f.name})]})},f.name))}),p.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أيقونات مطابقة للبحث"})})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"ملاحظة:"})," هذه الأيقونات متوافقة مع Material Icons في Flutter. استخدم اسم الأيقونة (مثل: Icons.",e||"home",") في تطبيق Flutter."]})})]})})},DR=()=>{const{showSuccess:e,showError:n}=vc(),[a,r]=b.useState(null),[o,d]=b.useState(null),[h,g]=b.useState(null),[p,f]=b.useState(null),[v,j]=b.useState(!1),[S,T]=b.useState(!1),[C,N]=b.useState(!1),[k,A]=b.useState(!1),[D,O]=b.useState(!1),[F,R]=b.useState(null),[H,E]=b.useState({name:"",description:"",defaultAmenities:"",icon:"home"}),[z,Z]=b.useState({propertyTypeId:"",name:"",maxCapacity:1,icon:"apartment",isHasAdults:!1,isHasChildren:!1,isMultiDays:!1,isRequiredToDetermineTheHour:!1}),[U,V]=b.useState({unitTypeId:"",groupName:"",displayName:"",description:"",sortOrder:0,isCollapsible:!0,isExpandedByDefault:!0}),[X,W]=b.useState({unitTypeId:"",fieldTypeId:"",fieldName:"",displayName:"",description:"",fieldOptions:{options:[]},validationRules:{},isRequired:!1,isSearchable:!1,isPublic:!0,sortOrder:0,category:"",isForUnits:!0,showInCards:!1,isPrimaryFilter:!1,priority:0}),[B,te]=b.useState(""),[G,J]=b.useState(null),[q,K]=b.useState(null),[I,se]=b.useState(""),ne=1e3,{propertyTypesData:ae,isLoading:ee,createPropertyType:le,updatePropertyType:me,deletePropertyType:Re}=E2({pageNumber:1,pageSize:ne}),Pe=ae?.items||[],{unitTypesData:ie,isLoading:Q,createUnitType:we,updateUnitType:Be,deleteUnitType:nt}=D2({propertyTypeId:a?.id||"",pageNumber:1,pageSize:ne}),Qe=ie?.items||[],{fieldGroupsData:it,isLoading:Ce,createFieldGroup:Fe,updateFieldGroup:Nt,deleteFieldGroup:_t}=RR({unitTypeId:o?.id||""}),ut=it||[],{unitTypeFieldsData:ke,isLoading:Oe,createUnitTypeField:qe,updateUnitTypeField:Ae,deleteUnitTypeField:He}=Bx({unitTypeId:o?.id||"",searchTerm:B}),ct=ke||[],de=()=>{E({name:"",description:"",defaultAmenities:"",icon:"home"})},De=()=>{Z({propertyTypeId:a?.id||"",name:"",maxCapacity:1,icon:"apartment",isHasAdults:!1,isHasChildren:!1,isMultiDays:!1,isRequiredToDetermineTheHour:!1})},Le=()=>{V({unitTypeId:o?.id||"",groupName:"",displayName:"",description:"",sortOrder:ut.length,isCollapsible:!0,isExpandedByDefault:!0})},kt=()=>{W({unitTypeId:o?.id||"",fieldTypeId:"",fieldName:"",displayName:"",description:"",fieldOptions:{options:[]},validationRules:{},isRequired:!1,isSearchable:!1,isPublic:!0,sortOrder:ct.length,category:"",isForUnits:!0,showInCards:!1,isPrimaryFilter:!1,priority:0})},sn=ct.filter(he=>{const tt=he.displayName.toLowerCase().includes(B.toLowerCase())||he.fieldName.toLowerCase().includes(B.toLowerCase()),re=G===null||he.isRequired===G,Te=q===null||he.isPublic===q,$e=I===""||he.fieldTypeId===I;return tt&&re&&Te&&$e}),$n=sn.filter(he=>!ut.some(tt=>tt.fields.some(re=>re.fieldId===he.fieldId))),Fn=[{value:"text",label:"نص قصير",icon:"📝",description:"حقل نص مفرد للمعلومات القصيرة",defaultValidation:{minLength:1,maxLength:255},allowedValidations:["minLength","maxLength","pattern","required"]},{value:"textarea",label:"نص طويل",icon:"📄",description:"حقل نص متعدد الأسطر للأوصاف والتفاصيل",defaultValidation:{minLength:1,maxLength:2e3},allowedValidations:["minLength","maxLength","required"]},{value:"number",label:"رقم",icon:"🔢",description:"حقل رقمي للأعداد الصحيحة والعشرية",defaultValidation:{min:0,max:999999},allowedValidations:["min","max","step","required"]},{value:"currency",label:"مبلغ مالي",icon:"💰",description:"حقل خاص للمبالغ المالية مع تنسيق العملة",defaultValidation:{min:0,max:999999999},allowedValidations:["min","max","currency","required"]},{value:"boolean",label:"منطقي (نعم/لا)",icon:"☑️",description:"حقل اختيار ثنائي (صواب/خطأ)",defaultValidation:{},allowedValidations:["required"]},{value:"select",label:"قائمة منسدلة",icon:"📋",description:"قائمة منسدلة لاختيار عنصر واحد",defaultValidation:{},allowedValidations:["required"],requiresOptions:!0},{value:"multiselect",label:"تحديد متعدد",icon:"📝",description:"قائمة لاختيار عدة عناصر",defaultValidation:{minItems:0,maxItems:10},allowedValidations:["minItems","maxItems","required"],requiresOptions:!0},{value:"date",label:"تاريخ",icon:"📅",description:"حقل اختيار التاريخ",defaultValidation:{},allowedValidations:["minDate","maxDate","required"]},{value:"email",label:"بريد إلكتروني",icon:"📧",description:"حقل البريد الإلكتروني مع التحقق التلقائي",defaultValidation:{pattern:"^[^@]+@[^@]+.[^@]+$"},allowedValidations:["pattern","required"]},{value:"phone",label:"رقم هاتف",icon:"📞",description:"حقل رقم الهاتف مع التنسيق التلقائي",defaultValidation:{pattern:"^[+]?[0-9s-KATEX_INLINE_OPENKATEX_INLINE_CLOSE]+$"},allowedValidations:["pattern","required"]},{value:"file",label:"ملف",icon:"📎",description:"رفع ملف من أي نوع",defaultValidation:{maxSize:10,allowedTypes:["pdf","doc","docx"]},allowedValidations:["maxSize","allowedTypes","required"]},{value:"image",label:"صورة",icon:"🖼️",description:"رفع الصور مع معاينة",defaultValidation:{maxSize:5,allowedTypes:["jpg","png","gif"]},allowedValidations:["maxSize","allowedTypes","maxWidth","maxHeight","required"]}],wn=he=>Fn.find(re=>re.value===he)?.icon||"📝",rn=he=>{const tt=$x.find(re=>re.name===he);return tt?tt.icon:"🏠"},la=he=>{F==="property"?E({...H,icon:he}):F==="unit"&&Z({...z,icon:he}),O(!1),R(null)},En=()=>{p?Ae.mutate({fieldId:p.fieldId,data:{fieldId:p.fieldId,...X,groupId:h?.groupId||""}},{onSuccess:()=>{e("تم تحديث الحقل بنجاح"),A(!1),f(null),kt()},onError:he=>{n(he.response?.data?.message||"فشل في تحديث الحقل")}}):qe.mutate({...X,unitTypeId:o.id,groupId:h?.groupId||""},{onSuccess:()=>{e("تم إضافة الحقل بنجاح"),A(!1),kt()},onError:he=>{n(he.response?.data?.message||"فشل في إضافة الحقل")}})};return t.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[t.jsx("div",{className:"flex justify-between items-center mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة أنواع الكيانات والوحدات والحقول الديناميكية"}),t.jsx("p",{className:"text-gray-600",children:"إدارة شاملة متدرجة لأنواع الكيانات وأنواع الوحدات ومجموعات الحقول والحقول الديناميكية مع دعم الأيقونات"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-blue-600 text-2xl ml-3",children:"🏢"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-blue-600",children:"أنواع الكيانات"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Pe.length})]})]})}),t.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-green-600 text-2xl ml-3",children:"🏠"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600",children:"أنواع الوحدات"}),t.jsx("p",{className:"text-2xl font-bold text-green-900",children:Qe.length})]})]})}),t.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-yellow-600 text-2xl ml-3",children:"📁"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-yellow-600",children:"مجموعات الحقول"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:ut.length})]})]})}),t.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-purple-600 text-2xl ml-3",children:"📝"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-purple-600",children:"الحقول الديناميكية"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:ct.length})]})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"🏢 أنواع الكيانات"}),t.jsx("button",{onClick:()=>{de(),j(!0)},className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ إضافة"})]}),ee?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-2",children:[Pe.map(he=>t.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${a?.id===he.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{r(he),d(null),g(null)},children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-lg",children:rn(he.icon||"home")}),t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:he.name})]}),t.jsx("p",{className:"text-xs text-gray-600",children:he.description}),he.defaultAmenities&&t.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded mt-1",children:he.defaultAmenities}),he.icon&&t.jsx("div",{className:"mt-1",children:t.jsxs("code",{className:"text-xs text-gray-500",children:["Icons.",he.icon]})})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:tt=>{tt.stopPropagation(),E({name:he.name,description:he.description,defaultAmenities:he.defaultAmenities,icon:he.icon||"home"}),r(he),j(!0)},className:"text-blue-600 hover:text-blue-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:tt=>{tt.stopPropagation(),confirm("هل أنت متأكد من حذف هذا النوع؟")&&Re.mutate(he.id)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.id)),Pe.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏢"}),t.jsx("p",{className:"text-sm",children:"لا توجد أنواع كيانات"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة نوع كيان للبدء"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"🏠 أنواع الوحدات"}),t.jsx("button",{onClick:()=>{if(!a){alert("يرجى اختيار نوع كيان أولاً");return}De(),T(!0)},disabled:!a,className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 text-sm",children:"+ إضافة"})]}),a?Q?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"})}):t.jsxs("div",{className:"space-y-2",children:[Qe.map(he=>t.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${o?.id===he.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{d(he),g(null)},children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-lg",children:rn(he.icon||"apartment")}),t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:he.name})]}),t.jsx("p",{className:"text-xs text-gray-600",children:he.description||"لا يوجد وصف"}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[he.isHasAdults&&t.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded",children:"👨 بالغين"}),he.isHasChildren&&t.jsx("span",{className:"inline-block bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded",children:"👶 أطفال"}),he.isMultiDays&&t.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded",children:"📅 متعدد الأيام"}),he.isRequiredToDetermineTheHour&&t.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded",children:"⏰ تحديد الساعة"})]}),he.icon&&t.jsx("div",{className:"mt-1",children:t.jsxs("code",{className:"text-xs text-gray-500",children:["Icons.",he.icon]})})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:tt=>{tt.stopPropagation(),Z({propertyTypeId:a.id,name:he.name,maxCapacity:1,icon:he.icon||"apartment",isHasAdults:he.isHasAdults||!1,isHasChildren:he.isHasChildren||!1,isMultiDays:he.isMultiDays||!1,isRequiredToDetermineTheHour:he.isRequiredToDetermineTheHour||!1}),d(he),T(!0)},className:"text-green-600 hover:text-green-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:tt=>{tt.stopPropagation(),confirm("هل أنت متأكد من حذف هذا النوع؟")&&nt.mutate(he.id)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.id)),Qe.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏠"}),t.jsx("p",{className:"text-sm",children:"لا توجد أنواع وحدات"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة نوع وحدة للبدء"})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏠"}),t.jsx("p",{className:"text-sm",children:"اختر نوع كيان لعرض الوحدات"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"📁 مجموعات الحقول"}),t.jsx("button",{onClick:()=>{if(!o){alert("يرجى اختيار نوع وحدة أولاً");return}Le(),N(!0)},disabled:!o,className:"bg-yellow-600 text-white px-3 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:bg-gray-400 text-sm",children:"+ إضافة"})]}),o?Ce?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600"})}):t.jsxs("div",{className:"space-y-2",children:[ut.map(he=>t.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${h?.groupId===he.groupId?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>g(he),children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:he.displayName||he.groupName}),t.jsx("p",{className:"text-xs text-gray-600",children:he.description}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[t.jsxs("span",{className:"text-xs text-gray-500",children:[he.fields.length," حقل"]}),he.isCollapsible&&t.jsxs("span",{className:"text-xs text-gray-500",children:[he.isExpandedByDefault?"🔽":"▶️"," قابل للطي"]})]})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:tt=>{tt.stopPropagation(),V({unitTypeId:o.id,groupName:he.groupName,displayName:he.displayName,description:he.description,sortOrder:he.sortOrder,isCollapsible:he.isCollapsible,isExpandedByDefault:he.isExpandedByDefault}),g(he),N(!0)},className:"text-yellow-600 hover:text-yellow-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:tt=>{tt.stopPropagation(),confirm("هل أنت متأكد من حذف هذه المجموعة؟")&&_t.mutate(he.groupId)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.groupId)),ut.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📁"}),t.jsx("p",{className:"text-sm",children:"لا توجد مجموعات حقول"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة مجموعة للبدء"})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📁"}),t.jsx("p",{className:"text-sm",children:"اختر نوع وحدة لعرض المجموعات"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"📝 الحقول الديناميكية"}),t.jsx("button",{onClick:()=>{if(!o){alert("يرجى اختيار نوع وحدة أولاً");return}f(null),kt(),A(!0)},disabled:!o,className:"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400 text-sm",children:"+ إضافة"})]}),o?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 space-y-2",children:[t.jsx("input",{type:"text",placeholder:"البحث في الحقول...",value:B,onChange:he=>te(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.jsxs("select",{value:G===null?"":G.toString(),onChange:he=>J(he.target.value===""?null:he.target.value==="true"),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[t.jsx("option",{value:"",children:"الكل"}),t.jsx("option",{value:"true",children:"إلزامي"}),t.jsx("option",{value:"false",children:"اختياري"})]}),t.jsxs("select",{value:q===null?"":q.toString(),onChange:he=>K(he.target.value===""?null:he.target.value==="true"),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[t.jsx("option",{value:"",children:"المستوى"}),t.jsx("option",{value:"true",children:"عام"}),t.jsx("option",{value:"false",children:"خاص"})]}),t.jsxs("select",{value:I,onChange:he=>se(he.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[t.jsx("option",{value:"",children:"النوع"}),Fn.map(he=>t.jsxs("option",{value:he.value,children:[he.icon," ",he.label]},he.value))]})]})]}),Oe?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[$n.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-medium text-gray-700 mb-2 flex items-center",children:["🔧 حقول غير مجمعة (",$n.length,")"]}),$n.map(he=>t.jsx("div",{className:"p-2 rounded border border-gray-200 hover:border-gray-300 mb-1",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[t.jsx("span",{className:"text-sm",children:wn(he.fieldTypeId)}),t.jsx("h4",{className:"font-medium text-gray-900 text-xs",children:he.displayName}),he.isRequired&&t.jsx("span",{className:"text-red-500 text-xs",children:"*"}),!he.isPublic&&t.jsx("span",{className:"text-gray-500 text-xs",children:"🔒"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:he.fieldName})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>{W({unitTypeId:o.id,fieldTypeId:he.fieldTypeId,fieldName:he.fieldName,displayName:he.displayName,description:he.description,fieldOptions:he.fieldOptions,validationRules:he.validationRules,isRequired:he.isRequired,isSearchable:he.isSearchable,isPublic:he.isPublic,sortOrder:he.sortOrder,category:he.category,isForUnits:he.isForUnits,showInCards:he.showInCards,isPrimaryFilter:he.isPrimaryFilter,priority:he.priority,groupId:he.groupId}),f(he),A(!0)},className:"text-purple-600 hover:text-purple-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>{confirm("هل أنت متأكد من حذف هذا الحقل؟")&&He.mutate(he.fieldId)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.fieldId))]}),ut.map(he=>{const tt=sn.filter(re=>he.fields.some(Te=>Te.fieldId===re.fieldId));return tt.length===0?null:t.jsxs("div",{className:"mb-3",children:[t.jsxs("h4",{className:"text-xs font-medium text-gray-700 mb-2 flex items-center",children:["📁 ",he.displayName||he.groupName," (",tt.length,")"]}),tt.map(re=>t.jsx("div",{className:"p-2 rounded border border-gray-200 hover:border-gray-300 mb-1 mr-3",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[t.jsx("span",{className:"text-sm",children:wn(re.fieldTypeId)}),t.jsx("h4",{className:"font-medium text-gray-900 text-xs",children:re.displayName}),re.isRequired&&t.jsx("span",{className:"text-red-500 text-xs",children:"*"}),!re.isPublic&&t.jsx("span",{className:"text-gray-500 text-xs",children:"🔒"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:re.fieldName})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>{W({unitTypeId:o.id,fieldTypeId:re.fieldTypeId,fieldName:re.fieldName,displayName:re.displayName,description:re.description,fieldOptions:re.fieldOptions,validationRules:re.validationRules,isRequired:re.isRequired,isSearchable:re.isSearchable,isPublic:re.isPublic,sortOrder:re.sortOrder,category:re.category,isForUnits:re.isForUnits,showInCards:re.showInCards,isPrimaryFilter:re.isPrimaryFilter,priority:re.priority,groupId:re.groupId}),f(re),A(!0)},className:"text-purple-600 hover:text-purple-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>{confirm("هل أنت متأكد من حذف هذا الحقل؟")&&He.mutate(re.fieldId)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},re.fieldId))]},he.groupId)}),sn.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📝"}),t.jsx("p",{className:"text-sm",children:"لا توجد حقول"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة حقل جديد للبدء"})]})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📝"}),t.jsx("p",{className:"text-sm",children:"اختر نوع وحدة لعرض الحقول"})]})]})]}),v&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:a?"تعديل نوع الكيان":"إضافة نوع كيان جديد"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),a?me.mutate({propertyTypeId:a.id,data:{propertyTypeId:a.id,...H}},{onSuccess:()=>{e("تم تحديث نوع الكيان بنجاح"),j(!1),r(null),de()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث نوع الكيان")}}):le.mutate(H,{onSuccess:()=>{e("تم إضافة نوع الكيان بنجاح"),j(!1),de()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة نوع الكيان")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),t.jsx("input",{type:"text",value:H.name,onChange:he=>E({...H,name:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{R("property"),O(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:rn(H.icon)}),t.jsx("span",{className:"text-sm",children:H.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",H.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),t.jsx("textarea",{value:H.description,onChange:he=>E({...H,description:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المرافق الافتراضية"}),t.jsx("textarea",{value:H.defaultAmenities,onChange:he=>E({...H,defaultAmenities:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{j(!1),r(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:a?"تحديث":"إضافة"})]})]})]})}),S&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:o?"تعديل نوع الوحدة":"إضافة نوع وحدة جديد"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),o?Be.mutate({unitTypeId:o.id,data:{unitTypeId:o.id,name:z.name,maxCapacity:z.maxCapacity,icon:z.icon,isHasAdults:z.isHasAdults,isHasChildren:z.isHasChildren,isMultiDays:z.isMultiDays,isRequiredToDetermineTheHour:z.isRequiredToDetermineTheHour}},{onSuccess:()=>{e("تم تحديث نوع الوحدة بنجاح"),T(!1),d(null),De()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث نوع الوحدة")}}):we.mutate(z,{onSuccess:()=>{e("تم إضافة نوع الوحدة بنجاح"),T(!1),De()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة نوع الوحدة")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),t.jsx("input",{type:"text",value:z.name,onChange:he=>Z({...z,name:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{R("unit"),O(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:rn(z.icon)}),t.jsx("span",{className:"text-sm",children:z.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",z.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعة القصوى"}),t.jsx("input",{type:"number",min:"1",value:z.maxCapacity,onChange:he=>Z({...z,maxCapacity:parseInt(he.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"خصائص نوع الوحدة"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:z.isHasAdults,onChange:he=>Z({...z,isHasAdults:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"👨"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"يحتوي على بالغين"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(تفعيل حقل عدد البالغين في الحجز)"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:z.isHasChildren,onChange:he=>Z({...z,isHasChildren:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"👶"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"يحتوي على أطفال"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(تفعيل حقل عدد الأطفال في الحجز)"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:z.isMultiDays,onChange:he=>Z({...z,isMultiDays:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"📅"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"متعدد الأيام"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(السماح بالحجز لعدة أيام)"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:z.isRequiredToDetermineTheHour,onChange:he=>Z({...z,isRequiredToDetermineTheHour:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"⏰"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"يتطلب تحديد الساعة"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(إلزام تحديد الوقت عند الحجز)"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{T(!1),d(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:o?"تحديث":"إضافة"})]})]})]})}),C&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:h?"تعديل مجموعة الحقول":"إضافة مجموعة حقول جديدة"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),h?Nt.mutate({groupId:h.groupId,...U},{onSuccess:()=>{e("تم تحديث مجموعة الحقول بنجاح"),N(!1),g(null),Le()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث مجموعة الحقول")}}):Fe.mutate(U,{onSuccess:()=>{e("تم إضافة مجموعة الحقول بنجاح"),N(!1),Le()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة مجموعة الحقول")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المجموعة"}),t.jsx("input",{type:"text",value:U.groupName,onChange:he=>V({...U,groupName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم المعروض"}),t.jsx("input",{type:"text",value:U.displayName,onChange:he=>V({...U,displayName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),t.jsx("textarea",{value:U.description,onChange:he=>V({...U,description:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",rows:3})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:U.isCollapsible,onChange:he=>V({...U,isCollapsible:he.target.checked}),className:"mr-2"}),"قابل للطي"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:U.isExpandedByDefault,onChange:he=>V({...U,isExpandedByDefault:he.target.checked}),className:"mr-2"}),"مفتوح افتراضياً"]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{N(!1),g(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:h?"تحديث":"إضافة"})]})]})]})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:p?"تعديل الحقل":"إضافة حقل جديد"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),p?Ae.mutate({fieldId:p.fieldId,data:{fieldId:p.fieldId,...X,groupId:h?.groupId||""}},{onSuccess:()=>{e("تم تحديث الحقل بنجاح"),A(!1),f(null),kt()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث الحقل")}}):qe.mutate(X,{onSuccess:()=>{e("تم إضافة الحقل بنجاح"),A(!1),kt()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة الحقل")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الحقل"}),t.jsxs("select",{value:X.fieldTypeId,onChange:he=>W({...X,fieldTypeId:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[t.jsx("option",{value:"",children:"اختر نوع الحقل"}),Fn.map(he=>t.jsxs("option",{value:he.value,children:[he.icon," ",he.label]},he.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الحقل"}),t.jsx("input",{type:"text",value:X.fieldName,onChange:he=>W({...X,fieldName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم المعروض"}),t.jsx("input",{type:"text",value:X.displayName,onChange:he=>W({...X,displayName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),t.jsx("textarea",{value:X.description,onChange:he=>W({...X,description:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الفئة"}),t.jsx("input",{type:"text",value:X.category,onChange:he=>W({...X,category:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(X.fieldTypeId==="select"||X.fieldTypeId==="multiselect")&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["خيارات ",X.fieldTypeId==="select"?"القائمة المنسدلة":"التحديد المتعدد"]}),t.jsx(zh,{value:(X.fieldOptions.options||[]).join(","),onChange:he=>W(tt=>({...tt,fieldOptions:{options:he.split(",").map(re=>re.trim()).filter(Boolean)}})),placeholder:"أدخل خيار واضغط Enter أو استخدم الفاصلة للفصل",className:"w-full"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:X.isRequired,onChange:he=>W({...X,isRequired:he.target.checked}),className:"mr-2"}),"مطلوب"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:X.isSearchable,onChange:he=>W({...X,isSearchable:he.target.checked}),className:"mr-2"}),"قابل للبحث"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:X.isPublic,onChange:he=>W({...X,isPublic:he.target.checked}),className:"mr-2"}),"عام"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:X.isForUnits,onChange:he=>W({...X,isForUnits:he.target.checked}),className:"mr-2"}),"للوحدات"]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{A(!1),f(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"button",onClick:En,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:p?"تحديث":"إضافة"})]})]})]})}),D&&t.jsx(AR,{selectedIcon:F==="property"?H.icon:z.icon,onSelectIcon:la,onClose:()=>{O(!1),R(null)}})]})},Vo="/api/admin/Units",nc={getAll:e=>je.get(Vo,{params:e}).then(n=>n.data),getById:e=>je.get(`${Vo}/${e.unitId}`).then(n=>n.data),create:e=>je.post(Vo,e).then(n=>n.data),update:(e,n)=>je.put(`${Vo}/${e}`,n).then(a=>a.data),delete:e=>je.delete(`${Vo}/${e}`).then(n=>n.data),getDetails:(e,n=!0)=>je.get(`${Vo}/${e}/details`,{params:{includeDynamicFields:n}}).then(a=>a.data),addUnitToSections:(e,n)=>je.post(`/api/admin/units/${e}/sections`,{sectionIds:n}).then(a=>a.data)},P2=e=>{const n=In(),a=["admin-units",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>nc.getAll(e)}),h=Ie({mutationFn:f=>nc.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-units"]})}}),g=Ie({mutationFn:({unitId:f,data:v})=>nc.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-units"]})}}),p=Ie({mutationFn:f=>nc.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-units"]})}});return{unitsData:r,isLoading:o,error:d,createUnit:h,updateUnit:g,deleteUnit:p}},PR=e=>zt({queryKey:["admin-unit-types",e],queryFn:()=>Hd.getAll(e)}),OR="/api/common/system-settings",LR="/api/admin/system-settings",Fx={getCurrencies:()=>je.get(`${OR}/currencies`).then(e=>e.data.data||[]),saveCurrencies:e=>je.put(`${LR}/currencies`,e).then(n=>n.data.data||!1)},Cc=()=>{const[e,n]=b.useState([]),[a,r]=b.useState(!0),[o,d]=b.useState(null);return b.useEffect(()=>{Fx.getCurrencies().then(h=>{n(h)}).catch(h=>{console.error("Failed to load currencies",h),d(h)}).finally(()=>{r(!1)})},[]),{currencies:e,loading:a,error:o}},Zl=({value:e=0,currency:n="SAR",onValueChange:a,className:r="",disabled:o=!1,placeholder:d="0.00",required:h=!1,min:g=0,max:p,step:f=.01,showSymbol:v=!0,supportedCurrencies:j=["SAR","USD","EUR","AED"],direction:S="rtl",label:T,error:C,variant:N="modern",size:k="md"})=>{const[A,D]=b.useState(e),[O,F]=b.useState(n),[R,H]=b.useState(!1);b.useEffect(()=>{D(e)},[e]),b.useEffect(()=>{F(n)},[n]);const E={YER:{symbol:"ر.ي",name:"ريال يمني",decimals:2,flag:"🇾🇪"},SAR:{symbol:"ر.س",name:"ريال سعودي",decimals:2,flag:"🇸🇦"},USD:{symbol:"$",name:"دولار أمريكي",decimals:2,flag:"🇺🇸"},EUR:{symbol:"€",name:"يورو",decimals:2,flag:"🇪🇺"},AED:{symbol:"د.إ",name:"درهم إماراتي",decimals:2,flag:"🇦🇪"},QAR:{symbol:"ر.ق",name:"ريال قطري",decimals:2,flag:"🇶🇦"},KWD:{symbol:"د.ك",name:"دينار كويتي",decimals:3,flag:"🇰🇼"},BHD:{symbol:"د.ب",name:"دينار بحريني",decimals:3,flag:"🇧🇭"},OMR:{symbol:"ر.ع",name:"ريال عماني",decimals:3,flag:"🇴🇲"}},z=()=>E[O]||E.SAR,Z={sm:{input:"px-3 py-1.5 text-sm",button:"px-1.5 py-0.5 text-xs",container:"min-h-[36px]",icon:"text-sm"},md:{input:"px-4 py-2.5 text-base",button:"px-2 py-1 text-sm",container:"min-h-[42px]",icon:"text-base"},lg:{input:"px-5 py-3 text-lg",button:"px-2.5 py-1.5 text-base",container:"min-h-[48px]",icon:"text-lg"}},U={default:{container:"border-gray-300 bg-white shadow-sm",focused:"ring-2 ring-blue-500 border-blue-500",error:"border-red-500 ring-2 ring-red-200",disabled:"bg-gray-50 border-gray-200"},modern:{container:"border-gray-200 bg-white shadow-lg rounded-xl",focused:"ring-2 ring-blue-500/20 border-blue-400 shadow-xl",error:"border-red-400 ring-2 ring-red-200 shadow-red-100",disabled:"bg-gray-50 border-gray-100"},minimal:{container:"border-gray-200 bg-transparent",focused:"border-blue-400",error:"border-red-400",disabled:"bg-gray-50/50 border-gray-100"}},V=Z[k],X=U[N],W=me=>{const Re=z();return new Intl.NumberFormat("ar-SA",{minimumFractionDigits:R?0:Re.decimals,maximumFractionDigits:Re.decimals}).format(me)},B=(me,Re)=>{const Pe=E[Re]||E.YER;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:Re,minimumFractionDigits:Pe.decimals,maximumFractionDigits:Pe.decimals}).format(me)},te=me=>{const Re=me.target.value;if(Re===""||/^\d*\.?\d*$/.test(Re)){const Pe=Re===""?0:parseFloat(Re);if(!isNaN(Pe)){if(g!==void 0&&Pe<g||p!==void 0&&Pe>p)return;D(Pe),a(Pe,O)}}},G=me=>{F(me),a(A,me)},J=()=>{const me=A+f;(p===void 0||me<=p)&&(D(me),a(me,O))},q=()=>{const me=A-f;me>=g&&(D(me),a(me,O))},K=()=>{H(!0)},I=()=>{H(!1);const me=z(),Re=Math.round(A*Math.pow(10,me.decimals))/Math.pow(10,me.decimals);Re!==A&&(D(Re),a(Re,O))},{currencies:se,loading:ne}=Cc(),ae=se.find(me=>me.code===O),ee=se.find(me=>me.isDefault),le=()=>{let me=`
      ${X.container} 
      ${V.container}
      transition-all duration-200 ease-in-out
      ${N==="modern"?"rounded-xl":"rounded-lg"}
    `;return C?me+=` ${X.error}`:R?me+=` ${X.focused}`:o&&(me+=` ${X.disabled}`),me};return t.jsxs("div",{className:`relative space-y-2 ${r}`,children:[T&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[T,h&&t.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),t.jsxs("div",{className:`flex items-stretch border ${le()}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:O,onChange:me=>G(me.target.value),disabled:o,className:`
              ${V.input} 
              bg-gray-50 border-l border-gray-200 focus:outline-none
              ${N==="modern"?"rounded-r-xl":"rounded-r-lg"}
              cursor-pointer appearance-none pr-8 font-medium
              ${o?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"}
              transition-colors duration-200
            `,children:j.map(me=>{const Re=E[me];return t.jsxs("option",{value:me,children:[Re?.flag," ",me]},me)})}),t.jsx("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",value:R?A.toString():W(A),onChange:te,onFocus:K,onBlur:I,disabled:o,placeholder:d,className:`
              w-full ${V.input} bg-transparent focus:outline-none font-mono
              ${S==="rtl"?"text-right pr-12":"text-left pl-12"}
              ${o?"cursor-not-allowed opacity-50":""}
              placeholder-gray-400
            `,dir:S}),v&&t.jsx("div",{className:`
              absolute top-1/2 transform -translate-y-1/2 pointer-events-none 
              text-gray-500 font-semibold ${V.icon}
              ${S==="rtl"?"left-3":"right-3"}
            `,children:z().symbol})]}),t.jsxs("div",{className:"flex flex-col border-l border-gray-200",children:[t.jsx("button",{type:"button",onClick:J,disabled:o||p!==void 0&&A>=p,className:`
              ${V.button} flex-1 hover:bg-blue-50 hover:text-blue-600
              disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent
              text-gray-400 transition-all duration-200 font-semibold
              ${N==="modern"?"rounded-tl-xl":"rounded-tl-lg"}
              border-b border-gray-200
            `,children:t.jsx("svg",{className:"w-3 h-3 mx-auto",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M7 14l5-5 5 5z"})})}),t.jsx("button",{type:"button",onClick:q,disabled:o||A<=g,className:`
              ${V.button} flex-1 hover:bg-blue-50 hover:text-blue-600
              disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent
              text-gray-400 transition-all duration-200 font-semibold
              ${N==="modern"?"rounded-bl-xl":"rounded-bl-lg"}
            `,children:t.jsx("svg",{className:"w-3 h-3 mx-auto",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M7 10l5 5 5-5z"})})})]})]}),t.jsxs("div",{className:"space-y-1",children:[!R&&A>0&&N!=="minimal"&&t.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:[t.jsx("span",{className:"text-2xl",children:z().flag}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-semibold text-gray-800",children:B(A,O)}),t.jsx("div",{className:"text-xs text-gray-500",children:ae?.arabicName||z().name})]})]}),!ne&&ae&&!ae.isDefault&&ee&&t.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-yellow-50 rounded-lg border border-yellow-200",children:[t.jsx("span",{className:"text-yellow-600",children:"💱"}),t.jsx("div",{className:"text-xs text-yellow-800",children:`1 ${ae.code} = ${ae.exchangeRate} ${ee.code}`})]}),(g>0||p!==void 0)&&t.jsxs("div",{className:"flex items-center justify-center gap-2 p-1.5 bg-gray-50 rounded text-xs text-gray-600",children:[t.jsx("span",{children:"📊"}),t.jsxs("span",{children:[g>0&&`الحد الأدنى: ${B(g,O)}`,g>0&&p!==void 0&&" • ",p!==void 0&&`الحد الأقصى: ${B(p,O)}`]})]}),C&&t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("span",{className:"text-red-500",children:"⚠️"}),t.jsx("span",{className:"text-sm text-red-600",children:C})]}),h&&A===0&&!C&&t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[t.jsx("span",{className:"text-orange-500",children:"📝"}),t.jsx("span",{className:"text-sm text-orange-600",children:"هذا الحقل مطلوب"})]}),R&&N!=="minimal"&&t.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),t.jsxs("div",{className:"text-sm text-blue-800",children:[t.jsx("div",{className:"font-medium mb-1",children:"نصائح الاستخدام:"}),t.jsxs("ul",{className:"space-y-1 text-xs",children:[t.jsx("li",{children:"• استخدم الأسهم ▲▼ للزيادة والنقصان"}),t.jsx("li",{children:"• اكتب المبلغ مباشرة"}),t.jsx("li",{children:"• غير العملة من القائمة المنسدلة"})]})]})]})})]})]})},Pj=({fields:e,values:n=[],onChange:a,className:r="",variant:o="modern",collapsible:d=!0,showGroupIcons:h=!0})=>{const[g,p]=b.useState({}),[f,v]=b.useState({});b.useEffect(()=>{const R={};n.forEach(H=>{R[H.fieldId]=H.fieldValue}),e.forEach(H=>{H.fieldId in R||(R[H.fieldId]=j(H))}),p(R),a(R)},[e]);const j=R=>{switch(R.fieldTypeId){case"boolean":case"checkbox":return!1;case"multiselect":return[];case"number":case"currency":case"percentage":case"range":return R.validationRules?.min||0;default:return""}},S=(R,H)=>{const E={...g,[R]:H};p(E),a(E)},T=R=>{const H=g[R.fieldId]||j(R),E=R.isRequired;switch(R.fieldTypeId){case"text":return t.jsx("input",{type:"text",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E,minLength:R.validationRules?.minLength,maxLength:R.validationRules?.maxLength,pattern:R.validationRules?.pattern});case"textarea":return t.jsx("textarea",{value:H,onChange:W=>S(R.fieldId,W.target.value),rows:3,className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E,minLength:R.validationRules?.minLength,maxLength:R.validationRules?.maxLength});case"number":return t.jsx("input",{type:"number",value:H,onChange:W=>S(R.fieldId,parseFloat(W.target.value)||0),className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E,min:R.validationRules?.min,max:R.validationRules?.max,step:R.validationRules?.step||1});case"currency":return t.jsx(Zl,{value:H||0,currency:R.validationRules?.currency||"SAR",onValueChange:(W,B)=>S(R.fieldId,W),placeholder:R.description||`أدخل ${R.displayName}`,required:E,min:R.validationRules?.min||0,max:R.validationRules?.max,variant:"modern",size:"md"});case"percentage":return t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:H,onChange:W=>S(R.fieldId,parseFloat(W.target.value)||0),className:`${O()} pr-8`,placeholder:R.description||`أدخل ${R.displayName}`,required:E,min:0,max:100,step:"0.1"}),t.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"%"})]});case"boolean":return t.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors duration-200",children:[t.jsx("input",{type:"checkbox",checked:H,onChange:W=>S(R.fieldId,W.target.checked),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200",required:E&&!H}),t.jsx("label",{className:"mr-3 text-sm text-gray-700 font-medium cursor-pointer",children:R.description||"نعم"})]});case"select":const z=R.fieldOptions?.options||[];return t.jsxs("select",{value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),required:E,children:[t.jsxs("option",{value:"",children:["اختر ",R.displayName]}),z.map((W,B)=>t.jsx("option",{value:W,children:W},B))]});case"multiselect":const Z=R.fieldOptions?.options||[],U=Array.isArray(H)?H:[];return t.jsx("div",{className:"space-y-3",children:Z.map((W,B)=>t.jsxs("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors duration-200 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:U.includes(W),onChange:te=>{const G=te.target.checked?[...U,W]:U.filter(J=>J!==W);S(R.fieldId,G)},className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200"}),t.jsx("span",{className:"mr-3 text-sm text-gray-700 font-medium",children:W})]},B))});case"date":return t.jsx("input",{type:"date",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),required:E,min:R.validationRules?.minDate,max:R.validationRules?.maxDate});case"datetime":return t.jsx("input",{type:"datetime-local",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),required:E,min:R.validationRules?.minDate,max:R.validationRules?.maxDate});case"time":return t.jsx("input",{type:"time",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),required:E});case"email":return t.jsx("input",{type:"email",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E,pattern:R.validationRules?.pattern});case"phone":return t.jsx("input",{type:"tel",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E,pattern:R.validationRules?.pattern});case"url":return t.jsx("input",{type:"url",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E,pattern:R.validationRules?.pattern});case"color":return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("input",{type:"color",value:H,onChange:W=>S(R.fieldId,W.target.value),className:"w-12 h-12 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",required:E}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700",children:H||"#000000"}),t.jsx("div",{className:"text-xs text-gray-500",children:"انقر لاختيار لون"})]})]});case"range":return t.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("input",{type:"range",value:H,onChange:W=>S(R.fieldId,parseFloat(W.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",min:R.validationRules?.min||0,max:R.validationRules?.max||100,step:R.validationRules?.step||1,required:E}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:R.validationRules?.min||0}),t.jsx("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:t.jsxs("span",{className:"text-sm font-semibold",children:["القيمة: ",H]})}),t.jsx("span",{className:"text-xs text-gray-500",children:R.validationRules?.max||100})]})]});case"rating":return t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("div",{className:"flex items-center justify-center space-x-1 space-x-reverse mb-3",children:[1,2,3,4,5].map(W=>t.jsx("button",{type:"button",onClick:()=>S(R.fieldId,W),className:`text-3xl transition-all duration-200 transform hover:scale-110 ${W<=H?"text-yellow-400 drop-shadow-sm":"text-gray-300"} hover:text-yellow-400`,children:"⭐"},W))}),t.jsx("div",{className:"text-center",children:t.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:[t.jsxs("span",{children:["التقييم: ",H,"/5"]}),H>0&&t.jsx("span",{className:"text-yellow-600",children:"★".repeat(H)})]})})]});case"file":return t.jsxs("div",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg text-center hover:border-blue-400 transition-colors duration-200",children:[t.jsx("input",{type:"file",onChange:W=>{const B=W.target.files?.[0];B&&S(R.fieldId,B.name)},className:"hidden",id:`file-${R.fieldId}`,required:E,accept:R.validationRules?.allowedTypes?.map(W=>`.${W}`).join(",")}),t.jsxs("label",{htmlFor:`file-${R.fieldId}`,className:"cursor-pointer",children:[t.jsx("div",{className:"text-4xl mb-2",children:"📎"}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"اختر ملف"}),t.jsx("div",{className:"text-xs mt-1",children:R.validationRules?.allowedTypes?`الصيغ المسموحة: ${R.validationRules.allowedTypes.join(", ")}`:"جميع الصيغ مسموحة"})]}),H&&t.jsxs("div",{className:"mt-2 text-xs text-green-600 bg-green-50 p-2 rounded",children:["✓ تم اختيار: ",H]})]})]});case"image":return t.jsxs("div",{className:"p-6 border-2 border-dashed border-gray-300 rounded-lg text-center hover:border-blue-400 transition-colors duration-200",children:[t.jsx("input",{type:"file",onChange:W=>{const B=W.target.files?.[0];B&&S(R.fieldId,B.name)},className:"hidden",id:`image-${R.fieldId}`,required:E,accept:"image/*"}),t.jsxs("label",{htmlFor:`image-${R.fieldId}`,className:"cursor-pointer",children:[t.jsx("div",{className:"text-5xl mb-3",children:"🖼️"}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"اختر صورة"}),t.jsx("div",{className:"text-xs mt-1",children:"JPG, PNG, GIF"})]}),H&&t.jsxs("div",{className:"mt-3 text-xs text-green-600 bg-green-50 p-2 rounded",children:["✓ تم اختيار: ",H]})]})]});case"tag":const X=(Array.isArray(H)?H:H?H.split(","):[]).join(",");return t.jsx(zh,{value:X,onChange:W=>{const B=W?W.split(",").map(te=>te.trim()).filter(te=>te.length>0):[];S(R.fieldId,B)},placeholder:R.description||`أدخل ${R.displayName}`,required:E,variant:"modern",size:"md",maxTags:R.validationRules?.maxItems||20,allowDuplicates:!1,suggestions:R.fieldOptions?.options||[]});default:return t.jsx("input",{type:"text",value:H,onChange:W=>S(R.fieldId,W.target.value),className:O(),placeholder:R.description||`أدخل ${R.displayName}`,required:E})}},C=R=>({text:"📝",textarea:"📄",number:"🔢",currency:"💰",percentage:"📊",boolean:"☑️",checkbox:"✅",select:"📋",multiselect:"📝",date:"📅",datetime:"⏰",time:"🕐",email:"📧",phone:"📞",url:"🔗",color:"🎨",range:"🎚️",rating:"⭐",file:"📎",image:"🖼️",tag:"🏷️"})[R]||"📝",N=R=>({"معلومات أساسية":"📋",التفاصيل:"📄",المواصفات:"🔧",الأسعار:"💰",الميزات:"⭐","المعلومات الإضافية":"📝",الوسائط:"🖼️",الاتصال:"📞",التقييم:"⭐",عام:"📁"})[R]||"📁",k=R=>{v(H=>({...H,[R]:!H[R]}))},A=()=>{switch(o){case"modern":return"bg-white border border-gray-100 rounded-xl p-4 shadow-sm hover:shadow-md transition-all duration-200";case"minimal":return"bg-transparent border-b border-gray-100 pb-4 last:border-b-0";default:return"bg-gray-50 border border-gray-200 rounded-lg p-3"}},D=()=>{switch(o){case"modern":return"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-4 shadow-sm";case"minimal":return"border-b border-gray-200 pb-3 mb-4";default:return"bg-gray-100 border border-gray-200 rounded-lg p-3"}},O=()=>{switch(o){case"modern":return"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-all duration-200 bg-white shadow-sm";case"minimal":return"w-full px-3 py-2 border-b border-gray-300 focus:outline-none focus:border-blue-500 bg-transparent transition-colors duration-200";default:return"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}},F=e.reduce((R,H)=>{const E=H.category||H.groupId||"عام";return R[E]||(R[E]=[]),R[E].push(H),R},{});return e.length===0?t.jsxs("div",{className:`text-center py-12 text-gray-500 ${r}`,children:[t.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"📝"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"لا توجد حقول ديناميكية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"لا توجد حقول ديناميكية محددة لهذا النوع من الوحدات"})]}):t.jsx("div",{className:`space-y-8 ${r}`,dir:"rtl",children:Object.entries(F).map(([R,H])=>{const E=f[R];return t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:D(),children:t.jsxs("div",{className:`flex items-center justify-between ${d?"cursor-pointer":""}`,onClick:()=>d&&k(R),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[h&&t.jsx("span",{className:"text-2xl",children:N(R)}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:R}),t.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[H.length," حقل"]})]}),d&&t.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:t.jsx("svg",{className:`w-5 h-5 transform transition-transform duration-200 ${E?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),(!d||!E)&&t.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 transition-all duration-300 ${E?"opacity-0 max-h-0 overflow-hidden":"opacity-100"}`,children:H.map(z=>t.jsx("div",{className:A(),children:t.jsxs("label",{className:"block space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:C(z.fieldTypeId)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-800",children:z.displayName}),z.isRequired&&t.jsx("span",{className:"text-red-500 text-sm font-bold",children:"*"})]}),z.description&&t.jsx("span",{className:"text-xs text-gray-500 block",children:z.description})]})]}),t.jsx("div",{className:"pt-2",children:T(z)})]})},z.fieldId))})]},R)})})},zR=()=>{const e=is(),n=re=>{e(`/admin/unit-images/${re.propertyId}/${re.id}`,{state:{propertyName:re.propertyName,unitName:re.name}})},[a,r]=b.useState("table"),[o,d]=b.useState(""),[h,g]=b.useState(!1),[p,f]=b.useState(1),[v,j]=b.useState(20),[S,T]=b.useState({propertyId:"",unitTypeId:"",isAvailable:void 0,minPrice:"",maxPrice:"",pricingMethod:"",checkInDate:"",checkOutDate:""}),[C,N]=b.useState(!1),[k,A]=b.useState(!1),[D,O]=b.useState(!1),[F,R]=b.useState(null),[H,E]=b.useState([]),[z,Z]=b.useState(!1),[U,V]=b.useState([]),[X,W]=b.useState([]),[B,te]=b.useState(null),[G,J]=b.useState(null),[q,K]=b.useState({propertyId:"",unitTypeId:"",name:"",basePrice:{amount:0,currency:"YER"},customFeatures:"",pricingMethod:"Daily",fieldValues:[],images:[],adultCapacity:void 0,childrenCapacity:void 0}),[I,se]=b.useState({unitId:"",name:"",basePrice:{amount:0,currency:"YER"},customFeatures:"",pricingMethod:"Dynamic",fieldValues:[],images:[],adultCapacity:void 0,childrenCapacity:void 0}),[ne,ae]=b.useState({}),[ee,le]=b.useState({}),me={pageNumber:p,pageSize:v,nameContains:o||void 0,propertyId:S.propertyId||void 0,unitTypeId:S.unitTypeId||void 0,isAvailable:S.isAvailable,minPrice:S.minPrice||void 0,maxPrice:S.maxPrice||void 0,pricingMethod:S.pricingMethod||void 0,checkInDate:S.checkInDate||void 0,checkOutDate:S.checkOutDate||void 0},{unitsData:Re,isLoading:Pe,error:ie,createUnit:Q,updateUnit:we,deleteUnit:Be}=P2(me),{propertiesData:nt}=Sc({pageNumber:1,pageSize:100}),{data:Qe,isLoading:it}=PR({pageNumber:1,pageSize:100}),Ce=nt?.items.find(re=>re.id===q.propertyId),{unitTypesData:Fe,isLoading:Nt}=D2({propertyTypeId:Ce?.typeId||"",pageNumber:1,pageSize:100}),{unitTypeFieldsData:_t}=Bx({unitTypeId:q.unitTypeId,isPublic:!0}),{unitTypeFieldsData:ut}=Bx({unitTypeId:F?.unitTypeId||"",isPublic:!0}),{currencies:ke,loading:Oe}=Cc(),qe=Oe?[]:ke.map(re=>re.code);b.useEffect(()=>{if(q.unitTypeId&&Fe?.items){const re=Fe.items.find(Te=>Te.id===q.unitTypeId);te(re||null),re&&(re.isHasAdults||K(Te=>({...Te,adultCapacity:void 0})),re.isHasChildren||K(Te=>({...Te,childrenCapacity:void 0})))}else te(null)},[q.unitTypeId,Fe]),b.useEffect(()=>{if(F&&Qe?.items){const re=Qe.items.find(Te=>Te.id===F.unitTypeId);J(re||null)}else J(null)},[F,Qe]),b.useEffect(()=>{q.unitTypeId&&_t?.length&&ae({})},[q.unitTypeId,_t]),b.useEffect(()=>{if(F&&ut?.length){const re={};F.fieldValues?.forEach(Te=>{re[Te.fieldId]=Te.fieldValue}),le(re)}},[F,ut]);const Ae=(re,Te)=>{const $e=[];return re.forEach(Xe=>{const qt=Te[Xe.fieldId],Rt=qt??"";switch(Xe.isRequired&&(Xe.fieldTypeId==="multiselect"?(!Array.isArray(Rt)||Rt.length===0)&&$e.push(`${Xe.displayName} مطلوب.`):String(Rt).trim()===""&&$e.push(`${Xe.displayName} مطلوب.`)),Xe.fieldTypeId){case"text":case"textarea":const Mn=String(Rt).length;Xe.validationRules.minLength&&Mn<Xe.validationRules.minLength&&$e.push(`${Xe.displayName} يجب أن يكون طوله على الأقل ${Xe.validationRules.minLength} أحرف.`),Xe.validationRules.maxLength&&Mn>Xe.validationRules.maxLength&&$e.push(`${Xe.displayName} يجب ألا يزيد طوله عن ${Xe.validationRules.maxLength} أحرف.`),Xe.validationRules.pattern&&(new RegExp(Xe.validationRules.pattern).test(String(Rt))||$e.push(`${Xe.displayName} غير صالح.`));break;case"number":case"currency":case"percentage":case"range":const Nn=parseFloat(Rt)||0;Xe.validationRules.min!=null&&Nn<Xe.validationRules.min&&$e.push(`${Xe.displayName} يجب أن يكون ≥ ${Xe.validationRules.min}.`),Xe.validationRules.max!=null&&Nn>Xe.validationRules.max&&$e.push(`${Xe.displayName} يجب أن يكون ≤ ${Xe.validationRules.max}.`);break;case"select":const oa=Xe.fieldOptions.options||[];Rt&&!oa.includes(Rt)&&$e.push(`${Xe.displayName} غير صالح.`);break;case"multiselect":const Ma=Xe.fieldOptions.options||[];Array.isArray(Rt)&&Rt.forEach(Pt=>{Ma.includes(Pt)||$e.push(`${Xe.displayName} يحتوي على قيمة غير صالحة.`)});break}}),$e},He=(re,Te)=>{const $e=[];return Te?.isHasAdults&&(!re.adultCapacity||re.adultCapacity<=0)&&$e.push("عدد البالغين مطلوب ويجب أن يكون أكبر من صفر"),Te?.isHasChildren&&(!re.childrenCapacity||re.childrenCapacity<0)&&$e.push("عدد الأطفال مطلوب ويجب أن يكون صفر أو أكثر"),$e},ct=()=>{K({propertyId:"",unitTypeId:"",name:"",basePrice:{amount:0,currency:"YER"},customFeatures:"",pricingMethod:"Daily",fieldValues:[],images:[],adultCapacity:void 0,childrenCapacity:void 0}),ae({}),te(null)},de=re=>{R(re),se({unitId:re.id,name:re.name,basePrice:re.basePrice,customFeatures:re.customFeatures,pricingMethod:re.pricingMethod,fieldValues:re.fieldValues?.map(Te=>({fieldId:Te.fieldId,fieldValue:Te.fieldValue}))||[],images:re.images?.map(Te=>Te.url)||[],adultCapacity:re.adultCapacity,childrenCapacity:re.childrenCapacity}),A(!0)},De=re=>{R(re),O(!0)},Le=re=>{confirm(`هل أنت متأكد من حذف الوحدة "${re.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`)&&Be.mutate(re.id)},kt=(re,Te)=>{T($e=>({...$e,[re]:Te})),f(1)},sn=()=>{T({propertyId:"",unitTypeId:"",isAvailable:void 0,minPrice:"",maxPrice:"",pricingMethod:"",checkInDate:"",checkOutDate:""}),d(""),f(1)},$n=async re=>{R(re),W([]);const Te=await tc.getSections({pageNumber:1,pageSize:100,target:Is.UNITS});V(Te.items),Z(!0)},Fn=async()=>{F&&(await nc.addUnitToSections(F.id,X),Z(!1))},wn=[{key:"propertyId",label:"الكيان",type:"select",options:nt?.items.map(re=>({value:re.id,label:re.name}))??[]},{key:"unitTypeId",label:"نوع الوحدة",type:"select",options:Qe?.items.map(re=>({value:re.id,label:re.name}))??[]},{key:"isAvailable",label:"متاحة",type:"boolean"},{key:"minPrice",label:"الحد الأدنى للسعر",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxPrice",label:"الحد الأقصى للسعر",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"pricingMethod",label:"طريقة التسعير",type:"select",options:[{value:"Hourly",label:"بالساعة"},{value:"Daily",label:"يومي"},{value:"Weekly",label:"أسبوعي"},{value:"Monthly",label:"شهري"}]},{key:"checkInDate",label:"متاح من",type:"custom",render:(re,Te)=>t.jsx("input",{type:"datetime-local",value:re,onChange:$e=>Te($e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})},{key:"checkOutDate",label:"متاح إلى",type:"custom",render:(re,Te)=>t.jsx("input",{type:"datetime-local",value:re,onChange:$e=>Te($e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})}],rn=[{key:"name",title:"اسم الوحدة",sortable:!0,render:(re,Te)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:re}),t.jsx("span",{className:"text-sm text-gray-500",children:Te.unitTypeName})]})},{key:"propertyName",title:"الكيان",sortable:!0},{key:"capacity",title:"السعة",render:(re,Te)=>{const $e=[];return Te.adultCapacity&&$e.push(`👨 ${Te.adultCapacity}`),Te.childrenCapacity!==void 0&&$e.push(`👶 ${Te.childrenCapacity}`),$e.length>0?t.jsx("div",{className:"flex gap-2",children:$e.map((Xe,qt)=>t.jsx("span",{className:"text-sm",children:Xe},qt))}):"-"}},{key:"basePrice",title:"السعر الأساسي",render:re=>t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"font-medium",children:re.amount}),t.jsx("span",{className:"text-sm text-gray-500 mr-1",children:re.currency})]})},{key:"pricingMethod",title:"طريقة التسعير",render:re=>({Hourly:"بالساعة",Daily:"يومي",Weekly:"أسبوعي",Monthly:"شهري"})[re]||re},{key:"isAvailable",title:"متاحة",render:re=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${re?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:re?"متاحة":"غير متاحة"})}],la=[{label:"إدارة الإتاحة والتسعير",icon:"📅",color:"green",onClick:re=>{e(`/admin/units/${re.id}/availability-pricing`,{state:{unitName:re.name}})}},{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:De},{label:"معرض الصور",icon:"🖼️",color:"blue",onClick:n},{label:"تعديل",icon:"✏️",color:"yellow",onClick:de},{label:"إسناد للأقسام",icon:"📚",color:"yellow",onClick:re=>$n(re)},{label:"حذف",icon:"🗑️",color:"red",onClick:Le}],En=re=>!re||re.length===0?null:re.find($e=>$e.isMain)||re[0],he=re=>{const Te=En(re.images);return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[t.jsxs("div",{className:"relative h-48 bg-gray-200",children:[Te?t.jsx("img",{src:Te.url,alt:Te.altText||re.name,className:"w-full h-full object-cover",onError:$e=>{const Xe=$e.target;Xe.style.display="none",Xe.nextElementSibling?.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-full h-full flex items-center justify-center bg-gray-100 ${Te?"hidden":""}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-4xl text-gray-400",children:"🏠"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"لا توجد صورة"})]})}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${re.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:re.isAvailable?"متاحة":"غير متاحة"})}),re.images&&re.images.length>0&&t.jsxs("div",{className:"absolute bottom-3 left-3 bg-black bg-opacity-60 text-white px-2 py-1 rounded text-xs",children:["📸 ",re.images.length," صورة"]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:re.name}),t.jsx("p",{className:"text-sm text-gray-600",children:re.unitTypeName})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"الكيان:"}),t.jsx("span",{className:"text-sm text-gray-900",children:re.propertyName})]}),(re.adultCapacity||re.childrenCapacity!==void 0)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"السعة:"}),t.jsxs("div",{className:"flex gap-2",children:[re.adultCapacity&&t.jsxs("span",{className:"text-sm text-gray-900",children:["👨 ",re.adultCapacity]}),re.childrenCapacity!==void 0&&t.jsxs("span",{className:"text-sm text-gray-900",children:["👶 ",re.childrenCapacity]})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"السعر:"}),t.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:[re.basePrice.amount," ",re.basePrice.currency]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"طريقة التسعير:"}),t.jsx("span",{className:"text-sm text-gray-900",children:wn.find($e=>$e.key==="pricingMethod")?.options?.find($e=>$e.value===re.pricingMethod)?.label||re.pricingMethod})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>De(re),className:"flex-1 px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded hover:bg-blue-100 transition-colors",children:"عرض التفاصيل"}),t.jsx("button",{onClick:()=>de(re),className:"px-3 py-2 bg-gray-50 text-gray-700 text-sm font-medium rounded hover:bg-gray-100 transition-colors",children:"✏️"}),t.jsx("button",{onClick:()=>$n(re),className:"px-3 py-2 bg-indigo-50 text-indigo-700 text-sm font-medium rounded hover:bg-indigo-100 transition-colors",children:"📚"}),t.jsx("button",{onClick:()=>Le(re),className:"px-3 py-2 bg-red-50 text-red-700 text-sm font-medium rounded hover:bg-red-100 transition-colors",children:"🗑️"})]})]})]})},tt=(Re?.items||[]).map(re=>{const Te=nt?.items.find($e=>$e.id===re.propertyId);return{...re,latitude:Te?.latitude,longitude:Te?.longitude,address:Te?.address}});return ie?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات الوحدات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الوحدات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع الوحدات في النظام مع 3 طرق عرض مختلفة"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(A2,{currentView:a,onViewChange:r,availableViews:["table","cards","map"]}),t.jsx("button",{onClick:()=>N(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة وحدة جديدة"})]})]})}),t.jsx(ti,{searchPlaceholder:"البحث في الوحدات...",searchValue:o,onSearchChange:d,filters:wn,filterValues:S,onFilterChange:kt,onReset:sn,showAdvanced:h,onToggleAdvanced:()=>g(!h)}),a==="table"&&t.jsx(ls,{data:Re?.items||[],columns:rn,loading:Pe,pagination:{current:Re?.pageNumber||1,pageSize:Re?.pageSize||v,total:Re?.totalCount||0,onChange:(re,Te)=>{f(re),j(Te)}},actions:la}),a==="cards"&&t.jsx(M2,{data:Re?.items||[],loading:Pe,renderCard:he,emptyMessage:"لا توجد وحدات للعرض",emptyIcon:"🏠",columns:3,pagination:{current:p,total:Re?.totalCount||0,pageSize:v,onChange:(re,Te)=>{f(re),j(Te)}}}),a==="map"&&t.jsx(R2,{markers:tt.map(re=>({id:re.id,name:re.name,address:re.propertyName,description:`${re.unitTypeName} - ${re.basePrice.amount} ${re.basePrice.currency}`,coordinates:re.latitude&&re.longitude?{latitude:re.latitude,longitude:re.longitude}:void 0,type:"unit",color:re.isAvailable?"#10B981":"#EF4444",isAvailable:re.isAvailable,price:{amount:re.basePrice.amount,currency:re.basePrice.currency}})).filter(re=>re.coordinates),onMarkerClick:re=>{const Te=tt.find($e=>$e.id===re.id);Te&&De(Te)},emptyMessage:"لا توجد وحدات بمواقع محددة لعرضها على الخريطة",height:"600px",pagination:{current:p,total:Re?.totalCount||0,pageSize:v,onChange:(re,Te)=>{f(re),j(Te)}}}),t.jsx(Mt,{isOpen:C,onClose:()=>{N(!1),ct()},title:"إضافة وحدة جديدة",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{N(!1),ct()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>{const re=He(q,B);if(re.length){alert(re.join(`
`));return}const Te=Ae(_t||[],ne);if(Te.length){alert(Te.join(`
`));return}const $e=Object.entries(ne).map(([qt,Rt])=>({fieldId:qt,fieldValue:Array.isArray(Rt)?JSON.stringify(Rt):String(Rt)})),Xe={...q,fieldValues:$e};Q.mutate(Xe,{onSuccess:()=>{N(!1),ct()}})},disabled:Q.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:Q.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📋"})," المعلومات الأساسية"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الكيان *"}),t.jsxs("select",{value:q.propertyId,onChange:re=>K(Te=>({...Te,propertyId:re.target.value,unitTypeId:""})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"اختر الكيان"}),nt?.items?.map(re=>t.jsx("option",{value:re.id,children:re.name},re.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الوحدة *"}),t.jsxs("select",{value:q.unitTypeId,onChange:re=>K(Te=>({...Te,unitTypeId:re.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:!q.propertyId,required:!0,children:[t.jsx("option",{value:"",children:"اختر نوع الوحدة"}),Nt?t.jsx("option",{disabled:!0,children:"جارٍ التحميل..."}):Fe?.items.map(re=>t.jsx("option",{value:re.id,children:re.name},re.id))]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الوحدة *"}),t.jsx("input",{type:"text",value:q.name,onChange:re=>K(Te=>({...Te,name:re.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم الوحدة",required:!0})]})]})]}),(B?.isHasAdults||B?.isHasChildren)&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"👥"})," السعة الاستيعابية"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B?.isHasAdults&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد البالغين * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"1",value:q.adultCapacity||"",onChange:re=>K(Te=>({...Te,adultCapacity:parseInt(re.target.value)||void 0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد البالغين",required:!0})]}),B?.isHasChildren&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد الأطفال * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"0",value:q.childrenCapacity!==void 0?q.childrenCapacity:"",onChange:re=>K(Te=>({...Te,childrenCapacity:parseInt(re.target.value)||0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد الأطفال",required:!0})]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"💰"})," التسعير"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي *"}),t.jsx(Zl,{value:q.basePrice.amount,currency:q.basePrice.currency,onValueChange:(re,Te)=>K($e=>({...$e,basePrice:{amount:re,currency:Te}})),placeholder:"0.00",required:!0,min:0,showSymbol:!0,supportedCurrencies:qe})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"طريقة التسعير *"}),t.jsxs("select",{value:q.pricingMethod,onChange:re=>K(Te=>({...Te,pricingMethod:re.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"Hourly",children:"بالساعة"}),t.jsx("option",{value:"Daily",children:"يومي"}),t.jsx("option",{value:"Weekly",children:"أسبوعي"}),t.jsx("option",{value:"Monthly",children:"شهري"})]})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"✨"})," الميزات المخصصة"]}),t.jsx(zh,{value:q.customFeatures,onChange:re=>K(Te=>({...Te,customFeatures:re})),placeholder:"أدخل الميزات المخصصة واضغط Enter أو الفاصلة للإضافة...",variant:"modern",size:"md",maxTags:15,suggestions:["واي فاي مجاني","مكيف هواء","تلفزيون ذكي","مطبخ مجهز","شرفة خاصة","موقف سيارة","مسبح","جيم","خدمة تنظيف","أمن وحراسة","خدمة استقبال","صالة ألعاب","منطقة شواء","حديقة خاصة","جاكوزي"]})]}),q.unitTypeId&&_t&&_t.length>0&&t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📝"})," معلومات إضافية"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx(Pj,{fields:_t,values:[],onChange:ae,className:"contents"})})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"🖼️"})," صور الوحدة"]}),t.jsx(Yl,{value:q.images||[],onChange:re=>K(Te=>({...Te,images:Array.isArray(re)?re:[re]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور الوحدة أو اسحبها هنا",uploadEndpoint:"/api/images/upload"})]})]})}),t.jsx(Mt,{isOpen:k,onClose:()=>{A(!1),R(null)},title:"تعديل بيانات الوحدة",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{A(!1),R(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>{const re=He(I,G);if(re.length){alert(re.join(`
`));return}const Te=Ae(ut||[],ee);if(Te.length){alert(Te.join(`
`));return}const $e=Object.entries(ee).map(([qt,Rt])=>({fieldId:qt,fieldValue:Array.isArray(Rt)?JSON.stringify(Rt):String(Rt)})),Xe={...I,fieldValues:$e};we.mutate({unitId:I.unitId,data:Xe},{onSuccess:()=>{A(!1),R(null)}})},disabled:we.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:we.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:F&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📋"})," المعلومات الأساسية"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الوحدة"}),t.jsx("input",{type:"text",value:I.name,onChange:re=>se(Te=>({...Te,name:re.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})})]}),(G?.isHasAdults||G?.isHasChildren)&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"👥"})," السعة الاستيعابية"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G?.isHasAdults&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد البالغين * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"1",value:I.adultCapacity||"",onChange:re=>se(Te=>({...Te,adultCapacity:parseInt(re.target.value)||void 0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد البالغين",required:!0})]}),G?.isHasChildren&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد الأطفال * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"0",value:I.childrenCapacity!==void 0?I.childrenCapacity:"",onChange:re=>se(Te=>({...Te,childrenCapacity:parseInt(re.target.value)||0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد الأطفال",required:!0})]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"💰"})," التسعير"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي"}),t.jsx(Zl,{value:I.basePrice?.amount||0,currency:I.basePrice?.currency||"YER",onValueChange:(re,Te)=>se($e=>({...$e,basePrice:{amount:re,currency:Te}})),placeholder:"0.00",min:0,showSymbol:!0,supportedCurrencies:qe})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"طريقة التسعير"}),t.jsxs("select",{value:I.pricingMethod,onChange:re=>se(Te=>({...Te,pricingMethod:re.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"Hourly",children:"بالساعة"}),t.jsx("option",{value:"Daily",children:"يومي"}),t.jsx("option",{value:"Weekly",children:"أسبوعي"}),t.jsx("option",{value:"Monthly",children:"شهري"})]})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"✨"})," الميزات المخصصة"]}),t.jsx(zh,{value:I.customFeatures||"",onChange:re=>se(Te=>({...Te,customFeatures:re})),placeholder:"أدخل الميزات المخصصة واضغط Enter أو الفاصلة للإضافة...",variant:"modern",size:"md",maxTags:15,suggestions:["واي فاي مجاني","مكيف هواء","تلفزيون ذكي","مطبخ مجهز","شرفة خاصة","موقف سيارة","مسبح","جيم","خدمة تنظيف","أمن وحراسة","خدمة استقبال","صالة ألعاب","منطقة شواء","حديقة خاصة","جاكوزي"]})]}),F&&ut&&ut.length>0&&t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📝"})," معلومات إضافية"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx(Pj,{fields:ut,values:F?.fieldValues?.map(re=>({fieldId:re.fieldId,fieldValue:re.fieldValue}))||[],onChange:le,className:"contents"})})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"🖼️"})," صور الوحدة"]}),t.jsx(Yl,{value:I.images||F?.images?.map(re=>re.url)||[],onChange:re=>se(Te=>({...Te,images:Array.isArray(re)?re:[re]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور جديدة للوحدة أو اسحبها هنا",uploadEndpoint:"/api/images/upload"})]})]})}),t.jsx(Mt,{isOpen:D,onClose:()=>{O(!1),R(null)},title:"تفاصيل الوحدة",size:"xl",children:F&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الوحدة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الوحدة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F.unitTypeName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الكيان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F.propertyName})]}),(F.adultCapacity||F.childrenCapacity!==void 0)&&t.jsxs(t.Fragment,{children:[F.adultCapacity&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد البالغين"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["👨 ",F.adultCapacity," بالغ"]})]}),F.childrenCapacity!==void 0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الأطفال"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["👶 ",F.childrenCapacity," طفل"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر الأساسي"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[F.basePrice.amount," ",F.basePrice.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"طريقة التسعير"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:wn.find(re=>re.key==="pricingMethod")?.options?.find(re=>re.value===F.pricingMethod)?.label||F.pricingMethod})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة التوفر"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${F.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:F.isAvailable?"متاحة":"غير متاحة"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الميزات المخصصة"}),F.customFeatures?t.jsx("div",{className:"flex flex-wrap gap-1",children:F.customFeatures.split(",").map((re,Te)=>t.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200 rounded-full text-sm font-medium",children:["✨ ",re.trim()]},Te))}):t.jsx("p",{className:"text-sm text-gray-500 italic",children:"لا توجد ميزات مخصصة"})]}),F.fieldValues&&F.fieldValues.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"📝 معلومات إضافية"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.fieldValues.map(re=>t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:re.displayName||re.fieldName}),t.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:re.fieldValue||"لا توجد قيمة"})]},re.fieldId))})]}),F.images&&F.images.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"🖼️ صور الوحدة"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:F.images.map((re,Te)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:re.url,alt:re.altText||`صورة ${Te+1}`,className:"w-full h-32 object-cover rounded-lg"}),re.isMain&&t.jsx("span",{className:"absolute top-2 right-2 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"رئيسية"})]},Te))})]})]})}),t.jsx(Mt,{isOpen:z,onClose:()=>{Z(!1),W([])},title:"إضافة الوحدة للأقسام",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{Z(!1),W([])},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:Fn,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"حفظ"})]}),children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:['حدد الأقسام التي تريد إضافة الوحدة "',F?.name,'" إليها:']}),t.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-80 overflow-auto border border-gray-200 rounded-lg p-3",children:U.length>0?U.map(re=>t.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:X.includes(re.id),onChange:Te=>{W($e=>Te.target.checked?[...$e,re.id]:$e.filter(Xe=>Xe!==re.id))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("span",{className:"font-medium text-gray-900",children:["#",re.displayOrder," - ",re.type]}),re.title&&t.jsx("p",{className:"text-sm text-gray-500",children:re.title})]})]},re.id)):t.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا توجد أقسام متاحة"})}),X.length>0&&t.jsxs("p",{className:"text-sm text-blue-600",children:["تم تحديد ",X.length," قسم/أقسام"]})]})})]})},zd="/api/admin/bookings",ch={cancel:e=>je.post(`${zd}/${e.bookingId}/cancel`,e).then(n=>n.data),update:e=>je.put(`${zd}/${e.bookingId}/update`,e).then(n=>n.data),getById:e=>je.get(`${zd}/${e.bookingId}`).then(n=>n.data),getByDateRange:e=>je.get(`${zd}/by-date-range`,{params:e}).then(n=>n.data),confirm:e=>je.post(`${zd}/confirm`,e).then(n=>n.data)},O2=e=>{const n=In(),a=["admin-bookings",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>ch.getByDateRange(e)}),h=Ie({mutationFn:f=>ch.update(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),g=Ie({mutationFn:f=>ch.cancel(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),p=Ie({mutationFn:f=>ch.confirm(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}});return{bookingsData:r,isLoading:o,error:d,updateBooking:h,cancelBooking:g,confirmBooking:p}},U0=({value:e="",onChange:n,placeholder:a="اختر الوحدة",className:r="",disabled:o=!1,propertyId:d,unitTypeId:h,isAvailable:g,required:p=!1})=>{const[f,v]=b.useState(!1),[j,S]=b.useState(""),[T,C]=b.useState(null),N=b.useRef(null),k={pageNumber:1,pageSize:50,nameContains:j||void 0,propertyId:d||void 0,unitTypeId:h||void 0,isAvailable:g||void 0},{unitsData:A,isLoading:D}=P2(k);b.useEffect(()=>{if(e&&A?.items){const E=A.items.find(z=>z.id===e);C(E||null)}else C(null)},[e,A]),b.useEffect(()=>{const E=z=>{N.current&&!N.current.contains(z.target)&&v(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const O=E=>{C(E),n(E.id,E),v(!1),S("")},F=()=>{C(null),n(""),S("")},R=E=>({Hourly:"بالساعة",Daily:"يومي",Weekly:"أسبوعي",Monthly:"شهري"})[E]||E,H=E=>!E||typeof E!="object"?"":`${E.amount} ${E.currency}`;return t.jsxs("div",{className:`relative ${r}`,ref:N,children:[t.jsxs("button",{type:"button",onClick:()=>v(!f),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!T&&p?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:T?t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:T.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isAvailable?"متاحة":"غير متاحة"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsx("p",{className:"text-sm text-gray-500 truncate",children:T.propertyName}),t.jsx("p",{className:"text-xs text-gray-400",children:H(T.basePrice)})]})]}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[T&&!o&&t.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),F()},className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:f?"▲":"▼"})]})]}),f&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:j,onChange:E=>S(E.target.value),placeholder:"البحث في الوحدات...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:D?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):A?.items&&A.items.length>0?A.items.map(E=>t.jsxs("button",{type:"button",onClick:()=>O(E),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:E.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${E.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.isAvailable?"متاحة":"غير متاحة"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["📍 ",E.propertyName]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["🏠 ",E.unitTypeName]})]}),t.jsx("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:t.jsx("p",{className:"text-xs text-gray-400",children:R(E.pricingMethod)})})]}),t.jsxs("div",{className:"flex-shrink-0 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:H(E.basePrice)}),t.jsx("p",{className:"text-xs text-gray-500",children:"السعر الأساسي"})]})]},E.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:j?`لا توجد نتائج للبحث "${j}"`:"لا توجد وحدات"})}),A?.items&&A.items.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[A.items.length," من ",A.totalCount||0," وحدة"]})]})]})},IR=()=>{const[e,n]=b.useState(""),[a,r]=b.useState(!1),[o,d]=b.useState(1),[h,g]=b.useState(20),[p,f]=b.useState({status:"",startDate:"",endDate:"",userId:"",unitId:"",minTotalPrice:"",maxTotalPrice:"",guestNameOrEmail:"",bookingSource:"",isWalkIn:void 0}),[v,j]=b.useState(!1),[S,T]=b.useState(!1),[C,N]=b.useState(!1),[k,A]=b.useState(!1),[D,O]=b.useState(null),[F,R]=b.useState([]),[H,E]=b.useState({bookingId:"",checkIn:"",checkOut:"",guestsCount:1}),[z,Z]=b.useState({cancellationReason:""}),U={startDate:p.startDate||new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],endDate:p.endDate||new Date().toISOString().split("T")[0],pageNumber:o,pageSize:h,userId:p.userId||void 0,unitId:p.unitId||void 0,guestNameOrEmail:e||void 0,bookingSource:p.bookingSource||void 0},{bookingsData:V,isLoading:X,error:W,updateBooking:B,cancelBooking:te,confirmBooking:G}=O2(U),J=V?.items?.filter(Q=>!p.status||Q.status===p.status)||[],q=Q=>{O(Q),j(!0)},K=Q=>{O(Q),E({bookingId:Q.id,checkIn:Q.checkIn.split("T")[0],checkOut:Q.checkOut.split("T")[0],guestsCount:Q.guestsCount}),T(!0)},I=Q=>{O(Q),N(!0)},se=Q=>{const we={bookingId:Q.id};G.mutate(we)},ne=(Q,we)=>{f(Be=>({...Be,[Q]:we})),d(1)},ae=()=>{f({status:"",startDate:"",endDate:"",userId:"",unitId:"",minTotalPrice:"",maxTotalPrice:"",guestNameOrEmail:"",bookingSource:"",isWalkIn:void 0}),n(""),d(1)},ee=Q=>({Confirmed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Cancelled:"bg-red-100 text-red-800",Completed:"bg-blue-100 text-blue-800",CheckedIn:"bg-purple-100 text-purple-800"})[Q]||"bg-gray-100 text-gray-800",le=Q=>({Confirmed:"مؤكد",Pending:"معلق",Cancelled:"ملغي",Completed:"مكتمل",CheckedIn:"تم الوصول"})[Q]||Q,me={total:J.length,confirmed:J.filter(Q=>Q.status==="Confirmed").length,pending:J.filter(Q=>Q.status==="Pending").length,cancelled:J.filter(Q=>Q.status==="Cancelled").length,completed:J.filter(Q=>Q.status==="Completed").length},Re=[{key:"status",label:"حالة الحجز",type:"select",options:[{value:"Confirmed",label:"مؤكد"},{value:"Pending",label:"معلق"},{value:"Cancelled",label:"ملغي"},{value:"Completed",label:"مكتمل"},{value:"CheckedIn",label:"تم الوصول"}]},{key:"startDate",label:"تاريخ البداية",type:"date"},{key:"endDate",label:"تاريخ النهاية",type:"date"},{key:"userId",label:"المستخدم",type:"custom",render:(Q,we)=>t.jsx(Vl,{value:Q,onChange:Be=>we(Be),placeholder:"اختر المستخدم",allowedRoles:["Customer"],className:"w-full"})},{key:"unitId",label:"الوحدة",type:"custom",render:(Q,we)=>t.jsx(U0,{value:Q,onChange:Be=>we(Be),placeholder:"اختر الوحدة",className:"w-full"})},{key:"minTotalPrice",label:"الحد الأدنى للسعر",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxTotalPrice",label:"الحد الأقصى للسعر",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"bookingSource",label:"مصدر الحجز",type:"select",options:[{value:"web",label:"موقع الويب"},{value:"mobile",label:"التطبيق"},{value:"admin",label:"لوحة الإدارة"},{value:"phone",label:"الهاتف"}]},{key:"isWalkIn",label:"حجز مباشر",type:"boolean"}],Pe=[{key:"id",title:"معرف الحجز",sortable:!0,render:Q=>t.jsxs("span",{className:"font-mono text-sm text-gray-600",children:[Q.substring(0,8),"..."]})},{key:"userName",title:"اسم العميل",sortable:!0,render:(Q,we)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:Q}),t.jsxs("span",{className:"text-sm text-gray-500",children:[we.guestsCount," ضيف"]})]})},{key:"unitName",title:"الوحدة",sortable:!0},{key:"checkIn",title:"تاريخ الوصول",sortable:!0,render:Q=>t.jsx("span",{className:"text-sm",children:new Date(Q).toLocaleDateString("ar-SA")})},{key:"checkOut",title:"تاريخ المغادرة",sortable:!0,render:Q=>t.jsx("span",{className:"text-sm",children:new Date(Q).toLocaleDateString("ar-SA")})},{key:"totalPrice",title:"السعر الإجمالي",render:Q=>t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"font-medium",children:Q.amount}),t.jsx("span",{className:"text-sm text-gray-500 mr-1",children:Q.currency})]})},{key:"status",title:"الحالة",render:Q=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ee(Q)}`,children:le(Q)})},{key:"bookedAt",title:"تاريخ الحجز",sortable:!0,render:Q=>t.jsx("span",{className:"text-sm text-gray-500",children:new Date(Q).toLocaleDateString("ar-SA")})}],ie=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:q},{label:"تعديل",icon:"✏️",color:"blue",onClick:K,show:Q=>Q.status==="Pending"||Q.status==="Confirmed"},{label:"إلغاء",icon:"❌",color:"red",onClick:I,show:Q=>Q.status==="Pending"||Q.status==="Confirmed"},{label:"تأكيد",icon:"✅",color:"green",onClick:se,show:Q=>Q.status==="Pending"}];return W?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات الحجوزات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الحجوزات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع حجوزات النظام مع فلترة متقدمة وإدارة الحالات"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📊"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الحجوزات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:me.total})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مؤكدة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:me.confirmed})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:me.pending})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"❌"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ملغية"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:me.cancelled})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🏁"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مكتملة"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:me.completed})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في الحجوزات (اسم العميل أو البريد الإلكتروني)...",searchValue:e,onSearchChange:n,filters:Re,filterValues:p,onFilterChange:ne,onReset:ae,showAdvanced:a,onToggleAdvanced:()=>r(!a)}),t.jsx(ls,{data:J,columns:Pe,loading:X,pagination:{current:o,total:V?.totalCount||0,pageSize:h,onChange:(Q,we)=>{d(Q),g(we)}},rowSelection:{selectedRowKeys:F,onChange:R},actions:ie,onRowClick:q}),t.jsx(Mt,{isOpen:v,onClose:()=>{j(!1),O(null)},title:"تفاصيل الحجز",size:"xl",children:D&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:D.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم العميل"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.userName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوحدة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.unitName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الضيوف"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:D.guestsCount})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الوصول"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(D.checkIn).toLocaleDateString("ar-SA")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ المغادرة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(D.checkOut).toLocaleDateString("ar-SA")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر الإجمالي"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[D.totalPrice.amount," ",D.totalPrice.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة الحجز"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${ee(D.status)}`,children:le(D.status)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(D.bookedAt).toLocaleDateString("ar-SA")})]})]})})}),t.jsx(Mt,{isOpen:S,onClose:()=>{T(!1),O(null)},title:"تعديل بيانات الحجز",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{T(!1),O(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>B.mutate(H),disabled:B.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:B.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:D&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الوصول"}),t.jsx("input",{type:"date",value:H.checkIn,onChange:Q=>E(we=>({...we,checkIn:Q.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ المغادرة"}),t.jsx("input",{type:"date",value:H.checkOut,onChange:Q=>E(we=>({...we,checkOut:Q.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد الضيوف"}),t.jsx("input",{type:"number",min:"1",value:H.guestsCount,onChange:Q=>E(we=>({...we,guestsCount:Number(Q.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})}),t.jsx(Mt,{isOpen:C,onClose:()=>{N(!1),O(null),Z({cancellationReason:""})},title:"إلغاء الحجز",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{N(!1),O(null),Z({cancellationReason:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>te.mutate({bookingId:D.id,cancellationReason:z.cancellationReason}),disabled:te.status==="pending"||!z.cancellationReason.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:te.status==="pending"?"جارٍ الإلغاء...":"إلغاء الحجز"})]}),children:D&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-red-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"تأكيد إلغاء الحجز"}),t.jsxs("p",{className:"mt-2 text-sm text-red-700",children:["هل أنت متأكد من إلغاء حجز ",t.jsx("strong",{children:D.userName})," للوحدة ",t.jsx("strong",{children:D.unitName}),"؟ هذا الإجراء لا يمكن التراجع عنه."]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سبب الإلغاء *"}),t.jsx("textarea",{rows:3,value:z.cancellationReason,onChange:Q=>Z(we=>({...we,cancellationReason:Q.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل سبب إلغاء الحجز..."})]})]})})]})},dh={refund:e=>je.post("/api/admin/Payments/refund",e).then(n=>n.data),void:e=>je.post("/api/admin/Payments/void",e).then(n=>n.data),updateStatus:(e,n)=>je.put(`/api/admin/Payments/${e}/status`,n).then(a=>a.data),getAll:e=>je.get("/api/admin/Payments",{params:e}).then(n=>n.data)},BR=e=>{const n=In(),a=["admin-payments",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>dh.getAll(e)}),h=Ie({mutationFn:f=>dh.refund(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Ie({mutationFn:f=>dh.void(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Ie({mutationFn:({paymentId:f,data:v})=>dh.updateStatus(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{paymentsData:r,isLoading:o,error:d,refundPayment:h,voidPayment:g,updatePaymentStatus:p}},$R=({value:e="",onChange:n,placeholder:a="اختر الحجز",className:r="",disabled:o=!1,userId:d,status:h,required:g=!1})=>{const[p,f]=b.useState(!1),[v,j]=b.useState(""),[S,T]=b.useState(null),C=b.useRef(null),N={startDate:"2020-01-01",endDate:"2030-12-31",pageNumber:1,pageSize:50,userId:d||void 0,status:h||void 0,searchTerm:v||void 0},{bookingsData:k,isLoading:A}=O2(N);b.useEffect(()=>{if(e&&k?.items){const z=k.items.find(Z=>Z.id===e);T(z||null)}else T(null)},[e,k]),b.useEffect(()=>{const z=Z=>{C.current&&!C.current.contains(Z.target)&&f(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const D=z=>{T(z),n(z.id,z),f(!1),j("")},O=()=>{T(null),n(""),j("")},F=z=>({Pending:"معلق",Confirmed:"مؤكد",Cancelled:"ملغي",Completed:"مكتمل",CheckedIn:"تم تسجيل الدخول",CheckedOut:"تم تسجيل الخروج"})[z]||z,R=z=>({Pending:"bg-yellow-100 text-yellow-800",Confirmed:"bg-blue-100 text-blue-800",Cancelled:"bg-red-100 text-red-800",Completed:"bg-green-100 text-green-800",CheckedIn:"bg-purple-100 text-purple-800",CheckedOut:"bg-gray-100 text-gray-800"})[z]||"bg-gray-100 text-gray-800",H=z=>new Date(z).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"}),E=z=>!z||typeof z!="object"?"":`${z.amount} ${z.currency}`;return t.jsxs("div",{className:`relative ${r}`,ref:C,children:[t.jsxs("button",{type:"button",onClick:()=>f(!p),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!S&&g?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:S?t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsxs("span",{className:"font-medium text-gray-900 truncate font-mono",children:["#",S.id.substring(0,8)]}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${R(S.status)}`,children:F(S.status)})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[H(S.checkIn)," - ",H(S.checkOut)]}),t.jsx("p",{className:"text-xs text-gray-400",children:E(S.totalPrice)})]})]}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[S&&!o&&t.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),O()},className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:p?"▲":"▼"})]})]}),p&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:v,onChange:z=>j(z.target.value),placeholder:"البحث في الحجوزات...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:A?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):k?.items&&k.items.length>0?k.items.map(z=>t.jsxs("button",{type:"button",onClick:()=>D(z),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsxs("span",{className:"font-medium text-gray-900 truncate font-mono",children:["#",z.id.substring(0,8)]}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${R(z.status)}`,children:F(z.status)})]}),t.jsx("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["📅 ",H(z.checkIn)," - ",H(z.checkOut)]})}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-xs text-gray-400 truncate",children:["👤 ",z.userName||"عميل"]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["🏠 ",z.unitName]})]})]}),t.jsxs("div",{className:"flex-shrink-0 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:E(z.totalPrice)}),t.jsx("p",{className:"text-xs text-gray-500",children:"المجموع"})]})]},z.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:v?`لا توجد نتائج للبحث "${v}"`:"لا توجد حجوزات"})}),k?.items&&k.items.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[k.items.length," من ",k.totalCount||0," حجز"]})]})]})},cc=({value:e="",onChange:n,placeholder:a="اختر الكيان",className:r="",disabled:o=!1,ownerId:d,status:h,showImage:g=!0,required:p=!1})=>{const[f,v]=b.useState(!1),[j,S]=b.useState(""),[T,C]=b.useState(null),N=b.useRef(null),k={pageNumber:1,pageSize:50,nameContains:j||void 0,ownerId:d||void 0,status:h||void 0},{propertiesData:A,isLoading:D}=Sc(k);b.useEffect(()=>{if(e&&A?.items){const R=A.items.find(H=>H.id===e);C(R||null)}else C(null)},[e,A]),b.useEffect(()=>{const R=H=>{N.current&&!N.current.contains(H.target)&&v(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const O=R=>{C(R),n(R.id,R),v(!1),S("")},F=()=>{C(null),n(""),S("")};return t.jsxs("div",{className:`relative ${r}`,ref:N,children:[t.jsxs("button",{type:"button",onClick:()=>v(!f),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!T&&p?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:T?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:T.name}),t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:T.isApproved?"معتمد":"غير معتمد"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("p",{className:"text-sm text-gray-500 truncate",children:T.city}),t.jsxs("p",{className:"text-xs text-gray-400",children:["تقييم: ",T.starRating,"/5"]})]})]})}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[T&&!o&&t.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),F()},className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:f?"▲":"▼"})]})]}),f&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:j,onChange:R=>S(R.target.value),placeholder:"البحث في الكيانات...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:D?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):A?.items&&A.items.length>0?A.items.map(R=>t.jsxs("button",{type:"button",onClick:()=>O(R),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:R.name}),t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:R.isApproved?"معتمد":"غير معتمد"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["📍 ",R.city]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["⭐ ",R.starRating,"/5"]})]}),R.description&&t.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:R.description})]}),t.jsxs("div",{className:"flex-shrink-0 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.typeName}),t.jsx("p",{className:"text-xs text-gray-500",children:"نوع الكيان"})]})]},R.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:j?`لا توجد نتائج للبحث "${j}"`:"لا توجد كيانات"})}),A?.items&&A.items.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[A.items.length," من ",A.totalCount||0," كيان"]})]})]})},Kl=()=>{const{showSuccess:e,showError:n}=k2(),[a,r]=b.useState({}),[o,d]=b.useState(null),h=b.useCallback((S,T)=>{r(C=>({...C,[S]:T}))},[]),g=b.useCallback(S=>{d({isOpen:!0,title:S.title,message:S.message,type:S.type||"info",onConfirm:S.onConfirm})},[]),p=b.useCallback(()=>{d(null)},[]),f=b.useCallback(async(S,T={})=>{const{loadingKey:C="default",successMessage:N,errorMessage:k,onSuccess:A,onError:D}=T;try{h(C,!0);const O=await S();return N&&e(N),A&&A(O),O}catch(O){return n(k||"حدث خطأ غير متوقع"),D&&D(O),console.error("Operation failed:",O),null}finally{h(C,!1)}},[h,e,n]),v=b.useCallback(async(S,T="تم النسخ بنجاح")=>{try{await navigator.clipboard.writeText(S),e(T)}catch(C){n("فشل في نسخ النص"),console.error("Failed to copy text:",C)}},[e,n]),j=b.useCallback((S,T)=>{const[C,N]=b.useState(S),[k,A]=b.useState(S);return{value:C,debouncedValue:k,setValue:D=>{N(D)}}},[]);return{loading:a,setLoading:h,confirmDialog:o,showConfirmDialog:g,hideConfirmDialog:p,executeWithFeedback:f,copyToClipboard:v,createDebouncedState:j}},FR=()=>{const{loading:e,executeWithFeedback:n,showConfirmDialog:a,confirmDialog:r,hideConfirmDialog:o,copyToClipboard:d}=Kl(),{currencies:h,loading:g}=Cc(),p=g?[]:h.map(ke=>ke.code),[f,v]=b.useState(""),[j,S]=b.useState(!1),[T,C]=b.useState(1),[N,k]=b.useState(20),[A,D]=b.useState({status:void 0,method:void 0,bookingId:void 0,userId:void 0,propertyId:void 0,unitId:void 0,minAmount:void 0,maxAmount:void 0,startDate:void 0,endDate:void 0}),[O,F]=b.useState(!1),[R,H]=b.useState(!1),[E,z]=b.useState(!1),[Z,U]=b.useState(!1),[V,X]=b.useState(null),[W,B]=b.useState([]),[te,G]=b.useState({paymentId:"",refundAmount:{amount:0,currency:"YER",formattedAmount:""},refundReason:""}),[J,q]=b.useState({paymentId:"",newStatus:"Pending"}),K={status:A.status,method:A.method,bookingId:A.bookingId,userId:A.userId,propertyId:A.propertyId,unitId:A.unitId,minAmount:A.minAmount?parseFloat(A.minAmount):void 0,maxAmount:A.maxAmount?parseFloat(A.maxAmount):void 0,startDate:A.startDate||void 0,endDate:A.endDate||void 0,pageNumber:T,pageSize:N},{paymentsData:I,isLoading:se,error:ne,refundPayment:ae,voidPayment:ee,updatePaymentStatus:le}=BR(K),Re=(I?.items??[])?.filter(ke=>{if(A.bookingId&&!ke.bookingId.includes(A.bookingId)||A.minAmount&&ke.amount.amount<parseFloat(A.minAmount)||A.maxAmount&&ke.amount.amount>parseFloat(A.maxAmount))return!1;if(f){const Oe=f.toLowerCase(),qe=ke.transactionId.toLowerCase().includes(Oe),Ae=ke.amount.amount.toString().includes(f)||ke.amount.formattedAmount.toLowerCase().includes(Oe);if(!qe&&!Ae)return!1}return!0})||[],Pe=ke=>{X(ke),F(!0)},ie=ke=>{X(ke),G({paymentId:ke.id,refundAmount:{...ke.amount},refundReason:""}),H(!0)},Q=ke=>{a({title:"إبطال الدفعة",message:`هل أنت متأكد من إبطال الدفعة ${ke.transactionId} بمبلغ ${ke.amount.amount} ${ke.amount.currency}؟ هذا الإجراء لا يمكن التراجع عنه.`,type:"danger",onConfirm:()=>{n(()=>ee.mutateAsync({paymentId:ke.id}),{loadingKey:"voidPayment",successMessage:"تم إبطال الدفعة بنجاح",errorMessage:"فشل في إبطال الدفعة"})}})},we=ke=>{X(ke),q({paymentId:ke.id,newStatus:ke.status}),U(!0)},Be=(ke,Oe)=>{D(qe=>({...qe,[ke]:Oe})),C(1)},nt=()=>{D({status:void 0,method:void 0,bookingId:void 0,userId:void 0,propertyId:void 0,unitId:void 0,minAmount:void 0,maxAmount:void 0,startDate:void 0,endDate:void 0}),v(""),C(1)},Qe=ke=>({Successful:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800",Pending:"bg-yellow-100 text-yellow-800",Refunded:"bg-blue-100 text-blue-800",Voided:"bg-gray-100 text-gray-800",PartiallyRefunded:"bg-purple-100 text-purple-800"})[ke]||"bg-gray-100 text-gray-800",it=ke=>({Successful:"ناجح",Failed:"فاشل",Pending:"معلق",Refunded:"مسترد",Voided:"ملغي",PartiallyRefunded:"مسترد جزئياً"})[ke]||ke,Ce=ke=>({0:"بطاقة ائتمان",1:"PayPal",2:"تحويل بنكي",3:"نقداً",4:"أخرى"})[ke]||"غير محدد",Fe={total:Re.length,successful:Re.filter(ke=>ke.status==="Successful").length,pending:Re.filter(ke=>ke.status==="Pending").length,failed:Re.filter(ke=>ke.status==="Failed").length,refunded:Re.filter(ke=>ke.status==="Refunded"||ke.status==="PartiallyRefunded").length,totalAmount:Re.filter(ke=>ke.status==="Successful").reduce((ke,Oe)=>ke+Oe.amount.amount,0)},Nt=[{key:"status",label:"حالة الدفع",type:"select",options:[{value:"Successful",label:"ناجح"},{value:"Failed",label:"فاشل"},{value:"Pending",label:"معلق"},{value:"Refunded",label:"مسترد"},{value:"Voided",label:"ملغي"},{value:"PartiallyRefunded",label:"مسترد جزئياً"}]},{key:"method",label:"طريقة الدفع",type:"select",options:[{value:"CreditCard",label:"بطاقة ائتمان"},{value:"PayPal",label:"PayPal"},{value:"BankTransfer",label:"تحويل بنكي"},{value:"Cash",label:"نقداً"},{value:"Other",label:"أخرى"}]},{key:"propertyId",label:"الكيان",type:"custom",render:(ke,Oe)=>t.jsx(cc,{value:ke,onChange:qe=>Oe(qe),placeholder:"اختر الكيان",className:"w-full"})},{key:"unitId",label:"الوحدة",type:"custom",render:(ke,Oe)=>t.jsx(U0,{value:ke,onChange:qe=>Oe(qe),propertyId:A.propertyId,className:"w-full",disabled:!A.propertyId})},{key:"bookingId",label:"الحجز",type:"custom",render:(ke,Oe)=>t.jsx($R,{value:ke,onChange:qe=>Oe(qe),placeholder:"اختر الحجز",className:"w-full"})},{key:"userId",label:"المستخدم",type:"custom",render:(ke,Oe)=>t.jsx(Vl,{value:ke,onChange:qe=>Oe(qe),placeholder:"اختر المستخدم",allowedRoles:["Customer"],className:"w-full"})},{key:"minAmount",label:"الحد الأدنى للمبلغ",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxAmount",label:"الحد الأقصى للمبلغ",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"startDate",label:"تاريخ البداية",type:"date"},{key:"endDate",label:"تاريخ النهاية",type:"date"}],_t=[{key:"id",title:"معرف الدفعة",sortable:!0,render:ke=>t.jsx(Oh,{content:`انقر للنسخ: ${ke}`,children:t.jsxs("button",{onClick:()=>d(ke,"تم نسخ معرف الدفعة"),className:"font-mono text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[ke.substring(0,8),"..."]})})},{key:"transactionId",title:"رقم المعاملة",sortable:!0,render:ke=>t.jsx(Oh,{content:`انقر للنسخ: ${ke}`,children:t.jsx("button",{onClick:()=>d(ke,"تم نسخ رقم المعاملة"),className:"font-mono text-sm text-gray-900 hover:text-blue-600 transition-colors",children:ke})})},{key:"bookingId",title:"معرف الحجز",render:ke=>t.jsxs("span",{className:"font-mono text-sm text-gray-600",children:[ke.substring(0,8),"..."]})},{key:"amount",title:"المبلغ",render:ke=>t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"font-medium text-lg",children:ke.amount}),t.jsx("span",{className:"text-sm text-gray-500 mr-1",children:ke.currency})]})},{key:"method",title:"طريقة الدفع",render:ke=>t.jsx("span",{className:"text-sm",children:Ce(ke)})},{key:"status",title:"الحالة",render:ke=>t.jsx(Kr,{status:ke,variant:"payment"})},{key:"paymentDate",title:"تاريخ الدفع",sortable:!0,render:ke=>t.jsx("span",{className:"text-sm text-gray-500",children:new Date(ke).toLocaleDateString("ar-SA")})}],ut=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:Pe},{label:"استرداد",icon:"↩️",color:"orange",onClick:ie,show:ke=>ke.status==="Successful"},{label:"إبطال",icon:"❌",color:"red",onClick:Q,show:ke=>ke.status==="Successful"||ke.status==="Pending"},{label:"تحديث الحالة",icon:"🔄",color:"blue",onClick:we,show:ke=>ke.status==="Pending"}];return ne?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Lh,{icon:"⚠️",title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل بيانات المدفوعات. يرجى المحاولة مرة أخرى.",actionLabel:"إعادة المحاولة",onAction:()=>window.location.reload(),size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المدفوعات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراقبة وإدارة المدفوعات، الاستردادات، وإبطال المعاملات المالية"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"💰"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي المدفوعات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Fe.total})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ناجحة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Fe.successful})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Fe.pending})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"❌"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"فاشلة"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:Fe.failed})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"↩️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مستردة"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Fe.refunded})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-emerald-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"💵"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي المبلغ"}),t.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:[Fe.totalAmount.toLocaleString()," ر.ي"]})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في المدفوعات (رقم المعاملة)...",searchValue:f,onSearchChange:v,filters:Nt,filterValues:A,onFilterChange:Be,onReset:nt,showAdvanced:j,onToggleAdvanced:()=>S(!j)}),!se&&Re.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Lh,{icon:"💳",title:"لا توجد مدفوعات",description:"لم يتم العثور على أي مدفوعات تطابق معايير البحث والفلترة الحالية.",actionLabel:"إعادة تعيين الفلاتر",onAction:nt})}):t.jsx(ls,{data:Re,columns:_t,loading:se,pagination:{current:T,total:I?.totalCount||0,pageSize:N,onChange:(ke,Oe)=>{C(ke),k(Oe)}},rowSelection:{selectedRowKeys:W,onChange:B},actions:ut,onRowClick:Pe}),t.jsx(Mt,{isOpen:O,onClose:()=>{F(!1),X(null)},title:"تفاصيل الدفعة",size:"lg",children:V&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الدفعة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:V.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"رقم المعاملة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:V.transactionId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:V.bookingId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المبلغ"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[V.amount.amount," ",V.amount.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"طريقة الدفع"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Ce(V.method)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة الدفع"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${Qe(V.status)}`,children:it(V.status)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الدفع"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(V.paymentDate).toLocaleString("ar-SA")})]})]})})}),t.jsx(Mt,{isOpen:R,onClose:()=>{H(!1),X(null)},title:"استرداد الدفعة",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{H(!1),X(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>ae.mutate(te),disabled:ae.status==="pending"||!te.refundReason.trim(),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50",children:e.refundPayment?"جارٍ الاسترداد...":"استرداد"})]}),children:V&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-orange-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"تأكيد استرداد الدفعة"}),t.jsxs("p",{className:"mt-2 text-sm text-orange-700",children:["سيتم استرداد ",t.jsxs("strong",{children:[te.refundAmount.amount," ",te.refundAmount.currency]})," من المعاملة ",t.jsx("strong",{children:V.transactionId}),"."]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مبلغ الاسترداد"}),t.jsx(Zl,{value:te.refundAmount.amount,currency:te.refundAmount.currency,onValueChange:(ke,Oe)=>G(qe=>({...qe,refundAmount:{...qe.refundAmount,amount:ke,currency:Oe}})),direction:"rtl",placeholder:"0.00",required:!0,min:0,max:V?.amount.amount,showSymbol:!0,supportedCurrencies:p,disabled:!1}),V&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["الحد الأقصى للاسترداد: ",V.amount.amount," ",V.amount.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سبب الاسترداد *"}),t.jsx("textarea",{rows:3,value:te.refundReason,onChange:ke=>G(Oe=>({...Oe,refundReason:ke.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل سبب الاسترداد..."})]})]})}),t.jsx(Mt,{isOpen:E,onClose:()=>{z(!1),X(null)},title:"إبطال الدفعة",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{z(!1),X(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>ee.mutate({paymentId:V.id}),disabled:ee.status==="pending",className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:ee.status==="pending"?"جارٍ الإبطال...":"إبطال الدفعة"})]}),children:V&&t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-red-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"تأكيد إبطال الدفعة"}),t.jsxs("p",{className:"mt-2 text-sm text-red-700",children:["هل أنت متأكد من إبطال الدفعة ",t.jsx("strong",{children:V.transactionId})," بمبلغ ",t.jsxs("strong",{children:[V.amount.amount," ",V.amount.currency]}),"؟ هذا الإجراء لا يمكن التراجع عنه."]})]})]})})})}),t.jsx(Mt,{isOpen:Z,onClose:()=>{U(!1),X(null)},title:"تحديث حالة الدفعة",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{U(!1),X(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>le.mutate({paymentId:J.paymentId,data:J}),disabled:le.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:le.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:V&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"تحديث حالة الدفعة"}),t.jsxs("p",{className:"mt-2 text-sm text-blue-700",children:["المعاملة: ",t.jsx("strong",{children:V.transactionId}),t.jsx("br",{}),"الحالة الحالية: ",t.jsx("strong",{children:it(V.status)})]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة الجديدة"}),t.jsxs("select",{value:J.newStatus,onChange:ke=>q(Oe=>({...Oe,newStatus:ke.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"Successful",children:"ناجح"}),t.jsx("option",{value:"Failed",children:"فاشل"}),t.jsx("option",{value:"Pending",children:"معلق"}),t.jsx("option",{value:"Refunded",children:"مسترد"}),t.jsx("option",{value:"Voided",children:"ملغي"}),t.jsx("option",{value:"PartiallyRefunded",children:"مسترد جزئياً"})]})]})]})}),r&&t.jsx(T2,{isOpen:r.isOpen,onClose:o,onConfirm:()=>{r.onConfirm(),o()},title:r.title,message:r.message,type:r.type,loading:e.voidPayment})]})},Id="/api/admin/amenities",Bd={createAmenity:e=>je.post(`${Id}`,e),updateAmenity:(e,n)=>je.put(`${Id}/${e}`,n),deleteAmenity:e=>je.delete(`${Id}/${e}`),getAllAmenities:e=>je.get(`${Id}`,{params:e}),assignAmenityToProperty:(e,n,a)=>je.post(`${Id}/${e}/assign/property/${n}`,a)},UR=e=>{const n=In(),a=["admin-amenities",e],{data:r,isLoading:o,error:d}=zt({queryKey:a,queryFn:()=>Bd.getAllAmenities(e).then(v=>v.data)}),h=Ie({mutationFn:v=>Bd.createAmenity(v).then(j=>j.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}}),g=Ie({mutationFn:({amenityId:v,data:j})=>Bd.updateAmenity(v,j).then(S=>S.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}}),p=Ie({mutationFn:v=>Bd.deleteAmenity(v).then(j=>j.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}}),f=Ie({mutationFn:({amenityId:v,propertyId:j,data:S})=>Bd.assignAmenityToProperty(v,j,S).then(T=>T.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}});return{amenitiesData:r,isLoading:o,error:d,createAmenity:h,updateAmenity:g,deleteAmenity:p,assignAmenityToProperty:f}},Vd=[{name:"wifi",label:"واي فاي",icon:"📶",category:"أساسيات"},{name:"network_wifi",label:"شبكة واي فاي",icon:"📡",category:"أساسيات"},{name:"signal_wifi_4_bar",label:"واي فاي قوي",icon:"📶",category:"أساسيات"},{name:"router",label:"راوتر",icon:"🔌",category:"أساسيات"},{name:"ac_unit",label:"تكييف",icon:"❄️",category:"أساسيات"},{name:"thermostat",label:"ثرموستات",icon:"🌡️",category:"أساسيات"},{name:"air",label:"تهوية",icon:"💨",category:"أساسيات"},{name:"water_drop",label:"ماء",icon:"💧",category:"أساسيات"},{name:"electric_bolt",label:"كهرباء",icon:"⚡",category:"أساسيات"},{name:"gas_meter",label:"غاز",icon:"🔥",category:"أساسيات"},{name:"heating",label:"تدفئة",icon:"🔥",category:"أساسيات"},{name:"light",label:"إضاءة",icon:"💡",category:"أساسيات"},{name:"kitchen",label:"مطبخ",icon:"🍳",category:"مطبخ"},{name:"microwave",label:"مايكروويف",icon:"📦",category:"مطبخ"},{name:"coffee_maker",label:"صانع القهوة",icon:"☕",category:"مطبخ"},{name:"blender",label:"خلاط",icon:"🥤",category:"مطبخ"},{name:"dining_room",label:"غرفة طعام",icon:"🍽️",category:"مطبخ"},{name:"restaurant",label:"مطعم",icon:"🍴",category:"مطبخ"},{name:"local_cafe",label:"مقهى",icon:"☕",category:"مطبخ"},{name:"local_bar",label:"بار",icon:"🍺",category:"مطبخ"},{name:"breakfast_dining",label:"إفطار",icon:"🍳",category:"مطبخ"},{name:"lunch_dining",label:"غداء",icon:"🍽️",category:"مطبخ"},{name:"dinner_dining",label:"عشاء",icon:"🍽️",category:"مطبخ"},{name:"outdoor_grill",label:"شواية خارجية",icon:"🍖",category:"مطبخ"},{name:"countertops",label:"أسطح عمل",icon:"🔲",category:"مطبخ"},{name:"kitchen_appliances",label:"أجهزة مطبخ",icon:"🍳",category:"مطبخ"},{name:"tv",label:"تلفزيون",icon:"📺",category:"أجهزة"},{name:"desktop_windows",label:"كمبيوتر",icon:"💻",category:"أجهزة"},{name:"laptop",label:"لابتوب",icon:"💻",category:"أجهزة"},{name:"phone_android",label:"هاتف",icon:"📱",category:"أجهزة"},{name:"tablet",label:"تابلت",icon:"📱",category:"أجهزة"},{name:"speaker",label:"سماعات",icon:"🔊",category:"أجهزة"},{name:"radio",label:"راديو",icon:"📻",category:"أجهزة"},{name:"videogame_asset",label:"ألعاب فيديو",icon:"🎮",category:"أجهزة"},{name:"local_laundry_service",label:"غسالة",icon:"🧺",category:"أجهزة"},{name:"dry_cleaning",label:"تنظيف جاف",icon:"👔",category:"أجهزة"},{name:"iron",label:"مكواة",icon:"👔",category:"أجهزة"},{name:"dishwasher",label:"غسالة صحون",icon:"🍽️",category:"أجهزة"},{name:"bathroom",label:"حمام",icon:"🚿",category:"حمام"},{name:"bathtub",label:"حوض استحمام",icon:"🛁",category:"حمام"},{name:"shower",label:"دش",icon:"🚿",category:"حمام"},{name:"soap",label:"صابون",icon:"🧼",category:"حمام"},{name:"dry",label:"مجفف",icon:"💨",category:"حمام"},{name:"wash",label:"غسيل",icon:"🧴",category:"حمام"},{name:"bed",label:"سرير",icon:"🛏️",category:"نوم"},{name:"king_bed",label:"سرير كبير",icon:"🛏️",category:"نوم"},{name:"single_bed",label:"سرير مفرد",icon:"🛏️",category:"نوم"},{name:"bedroom_parent",label:"غرفة نوم رئيسية",icon:"🛏️",category:"نوم"},{name:"bedroom_child",label:"غرفة أطفال",icon:"🛏️",category:"نوم"},{name:"crib",label:"سرير أطفال",icon:"👶",category:"نوم"},{name:"chair",label:"كرسي",icon:"🪑",category:"نوم"},{name:"chair_alt",label:"كرسي مريح",icon:"🪑",category:"نوم"},{name:"weekend",label:"أريكة",icon:"🛋️",category:"نوم"},{name:"living",label:"غرفة معيشة",icon:"🛋️",category:"نوم"},{name:"pool",label:"مسبح",icon:"🏊",category:"رياضة"},{name:"hot_tub",label:"جاكوزي",icon:"♨️",category:"رياضة"},{name:"fitness_center",label:"صالة رياضية",icon:"💪",category:"رياضة"},{name:"sports_tennis",label:"ملعب تنس",icon:"🎾",category:"رياضة"},{name:"sports_soccer",label:"ملعب كرة قدم",icon:"⚽",category:"رياضة"},{name:"sports_basketball",label:"ملعب كرة سلة",icon:"🏀",category:"رياضة"},{name:"sports_volleyball",label:"كرة طائرة",icon:"🏐",category:"رياضة"},{name:"sports_golf",label:"جولف",icon:"⛳",category:"رياضة"},{name:"sports_handball",label:"كرة يد",icon:"🤾",category:"رياضة"},{name:"sports_cricket",label:"كريكيت",icon:"🏏",category:"رياضة"},{name:"sports_baseball",label:"بيسبول",icon:"⚾",category:"رياضة"},{name:"sports_esports",label:"ألعاب إلكترونية",icon:"🎮",category:"رياضة"},{name:"spa",label:"سبا",icon:"💆",category:"رياضة"},{name:"sauna",label:"ساونا",icon:"🧖",category:"رياضة"},{name:"self_improvement",label:"يوغا",icon:"🧘",category:"رياضة"},{name:"local_parking",label:"موقف سيارات",icon:"🅿️",category:"مواصلات"},{name:"garage",label:"كراج",icon:"🚗",category:"مواصلات"},{name:"ev_station",label:"شحن سيارات كهربائية",icon:"🔌",category:"مواصلات"},{name:"local_gas_station",label:"محطة وقود",icon:"⛽",category:"مواصلات"},{name:"car_rental",label:"تأجير سيارات",icon:"🚙",category:"مواصلات"},{name:"car_repair",label:"صيانة سيارات",icon:"🔧",category:"مواصلات"},{name:"directions_car",label:"سيارة",icon:"🚗",category:"مواصلات"},{name:"directions_bus",label:"حافلة",icon:"🚌",category:"مواصلات"},{name:"directions_bike",label:"دراجة",icon:"🚴",category:"مواصلات"},{name:"electric_bike",label:"دراجة كهربائية",icon:"🚴",category:"مواصلات"},{name:"electric_scooter",label:"سكوتر كهربائي",icon:"🛴",category:"مواصلات"},{name:"moped",label:"دراجة نارية",icon:"🏍️",category:"مواصلات"},{name:"elevator",label:"مصعد",icon:"🛗",category:"وصول"},{name:"stairs",label:"درج",icon:"📶",category:"وصول"},{name:"escalator",label:"سلم متحرك",icon:"🔼",category:"وصول"},{name:"escalator_warning",label:"تحذير سلم متحرك",icon:"⚠️",category:"وصول"},{name:"accessible",label:"ممر لذوي الاحتياجات",icon:"♿",category:"وصول"},{name:"wheelchair_pickup",label:"كرسي متحرك",icon:"♿",category:"وصول"},{name:"elderly",label:"كبار السن",icon:"👴",category:"وصول"},{name:"security",label:"أمن",icon:"🔒",category:"أمان"},{name:"lock",label:"قفل",icon:"🔒",category:"أمان"},{name:"key",label:"مفتاح",icon:"🔑",category:"أمان"},{name:"vpn_key",label:"مفتاح رقمي",icon:"🔐",category:"أمان"},{name:"shield",label:"درع",icon:"🛡️",category:"أمان"},{name:"admin_panel_settings",label:"لوحة تحكم",icon:"⚙️",category:"أمان"},{name:"verified_user",label:"مستخدم موثق",icon:"✅",category:"أمان"},{name:"safety_check",label:"فحص أمان",icon:"✅",category:"أمان"},{name:"health_and_safety",label:"صحة وأمان",icon:"🏥",category:"أمان"},{name:"local_police",label:"شرطة",icon:"👮",category:"أمان"},{name:"local_fire_department",label:"إطفاء",icon:"🚒",category:"أمان"},{name:"medical_services",label:"خدمات طبية",icon:"🏥",category:"أمان"},{name:"emergency",label:"طوارئ",icon:"🚨",category:"أمان"},{name:"camera_alt",label:"كاميرا",icon:"📷",category:"أمان"},{name:"videocam",label:"كاميرا فيديو",icon:"📹",category:"أمان"},{name:"sensor_door",label:"حساس باب",icon:"🚪",category:"أمان"},{name:"sensor_window",label:"حساس نافذة",icon:"🪟",category:"أمان"},{name:"doorbell",label:"جرس الباب",icon:"🔔",category:"أمان"},{name:"smoke_detector",label:"كاشف دخان",icon:"🚨",category:"أمان"},{name:"fire_extinguisher",label:"طفاية حريق",icon:"🧯",category:"أمان"},{name:"cleaning_services",label:"خدمة تنظيف",icon:"🧹",category:"خدمات"},{name:"room_service",label:"خدمة الغرف",icon:"🛎️",category:"خدمات"},{name:"concierge",label:"كونسيرج",icon:"🧑‍💼",category:"خدمات"},{name:"luggage",label:"أمتعة",icon:"🧳",category:"خدمات"},{name:"shopping_cart",label:"عربة تسوق",icon:"🛒",category:"خدمات"},{name:"local_grocery_store",label:"بقالة",icon:"🛒",category:"خدمات"},{name:"local_mall",label:"مول",icon:"🛍️",category:"خدمات"},{name:"local_pharmacy",label:"صيدلية",icon:"💊",category:"خدمات"},{name:"local_hospital",label:"مستشفى",icon:"🏥",category:"خدمات"},{name:"local_atm",label:"صراف آلي",icon:"💳",category:"خدمات"},{name:"local_library",label:"مكتبة",icon:"📚",category:"خدمات"},{name:"local_post_office",label:"بريد",icon:"📮",category:"خدمات"},{name:"print",label:"طباعة",icon:"🖨️",category:"خدمات"},{name:"mail",label:"بريد",icon:"📧",category:"خدمات"},{name:"balcony",label:"شرفة",icon:"🌅",category:"خارجي"},{name:"deck",label:"سطح",icon:"☀️",category:"خارجي"},{name:"yard",label:"فناء",icon:"🏡",category:"خارجي"},{name:"grass",label:"حديقة",icon:"🌿",category:"خارجي"},{name:"park",label:"منتزه",icon:"🌳",category:"خارجي"},{name:"forest",label:"غابة",icon:"🌲",category:"خارجي"},{name:"beach_access",label:"شاطئ",icon:"🏖️",category:"خارجي"},{name:"water",label:"مياه",icon:"💧",category:"خارجي"},{name:"fence",label:"سياج",icon:"🚧",category:"خارجي"},{name:"roofing",label:"سقف",icon:"🏗️",category:"خارجي"},{name:"child_care",label:"رعاية أطفال",icon:"👶",category:"أطفال"},{name:"child_friendly",label:"صديق للأطفال",icon:"👨‍👩‍👧‍👦",category:"أطفال"},{name:"baby_changing_station",label:"غرفة تغيير حفاضات",icon:"👶",category:"أطفال"},{name:"toys",label:"ألعاب",icon:"🧸",category:"أطفال"},{name:"stroller",label:"عربة أطفال",icon:"👶",category:"أطفال"},{name:"pets",label:"حيوانات أليفة",icon:"🐾",category:"حيوانات"},{name:"pet_supplies",label:"مستلزمات حيوانات",icon:"🐕",category:"حيوانات"},{name:"desk",label:"مكتب",icon:"🪑",category:"عمل"},{name:"meeting_room",label:"قاعة اجتماعات",icon:"👥",category:"عمل"},{name:"business_center",label:"مركز أعمال",icon:"💼",category:"عمل"},{name:"computer",label:"كمبيوتر",icon:"💻",category:"عمل"},{name:"scanner",label:"ماسح ضوئي",icon:"📄",category:"عمل"},{name:"fax",label:"فاكس",icon:"📠",category:"عمل"},{name:"mosque",label:"مسجد",icon:"🕌",category:"ديني"},{name:"church",label:"كنيسة",icon:"⛪",category:"ديني"},{name:"synagogue",label:"كنيس",icon:"🕍",category:"ديني"},{name:"temple_hindu",label:"معبد هندوسي",icon:"🛕",category:"ديني"},{name:"temple_buddhist",label:"معبد بوذي",icon:"🏛️",category:"ديني"}],HR=({selectedIcon:e,onSelectIcon:n,onClose:a})=>{const[r,o]=b.useState(""),[d,h]=b.useState("الكل"),g=["الكل",...new Set(Vd.map(f=>f.category))],p=Vd.filter(f=>{const v=f.label.toLowerCase().includes(r.toLowerCase())||f.name.toLowerCase().includes(r.toLowerCase()),j=d==="الكل"||f.category===d;return v&&j});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"اختر أيقونة للمرفق"}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-xl",children:"✕"})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsx("input",{type:"text",placeholder:"ابحث عن أيقونة...",value:r,onChange:f=>o(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>t.jsx("button",{onClick:()=>h(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${d===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsx("div",{className:"grid grid-cols-8 gap-2",children:p.map(f=>t.jsx("button",{onClick:()=>n(f.name),className:`p-3 rounded-lg border-2 transition-all hover:scale-105 ${e===f.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:`${f.label} (${f.name})`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl mb-1",children:f.icon}),t.jsx("span",{className:"text-xs text-gray-600",children:f.label}),t.jsx("code",{className:"text-xs text-gray-400 mt-1",children:f.name})]})},f.name))}),p.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أيقونات مطابقة للبحث"})})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"ملاحظة:"})," هذه الأيقونات متوافقة مع Material Icons في Flutter. استخدم اسم الأيقونة (مثل: Icons.",e||"wifi",") في تطبيق Flutter."]})})]})})},qR=()=>{const{currencies:e,loading:n}=Cc(),a=n?[]:e.map(Oe=>Oe.code),[r,o]=b.useState(""),[d,h]=b.useState(!1),[g,p]=b.useState(1),[f,v]=b.useState(20),[j,S]=b.useState({isAssigned:void 0,propertyId:void 0,isFree:void 0}),T={pageNumber:g,pageSize:f,searchTerm:r||void 0,propertyId:j.propertyId||void 0,isAssigned:j.isAssigned,isFree:j.isFree},{amenitiesData:C,isLoading:N,error:k,createAmenity:A,updateAmenity:D,deleteAmenity:O,assignAmenityToProperty:F}=UR(T),{propertiesData:R}=Sc({}),[H,E]=b.useState(!1),[z,Z]=b.useState(!1),[U,V]=b.useState(!1),[X,W]=b.useState(!1),[B,te]=b.useState(!1),[G,J]=b.useState(null),[q,K]=b.useState(null),[I,se]=b.useState([]),[ne,ae]=b.useState({name:"",description:"",icon:"wifi"}),[ee,le]=b.useState({amenityId:"",name:"",description:"",icon:"wifi"}),[me,Re]=b.useState({propertyId:"",extraCost:{amount:0,currency:"YER",formattedAmount:""},isAvailable:!0,description:"",icon:""}),Pe=()=>{ae({name:"",description:"",icon:"wifi"})},ie=Oe=>{const qe=Vd.find(Ae=>Ae.name===Oe);return qe?qe.icon:"🏠"},Q=(Oe,qe)=>{if(qe)return ie(qe);const Ae=Oe.toLowerCase(),He=Vd.find(ct=>Ae.includes(ct.label.toLowerCase())||Ae.includes(ct.name.toLowerCase()));return He?He.icon:"🏠"},we=Oe=>{K(Oe),V(!0)},Be=Oe=>{K(Oe),le({amenityId:Oe.id,name:Oe.name,description:Oe.description,icon:Oe.icon||"wifi"}),Z(!0)},nt=Oe=>{confirm(`هل أنت متأكد من حذف المرفق "${Oe.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`)&&O.mutate(Oe.id,{onSuccess:()=>{Z(!1),K(null)}})},Qe=Oe=>{K(Oe),W(!0)},it=(Oe,qe)=>{S(Ae=>({...Ae,[Oe]:qe})),p(1)},Ce=()=>{S({isAssigned:void 0,propertyId:void 0,isFree:void 0}),o(""),p(1)},Fe=Oe=>{G==="create"?ae({...ne,icon:Oe}):G==="edit"&&le({...ee,icon:Oe}),te(!1),J(null)},Nt={total:C?.items?.length||0,totalCount:C?.totalCount||0},_t=[{key:"propertyId",label:"الكيان",type:"custom",render:(Oe,qe)=>t.jsx(cc,{value:Oe,onChange:Ae=>qe(Ae),placeholder:"اختر الكيان",className:"w-full"})},{key:"isAssigned",label:"مربوط بكيانات",type:"boolean"},{key:"isFree",label:"مجاني",type:"boolean"}],ut=[{key:"name",title:"المرفق",sortable:!0,render:(Oe,qe)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-2xl ml-3",children:Q(Oe,qe.icon)}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-900",children:Oe}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:qe.description}),qe.icon&&t.jsxs("code",{className:"text-xs text-gray-400",children:["Icons.",qe.icon]})]})]})},{key:"id",title:"المعرف",render:Oe=>t.jsxs("span",{className:"font-mono text-sm text-gray-600",children:[Oe.substring(0,8),"..."]})}],ke=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:we},{label:"تعديل",icon:"✏️",color:"blue",onClick:Be},{label:"ربط بكيان",icon:"🔗",color:"green",onClick:Qe},{label:"حذف",icon:"🗑️",color:"red",onClick:nt}];return k?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات المرافق. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المرافق"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إنشاء وتحديث المرافق المتاحة في النظام وربطها بالكيانات المختلفة مع دعم الأيقونات الديناميكية"})]}),t.jsx("button",{onClick:()=>E(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة مرفق جديد"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🏠"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي المرافق"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Nt.totalCount})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🔗"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مربوطة بكيانات"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:"-"})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🎨"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"أيقونات متاحة"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Vd.length})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في المرافق (الاسم أو الوصف)...",searchValue:r,onSearchChange:o,filters:_t,filterValues:j,onFilterChange:it,onReset:Ce,showAdvanced:d,onToggleAdvanced:()=>h(!d)}),t.jsx(ls,{data:C?.items||[],columns:ut,loading:N,pagination:{current:g,total:C?.totalCount||0,pageSize:f,onChange:(Oe,qe)=>{p(Oe),v(qe)}},rowSelection:{selectedRowKeys:I,onChange:se},actions:ke,onRowClick:we}),t.jsx(Mt,{isOpen:H,onClose:()=>E(!1),title:"إضافة مرفق جديد",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>A.mutate(ne,{onSuccess:()=>{E(!1),Pe()}}),disabled:A.status==="pending"||!ne.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:A.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المرفق *"}),t.jsx("input",{type:"text",value:ne.name,onChange:Oe=>ae(qe=>({...qe,name:Oe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم المرفق"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{J("create"),te(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:ie(ne.icon)}),t.jsx("span",{className:"text-sm",children:ne.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",ne.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف المرفق *"}),t.jsx("textarea",{rows:3,value:ne.description,onChange:Oe=>ae(qe=>({...qe,description:Oe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل وصف تفصيلي للمرفق"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:ie(ne.icon)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",ne.icon]})]})]})]})]})}),t.jsx(Mt,{isOpen:z,onClose:()=>{Z(!1),K(null)},title:"تعديل بيانات المرفق",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{Z(!1),K(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>D.mutate({amenityId:ee.amenityId,data:ee},{onSuccess:()=>{Z(!1),K(null)}}),disabled:D.status==="pending"||!ee.name?.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:D.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:q&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المرفق"}),t.jsx("input",{type:"text",value:ee.name||"",onChange:Oe=>le(qe=>({...qe,name:Oe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{J("edit"),te(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:ie(ee.icon||"wifi")}),t.jsx("span",{className:"text-sm",children:ee.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",ee.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف المرفق"}),t.jsx("textarea",{rows:3,value:ee.description||"",onChange:Oe=>le(qe=>({...qe,description:Oe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:ie(ee.icon||"wifi")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",ee.icon]})]})]})]})]})}),t.jsx(Mt,{isOpen:U,onClose:()=>{V(!1),K(null)},title:"تفاصيل المرفق",size:"lg",children:q&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-6xl",children:Q(q.name,q.icon)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:q.name}),t.jsx("p",{className:"text-gray-600 mt-1",children:q.description})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف المرفق"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:q.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الأيقونة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:q.icon?`Icons.${q.icon}`:"غير محدد"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.description})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"معلومات إضافية"}),t.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"يمكن ربط هذا المرفق بالكيانات مع تحديد تكلفة إضافية وحالة التوفر لكل كيان. الأيقونة المحددة متوافقة مع Material Icons في Flutter."})]})]})})]})}),t.jsx(Mt,{isOpen:X,onClose:()=>{W(!1),K(null)},title:"ربط المرفق بكيان",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{W(!1),K(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>F.mutate({amenityId:q.id,propertyId:me.propertyId,data:{amenityId:q.id,propertyId:me.propertyId}},{onSuccess:()=>{W(!1),K(null)}}),disabled:F.status==="pending"||!me.propertyId,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:F.status==="pending"?"جارٍ الربط...":"ربط المرفق"})]}),children:q&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-green-400 text-xl",children:"🔗"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"ربط المرفق بكيان"}),t.jsxs("p",{className:"mt-2 text-sm text-green-700",children:['سيتم ربط المرفق "',t.jsx("strong",{children:q.name}),'" بالكيان المحدد مع إمكانية تحديد تكلفة إضافية.']})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"معرف الكيان *"}),t.jsxs("select",{value:me.propertyId,onChange:Oe=>Re(qe=>({...qe,propertyId:Oe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"اختر كيان"}),R?.items.map(Oe=>t.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"التكلفة الإضافية"}),t.jsx(Zl,{value:me.extraCost.amount,currency:me.extraCost.currency,onValueChange:(Oe,qe)=>Re(Ae=>({...Ae,extraCost:{amount:Oe,currency:qe,formattedAmount:""}})),placeholder:"0",required:!1,showSymbol:!0,supportedCurrencies:a,direction:"ltr"})]})}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isAvailable",checked:me.isAvailable,onChange:Oe=>Re(qe=>({...qe,isAvailable:Oe.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isAvailable",className:"mr-2 block text-sm text-gray-900",children:"متاح في الكيان"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف إضافي"}),t.jsx("textarea",{rows:2,value:me.description,onChange:Oe=>Re(qe=>({...qe,description:Oe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل وصف إضافي للمرفق في هذا الكيان (اختياري)"})]})]})}),B&&t.jsx(HR,{selectedIcon:G==="create"?ne.icon:ee.icon||"wifi",onSelectIcon:Fe,onClose:()=>{te(!1),J(null)}})]})};class nx{static async getAll(n){return(await je.get("/api/admin/reviews",{params:n})).data.data||[]}static async approve(n){return je.post(`/api/admin/reviews/${n}/approve`).then(a=>a.data)}static async deleteReview(n){return je.delete(`/api/admin/reviews/${n}`).then(a=>a.data)}}const YR=e=>{const n=In(),{data:a,isLoading:r,error:o}=zt({queryKey:["admin-reviews",e],queryFn:()=>nx.getAll(e)}),d=Ie({mutationFn:g=>nx.approve(g),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reviews",e]})}}),h=Ie({mutationFn:g=>nx.deleteReview(g),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reviews",e]})}});return{reviewsData:a,isLoading:r,error:o,approveReview:d,deleteReview:h}},VR=["كلب","حيوان","حقير","حثالة","زبالة","قذر","وغد","سافل","منحط","تافه","غبي","أحمق","مغفل","معتوه","أبله","متخلف","جاهل","زنديق","كافر","ملحد","فاسق","عاهر","داعرة","شرموطة","قحبة","ابن حرام","ابن كلب","لعين","ملعون","سخيف","وقح","جحش","حمار","ثور","خنزير","قرد","نذل","خسيس","واطي","عرة","زفت","خرا","تبا","اللعنة","جنس","نيك","طيز","كس","زب","بزاز","مؤخرة","لعق","مص","شهوة","مني","بول","براز","شاذ","لوطي","مثلي","سحاقية","ديوث","خول","عرص","متناك","منيوك","ميبون","مخنث","فاجر","زاني","زانية","قاتل","مجرم","إرهابي","داعشي","نصاب","حرامي","سارق","محتال","كذاب","دجال","منافق","خائن","عميل","جاسوس","عنصري","متعصب","كريه","مقرف","نتن","معفن","عفن","جيفة","رمة","مريض","نفسية","مختل","مجنون","مهووس","سفيه","تافه","حثالة المجتمع","عديم الأخلاق","عديم الشرف","عديم الكرامة","بذيء","فاحش","منحل","فاسد","مفسد","شرير","لص","وغد","حثالة","قمامة","قواد","دعارة","بغاء","زنا","لواط","سحاق","اغتصاب","تحرش","شتم","سب","لعن","بصق","حمارة","كلبة","خنزيرة","بقرة","تيس","صايع","ضايع","داشر","هامل","سكير","عربيد","سكران","محشش","مدمن","شمام","صعلوك","متشرد","شحات","طرار","متسول","جزمه","صرماية","كندرة","نعال","شبشب","يا ابن الكلب","يا ابن الشرموطة","يا ابن القحبة","يلعن ابوك","يلعن امك","يلعن دينك","يلعن ربك","يلعن عرضك","يلعن شرفك","كس امك","طيز امك","اخو الشرموطة","اخو القحبة","اخت العاهرة","يا عرص","يا ديوث","يا خول","يا متناك","يا منيوك","يا لوطي","يا شاذ","يا وسخ","يا قذر","يا زبالة","يا حقير","يا نذل","يا واطي","يا خسيس","يا تافه","يا سخيف","يا غبي","يا احمق","يا حمار","يا كلب","يا حيوان","يا خنزير","يا معفن","يا نتن","يا كريه","يا بغيض","يا علة","يا مصيبة","يا بلوة","يا داشر","يا صايع","يا فاشل","يا عاطل","يا باطل","يا حرامي","يا نصاب","يا كذاب","يا دجال","يا منافق","يا خائن","يا عميل","يا جاسوس","يا عنصري","يا متخلف","يا جاهل","يا بدائي","يا همجي","يا بربري","يا متوحش","يا ارهابي","يا مجرم","يا قاتل","يا سفاح","يا جلاد","يا طاغية","يا ظالم","يا مستبد","يا دكتاتور","يا فاسد","يا مفسد","يا شرير","يا شيطان","يا ابليس","يا لعين","يا ملعون","يا منبوذ","يا مكروه","يا بغيض","يا مقيت","يا تافه","يا رخيص","يا ساقط","يا لقيط","يا ابن الزنا","يا ابن الحرام","يا عديم الاصل","يا قليل الادب","يا قليل الحياء","يا قليل التربية","يا عديم التربية","يا عديم الضمير","يا عديم الانسانية","يا عديم المروءة","يا عديم النخوة","يا جبان","يا خواف","يا رعديد","يا خنوع","يا ذليل","يا مهان","يا منكسر","يا ضعيف","يا مسكين","يا فقير","يا معدم","يا بائس","يا تعيس","يا شقي","يا منحوس","يا فقر","يا نكد","يا هم","يا غم","يا حزن","يا كآبة","يا احباط","يا يأس","يا قنوط","يا فشل","يا خيبة","يا حسرة","يا ندم","يا ألم","يا وجع","يا عذاب","يا جحيم","يا نار","يا سقر","يا ويل","يا ثبور","يا هلاك","يا دمار","يا خراب","يا موت","يا قتل","يا ذبح","يا سلخ","يا حرق","يا غرق","يا نسف","يا تفجير","يا تدمير","يا ابادة","يا مجزرة","يا مذبحة","يا محرقة","يا هولوكوست","يا جريمة","يا جناية","يا معصية","يا ذنب","يا خطيئة","يا اثم","يا وزر","يا سيئة","يا فاحشة","يا منكر","يا بغي","يا عدوان","يا ظلم","يا جور","يا طغيان","يا استبداد","يا قهر","يا قمع","يا اضطهاد","يا تعذيب","يا تنكيل","يا اهانة","يا اذلال","يا احتقار","يا ازدراء","يا سخرية","يا استهزاء","يا تهكم","يا شماتة","يا غيبة","يا نميمة","يا بهتان","يا افتراء","يا كذب","يا زور","يا بهتان","يا خداع","يا غش","يا تدليس","يا تزوير","يا تحريف","يا سرقة","يا نهب","يا سلب","يا اختلاس","يا رشوة","يا فساد","يا محسوبية","يا واسطة","يا استغلال","يا احتكار","يا ربا","يا قمار","يا ميسر","يا سكر","يا خمر","يا مخدرات","يا حشيش","يا افيون","يا كوكايين","يا هيروين","يا ادمان","يا دعارة","يا بغاء","يا زنا","يا لواط","يا سحاق","يا شذوذ","يا انحراف","يا فسوق","يا عصيان","يا تمرد","يا خروج","يا فتنة","يا فوضى","يا شغب","يا عنف","يا ارهاب","يا تطرف","يا غلو","يا تعصب","يا كراهية","يا حقد","يا ضغينة","يا حسد","يا غيرة","يا بغضاء","يا عداوة","يا كره","يا بغض","يا مقت","يا ازدراء","يا احتقار","يا استعلاء","يا تكبر","يا غرور","يا عجرفة","يا صلف","يا غطرسة","يا خيلاء","يا بطر","يا أشر","يا مرح","يا لهو","يا لعب","يا عبث","يا باطل","يا هراء","يا سفه","يا جهل","يا حمق","يا غباء","يا بلاهة","يا تخلف","يا بلادة","يا غفلة","يا سهو","يا نسيان","يا شرود","يا توهان","يا ضياع","يا حيرة","يا تردد","يا شك","يا ريبة","يا ظن","يا وهم","يا خيال","يا سراب","يا حلم","يا كابوس","يا وسواس","يا قلق","يا خوف","يا رعب","يا فزع","يا هلع","يا جزع","يا رهبة","يا خشية","يا تقية","يا نفاق","يا رياء","يا سمعة","يا تظاهر","يا تصنع","يا تكلف","يا ادعاء","يا كبر","يا عجب","يا من","يا أذى","يا ضرر","يا سوء","يا شر","يا بلاء","يا مصيبة","يا كارثة","يا نكبة","يا فاجعة","يا رزية","يا محنة","يا شدة","يا ضيق","يا كرب","يا عسر","يا مشقة","يا عناء","يا تعب","يا نصب","يا وصب","يا سقم","يا مرض","يا علة","يا داء","يا وباء","يا طاعون","يا جائحة","يا آفة","يا عاهة","يا نقص","يا عيب","يا وصمة","يا عار","يا خزي","يا فضيحة","يا هتك","يا كشف","يا تعرية","يا تجريس","يا تشهير","يا قذف","يا ثلب","يا لمز","يا همز","يا طعن","يا تجريح","يا انتقاد","يا لوم","يا عتب","يا توبيخ","يا تقريع","يا زجر","يا نهر","يا صد","يا رفض","يا نبذ","يا هجر","يا قطيعة","يا خصام","يا نزاع","يا شقاق","يا خلاف","يا صراع","يا قتال","يا حرب","يا معركة","يا موقعة","يا غزوة","يا عدوان","يا احتلال","يا استعمار","يا استعباد","يا رق","يا عبودية","يا سخرة","يا استغلال","يا اضطهاد","يا تمييز","يا عنصرية","يا طبقية","يا طائفية","يا قبلية","يا عشائرية","يا عصبية","يا جاهلية","يا همجية","يا وحشية","يا بربرية","يا تخلف","يا رجعية","يا انحطاط","يا تدهور","يا انهيار","يا سقوط","يا فناء","يا زوال","يا اندثار","يا انقراض","يا عدم","يا فراغ","يا خواء","يا صفر","يا لا شيء","يا هباء","يا رماد","يا تراب","يا طين","يا وحل","يا مستنقع","يا بالوعة","يا مجاري","يا مزبلة","يا مكب","يا قمامة","يا زبالة","يا قذارة","يا وسخ","يا دنس","يا رجس","يا نجس","يا عفن","يا نتانة","يا خياس","يا صنان","يا زنخة","يا قرف","يا اشمئزاز","يا غثيان","يا تقيؤ","يا استفراغ","يا بصاق","يا مخاط","يا صديد","يا قيح","يا دم","يا جيفة","يا رمم","يا جثة","يا ميت","يا هالك","يا فان","يا زائل","يا منته","يا تافه","يا حقير","يا وضيع","يا دنيء","يا خسيس","يا نذل","يا وغد","يا سافل","يا منحط","يا ساقط","يا لقيط","يا هجين","يا منبوذ","يا مطرود","يا مبعد","يا منفي","يا غريب","يا أجنبي","يا دخيل","يا طفيلي","يا علقة","يا جرثومة","يا فيروس","يا سرطان","يا وباء","يا طاعون","يا آفة","يا نكبة","يا مصيبة","يا كارثة","يا داهية","يا بلية","يا رزية","يا نائبة","يا خطب","يا فادح","يا جسيم","يا عظيم","يا مهول","يا فظيع","يا شنيع","يا بشع","يا قبيح","يا دمدميم","يا مشوه","يا ناقص","يا معيب","يا مختل","يا معتوه","يا مجنون","يا اهبل","يا طرطور","يا خيال مآتة","يا اراجوز","يا بهلوان","يا مهرج","يا مسخرة","يا اضحوكة","يا مهزلة","يا عار","يا وصمة","يا شنار","يا خزي","يا ذل","يا هوان","يا صغار","يا انكسار","يا هزيمة","يا فشل","يا اخفاق","يا خيبة","يا حسرة","يا ندم","يا اسف","يا حزن","يا كمد","يا لوعة","يا حرقة","يا غصة","يا الم","يا وجع","يا معاناة","يا شقاء","يا بؤس","يا تعاسة","يا حرمان","يا فقر","يا عوز","يا حاجة","يا فاقة","يا املاق","يا عيلة","يا مسكنة","يا ذلة","يا ضعة","يا هوان","يا خنوع","يا استكانة","يا خضوع","يا انقياد","يا تبعية","يا عمالة","يا خيانة","يا غدر","يا نكث","يا حنث","يا كفر","يا جحود","يا نكران","يا عقوق","يا تمرد","يا عصيان","يا فسوق","يا فجور","يا طغيان","يا بغي","يا عدوان","يا ظلم","يا جور","يا حيف","يا غبن","يا هضم","يا بخس","يا تطفيف","يا غش","يا خداع","يا مكر","يا كيد","يا حيلة","يا دهاء","يا خبث","يا لؤم","يا دناءة","يا خسة","يا نذالة","يا حقارة","يا سفالة","يا انحطاط","يا بذاءة","يا فحش","يا خلاعة","يا مجون","يا تهتك","يا اباحية","يا عري","يا فضيحة","يا تشهير","يا قذف","يا سب","يا شتم","يا لعن","يا تجديف","يا كفر","يا الحاد","يا زندقة","يا هرطقة","يا بدعة","يا ضلالة","يا غواية","يا فتنة","يا شرك","يا وثنية","يا عبادة الاصنام","يا سحر","يا شعوذة","يا دجل","يا كهانة","يا عرافة","يا تنجيم","يا تطير","يا تشاؤم","يا نحس","يا سوء طالع","يا بؤس","يا شقاء","يا هلاك","يا دمار","يا فناء","يا موت","يا جحيم","يا سقر","يا لظى","يا سعير","يا هاوية","يا درك اسفل","مطفح","زعطان","عصيد","ملطام","صرم","بهايم","ملقوف","ملاقيف","مطففين","زعاطيط","هبلان","مصروع","مخبول","مخرف","خروف","بايخ","سامج","غثيث","علة","نشبة","لزقة","غلس","ثقيل دم","ملطشة","ممسحة","خدامة","شغالة","عبيط","ساذج","دلخ","لوح","تنكة","حيط","جدار","صخرة","عنز","جحشة","قردة","حية","عقربة","حشرة","صرصور","ذبانة","ناموسة","برغوث","قملة","صيبان","جرثومة","بكتيريا","جرب","برص","بهاق","جذام","سل","كوليرا","شؤم","نحس","حظ عاثر","فال سيء","قهر","غبن","حيف","جور","سفك دماء","هرطقة","ضلالة","غواية","شرك","وثنية","كهانة","عرافة","تنجيم","تطير","تشاؤم","يا مطفح","يا زعطان","يا اهبل","يا عصيد","يا ملطام","يا صرم","يا بهايم","يا ثور","يا جحش","يا ملقوف","يا ملاقيف","يا مطففين","يا زعاطيط","يا هبلان","يا مصروع","يا مجنون","يا مخبول","يا مخرف","يا خروف","يا قليل الادب","يا عديم التربية","يا سافل","يا واطي","يا حقير","يا نذل","يا تافه","يا سخيف","يا بايخ","يا سامج","يا غثيث","يا علة","يا نشبة","يا لزقة","يا غلس","يا ثقيل دم","يا مكروه","يا بغيض","يا كريه","يا مقرف","يا معفن","يا وسخ","يا قذر","يا زبالة","يا حثالة","يا عار","يا فضيحة","يا مسخرة","يا مهزلة","يا اضحوكة","يا ملطشة","يا ممسحة","يا خدامة","يا شغالة","يا عبد","يا اسود","يا ابيض","يا عنصري","يا متخلف","يا جاهل","يا امي","يا غبي","يا احمق","يا ابله","يا معتوه","يا مجنون","يا مخبل","يا مصروع","يا مخرف","يا خروف","يا طرطور","يا اهبل","يا عبيط","يا ساذج","يا مغفل","يا دلخ","يا لوح","يا تنكة","يا حيط","يا جدار","يا صخرة","يا بقرة","يا تيس","يا عنز","يا جحشة","يا كلبة","يا خنزيرة","يا قردة","يا حية","يا عقربة","يا حشرة","يا صرصور","يا ذبانة","يا ناموسة","يا برغوث","يا قملة","يا صيبان","يا جرثومة","يا فيروس","يا بكتيريا","يا طفيلي","يا وباء","يا مرض","يا سرطان","يا ايدز","يا جرب","يا برص","يا بهاق","يا جذام","يا سل","يا كوليرا","يا طاعون","يا موت","يا هلاك","يا دمار","يا خراب","يا فشل","يا خيبة","يا حسرة","يا ندم","يا قهر","يا غبن","يا ظلم","يا حيف","يا جور","يا استغلال","يا سرقة","يا نهب","يا سلب","يا نصب","يا احتيال","يا كذب","يا دجل","يا نفاق","يا خيانة","يا غدر","يا عمالة","يا جاسوسية","يا دعارة","يا زنا","يا لواط","يا سحاق","يا شذوذ","يا انحراف","يا فسق","يا فجور","يا عربدة","يا سكر","يا خمر","يا حشيش","يا مخدرات","يا ادمان","يا قمار","يا ميسر","يا ربا","يا رشوة","يا فساد","يا محسوبية","يا واسطة","يا ظلم","يا قهر","يا استبداد","يا طغيان","يا ارهاب","يا عنف","يا قتل","يا اجرام","يا سفك دماء","يا حرب","يا فتنة","يا شقاق","يا نزاع","يا خلاف","يا صراع","يا عداوة","يا كراهية","يا حقد","يا ضغينة","يا حسد","يا غيرة","يا نميمة","يا غيبة","يا بهتان","يا افتراء","يا قذف","يا سب","يا شتم","يا لعن","يا تجديف","يا كفر","يا الحاد","يا زندقة","يا هرطقة","يا بدعة","يا ضلالة","يا غواية","يا شرك","يا وثنية","يا سحر","يا شعوذة","يا دجل","يا كهانة","يا عرافة","يا تنجيم","يا تطير","يا تشاؤم","يا نحس","يا شؤم","يا فال سيء","يا حظ عاثر","يا سوء طالع","يا بؤس","يا شقاء","يا تعاسة","يا حرمان","يا فقر","يا عوز","يا حاجة","يا فاقة","يا املاق","يا مسكنة","يا ذل","يا هوان","يا صغار","يا انكسار","يا هزيمة","يا خزي","يا عار","يا فضيحة","يا وصمة","يا شنار","يا جبن","يا خوف","يا رعب","يا فزع","يا هلع","يا جزع","يا رهبة","يا خشية","يا تقية","يا نفاق","يا رياء","يا سمعة","يا تظاهر","يا تصنع","يا تكلف","يا ادعاء","يا كبر","يا غرور","يا عجب","يا صلف","يا غطرسة","يا خيلاء","يا بطر","يا اشر","يا مرح","يا لهو","يا لعب","يا عبث","يا باطل","يا هراء","يا سفه","يا جهل","يا حمق","يا غباء","يا بلاهة","يا تخلف","يا بلادة","يا غفلة","يا سهو","يا نسيان","يا شرود","يا توهان","يا ضياع","يا حيرة","يا تردد","يا شك","يا ريبة","يا ظن","يا وهم","يا خيال","يا سراب","يا حلم","يا كابوس","يا وسواس","يا قلق","يا هم","يا غم","يا حزن","يا كآبة","يا احباط","يا يأس","يا قنوط"],Zo=.9;function ZR(e,n){if(e===n)return 1;const a=e.length,r=n.length,o=Math.floor(Math.max(a,r)/2)-1,d=Array(a).fill(!1),h=Array(r).fill(!1);let g=0;for(let v=0;v<a;v++){const j=Math.max(0,v-o),S=Math.min(v+o+1,r);for(let T=j;T<S;T++)if(!h[T]&&e[v]===n[T]){d[v]=h[T]=!0,g++;break}}if(g===0)return 0;let p=0,f=0;for(let v=0;v<a;v++)if(d[v]){for(;!h[f];)f++;e[v]!==n[f]&&p++,f++}return p=p/2,(g/a+g/r+(g-p)/g)/3}function KR(e,n,a=.1){const r=ZR(e,n);let o=0;const d=Math.min(4,Math.min(e.length,n.length));for(let h=0;h<d&&e[h]===n[h];h++)o++;return r+o*a*(1-r)}function Oj(e){const n=e.trim().toLowerCase();if(!n)return 0;let a=0;for(const r of VR){const o=KR(n,r.toLowerCase());o>a&&(a=o)}return a}function WR(e){const n=new Date,a=typeof e=="string"?new Date(e):e,r=n.getTime()-a.getTime(),o=Math.floor(r/1e3);if(o<60)return o<=1?"منذ ثانية واحدة":o===2?"منذ ثانيتين":`منذ ${o} ثوانٍ`;const d=Math.floor(o/60);if(d<60)return d===1?"منذ دقيقة واحدة":d===2?"منذ دقيقتين":`منذ ${d} ${d<5?"دقائق":"دقيقة"}`.replace("دقيقة","دقائق");const h=Math.floor(d/60);if(h<24)return h===1?"منذ ساعة واحدة":h===2?"منذ ساعتين":`منذ ${h} ساعات`;const g=Math.floor(h/24);if(g<7)return g===1?"منذ يوم واحد":g===2?"منذ يومين":`منذ ${g} أيام`;const p=Math.floor(g/7);if(p<5)return p===1?"منذ أسبوع واحد":p===2?"منذ أسبوعين":`منذ ${p} أسابيع`;const f=Math.floor(g/30);if(f<12)return f===1?"منذ شهر واحد":f===2?"منذ شهرين":`منذ ${f} أشهر`;const v=Math.floor(f/12);return v===1?"منذ عام واحد":v===2?"منذ عامين":`منذ ${v} سنوات`}const GR=()=>{const[e,n]=b.useState(""),[a,r]=b.useState(!1),[o,d]=b.useState(1),[h,g]=b.useState(20),[p,f]=b.useState({status:"pending",minRating:"",maxRating:"",hasImages:void 0,propertyId:"",userId:"",startDate:"",endDate:"",unitId:""}),[v,j]=b.useState(!1),[S,T]=b.useState(!1),[C,N]=b.useState(!1),[k,A]=b.useState(!1),[D,O]=b.useState(null),[F,R]=b.useState([]),[H,E]=b.useState([]),[z,Z]=b.useState({responseText:"",ownerId:""}),U={status:p.status,minRating:p.minRating?parseFloat(p.minRating):void 0,maxRating:p.maxRating?parseFloat(p.maxRating):void 0,hasImages:p.hasImages,propertyId:p.propertyId||void 0,unitId:p.unitId||void 0,userId:p.userId||void 0,reviewedAfter:p.startDate||void 0,reviewedBefore:p.endDate||void 0,pageNumber:o,pageSize:h},{reviewsData:V,isLoading:X,error:W,approveReview:B,deleteReview:te}=YR(U);Sc({pageNumber:1,pageSize:100}),F0({});const G=ie=>{O(ie),j(!0)},J=ie=>{O(ie),T(!0)},q=ie=>{O(ie),N(!0)},K=ie=>{O(ie),E(ie.images||[]),A(!0)},I=(ie,Q)=>{f(we=>({...we,[ie]:Q})),d(1)},se=()=>{f({status:"pending",minRating:"",maxRating:"",hasImages:void 0,propertyId:"",userId:"",startDate:"",endDate:"",unitId:""}),n(""),d(1)},ne=ie=>{const Q=[ie.cleanliness,ie.service,ie.location,ie.value];return(Q.reduce((Be,nt)=>Be+nt,0)/Q.length).toFixed(1)},ae=ie=>{const Q=Math.floor(ie),we=ie%1!==0,Be=5-Math.ceil(ie);return t.jsxs("div",{className:"flex items-center",children:["⭐".repeat(Q),we&&"⭐","☆".repeat(Be),t.jsxs("span",{className:"text-sm text-gray-600 mr-1",children:["(",ie,")"]})]})},ee=ie=>ie>=4.5?"text-green-600":ie>=3.5?"text-yellow-600":ie>=2.5?"text-orange-600":"text-red-600",le={total:Array.isArray(V)?V.length:0,pending:Array.isArray(V)?V.filter(ie=>p.status==="pending").length:0,approved:0,withImages:Array.isArray(V)?V.filter(ie=>ie.images&&ie.images.length>0).length:0,averageRating:Array.isArray(V)&&V.length>0?(V.reduce((ie,Q)=>ie+parseFloat(ne(Q)),0)/V.length).toFixed(1):"0.0"},me=[{key:"status",label:"حالة التقييم",type:"select",options:[{value:"pending",label:"معلق للموافقة"},{value:"approved",label:"معتمد"},{value:"rejected",label:"مرفوض"},{value:"all",label:"جميع التقييمات"}]},{key:"minRating",label:"الحد الأدنى للتقييم",type:"number",placeholder:"1.0"},{key:"maxRating",label:"الحد الأقصى للتقييم",type:"number",placeholder:"5.0"},{key:"hasImages",label:"يحتوي على صور",type:"boolean"},{key:"propertyId",label:"الكيان",type:"custom",render:(ie,Q)=>t.jsx(cc,{value:ie,onChange:we=>Q(we),placeholder:"اختر الكيان",className:"w-full"})},{key:"unitId",label:"الوحدة",type:"custom",render:(ie,Q)=>t.jsx(U0,{value:ie,onChange:we=>Q(we),placeholder:"اختر الوحدة",propertyId:p.propertyId,className:"w-full",disabled:!p.propertyId})},{key:"userId",label:"المستخدم",type:"custom",render:(ie,Q)=>t.jsx(Vl,{value:ie,onChange:we=>Q(we),placeholder:"اختر المستخدم",className:"w-full"})},{key:"startDate",label:"تاريخ البداية",type:"date"},{key:"endDate",label:"تاريخ النهاية",type:"date"}],Re=[{key:"propertyName",title:"الكيان",sortable:!0,render:ie=>t.jsx("span",{className:"text-sm text-gray-900",children:ie})},{key:"userName",title:"المستخدم",sortable:!0,render:ie=>t.jsx("span",{className:"text-sm text-gray-900",children:ie})},{key:"cleanliness",title:"التقييم الإجمالي",render:(ie,Q)=>{const we=parseFloat(ne(Q));return t.jsxs("div",{className:"flex flex-col",children:[ae(we),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.jsxs("span",{children:["نظافة: ",Q.cleanliness]})," |",t.jsxs("span",{children:[" خدمة: ",Q.service]})," |",t.jsxs("span",{children:[" موقع: ",Q.location]})," |",t.jsxs("span",{children:[" قيمة: ",Q.value]})]})]})}},{key:"comment",title:"التعليق",render:ie=>{const Q=ie.split(/(\s+)/);return t.jsx("div",{className:"max-w-xs",title:ie,children:t.jsx("p",{className:"text-sm text-gray-900",children:Q.map((we,Be)=>{const nt=Oj(we);if(nt>=Zo){const Qe=(nt-Zo)/(1-Zo),it=Math.round(253+-33*Qe),Ce=Math.round(186+-148*Qe),Fe=Math.round(116+-78*Qe);return t.jsx("span",{style:{color:`rgb(${it},${Ce},${Fe})`,fontWeight:"bold"},children:we},Be)}return t.jsx("span",{children:we},Be)})})})}},{key:"images",title:"الصور",render:ie=>t.jsx("div",{className:"flex items-center",children:ie&&ie.length>0?t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-green-600 text-lg",children:"📷"}),t.jsxs("span",{className:"text-sm text-gray-600 mr-1",children:["(",ie.length,")"]})]}):t.jsx("span",{className:"text-gray-400 text-sm",children:"لا توجد صور"})})},{key:"createdAt",title:"تاريخ التقييم",sortable:!0,render:ie=>t.jsxs("span",{className:"text-sm text-gray-500",children:[new Date(ie).toLocaleDateString("ar-SA")," ",t.jsxs("span",{className:"text-xs text-gray-400",children:["(",WR(ie),")"]})]})}],Pe=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:G},{label:"عرض الصور",icon:"📷",color:"green",onClick:K,show:ie=>ie.images&&ie.images.length>0},{label:"الموافقة",icon:"✅",color:"green",onClick:J,show:ie=>p.status==="pending"},{label:"حذف",icon:"🗑️",color:"red",onClick:q}];return W?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات التقييمات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة التقييمات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراجعة وإدارة تقييمات العملاء، الموافقة على التقييمات المعلقة، وإدارة الصور المرفقة"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📝"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي التقييمات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.total})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة للموافقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:le.pending})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معتمدة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:le.approved})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📷"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"تحتوي على صور"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:le.withImages})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-amber-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⭐"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"متوسط التقييم"}),t.jsx("p",{className:`text-2xl font-bold ${ee(parseFloat(le.averageRating))}`,children:le.averageRating})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في التقييمات (التعليق أو معرف الحجز)...",searchValue:e,onSearchChange:n,filters:me,filterValues:p,onFilterChange:I,onReset:se,showAdvanced:a,onToggleAdvanced:()=>r(!a)}),t.jsx(ls,{data:Array.isArray(V)?V:[],columns:Re,loading:X,pagination:{current:o,total:Array.isArray(V)?V.length:0,pageSize:h,onChange:(ie,Q)=>{d(ie),g(Q)}},rowSelection:{selectedRowKeys:F,onChange:R},actions:Pe,onRowClick:G}),t.jsx(Mt,{isOpen:v,onClose:()=>{j(!1),O(null)},title:"تفاصيل التقييم",size:"xl",children:D&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["التقييم الإجمالي: ",ne(D)]}),ae(parseFloat(ne(D)))]}),t.jsx("div",{className:"text-sm text-gray-500",children:new Date(D.createdAt).toLocaleString("ar-SA")})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D.cleanliness}),t.jsx("div",{className:"text-sm text-gray-600",children:"النظافة"}),ae(D.cleanliness)]}),t.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.service}),t.jsx("div",{className:"text-sm text-gray-600",children:"الخدمة"}),ae(D.service)]}),t.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:D.location}),t.jsx("div",{className:"text-sm text-gray-600",children:"الموقع"}),ae(D.location)]}),t.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:D.value}),t.jsx("div",{className:"text-sm text-gray-600",children:"القيمة مقابل المال"}),ae(D.value)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تعليق العميل"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsx("p",{className:"text-gray-900",children:D.comment.split(/(\s+)/).map((ie,Q)=>{const we=Oj(ie);if(we>=Zo){const Be=(we-Zo)/(1-Zo),nt=Math.round(253+-33*Be),Qe=Math.round(186+-148*Be),it=Math.round(116+-78*Be);return t.jsx("span",{style:{color:`rgb(${nt},${Qe},${it})`,fontWeight:"bold"},children:ie},Q)}return t.jsx("span",{children:ie},Q)})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف التقييم"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:D.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:D.bookingId})]})]}),D.images&&D.images.length>0&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الصور المرفقة (",D.images.length,")"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:D.images.slice(0,4).map((ie,Q)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:ie.url,alt:ie.altText,className:"w-full h-20 object-cover rounded-lg"}),Q===3&&D.images.length>4&&t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium",children:["+",D.images.length-4]})})]},ie.id))}),t.jsx("button",{onClick:()=>K(D),className:"mt-2 text-blue-600 text-sm hover:text-blue-800",children:"عرض جميع الصور"})]})]})}),t.jsx(Mt,{isOpen:k,onClose:()=>{A(!1),E([]),O(null)},title:"صور التقييم",size:"xl",children:t.jsx("div",{className:"space-y-4",children:H.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:H.map(ie=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("img",{src:ie.url,alt:ie.altText,className:"w-full h-48 object-cover rounded-lg"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"font-medium text-gray-900",children:ie.caption}),t.jsx("p",{className:"text-gray-500",children:ie.name}),t.jsxs("p",{className:"text-gray-400",children:[(ie.sizeBytes/1024/1024).toFixed(2)," MB"]})]})]},ie.id))}):t.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد صور لعرضها"})})}),t.jsx(Mt,{isOpen:S,onClose:()=>{T(!1),O(null)},title:"الموافقة على التقييم",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{T(!1),O(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>B.mutate(D.id),disabled:B.status==="pending",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:B.status==="pending"?"جارٍ الموافقة...":"الموافقة على التقييم"})]}),children:D&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-green-400 text-xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"تأكيد الموافقة على التقييم"}),t.jsx("p",{className:"mt-2 text-sm text-green-700",children:"سيتم الموافقة على التقييم وإتاحته للعرض العام. هل أنت متأكد من المتابعة؟"})]})]})}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"معاينة التقييم:"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"flex items-center",children:ae(parseFloat(ne(D)))}),t.jsx("p",{className:"text-gray-900 mt-2",children:D.comment})]})]})]})}),t.jsx(Mt,{isOpen:C,onClose:()=>{N(!1),O(null)},title:"حذف التقييم",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{N(!1),O(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>te.mutate(D.id),disabled:te.status==="pending",className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:te.status==="pending"?"جارٍ الحذف...":"حذف التقييم"})]}),children:D&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-red-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"تأكيد حذف التقييم"}),t.jsx("p",{className:"mt-2 text-sm text-red-700",children:"سيتم حذف التقييم نهائياً ولن يمكن استرداده. هذا الإجراء لا يمكن التراجع عنه."})]})]})}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"التقييم المراد حذفه:"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"flex items-center",children:ae(parseFloat(ne(D)))}),t.jsx("p",{className:"text-gray-900 mt-2",children:D.comment})]})]})]})})]})},Wl=({title:e,description:n,icon:a,comingSoon:r=!1})=>t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:a}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),t.jsx("p",{className:"text-gray-600 mb-6",children:n}),r&&t.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-50 text-blue-700 rounded-lg",children:[t.jsx("span",{className:"ml-2",children:"🚧"}),t.jsx("span",{className:"font-medium",children:"قريباً"})]})]})}),QR=()=>t.jsx(Wl,{title:"إدارة الإشعارات",description:"إرسال إشعارات عامة لجميع المستخدمين أو إشعارات محددة لمستخدمين معينين",icon:"🔔",comingSoon:!0});class Pl{static API_BASE="/api/admin/Reports";static async getAll(n){return(await je.get(this.API_BASE,{params:n})).data}static async getById(n){return(await je.get(`${this.API_BASE}/${n.id}`)).data}static async create(n){return(await je.post(this.API_BASE,n)).data}static async update(n,a){return(await je.put(`${this.API_BASE}/${n}`,a)).data}static async delete(n,a){return(await je.delete(`${this.API_BASE}/${n}`,{data:a?{deletionReason:a}:void 0})).data}static async getByProperty(n,a){return(await je.get(`${this.API_BASE}/property/${n}`,{params:a})).data.items}static async getByReportedUser(n,a){return(await je.get(`${this.API_BASE}/reported-user/${n}`,{params:a})).data.items}static async action(n){return(await je.post(`${this.API_BASE}/${n.id}/action`,n)).data}static async stats(){return(await je.get(`${this.API_BASE}/stats`)).data}}const XR=e=>{const n=In(),{data:a,isLoading:r,error:o,refetch:d}=zt({queryKey:["admin-reports",e],queryFn:()=>Pl.getAll(e),staleTime:300*1e3}),h=Ie({mutationFn:j=>Pl.create(j),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),g=Ie({mutationFn:({id:j,data:S})=>Pl.update(j,S),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),p=Ie({mutationFn:({id:j,reason:S})=>Pl.delete(j,S),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),f=Ie({mutationFn:j=>Pl.action({id:j.id,action:j.action,actionNote:j.actionNote,adminId:j.adminId}),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),v=Ie({mutationFn:async({ids:j,action:S,note:T})=>{const C=j.map(N=>Pl.update(N,{id:N,description:`Bulk ${S}: ${T||""}`}));return Promise.all(C)},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}});return{reportsData:a,isLoading:r,error:o,refetch:d,createReport:h,updateReport:g,deleteReport:p,takeReportAction:f,bulkActionReports:v}},JR=()=>zt({queryKey:["report-stats"],queryFn:()=>Pl.stats(),staleTime:600*1e3}),eA=()=>{const{loading:e,executeWithFeedback:n,showConfirmDialog:a,confirmDialog:r,hideConfirmDialog:o,copyToClipboard:d}=Kl(),[h,g]=b.useState(""),[p,f]=b.useState(!1),[v,j]=b.useState(1),[S,T]=b.useState(20),[C,N]=b.useState({reporterUserId:"",reportedUserId:"",reportedPropertyId:"",reason:"",status:"",fromDate:"",toDate:""}),[k,A]=b.useState(!1),[D,O]=b.useState(!1),[F,R]=b.useState(null),[H,E]=b.useState([]),[z,Z]=b.useState({action:"review",actionNote:"",adminId:"admin-user-id"}),U={pageNumber:v,pageSize:S,searchTerm:h||void 0,reporterUserId:C.reporterUserId||void 0,reportedUserId:C.reportedUserId||void 0,reportedPropertyId:C.reportedPropertyId||void 0,reason:C.reason||void 0,status:C.status||void 0,fromDate:C.fromDate||void 0,toDate:C.toDate||void 0},{reportsData:V,isLoading:X,error:W,deleteReport:B,takeReportAction:te,refetch:G}=XR(U),{data:J,isLoading:q}=JR(),K=ie=>{R(ie),A(!0)},I=ie=>{R(ie),Z({action:"review",actionNote:"",adminId:"admin-user-id"}),O(!0)},se=ie=>{a({title:"حذف البلاغ",message:`هل أنت متأكد من حذف البلاغ حول "${ie.reason}"؟ هذا الإجراء لا يمكن التراجع عنه.`,type:"danger",onConfirm:()=>{n(()=>B.mutateAsync({id:ie.id,reason:"تم الحذف من قبل الإدارة"}),{loadingKey:"deleteReport",successMessage:"تم حذف البلاغ بنجاح",errorMessage:"فشل في حذف البلاغ"})}})},ne=async()=>{!F||!z.actionNote.trim()||await n(()=>te.mutateAsync({id:F.id,action:z.action,actionNote:z.actionNote,adminId:z.adminId}),{loadingKey:"takeReportAction",successMessage:"تم تنفيذ الإجراء بنجاح",errorMessage:"فشل في تنفيذ الإجراء",onSuccess:()=>{O(!1),R(null),Z({action:"review",actionNote:"",adminId:"admin-user-id"})}})},ae=(ie,Q)=>{N(we=>({...we,[ie]:Q})),j(1)},ee=()=>{N({reporterUserId:"",reportedUserId:"",reportedPropertyId:"",reason:"",status:"",fromDate:"",toDate:""}),g(""),j(1)},le=ie=>{const Q={"انتهاك الشروط":"text-red-600","سلوك غير لائق":"text-orange-600","محتوى مضلل":"text-yellow-600","مشكلة فنية":"text-blue-600",أخرى:"text-gray-600"};for(const[we,Be]of Object.entries(Q))if(ie.includes(we))return Be;return"text-gray-600"},me=[{key:"reporterUserId",label:"المبلغ",type:"custom",render:(ie,Q)=>t.jsx(Vl,{value:ie,onChange:we=>Q(we),placeholder:"اختر المستخدم المبلغ",className:"w-full"})},{key:"reportedUserId",label:"المبلغ عنه",type:"custom",render:(ie,Q)=>t.jsx(Vl,{value:ie,onChange:we=>Q(we),placeholder:"اختر المستخدم المبلغ عنه",className:"w-full"})},{key:"reportedPropertyId",label:"الكيان المبلغ عنه",type:"custom",render:(ie,Q)=>t.jsx(cc,{value:ie,onChange:we=>Q(we),placeholder:"اختر الكيان",className:"w-full"})},{key:"reason",label:"سبب البلاغ",type:"select",options:[{value:"انتهاك الشروط",label:"انتهاك الشروط"},{value:"سلوك غير لائق",label:"سلوك غير لائق"},{value:"محتوى مضلل",label:"محتوى مضلل"},{value:"مشكلة فنية",label:"مشكلة فنية"},{value:"أخرى",label:"أخرى"}]},{key:"status",label:"حالة البلاغ",type:"select",options:[{value:"pending",label:"معلق"},{value:"reviewed",label:"تمت المراجعة"},{value:"resolved",label:"تم الحل"},{value:"dismissed",label:"تم الرفض"},{value:"escalated",label:"تم التصعيد"}]},{key:"fromDate",label:"من تاريخ",type:"date"},{key:"toDate",label:"إلى تاريخ",type:"date"}],Re=[{key:"id",title:"معرف البلاغ",render:ie=>t.jsx(Oh,{content:`انقر للنسخ: ${ie}`,children:t.jsxs("button",{onClick:()=>d(ie,"تم نسخ معرف البلاغ"),className:"font-mono text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[ie.substring(0,8),"..."]})})},{key:"reason",title:"سبب البلاغ",render:ie=>t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsx("span",{className:`text-sm font-medium ${le(ie)}`,children:ie})})},{key:"description",title:"الوصف",render:ie=>t.jsx("div",{className:"max-w-md",children:t.jsx("p",{className:"text-sm text-gray-600 truncate",children:ie})})},{key:"reporterUserName",title:"المبلغ",render:ie=>t.jsx("span",{className:"text-sm text-gray-900 font-medium",children:ie})},{key:"reportedUserName",title:"المبلغ عنه",render:ie=>t.jsx("span",{className:"text-sm text-gray-900",children:ie||"-"})},{key:"reportedPropertyName",title:"الكيان المبلغ عنه",render:ie=>t.jsx("span",{className:"text-sm text-gray-900",children:ie||"-"})},{key:"createdAt",title:"تاريخ البلاغ",sortable:!0,render:ie=>t.jsx("span",{className:"text-sm text-gray-500",children:new Date(ie).toLocaleDateString("ar-SA")})}],Pe=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:K},{label:"اتخاذ إجراء",icon:"⚖️",color:"green",onClick:I},{label:"حذف البلاغ",icon:"🗑️",color:"red",onClick:se}];return W?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Lh,{icon:"⚠️",title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل بيانات البلاغات. يرجى المحاولة مرة أخرى.",actionLabel:"إعادة المحاولة",onAction:()=>G(),size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة البلاغات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراجعة ومعالجة البلاغات المقدمة من المستخدمين حول المحتوى والسلوك"})]})})}),q?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(ie=>t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsx(pr,{size:"md",text:"جاري التحميل..."})},ie))}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📋"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي البلاغات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:J?.totalReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:J?.pendingReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"محلولة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:J?.resolvedReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-gray-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"❌"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مرفوضة"}),t.jsx("p",{className:"text-2xl font-bold text-gray-600",children:J?.dismissedReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🚨"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مصعدة"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:J?.escalatedReports||0})]})]})})]}),J?.reportsByCategory&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"البلاغات حسب الفئة"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(J.reportsByCategory).map(([ie,Q])=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-2",children:t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Q})}),t.jsx("p",{className:"text-sm text-gray-600",children:ie})]},ie))})]}),t.jsx(ti,{searchPlaceholder:"البحث في البلاغات (السبب، الوصف)...",searchValue:h,onSearchChange:g,filters:me,filterValues:C,onFilterChange:ae,onReset:ee,showAdvanced:p,onToggleAdvanced:()=>f(!p)}),!X&&(V?.items?.length||0)===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Lh,{icon:"📋",title:"لا توجد بلاغات",description:"لم يتم العثور على أي بلاغات تطابق معايير البحث والفلترة الحالية.",actionLabel:"إعادة تعيين الفلاتر",onAction:ee})}):t.jsx(ls,{data:V?.items||[],columns:Re,loading:X,pagination:{current:v,total:V?.totalCount||0,pageSize:S,onChange:(ie,Q)=>{j(ie),T(Q)}},rowSelection:{selectedRowKeys:H,onChange:E},actions:Pe,onRowClick:K}),t.jsx(Mt,{isOpen:k,onClose:()=>{A(!1),R(null)},title:"تفاصيل البلاغ",size:"lg",children:F&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف البلاغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:F.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"سبب البلاغ"}),t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:`text-sm font-medium ${le(F.reason)}`,children:F.reason})})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"وصف البلاغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:F.description})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المستخدم المبلغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:F.reporterUserName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ البلاغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(F.createdAt).toLocaleString("ar-SA")})]}),F.reportedUserName&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المستخدم المبلغ عنه"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F.reportedUserName})]}),F.reportedPropertyName&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الكيان المبلغ عنه"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F.reportedPropertyName})]})]})})}),t.jsx(Mt,{isOpen:D,onClose:()=>{O(!1),R(null)},title:"اتخاذ إجراء على البلاغ",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(rt,{onClick:()=>{O(!1),R(null)},label:"إلغاء",variant:"secondary"}),t.jsx(rt,{onClick:ne,label:"تنفيذ الإجراء",variant:"primary",loading:e.takeReportAction,disabled:!z.actionNote.trim(),icon:"⚖️"})]}),children:F&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"معلومات البلاغ"}),t.jsxs("p",{className:"mt-2 text-sm text-blue-700",children:[t.jsx("strong",{children:"السبب:"})," ",F.reason,t.jsx("br",{}),t.jsx("strong",{children:"المبلغ:"})," ",F.reporterUserName]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الإجراء"}),t.jsxs("select",{value:z.action,onChange:ie=>Z(Q=>({...Q,action:ie.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"review",children:"مراجعة البلاغ"}),t.jsx("option",{value:"resolve",children:"حل البلاغ"}),t.jsx("option",{value:"dismiss",children:"رفض البلاغ"}),t.jsx("option",{value:"escalate",children:"تصعيد البلاغ"}),t.jsx("option",{value:"investigate",children:"فتح تحقيق"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ملاحظات الإجراء *"}),t.jsx("textarea",{rows:4,value:z.actionNote,onChange:ie=>Z(Q=>({...Q,actionNote:ie.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل تفاصيل الإجراء المتخذ وأي ملاحظات إضافية..."})]})]})}),r&&t.jsx(T2,{isOpen:r.isOpen,onClose:o,onConfirm:()=>{r.onConfirm(),o()},title:r.title,message:r.message,type:r.type,loading:e.deleteReport})]})},tA="/api/admin/auditlogs",nA={getAuditLogs:e=>je.get(`${tA}/audit-logs`,{params:e}).then(n=>n.data)},aA=e=>zt({queryKey:["admin","audit-logs",e],queryFn:()=>nA.getAuditLogs(e),placeholderData:n=>n}),sA=()=>t.jsx("span",{children:"👤"}),rA=()=>t.jsx("span",{children:"👁️"}),iA=()=>t.jsx("span",{children:"🕒"}),lA=()=>t.jsx("span",{children:"💾"}),oA=()=>{const[e,n]=b.useState({pageNumber:1,pageSize:20}),[a,r]=b.useState(null),[o,d]=b.useState(!1),[h,g]=b.useState(""),[p,f]=b.useState({userId:"",from:"",to:"",operationType:""}),[v,j]=b.useState(!1),S=[{key:"userId",label:"المستخدم",type:"custom",render:(O,F)=>t.jsx(Vl,{value:O,onChange:R=>F(R),placeholder:"اختر المستخدم",className:"w-full"})},{key:"from",label:"من تاريخ",type:"date"},{key:"to",label:"إلى تاريخ",type:"date"},{key:"operationType",label:"نوع العملية",type:"text",placeholder:"نوع العملية"}],{data:T,isLoading:C,error:N}=aA(e),k=O=>{r(O),d(!0)},A=[{header:"التوقيت",title:"التوقيت",key:"timestamp",render:(O,F)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(iA,{}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:new Date(F.timestamp).toLocaleDateString("ar-SA")}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(F.timestamp).toLocaleTimeString("ar-SA")})]})]})},{header:"المستخدم",title:"المستخدم",key:"username",render:(O,F)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sA,{}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:F.username}),t.jsx("div",{className:"text-xs text-gray-500",children:F.userId})]})]})},{header:"العملية",title:"العملية",key:"action",render:(O,F)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(lA,{}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:F.action}),t.jsx("div",{className:"text-xs text-gray-500",children:F.tableName})]})]})},{header:"السجل المتأثر",title:"السجل المتأثر",key:"recordName",render:(O,F)=>t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:F.recordName}),t.jsx("div",{className:"text-xs text-gray-500",children:F.recordId})]})},{header:"التغييرات",title:"التغييرات",key:"changes",render:(O,F)=>t.jsxs("div",{className:"max-w-xs",children:[t.jsx("div",{className:"text-sm text-gray-700 truncate",children:F.changes}),F.isSlowOperation&&t.jsx("div",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded mt-1 inline-block",children:"عملية بطيئة"})]})},{header:"الإجراءات",title:"الإجراءات",key:"actions",render:(O,F)=>t.jsxs("button",{onClick:()=>k(F),className:"flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors",children:[t.jsx(rA,{}),"عرض التفاصيل"]})}],D=({log:O})=>{if(!O.oldValues&&!O.newValues)return t.jsx("div",{className:"text-gray-500 text-center py-4",children:"لا توجد تفاصيل التغييرات متاحة"});const F=O.oldValues||{},R=O.newValues||{},H=new Set([...Object.keys(F),...Object.keys(R)]);return t.jsx("div",{className:"space-y-4",children:Array.from(H).map(E=>{const z=F[E],Z=R[E],U=z!==Z;return t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium text-gray-700 mb-2",children:E}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"القيمة القديمة"}),t.jsx("div",{className:`p-2 rounded border ${U?"bg-red-50 border-red-200":"bg-gray-50"}`,children:z!==void 0?String(z):"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"القيمة الجديدة"}),t.jsx("div",{className:`p-2 rounded border ${U?"bg-green-50 border-green-200":"bg-gray-50"}`,children:Z!==void 0?String(Z):"غير محدد"})]})]})]},E)})})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"سجلات التدقيق"}),t.jsx("p",{className:"text-gray-600",children:"مراقبة جميع الأنشطة والعمليات في النظام"})]})}),t.jsx(ti,{searchPlaceholder:"البحث في سجلات التدقيق...",searchValue:h,onSearchChange:O=>{g(O),n(F=>({...F,pageNumber:1,searchTerm:O}))},filters:S,filterValues:p,onFilterChange:(O,F)=>{f(R=>({...R,[O]:F})),n(R=>({...R,pageNumber:1,[O]:F}))},onReset:()=>{g(""),f({userId:"",from:"",to:"",operationType:""}),n(O=>({...O,pageNumber:1,searchTerm:void 0,userId:void 0,from:void 0,to:void 0,operationType:void 0}))},showAdvanced:v,onToggleAdvanced:()=>j(O=>!O)}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:t.jsx(ls,{data:T?.items||[],columns:A,loading:C,pagination:{current:T?.pageNumber??e.pageNumber??1,total:T?.totalCount??0,pageSize:T?.pageSize??e.pageSize??20,onChange:(O,F)=>n(R=>({...R,pageNumber:O,pageSize:F}))},onRowClick:()=>{}})}),t.jsx(Mt,{isOpen:o,onClose:()=>d(!1),title:"تفاصيل سجل التدقيق",size:"lg",children:a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"التوقيت"}),t.jsx("div",{className:"font-medium",children:new Date(a.timestamp).toLocaleString("ar-SA")})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"المستخدم"}),t.jsx("div",{className:"font-medium",children:a.username})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"العملية"}),t.jsx("div",{className:"font-medium",children:a.action})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"الجدول"}),t.jsx("div",{className:"font-medium",children:a.tableName})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"معرف السجل"}),t.jsx("div",{className:"font-medium",children:a.recordId})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"اسم السجل"}),t.jsx("div",{className:"font-medium",children:a.recordName})]})]}),a.notes&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"الملاحظات"}),t.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.notes})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"وصف التغييرات"}),t.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:a.changes})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-medium mb-4",children:"تفاصيل التغييرات"}),t.jsx(D,{log:a})]}),a.metadata&&Object.keys(a.metadata).length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"البيانات الإضافية"}),t.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(a.metadata,null,2)})})]})]})})]})},cA=()=>t.jsx(Wl,{title:"إعدادات النظام",description:"إدارة الإعدادات العامة للنظام والتكوينات الأساسية",icon:"⚙️",comingSoon:!0}),Eu=(e={})=>{const n=In(),[a,r]=b.useState({}),{data:o,isLoading:d,error:h,refetch:g}=zt({queryKey:["images",e],queryFn:()=>un.getImages(e),staleTime:300*1e3}),p=Ie({mutationFn:async U=>{const V=un.validateImageFile(U.file);if(!V.valid)throw new Error(V.error);const X=await un.compressImage(U.file),W={...U,file:X};return un.uploadImage(W)},onSuccess:U=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]}),U.taskId&&r(V=>{const{[U.taskId]:X,...W}=V;return W})},onError:(U,V)=>{console.error("فشل في رفع الصورة:",U);const X=`upload_${V.file.name}_${Date.now()}`;r(W=>{const{[X]:B,...te}=W;return te})}}),f=Ie({mutationFn:async({files:U,options:V})=>await un.uploadMultipleImages(U,V),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]})}}),v=Ie({mutationFn:un.updateImage,onSuccess:U=>{n.setQueryData(["images",e],V=>V&&{...V,images:V.images.map(X=>X.id===U.id?U:X)}),n.invalidateQueries({queryKey:["images"]})}}),j=Ie({mutationFn:({imageId:U,permanent:V=!1})=>un.deleteImage(U,V),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]})}}),S=Ie({mutationFn:un.deleteImages,onSuccess:()=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]})}}),T=Ie({mutationFn:un.reorderImages,onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),C=Ie({mutationFn:({imageId:U,propertyId:V,unitId:X})=>un.setPrimaryImage(U,V,X),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),N=Ie({mutationFn:({imageId:U,settings:V})=>un.optimizeImage(U,V),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),k=Ie({mutationFn:({imageId:U,cropData:V})=>un.cropImage(U,V),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),A=Ie({mutationFn:({imageId:U,filter:V,intensity:X})=>un.applyFilter(U,V,X),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),D=Ie({mutationFn:({imageId:U,degrees:V})=>un.rotateImage(U,V),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),O=Ie({mutationFn:({imageId:U,direction:V})=>un.flipImage(U,V),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),F=Ie({mutationFn:({imageId:U,text:V,position:X})=>un.addWatermark(U,V,X),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),R=Ie({mutationFn:({imageId:U,targetPropertyId:V,targetUnitId:X})=>un.copyImage(U,V,X),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),H=Ie({mutationFn:un.restoreOriginal,onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),E=b.useCallback(async U=>{const V=`upload_${U.file.name}_${Date.now()}`;r(X=>({...X,[V]:{taskId:V,filename:U.file.name,progress:0,status:"uploading"}}));try{const X=setInterval(()=>{r(B=>{const te=B[V];return te&&te.progress<90?{...B,[V]:{...te,progress:te.progress+10}}:B})},200),W=await p.mutateAsync(U);return clearInterval(X),r(B=>({...B,[V]:{taskId:V,filename:U.file.name,progress:100,status:"completed",imageId:W.image?.id}})),W}catch(X){throw r(W=>({...W,[V]:{taskId:V,filename:U.file.name,progress:0,status:"failed",error:X instanceof Error?X.message:"حدث خطأ غير متوقع"}})),X}},[p]),z=b.useCallback(U=>{r(V=>{const{[U]:X,...W}=V;return W})},[]),Z=b.useCallback(()=>{r({})},[]);return{images:o?.images||[],total:o?.total||0,page:o?.page||1,totalPages:o?.totalPages||1,isLoading:d,error:h,uploadProgress:a,refetch:g,uploadImage:p.mutate,uploadImageAsync:p.mutateAsync,uploadImageWithProgress:E,uploadMultipleImages:f.mutate,uploadMultipleImagesAsync:f.mutateAsync,updateImage:v.mutate,updateImageAsync:v.mutateAsync,deleteImage:j.mutate,deleteImageAsync:j.mutateAsync,deleteImages:S.mutate,deleteImagesAsync:S.mutateAsync,reorderImages:T.mutate,reorderImagesAsync:T.mutateAsync,setPrimaryImage:C.mutate,setPrimaryImageAsync:C.mutateAsync,optimizeImage:N.mutate,optimizeImageAsync:N.mutateAsync,cropImage:k.mutate,cropImageAsync:k.mutateAsync,applyFilter:A.mutate,applyFilterAsync:A.mutateAsync,rotateImage:D.mutate,rotateImageAsync:D.mutateAsync,flipImage:O.mutate,flipImageAsync:O.mutateAsync,addWatermark:F.mutate,addWatermarkAsync:F.mutateAsync,copyImage:R.mutate,copyImageAsync:R.mutateAsync,restoreOriginal:H.mutate,restoreOriginalAsync:H.mutateAsync,isUploading:p.isPending||f.isPending,isUpdating:v.isPending,isDeleting:j.isPending||S.isPending,isReordering:T.isPending,isOptimizing:N.isPending,isEditing:k.isPending||A.isPending||D.isPending||O.isPending||F.isPending,isProcessing:H.isPending||R.isPending,clearUploadProgress:z,clearAllUploadProgress:Z}},L2=(e,n)=>zt({queryKey:["image-statistics",e,n],queryFn:()=>un.getImageStatistics(e,n),staleTime:600*1e3});function dA(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return b.useMemo(()=>r=>{n.forEach(o=>o(r))},n)}const bf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kc(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function H0(e){return"nodeType"in e}function Ua(e){var n,a;return e?kc(e)?e:H0(e)&&(n=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?n:window:window}function q0(e){const{Document:n}=Ua(e);return e instanceof n}function Mu(e){return kc(e)?!1:e instanceof Ua(e).HTMLElement}function z2(e){return e instanceof Ua(e).SVGElement}function Tc(e){return e?kc(e)?e.document:H0(e)?q0(e)?e:Mu(e)||z2(e)?e.ownerDocument:document:document:document}const gr=bf?b.useLayoutEffect:b.useEffect;function Y0(e){const n=b.useRef(e);return gr(()=>{n.current=e}),b.useCallback(function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n.current==null?void 0:n.current(...r)},[])}function uA(){const e=b.useRef(null),n=b.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),a=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,a]}function cu(e,n){n===void 0&&(n=[e]);const a=b.useRef(e);return gr(()=>{a.current!==e&&(a.current=e)},n),a}function Ru(e,n){const a=b.useRef();return b.useMemo(()=>{const r=e(a.current);return a.current=r,r},[...n])}function Ih(e){const n=Y0(e),a=b.useRef(null),r=b.useCallback(o=>{o!==a.current&&n?.(o,a.current),a.current=o},[]);return[a,r]}function Ux(e){const n=b.useRef();return b.useEffect(()=>{n.current=e},[e]),n.current}let ax={};function Au(e,n){return b.useMemo(()=>{if(n)return n;const a=ax[e]==null?0:ax[e]+1;return ax[e]=a,e+"-"+a},[e,n])}function I2(e){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return r.reduce((d,h)=>{const g=Object.entries(h);for(const[p,f]of g){const v=d[p];v!=null&&(d[p]=v+e*f)}return d},{...n})}}const ic=I2(1),du=I2(-1);function mA(e){return"clientX"in e&&"clientY"in e}function V0(e){if(!e)return!1;const{KeyboardEvent:n}=Ua(e.target);return n&&e instanceof n}function hA(e){if(!e)return!1;const{TouchEvent:n}=Ua(e.target);return n&&e instanceof n}function Hx(e){if(hA(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:a}=e.touches[0];return{x:n,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:a}=e.changedTouches[0];return{x:n,y:a}}}return mA(e)?{x:e.clientX,y:e.clientY}:null}const uu=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:a}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:a}=e;return"scaleX("+n+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[uu.Translate.toString(e),uu.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:a,easing:r}=e;return n+" "+a+"ms "+r}}}),Lj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function fA(e){return e.matches(Lj)?e:e.querySelector(Lj)}const pA={display:"none"};function gA(e){let{id:n,value:a}=e;return Ke.createElement("div",{id:n,style:pA},a)}function xA(e){let{id:n,announcement:a,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ke.createElement("div",{id:n,style:o,role:"status","aria-live":r,"aria-atomic":!0},a)}function yA(){const[e,n]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&n(r)},[]),announcement:e}}const B2=b.createContext(null);function bA(e){const n=b.useContext(B2);b.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function vA(){const[e]=b.useState(()=>new Set),n=b.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[b.useCallback(r=>{let{type:o,event:d}=r;e.forEach(h=>{var g;return(g=h[o])==null?void 0:g.call(h,d)})},[e]),n]}const jA={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wA={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:a}=e;return a?"Draggable item "+n.id+" was moved over droppable area "+a.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:a}=e;return a?"Draggable item "+n.id+" was dropped over droppable area "+a.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function NA(e){let{announcements:n=wA,container:a,hiddenTextDescribedById:r,screenReaderInstructions:o=jA}=e;const{announce:d,announcement:h}=yA(),g=Au("DndLiveRegion"),[p,f]=b.useState(!1);if(b.useEffect(()=>{f(!0)},[]),bA(b.useMemo(()=>({onDragStart(j){let{active:S}=j;d(n.onDragStart({active:S}))},onDragMove(j){let{active:S,over:T}=j;n.onDragMove&&d(n.onDragMove({active:S,over:T}))},onDragOver(j){let{active:S,over:T}=j;d(n.onDragOver({active:S,over:T}))},onDragEnd(j){let{active:S,over:T}=j;d(n.onDragEnd({active:S,over:T}))},onDragCancel(j){let{active:S,over:T}=j;d(n.onDragCancel({active:S,over:T}))}}),[d,n])),!p)return null;const v=Ke.createElement(Ke.Fragment,null,Ke.createElement(gA,{id:r,value:o.draggable}),Ke.createElement(xA,{id:g,announcement:h}));return a?ec.createPortal(v,a):v}var Wn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Wn||(Wn={}));function Bh(){}function zj(e,n){return b.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function _A(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return b.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const Fs=Object.freeze({x:0,y:0});function $2(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function F2(e,n){let{data:{value:a}}=e,{data:{value:r}}=n;return a-r}function SA(e,n){let{data:{value:a}}=e,{data:{value:r}}=n;return r-a}function Ij(e){let{left:n,top:a,height:r,width:o}=e;return[{x:n,y:a},{x:n+o,y:a},{x:n,y:a+r},{x:n+o,y:a+r}]}function U2(e,n){if(!e||e.length===0)return null;const[a]=e;return a[n]}function Bj(e,n,a){return n===void 0&&(n=e.left),a===void 0&&(a=e.top),{x:n+e.width*.5,y:a+e.height*.5}}const CA=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:r}=e;const o=Bj(n,n.left,n.top),d=[];for(const h of r){const{id:g}=h,p=a.get(g);if(p){const f=$2(Bj(p),o);d.push({id:g,data:{droppableContainer:h,value:f}})}}return d.sort(F2)},kA=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:r}=e;const o=Ij(n),d=[];for(const h of r){const{id:g}=h,p=a.get(g);if(p){const f=Ij(p),v=o.reduce((S,T,C)=>S+$2(f[C],T),0),j=Number((v/4).toFixed(4));d.push({id:g,data:{droppableContainer:h,value:j}})}}return d.sort(F2)};function TA(e,n){const a=Math.max(n.top,e.top),r=Math.max(n.left,e.left),o=Math.min(n.left+n.width,e.left+e.width),d=Math.min(n.top+n.height,e.top+e.height),h=o-r,g=d-a;if(r<o&&a<d){const p=n.width*n.height,f=e.width*e.height,v=h*g,j=v/(p+f-v);return Number(j.toFixed(4))}return 0}const EA=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:r}=e;const o=[];for(const d of r){const{id:h}=d,g=a.get(h);if(g){const p=TA(g,n);p>0&&o.push({id:h,data:{droppableContainer:d,value:p}})}}return o.sort(SA)};function MA(e,n,a){return{...e,scaleX:n&&a?n.width/a.width:1,scaleY:n&&a?n.height/a.height:1}}function H2(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Fs}function RA(e){return function(a){for(var r=arguments.length,o=new Array(r>1?r-1:0),d=1;d<r;d++)o[d-1]=arguments[d];return o.reduce((h,g)=>({...h,top:h.top+e*g.y,bottom:h.bottom+e*g.y,left:h.left+e*g.x,right:h.right+e*g.x}),{...a})}}const AA=RA(1);function DA(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function PA(e,n,a){const r=DA(n);if(!r)return e;const{scaleX:o,scaleY:d,x:h,y:g}=r,p=e.left-h-(1-o)*parseFloat(a),f=e.top-g-(1-d)*parseFloat(a.slice(a.indexOf(" ")+1)),v=o?e.width/o:e.width,j=d?e.height/d:e.height;return{width:v,height:j,top:f,right:p+v,bottom:f+j,left:p}}const OA={ignoreTransform:!1};function Ec(e,n){n===void 0&&(n=OA);let a=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:f,transformOrigin:v}=Ua(e).getComputedStyle(e);f&&(a=PA(a,f,v))}const{top:r,left:o,width:d,height:h,bottom:g,right:p}=a;return{top:r,left:o,width:d,height:h,bottom:g,right:p}}function $j(e){return Ec(e,{ignoreTransform:!0})}function LA(e){const n=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:n,bottom:a,width:n,height:a}}function zA(e,n){return n===void 0&&(n=Ua(e).getComputedStyle(e)),n.position==="fixed"}function IA(e,n){n===void 0&&(n=Ua(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const d=n[o];return typeof d=="string"?a.test(d):!1})}function vf(e,n){const a=[];function r(o){if(n!=null&&a.length>=n||!o)return a;if(q0(o)&&o.scrollingElement!=null&&!a.includes(o.scrollingElement))return a.push(o.scrollingElement),a;if(!Mu(o)||z2(o)||a.includes(o))return a;const d=Ua(e).getComputedStyle(o);return o!==e&&IA(o,d)&&a.push(o),zA(o,d)?a:r(o.parentNode)}return e?r(e):a}function q2(e){const[n]=vf(e,1);return n??null}function sx(e){return!bf||!e?null:kc(e)?e:H0(e)?q0(e)||e===Tc(e).scrollingElement?window:Mu(e)?e:null:null}function Y2(e){return kc(e)?e.scrollX:e.scrollLeft}function V2(e){return kc(e)?e.scrollY:e.scrollTop}function qx(e){return{x:Y2(e),y:V2(e)}}var ra;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ra||(ra={}));function Z2(e){return!bf||!e?!1:e===document.scrollingElement}function K2(e){const n={x:0,y:0},a=Z2(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},o=e.scrollTop<=n.y,d=e.scrollLeft<=n.x,h=e.scrollTop>=r.y,g=e.scrollLeft>=r.x;return{isTop:o,isLeft:d,isBottom:h,isRight:g,maxScroll:r,minScroll:n}}const BA={x:.2,y:.2};function $A(e,n,a,r,o){let{top:d,left:h,right:g,bottom:p}=a;r===void 0&&(r=10),o===void 0&&(o=BA);const{isTop:f,isBottom:v,isLeft:j,isRight:S}=K2(e),T={x:0,y:0},C={x:0,y:0},N={height:n.height*o.y,width:n.width*o.x};return!f&&d<=n.top+N.height?(T.y=ra.Backward,C.y=r*Math.abs((n.top+N.height-d)/N.height)):!v&&p>=n.bottom-N.height&&(T.y=ra.Forward,C.y=r*Math.abs((n.bottom-N.height-p)/N.height)),!S&&g>=n.right-N.width?(T.x=ra.Forward,C.x=r*Math.abs((n.right-N.width-g)/N.width)):!j&&h<=n.left+N.width&&(T.x=ra.Backward,C.x=r*Math.abs((n.left+N.width-h)/N.width)),{direction:T,speed:C}}function FA(e){if(e===document.scrollingElement){const{innerWidth:d,innerHeight:h}=window;return{top:0,left:0,right:d,bottom:h,width:d,height:h}}const{top:n,left:a,right:r,bottom:o}=e.getBoundingClientRect();return{top:n,left:a,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function W2(e){return e.reduce((n,a)=>ic(n,qx(a)),Fs)}function UA(e){return e.reduce((n,a)=>n+Y2(a),0)}function HA(e){return e.reduce((n,a)=>n+V2(a),0)}function qA(e,n){if(n===void 0&&(n=Ec),!e)return;const{top:a,left:r,bottom:o,right:d}=n(e);q2(e)&&(o<=0||d<=0||a>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const YA=[["x",["left","right"],UA],["y",["top","bottom"],HA]];class Z0{constructor(n,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=vf(a),o=W2(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[d,h,g]of YA)for(const p of h)Object.defineProperty(this,p,{get:()=>{const f=g(r),v=o[d]-f;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Zd{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...a)})},this.target=n}add(n,a,r){var o;(o=this.target)==null||o.addEventListener(n,a,r),this.listeners.push([n,a,r])}}function VA(e){const{EventTarget:n}=Ua(e);return e instanceof n?e:Tc(e)}function rx(e,n){const a=Math.abs(e.x),r=Math.abs(e.y);return typeof n=="number"?Math.sqrt(a**2+r**2)>n:"x"in n&&"y"in n?a>n.x&&r>n.y:"x"in n?a>n.x:"y"in n?r>n.y:!1}var ws;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ws||(ws={}));function Fj(e){e.preventDefault()}function ZA(e){e.stopPropagation()}var St;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(St||(St={}));const G2={start:[St.Space,St.Enter],cancel:[St.Esc],end:[St.Space,St.Enter,St.Tab]},KA=(e,n)=>{let{currentCoordinates:a}=n;switch(e.code){case St.Right:return{...a,x:a.x+25};case St.Left:return{...a,x:a.x-25};case St.Down:return{...a,y:a.y+25};case St.Up:return{...a,y:a.y-25}}};class K0{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:a}}=n;this.props=n,this.listeners=new Zd(Tc(a)),this.windowListeners=new Zd(Ua(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ws.Resize,this.handleCancel),this.windowListeners.add(ws.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ws.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:a}=this.props,r=n.node.current;r&&qA(r),a(Fs)}handleKeyDown(n){if(V0(n)){const{active:a,context:r,options:o}=this.props,{keyboardCodes:d=G2,coordinateGetter:h=KA,scrollBehavior:g="smooth"}=o,{code:p}=n;if(d.end.includes(p)){this.handleEnd(n);return}if(d.cancel.includes(p)){this.handleCancel(n);return}const{collisionRect:f}=r.current,v=f?{x:f.left,y:f.top}:Fs;this.referenceCoordinates||(this.referenceCoordinates=v);const j=h(n,{active:a,context:r.current,currentCoordinates:v});if(j){const S=du(j,v),T={x:0,y:0},{scrollableAncestors:C}=r.current;for(const N of C){const k=n.code,{isTop:A,isRight:D,isLeft:O,isBottom:F,maxScroll:R,minScroll:H}=K2(N),E=FA(N),z={x:Math.min(k===St.Right?E.right-E.width/2:E.right,Math.max(k===St.Right?E.left:E.left+E.width/2,j.x)),y:Math.min(k===St.Down?E.bottom-E.height/2:E.bottom,Math.max(k===St.Down?E.top:E.top+E.height/2,j.y))},Z=k===St.Right&&!D||k===St.Left&&!O,U=k===St.Down&&!F||k===St.Up&&!A;if(Z&&z.x!==j.x){const V=N.scrollLeft+S.x,X=k===St.Right&&V<=R.x||k===St.Left&&V>=H.x;if(X&&!S.y){N.scrollTo({left:V,behavior:g});return}X?T.x=N.scrollLeft-V:T.x=k===St.Right?N.scrollLeft-R.x:N.scrollLeft-H.x,T.x&&N.scrollBy({left:-T.x,behavior:g});break}else if(U&&z.y!==j.y){const V=N.scrollTop+S.y,X=k===St.Down&&V<=R.y||k===St.Up&&V>=H.y;if(X&&!S.x){N.scrollTo({top:V,behavior:g});return}X?T.y=N.scrollTop-V:T.y=k===St.Down?N.scrollTop-R.y:N.scrollTop-H.y,T.y&&N.scrollBy({top:-T.y,behavior:g});break}}this.handleMove(n,ic(du(j,this.referenceCoordinates),T))}}}handleMove(n,a){const{onMove:r}=this.props;n.preventDefault(),r(a)}handleEnd(n){const{onEnd:a}=this.props;n.preventDefault(),this.detach(),a()}handleCancel(n){const{onCancel:a}=this.props;n.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}K0.activators=[{eventName:"onKeyDown",handler:(e,n,a)=>{let{keyboardCodes:r=G2,onActivation:o}=n,{active:d}=a;const{code:h}=e.nativeEvent;if(r.start.includes(h)){const g=d.activatorNode.current;return g&&e.target!==g?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Uj(e){return!!(e&&"distance"in e)}function Hj(e){return!!(e&&"delay"in e)}class W0{constructor(n,a,r){var o;r===void 0&&(r=VA(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=a;const{event:d}=n,{target:h}=d;this.props=n,this.events=a,this.document=Tc(h),this.documentListeners=new Zd(this.document),this.listeners=new Zd(r),this.windowListeners=new Zd(Ua(h)),this.initialCoordinates=(o=Hx(d))!=null?o:Fs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:a,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(ws.Resize,this.handleCancel),this.windowListeners.add(ws.DragStart,Fj),this.windowListeners.add(ws.VisibilityChange,this.handleCancel),this.windowListeners.add(ws.ContextMenu,Fj),this.documentListeners.add(ws.Keydown,this.handleKeydown),a){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Hj(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(Uj(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,a){const{active:r,onPending:o}=this.props;o(r,n,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:n}=this,{onStart:a}=this.props;n&&(this.activated=!0,this.documentListeners.add(ws.Click,ZA,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ws.SelectionChange,this.removeTextSelection),a(n))}handleMove(n){var a;const{activated:r,initialCoordinates:o,props:d}=this,{onMove:h,options:{activationConstraint:g}}=d;if(!o)return;const p=(a=Hx(n))!=null?a:Fs,f=du(o,p);if(!r&&g){if(Uj(g)){if(g.tolerance!=null&&rx(f,g.tolerance))return this.handleCancel();if(rx(f,g.distance))return this.handleStart()}if(Hj(g)&&rx(f,g.tolerance))return this.handleCancel();this.handlePending(g,f);return}n.cancelable&&n.preventDefault(),h(p)}handleEnd(){const{onAbort:n,onEnd:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleCancel(){const{onAbort:n,onCancel:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleKeydown(n){n.code===St.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const WA={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class G0 extends W0{constructor(n){const{event:a}=n,r=Tc(a.target);super(n,WA,r)}}G0.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:r}=n;return!a.isPrimary||a.button!==0?!1:(r?.({event:a}),!0)}}];const GA={move:{name:"mousemove"},end:{name:"mouseup"}};var Yx;(function(e){e[e.RightClick=2]="RightClick"})(Yx||(Yx={}));class QA extends W0{constructor(n){super(n,GA,Tc(n.event.target))}}QA.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:r}=n;return a.button===Yx.RightClick?!1:(r?.({event:a}),!0)}}];const ix={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XA extends W0{constructor(n){super(n,ix)}static setup(){return window.addEventListener(ix.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(ix.move.name,n)};function n(){}}}XA.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:r}=n;const{touches:o}=a;return o.length>1?!1:(r?.({event:a}),!0)}}];var Kd;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Kd||(Kd={}));var $h;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($h||($h={}));function JA(e){let{acceleration:n,activator:a=Kd.Pointer,canScroll:r,draggingRect:o,enabled:d,interval:h=5,order:g=$h.TreeOrder,pointerCoordinates:p,scrollableAncestors:f,scrollableAncestorRects:v,delta:j,threshold:S}=e;const T=tD({delta:j,disabled:!d}),[C,N]=uA(),k=b.useRef({x:0,y:0}),A=b.useRef({x:0,y:0}),D=b.useMemo(()=>{switch(a){case Kd.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case Kd.DraggableRect:return o}},[a,o,p]),O=b.useRef(null),F=b.useCallback(()=>{const H=O.current;if(!H)return;const E=k.current.x*A.current.x,z=k.current.y*A.current.y;H.scrollBy(E,z)},[]),R=b.useMemo(()=>g===$h.TreeOrder?[...f].reverse():f,[g,f]);b.useEffect(()=>{if(!d||!f.length||!D){N();return}for(const H of R){if(r?.(H)===!1)continue;const E=f.indexOf(H),z=v[E];if(!z)continue;const{direction:Z,speed:U}=$A(H,z,D,n,S);for(const V of["x","y"])T[V][Z[V]]||(U[V]=0,Z[V]=0);if(U.x>0||U.y>0){N(),O.current=H,C(F,h),k.current=U,A.current=Z;return}}k.current={x:0,y:0},A.current={x:0,y:0},N()},[n,F,r,N,d,h,JSON.stringify(D),JSON.stringify(T),C,f,R,v,JSON.stringify(S)])}const eD={x:{[ra.Backward]:!1,[ra.Forward]:!1},y:{[ra.Backward]:!1,[ra.Forward]:!1}};function tD(e){let{delta:n,disabled:a}=e;const r=Ux(n);return Ru(o=>{if(a||!r||!o)return eD;const d={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[ra.Backward]:o.x[ra.Backward]||d.x===-1,[ra.Forward]:o.x[ra.Forward]||d.x===1},y:{[ra.Backward]:o.y[ra.Backward]||d.y===-1,[ra.Forward]:o.y[ra.Forward]||d.y===1}}},[a,n,r])}function nD(e,n){const a=n!=null?e.get(n):void 0,r=a?a.node.current:null;return Ru(o=>{var d;return n==null?null:(d=r??o)!=null?d:null},[r,n])}function aD(e,n){return b.useMemo(()=>e.reduce((a,r)=>{const{sensor:o}=r,d=o.activators.map(h=>({eventName:h.eventName,handler:n(h.handler,r)}));return[...a,...d]},[]),[e,n])}var mu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mu||(mu={}));var Vx;(function(e){e.Optimized="optimized"})(Vx||(Vx={}));const qj=new Map;function sD(e,n){let{dragging:a,dependencies:r,config:o}=n;const[d,h]=b.useState(null),{frequency:g,measure:p,strategy:f}=o,v=b.useRef(e),j=k(),S=cu(j),T=b.useCallback(function(A){A===void 0&&(A=[]),!S.current&&h(D=>D===null?A:D.concat(A.filter(O=>!D.includes(O))))},[S]),C=b.useRef(null),N=Ru(A=>{if(j&&!a)return qj;if(!A||A===qj||v.current!==e||d!=null){const D=new Map;for(let O of e){if(!O)continue;if(d&&d.length>0&&!d.includes(O.id)&&O.rect.current){D.set(O.id,O.rect.current);continue}const F=O.node.current,R=F?new Z0(p(F),F):null;O.rect.current=R,R&&D.set(O.id,R)}return D}return A},[e,d,a,j,p]);return b.useEffect(()=>{v.current=e},[e]),b.useEffect(()=>{j||T()},[a,j]),b.useEffect(()=>{d&&d.length>0&&h(null)},[JSON.stringify(d)]),b.useEffect(()=>{j||typeof g!="number"||C.current!==null||(C.current=setTimeout(()=>{T(),C.current=null},g))},[g,j,T,...r]),{droppableRects:N,measureDroppableContainers:T,measuringScheduled:d!=null};function k(){switch(f){case mu.Always:return!1;case mu.BeforeDragging:return a;default:return!a}}}function Q2(e,n){return Ru(a=>e?a||(typeof n=="function"?n(e):e):null,[n,e])}function rD(e,n){return Q2(e,n)}function iD(e){let{callback:n,disabled:a}=e;const r=Y0(n),o=b.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(r)},[r,a]);return b.useEffect(()=>()=>o?.disconnect(),[o]),o}function jf(e){let{callback:n,disabled:a}=e;const r=Y0(n),o=b.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(r)},[a]);return b.useEffect(()=>()=>o?.disconnect(),[o]),o}function lD(e){return new Z0(Ec(e),e)}function Yj(e,n,a){n===void 0&&(n=lD);const[r,o]=b.useState(null);function d(){o(p=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=p??a)!=null?f:null}const v=n(e);return JSON.stringify(p)===JSON.stringify(v)?p:v})}const h=iD({callback(p){if(e)for(const f of p){const{type:v,target:j}=f;if(v==="childList"&&j instanceof HTMLElement&&j.contains(e)){d();break}}}}),g=jf({callback:d});return gr(()=>{d(),e?(g?.observe(e),h?.observe(document.body,{childList:!0,subtree:!0})):(g?.disconnect(),h?.disconnect())},[e]),r}function oD(e){const n=Q2(e);return H2(e,n)}const Vj=[];function cD(e){const n=b.useRef(e),a=Ru(r=>e?r&&r!==Vj&&e&&n.current&&e.parentNode===n.current.parentNode?r:vf(e):Vj,[e]);return b.useEffect(()=>{n.current=e},[e]),a}function dD(e){const[n,a]=b.useState(null),r=b.useRef(e),o=b.useCallback(d=>{const h=sx(d.target);h&&a(g=>g?(g.set(h,qx(h)),new Map(g)):null)},[]);return b.useEffect(()=>{const d=r.current;if(e!==d){h(d);const g=e.map(p=>{const f=sx(p);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,qx(f)]):null}).filter(p=>p!=null);a(g.length?new Map(g):null),r.current=e}return()=>{h(e),h(d)};function h(g){g.forEach(p=>{const f=sx(p);f?.removeEventListener("scroll",o)})}},[o,e]),b.useMemo(()=>e.length?n?Array.from(n.values()).reduce((d,h)=>ic(d,h),Fs):W2(e):Fs,[e,n])}function Zj(e,n){n===void 0&&(n=[]);const a=b.useRef(null);return b.useEffect(()=>{a.current=null},n),b.useEffect(()=>{const r=e!==Fs;r&&!a.current&&(a.current=e),!r&&a.current&&(a.current=null)},[e]),a.current?du(e,a.current):Fs}function uD(e){b.useEffect(()=>{if(!bf)return;const n=e.map(a=>{let{sensor:r}=a;return r.setup==null?void 0:r.setup()});return()=>{for(const a of n)a?.()}},e.map(n=>{let{sensor:a}=n;return a}))}function mD(e,n){return b.useMemo(()=>e.reduce((a,r)=>{let{eventName:o,handler:d}=r;return a[o]=h=>{d(h,n)},a},{}),[e,n])}function X2(e){return b.useMemo(()=>e?LA(e):null,[e])}const Kj=[];function hD(e,n){n===void 0&&(n=Ec);const[a]=e,r=X2(a?Ua(a):null),[o,d]=b.useState(Kj);function h(){d(()=>e.length?e.map(p=>Z2(p)?r:new Z0(n(p),p)):Kj)}const g=jf({callback:h});return gr(()=>{g?.disconnect(),h(),e.forEach(p=>g?.observe(p))},[e]),o}function fD(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return Mu(n)?n:e}function pD(e){let{measure:n}=e;const[a,r]=b.useState(null),o=b.useCallback(f=>{for(const{target:v}of f)if(Mu(v)){r(j=>{const S=n(v);return j?{...j,width:S.width,height:S.height}:S});break}},[n]),d=jf({callback:o}),h=b.useCallback(f=>{const v=fD(f);d?.disconnect(),v&&d?.observe(v),r(v?n(v):null)},[n,d]),[g,p]=Ih(h);return b.useMemo(()=>({nodeRef:g,rect:a,setRef:p}),[a,g,p])}const gD=[{sensor:G0,options:{}},{sensor:K0,options:{}}],xD={current:{}},Ch={draggable:{measure:$j},droppable:{measure:$j,strategy:mu.WhileDragging,frequency:Vx.Optimized},dragOverlay:{measure:Ec}};class Wd extends Map{get(n){var a;return n!=null&&(a=super.get(n))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:a}=n;return!a})}getNodeFor(n){var a,r;return(a=(r=this.get(n))==null?void 0:r.node.current)!=null?a:void 0}}const yD={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ch,measureDroppableContainers:Bh,windowRect:null,measuringScheduled:!1},bD={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bh,draggableNodes:new Map,over:null,measureDroppableContainers:Bh},wf=b.createContext(bD),J2=b.createContext(yD);function vD(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wd}}}function jD(e,n){switch(n.type){case Wn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Wn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Wn.DragEnd:case Wn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Wn.RegisterDroppable:{const{element:a}=n,{id:r}=a,o=new Wd(e.droppable.containers);return o.set(r,a),{...e,droppable:{...e.droppable,containers:o}}}case Wn.SetDroppableDisabled:{const{id:a,key:r,disabled:o}=n,d=e.droppable.containers.get(a);if(!d||r!==d.key)return e;const h=new Wd(e.droppable.containers);return h.set(a,{...d,disabled:o}),{...e,droppable:{...e.droppable,containers:h}}}case Wn.UnregisterDroppable:{const{id:a,key:r}=n,o=e.droppable.containers.get(a);if(!o||r!==o.key)return e;const d=new Wd(e.droppable.containers);return d.delete(a),{...e,droppable:{...e.droppable,containers:d}}}default:return e}}function wD(e){let{disabled:n}=e;const{active:a,activatorEvent:r,draggableNodes:o}=b.useContext(wf),d=Ux(r),h=Ux(a?.id);return b.useEffect(()=>{if(!n&&!r&&d&&h!=null){if(!V0(d)||document.activeElement===d.target)return;const g=o.get(h);if(!g)return;const{activatorNode:p,node:f}=g;if(!p.current&&!f.current)return;requestAnimationFrame(()=>{for(const v of[p.current,f.current]){if(!v)continue;const j=fA(v);if(j){j.focus();break}}})}},[r,n,o,h,d]),null}function ND(e,n){let{transform:a,...r}=n;return e!=null&&e.length?e.reduce((o,d)=>d({transform:o,...r}),a):a}function _D(e){return b.useMemo(()=>({draggable:{...Ch.draggable,...e?.draggable},droppable:{...Ch.droppable,...e?.droppable},dragOverlay:{...Ch.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function SD(e){let{activeNode:n,measure:a,initialRect:r,config:o=!0}=e;const d=b.useRef(!1),{x:h,y:g}=typeof o=="boolean"?{x:o,y:o}:o;gr(()=>{if(!h&&!g||!n){d.current=!1;return}if(d.current||!r)return;const f=n?.node.current;if(!f||f.isConnected===!1)return;const v=a(f),j=H2(v,r);if(h||(j.x=0),g||(j.y=0),d.current=!0,Math.abs(j.x)>0||Math.abs(j.y)>0){const S=q2(f);S&&S.scrollBy({top:j.y,left:j.x})}},[n,h,g,r,a])}const e_=b.createContext({...Fs,scaleX:1,scaleY:1});var Qi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Qi||(Qi={}));const CD=b.memo(function(n){var a,r,o,d;let{id:h,accessibility:g,autoScroll:p=!0,children:f,sensors:v=gD,collisionDetection:j=EA,measuring:S,modifiers:T,...C}=n;const N=b.useReducer(jD,void 0,vD),[k,A]=N,[D,O]=vA(),[F,R]=b.useState(Qi.Uninitialized),H=F===Qi.Initialized,{draggable:{active:E,nodes:z,translate:Z},droppable:{containers:U}}=k,V=E!=null?z.get(E):null,X=b.useRef({initial:null,translated:null}),W=b.useMemo(()=>{var $e;return E!=null?{id:E,data:($e=V?.data)!=null?$e:xD,rect:X}:null},[E,V]),B=b.useRef(null),[te,G]=b.useState(null),[J,q]=b.useState(null),K=cu(C,Object.values(C)),I=Au("DndDescribedBy",h),se=b.useMemo(()=>U.getEnabled(),[U]),ne=_D(S),{droppableRects:ae,measureDroppableContainers:ee,measuringScheduled:le}=sD(se,{dragging:H,dependencies:[Z.x,Z.y],config:ne.droppable}),me=nD(z,E),Re=b.useMemo(()=>J?Hx(J):null,[J]),Pe=Te(),ie=rD(me,ne.draggable.measure);SD({activeNode:E!=null?z.get(E):null,config:Pe.layoutShiftCompensation,initialRect:ie,measure:ne.draggable.measure});const Q=Yj(me,ne.draggable.measure,ie),we=Yj(me?me.parentElement:null),Be=b.useRef({activatorEvent:null,active:null,activeNode:me,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),nt=U.getNodeFor((a=Be.current.over)==null?void 0:a.id),Qe=pD({measure:ne.dragOverlay.measure}),it=(r=Qe.nodeRef.current)!=null?r:me,Ce=H?(o=Qe.rect)!=null?o:Q:null,Fe=!!(Qe.nodeRef.current&&Qe.rect),Nt=oD(Fe?null:Q),_t=X2(it?Ua(it):null),ut=cD(H?nt??me:null),ke=hD(ut),Oe=ND(T,{transform:{x:Z.x-Nt.x,y:Z.y-Nt.y,scaleX:1,scaleY:1},activatorEvent:J,active:W,activeNodeRect:Q,containerNodeRect:we,draggingNodeRect:Ce,over:Be.current.over,overlayNodeRect:Qe.rect,scrollableAncestors:ut,scrollableAncestorRects:ke,windowRect:_t}),qe=Re?ic(Re,Z):null,Ae=dD(ut),He=Zj(Ae),ct=Zj(Ae,[Q]),de=ic(Oe,He),De=Ce?AA(Ce,Oe):null,Le=W&&De?j({active:W,collisionRect:De,droppableRects:ae,droppableContainers:se,pointerCoordinates:qe}):null,kt=U2(Le,"id"),[sn,$n]=b.useState(null),Fn=Fe?Oe:ic(Oe,ct),wn=MA(Fn,(d=sn?.rect)!=null?d:null,Q),rn=b.useRef(null),la=b.useCallback(($e,Xe)=>{let{sensor:qt,options:Rt}=Xe;if(B.current==null)return;const Mn=z.get(B.current);if(!Mn)return;const Nn=$e.nativeEvent,oa=new qt({active:B.current,activeNode:Mn,event:Nn,options:Rt,context:Be,onAbort(Pt){if(!z.get(Pt))return;const{onDragAbort:Qt}=K.current,Jn={id:Pt};Qt?.(Jn),D({type:"onDragAbort",event:Jn})},onPending(Pt,Gt,Qt,Jn){if(!z.get(Pt))return;const{onDragPending:Ve}=K.current,Ha={id:Pt,constraint:Gt,initialCoordinates:Qt,offset:Jn};Ve?.(Ha),D({type:"onDragPending",event:Ha})},onStart(Pt){const Gt=B.current;if(Gt==null)return;const Qt=z.get(Gt);if(!Qt)return;const{onDragStart:Jn}=K.current,Un={activatorEvent:Nn,active:{id:Gt,data:Qt.data,rect:X}};ec.unstable_batchedUpdates(()=>{Jn?.(Un),R(Qi.Initializing),A({type:Wn.DragStart,initialCoordinates:Pt,active:Gt}),D({type:"onDragStart",event:Un}),G(rn.current),q(Nn)})},onMove(Pt){A({type:Wn.DragMove,coordinates:Pt})},onEnd:Ma(Wn.DragEnd),onCancel:Ma(Wn.DragCancel)});rn.current=oa;function Ma(Pt){return async function(){const{active:Qt,collisions:Jn,over:Un,scrollAdjustedTranslate:Ve}=Be.current;let Ha=null;if(Qt&&Ve){const{cancelDrop:Ts}=K.current;Ha={activatorEvent:Nn,active:Qt,collisions:Jn,delta:Ve,over:Un},Pt===Wn.DragEnd&&typeof Ts=="function"&&await Promise.resolve(Ts(Ha))&&(Pt=Wn.DragCancel)}B.current=null,ec.unstable_batchedUpdates(()=>{A({type:Pt}),R(Qi.Uninitialized),$n(null),G(null),q(null),rn.current=null;const Ts=Pt===Wn.DragEnd?"onDragEnd":"onDragCancel";if(Ha){const os=K.current[Ts];os?.(Ha),D({type:Ts,event:Ha})}})}}},[z]),En=b.useCallback(($e,Xe)=>(qt,Rt)=>{const Mn=qt.nativeEvent,Nn=z.get(Rt);if(B.current!==null||!Nn||Mn.dndKit||Mn.defaultPrevented)return;const oa={active:Nn};$e(qt,Xe.options,oa)===!0&&(Mn.dndKit={capturedBy:Xe.sensor},B.current=Rt,la(qt,Xe))},[z,la]),he=aD(v,En);uD(v),gr(()=>{Q&&F===Qi.Initializing&&R(Qi.Initialized)},[Q,F]),b.useEffect(()=>{const{onDragMove:$e}=K.current,{active:Xe,activatorEvent:qt,collisions:Rt,over:Mn}=Be.current;if(!Xe||!qt)return;const Nn={active:Xe,activatorEvent:qt,collisions:Rt,delta:{x:de.x,y:de.y},over:Mn};ec.unstable_batchedUpdates(()=>{$e?.(Nn),D({type:"onDragMove",event:Nn})})},[de.x,de.y]),b.useEffect(()=>{const{active:$e,activatorEvent:Xe,collisions:qt,droppableContainers:Rt,scrollAdjustedTranslate:Mn}=Be.current;if(!$e||B.current==null||!Xe||!Mn)return;const{onDragOver:Nn}=K.current,oa=Rt.get(kt),Ma=oa&&oa.rect.current?{id:oa.id,rect:oa.rect.current,data:oa.data,disabled:oa.disabled}:null,Pt={active:$e,activatorEvent:Xe,collisions:qt,delta:{x:Mn.x,y:Mn.y},over:Ma};ec.unstable_batchedUpdates(()=>{$n(Ma),Nn?.(Pt),D({type:"onDragOver",event:Pt})})},[kt]),gr(()=>{Be.current={activatorEvent:J,active:W,activeNode:me,collisionRect:De,collisions:Le,droppableRects:ae,draggableNodes:z,draggingNode:it,draggingNodeRect:Ce,droppableContainers:U,over:sn,scrollableAncestors:ut,scrollAdjustedTranslate:de},X.current={initial:Ce,translated:De}},[W,me,Le,De,z,it,Ce,ae,U,sn,ut,de]),JA({...Pe,delta:Z,draggingRect:De,pointerCoordinates:qe,scrollableAncestors:ut,scrollableAncestorRects:ke});const tt=b.useMemo(()=>({active:W,activeNode:me,activeNodeRect:Q,activatorEvent:J,collisions:Le,containerNodeRect:we,dragOverlay:Qe,draggableNodes:z,droppableContainers:U,droppableRects:ae,over:sn,measureDroppableContainers:ee,scrollableAncestors:ut,scrollableAncestorRects:ke,measuringConfiguration:ne,measuringScheduled:le,windowRect:_t}),[W,me,Q,J,Le,we,Qe,z,U,ae,sn,ee,ut,ke,ne,le,_t]),re=b.useMemo(()=>({activatorEvent:J,activators:he,active:W,activeNodeRect:Q,ariaDescribedById:{draggable:I},dispatch:A,draggableNodes:z,over:sn,measureDroppableContainers:ee}),[J,he,W,Q,A,I,z,sn,ee]);return Ke.createElement(B2.Provider,{value:O},Ke.createElement(wf.Provider,{value:re},Ke.createElement(J2.Provider,{value:tt},Ke.createElement(e_.Provider,{value:wn},f)),Ke.createElement(wD,{disabled:g?.restoreFocus===!1})),Ke.createElement(NA,{...g,hiddenTextDescribedById:I}));function Te(){const $e=te?.autoScrollEnabled===!1,Xe=typeof p=="object"?p.enabled===!1:p===!1,qt=H&&!$e&&!Xe;return typeof p=="object"?{...p,enabled:qt}:{enabled:qt}}}),kD=b.createContext(null),Wj="button",TD="Draggable";function ED(e){let{id:n,data:a,disabled:r=!1,attributes:o}=e;const d=Au(TD),{activators:h,activatorEvent:g,active:p,activeNodeRect:f,ariaDescribedById:v,draggableNodes:j,over:S}=b.useContext(wf),{role:T=Wj,roleDescription:C="draggable",tabIndex:N=0}=o??{},k=p?.id===n,A=b.useContext(k?e_:kD),[D,O]=Ih(),[F,R]=Ih(),H=mD(h,n),E=cu(a);gr(()=>(j.set(n,{id:n,key:d,node:D,activatorNode:F,data:E}),()=>{const Z=j.get(n);Z&&Z.key===d&&j.delete(n)}),[j,n]);const z=b.useMemo(()=>({role:T,tabIndex:N,"aria-disabled":r,"aria-pressed":k&&T===Wj?!0:void 0,"aria-roledescription":C,"aria-describedby":v.draggable}),[r,T,N,k,C,v.draggable]);return{active:p,activatorEvent:g,activeNodeRect:f,attributes:z,isDragging:k,listeners:r?void 0:H,node:D,over:S,setNodeRef:O,setActivatorNodeRef:R,transform:A}}function MD(){return b.useContext(J2)}const RD="Droppable",AD={timeout:25};function DD(e){let{data:n,disabled:a=!1,id:r,resizeObserverConfig:o}=e;const d=Au(RD),{active:h,dispatch:g,over:p,measureDroppableContainers:f}=b.useContext(wf),v=b.useRef({disabled:a}),j=b.useRef(!1),S=b.useRef(null),T=b.useRef(null),{disabled:C,updateMeasurementsFor:N,timeout:k}={...AD,...o},A=cu(N??r),D=b.useCallback(()=>{if(!j.current){j.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{f(Array.isArray(A.current)?A.current:[A.current]),T.current=null},k)},[k]),O=jf({callback:D,disabled:C||!h}),F=b.useCallback((z,Z)=>{O&&(Z&&(O.unobserve(Z),j.current=!1),z&&O.observe(z))},[O]),[R,H]=Ih(F),E=cu(n);return b.useEffect(()=>{!O||!R.current||(O.disconnect(),j.current=!1,O.observe(R.current))},[R,O]),b.useEffect(()=>(g({type:Wn.RegisterDroppable,element:{id:r,key:d,disabled:a,node:R,rect:S,data:E}}),()=>g({type:Wn.UnregisterDroppable,key:d,id:r})),[r]),b.useEffect(()=>{a!==v.current.disabled&&(g({type:Wn.SetDroppableDisabled,id:r,key:d,disabled:a}),v.current.disabled=a)},[r,d,a,g]),{active:h,rect:S,isOver:p?.id===r,node:R,over:p,setNodeRef:H}}function Q0(e,n,a){const r=e.slice();return r.splice(a<0?r.length+a:a,0,r.splice(n,1)[0]),r}function PD(e,n){return e.reduce((a,r,o)=>{const d=n.get(r);return d&&(a[o]=d),a},Array(e.length))}function uh(e){return e!==null&&e>=0}function OD(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==n[a])return!1;return!0}function LD(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const X0=e=>{let{rects:n,activeIndex:a,overIndex:r,index:o}=e;const d=Q0(n,r,a),h=n[o],g=d[o];return!g||!h?null:{x:g.left-h.left,y:g.top-h.top,scaleX:g.width/h.width,scaleY:g.height/h.height}},t_="Sortable",n_=Ke.createContext({activeIndex:-1,containerId:t_,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:X0,disabled:{draggable:!1,droppable:!1}});function zD(e){let{children:n,id:a,items:r,strategy:o=X0,disabled:d=!1}=e;const{active:h,dragOverlay:g,droppableRects:p,over:f,measureDroppableContainers:v}=MD(),j=Au(t_,a),S=g.rect!==null,T=b.useMemo(()=>r.map(H=>typeof H=="object"&&"id"in H?H.id:H),[r]),C=h!=null,N=h?T.indexOf(h.id):-1,k=f?T.indexOf(f.id):-1,A=b.useRef(T),D=!OD(T,A.current),O=k!==-1&&N===-1||D,F=LD(d);gr(()=>{D&&C&&v(T)},[D,T,C,v]),b.useEffect(()=>{A.current=T},[T]);const R=b.useMemo(()=>({activeIndex:N,containerId:j,disabled:F,disableTransforms:O,items:T,overIndex:k,useDragOverlay:S,sortedRects:PD(T,p),strategy:o}),[N,j,F.draggable,F.droppable,O,T,k,p,S,o]);return Ke.createElement(n_.Provider,{value:R},n)}const ID=e=>{let{id:n,items:a,activeIndex:r,overIndex:o}=e;return Q0(a,r,o).indexOf(n)},BD=e=>{let{containerId:n,isSorting:a,wasDragging:r,index:o,items:d,newIndex:h,previousItems:g,previousContainerId:p,transition:f}=e;return!f||!r||g!==d&&o===h?!1:a?!0:h!==o&&n===p},$D={duration:200,easing:"ease"},a_="transform",FD=uu.Transition.toString({property:a_,duration:0,easing:"linear"}),UD={roleDescription:"sortable"};function HD(e){let{disabled:n,index:a,node:r,rect:o}=e;const[d,h]=b.useState(null),g=b.useRef(a);return gr(()=>{if(!n&&a!==g.current&&r.current){const p=o.current;if(p){const f=Ec(r.current,{ignoreTransform:!0}),v={x:p.left-f.left,y:p.top-f.top,scaleX:p.width/f.width,scaleY:p.height/f.height};(v.x||v.y)&&h(v)}}a!==g.current&&(g.current=a)},[n,a,r,o]),b.useEffect(()=>{d&&h(null)},[d]),d}function qD(e){let{animateLayoutChanges:n=BD,attributes:a,disabled:r,data:o,getNewIndex:d=ID,id:h,strategy:g,resizeObserverConfig:p,transition:f=$D}=e;const{items:v,containerId:j,activeIndex:S,disabled:T,disableTransforms:C,sortedRects:N,overIndex:k,useDragOverlay:A,strategy:D}=b.useContext(n_),O=YD(r,T),F=v.indexOf(h),R=b.useMemo(()=>({sortable:{containerId:j,index:F,items:v},...o}),[j,o,F,v]),H=b.useMemo(()=>v.slice(v.indexOf(h)),[v,h]),{rect:E,node:z,isOver:Z,setNodeRef:U}=DD({id:h,data:R,disabled:O.droppable,resizeObserverConfig:{updateMeasurementsFor:H,...p}}),{active:V,activatorEvent:X,activeNodeRect:W,attributes:B,setNodeRef:te,listeners:G,isDragging:J,over:q,setActivatorNodeRef:K,transform:I}=ED({id:h,data:R,attributes:{...UD,...a},disabled:O.draggable}),se=dA(U,te),ne=!!V,ae=ne&&!C&&uh(S)&&uh(k),ee=!A&&J,le=ee&&ae?I:null,Re=ae?le??(g??D)({rects:N,activeNodeRect:W,activeIndex:S,overIndex:k,index:F}):null,Pe=uh(S)&&uh(k)?d({id:h,items:v,activeIndex:S,overIndex:k}):F,ie=V?.id,Q=b.useRef({activeId:ie,items:v,newIndex:Pe,containerId:j}),we=v!==Q.current.items,Be=n({active:V,containerId:j,isDragging:J,isSorting:ne,id:h,index:F,items:v,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:f,wasDragging:Q.current.activeId!=null}),nt=HD({disabled:!Be,index:F,node:z,rect:E});return b.useEffect(()=>{ne&&Q.current.newIndex!==Pe&&(Q.current.newIndex=Pe),j!==Q.current.containerId&&(Q.current.containerId=j),v!==Q.current.items&&(Q.current.items=v)},[ne,Pe,j,v]),b.useEffect(()=>{if(ie===Q.current.activeId)return;if(ie!=null&&Q.current.activeId==null){Q.current.activeId=ie;return}const it=setTimeout(()=>{Q.current.activeId=ie},50);return()=>clearTimeout(it)},[ie]),{active:V,activeIndex:S,attributes:B,data:R,rect:E,index:F,newIndex:Pe,items:v,isOver:Z,isSorting:ne,isDragging:J,listeners:G,node:z,overIndex:k,over:q,setNodeRef:se,setActivatorNodeRef:K,setDroppableNodeRef:U,setDraggableNodeRef:te,transform:nt??Re,transition:Qe()};function Qe(){if(nt||we&&Q.current.newIndex===F)return FD;if(!(ee&&!V0(X)||!f)&&(ne||Be))return uu.Transition.toString({...f,property:a_})}}function YD(e,n){var a,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:n.draggable,droppable:(r=e?.droppable)!=null?r:n.droppable}}function Fh(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const VD=[St.Down,St.Right,St.Up,St.Left],ZD=(e,n)=>{let{context:{active:a,collisionRect:r,droppableRects:o,droppableContainers:d,over:h,scrollableAncestors:g}}=n;if(VD.includes(e.code)){if(e.preventDefault(),!a||!r)return;const p=[];d.getEnabled().forEach(j=>{if(!j||j!=null&&j.disabled)return;const S=o.get(j.id);if(S)switch(e.code){case St.Down:r.top<S.top&&p.push(j);break;case St.Up:r.top>S.top&&p.push(j);break;case St.Left:r.left>S.left&&p.push(j);break;case St.Right:r.left<S.left&&p.push(j);break}});const f=kA({collisionRect:r,droppableRects:o,droppableContainers:p});let v=U2(f,"id");if(v===h?.id&&f.length>1&&(v=f[1].id),v!=null){const j=d.get(a.id),S=d.get(v),T=S?o.get(S.id):null,C=S?.node.current;if(C&&T&&j&&S){const k=vf(C).some((H,E)=>g[E]!==H),A=s_(j,S),D=KD(j,S),O=k||!A?{x:0,y:0}:{x:D?r.width-T.width:0,y:D?r.height-T.height:0},F={x:T.left,y:T.top};return O.x&&O.y?F:du(F,O)}}}};function s_(e,n){return!Fh(e)||!Fh(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function KD(e,n){return!Fh(e)||!Fh(n)||!s_(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const WD=({image:e,isSelected:n,thumbnailSize:a,showDetails:r,onSelect:o,onEdit:d,onSetPrimary:h,onDelete:g,isDragging:p})=>{const{attributes:f,listeners:v,setNodeRef:j,transform:S,transition:T,isDragging:C}=qD({id:e.id}),N={transform:uu.Transform.toString(S),transition:T,opacity:C?.5:1},k=e.thumbnails[a]||e.url;return t.jsxs("div",{ref:j,style:N,...f,className:`
        relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all duration-200
        ${n?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
        ${C?"shadow-2xl z-50":"hover:shadow-md"}
      `,onClick:o,children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:k,alt:e.alt||e.filename,className:"w-full h-full object-cover",loading:"lazy"}),n&&t.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.isPrimary&&t.jsx("div",{className:"absolute top-1 right-1",children:t.jsx(Kr,{status:"رئيسية",size:"sm"})}),e.processingStatus!=="ready"&&t.jsx("div",{className:"absolute top-1 left-1",children:t.jsx(Kr,{status:e.processingStatus==="processing"?"معالجة":"خطأ",size:"sm"})}),t.jsx("div",{...v,className:"absolute top-1 left-1 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",children:t.jsx("div",{className:"w-6 h-6 bg-black bg-opacity-50 rounded flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-1 transform translate-y-full group-hover:translate-y-0 transition-transform",children:t.jsxs("div",{className:"flex justify-center space-x-1 rtl:space-x-reverse",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:A=>{A.stopPropagation(),d()},className:"text-white hover:bg-white hover:bg-opacity-20",label:"تحرير",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),!e.isPrimary&&t.jsx(rt,{variant:"secondary",size:"sm",onClick:A=>{A.stopPropagation(),h()},className:"text-white hover:bg-white hover:bg-opacity-20",label:"تعيين رئيسية",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),t.jsx(rt,{variant:"danger",size:"sm",onClick:A=>{A.stopPropagation(),g()},className:"text-white hover:bg-red-500 hover:bg-opacity-50",label:"حذف",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),r&&t.jsxs("div",{className:"p-2 bg-white",children:[t.jsx("p",{className:"text-xs text-gray-600 truncate",title:e.filename,children:e.filename}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Math.round(e.size/1024)," كب • ",e.width,"×",e.height]}),e.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.tags.slice(0,2).map(A=>t.jsx("span",{className:"px-1 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:A},A)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-2]})]})]})]})},r_=({propertyId:e,unitId:n,category:a,editable:r=!0,reorderable:o=!0,columns:d=4,thumbnailSize:h="medium",onImageSelect:g,onEditImage:p,selectedImages:f=[],onSelectionChange:v,multiSelect:j=!1,showDetails:S=!1,showToolbar:T=!0})=>{const{executeWithFeedback:C,showConfirmDialog:N,confirmDialog:k,hideConfirmDialog:A}=Kl(),[D,O]=b.useState("grid"),[F,R]=b.useState("all"),{images:H,isLoading:E,error:z,reorderImagesAsync:Z,setPrimaryImageAsync:U,deleteImageAsync:V,refetch:X}=Eu({propertyId:e,unitId:n,category:F==="all"?void 0:F,sortBy:"order",sortOrder:"asc"}),W=_A(zj(G0,{activationConstraint:{distance:8}}),zj(K0,{coordinateGetter:ZD})),B=b.useMemo(()=>{let ne=H;return a&&(ne=ne.filter(ae=>ae.category===a)),ne},[H,a]),[te,G]=b.useState([]);b.useEffect(()=>{G(B)},[B]);const J=b.useCallback(async ne=>{const{active:ae,over:ee}=ne;if(ae.id!==ee?.id){const le=te.findIndex(ie=>ie.id===ae.id),me=te.findIndex(ie=>ie.id===ee.id),Re=Q0(te,le,me);G(Re);const Pe=Re.map(ie=>ie.id);try{await Z({imageIds:Pe,propertyId:e,unitId:n})}catch(ie){G(B),console.error("فشل في إعادة ترتيب الصور:",ie)}}},[te,B,Z,e,n]),q=b.useCallback(ne=>{if(j){const ae=f.includes(ne.id)?f.filter(ee=>ee!==ne.id):[...f,ne.id];v?.(ae)}else v?.([ne.id]);g?.(ne)},[j,f,v,g]),K=b.useCallback(async ne=>{try{await C(()=>U({imageId:ne.id,propertyId:e,unitId:n}),{loadingKey:"set-primary-image",successMessage:"تم تعيين الصورة الرئيسية بنجاح",errorMessage:"فشل في تعيين الصورة الرئيسية"})}catch(ae){console.error("فشل في تعيين الصورة الرئيسية:",ae)}},[C,U,e,n]),I=b.useCallback(ne=>{N({title:"حذف الصورة",message:`هل أنت متأكد من حذف الصورة "${ne.filename}"؟`,type:"danger",onConfirm:async()=>{try{await C(()=>V({imageId:ne.id}),{loadingKey:"delete-image",successMessage:"تم حذف الصورة بنجاح",errorMessage:"فشل في حذف الصورة"})}catch(ae){console.error("فشل في حذف الصورة:",ae)}finally{A()}}})},[N,A,C,V]),se=[{value:"all",label:"جميع الصور"},{value:"exterior",label:"خارجية"},{value:"interior",label:"داخلية"},{value:"amenity",label:"المرافق"},{value:"floor_plan",label:"مخطط الطابق"},{value:"documents",label:"المستندات"}];return E?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(pr,{size:"lg"})}):z?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:"حدث خطأ في تحميل الصور"}),t.jsx(rt,{onClick:()=>X(),variant:"secondary",label:"إعادة المحاولة",children:"إعادة المحاولة"})]}):t.jsxs("div",{className:"w-full",children:[T&&t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"عرض:"}),t.jsxs("select",{value:D,onChange:ne=>O(ne.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"grid",children:"شبكة"}),t.jsx("option",{value:"list",children:"قائمة"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"الفئة:"}),t.jsx("select",{value:F,onChange:ne=>R(ne.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:se.map(ne=>t.jsx("option",{value:ne.value,children:ne.label},ne.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[B.length," صورة"]}),f.length>0&&t.jsxs("span",{className:"text-sm text-blue-600",children:["(",f.length," محددة)"]})]})]}),B.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"لا توجد صور للعرض"})]}):t.jsx(CD,{sensors:W,collisionDetection:CA,onDragEnd:J,children:t.jsx(zD,{items:te.map(ne=>ne.id),strategy:X0,children:t.jsx("div",{className:`
              ${D==="grid"?`grid grid-cols-2 md:grid-cols-${Math.min(d,6)} gap-4`:"flex flex-col gap-2"}
            `,children:te.map(ne=>t.jsx(WD,{image:ne,isSelected:f.includes(ne.id),thumbnailSize:h,showDetails:S||D==="list",onSelect:()=>q(ne),onEdit:()=>p?.(ne),onSetPrimary:()=>K(ne),onDelete:()=>I(ne)},ne.id))})})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:k.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:k.message}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(rt,{variant:"secondary",onClick:A,label:"إلغاء",children:"إلغاء"}),t.jsx(rt,{variant:"danger",onClick:k.onConfirm,label:"تأكيد",children:"تأكيد"})]})]})})]})};function Gl(e,n,a,r){function o(d){return d instanceof a?d:new a(function(h){h(d)})}return new(a||(a=Promise))(function(d,h){function g(v){try{f(r.next(v))}catch(j){h(j)}}function p(v){try{f(r.throw(v))}catch(j){h(j)}}function f(v){v.done?d(v.value):o(v.value).then(g,p)}f((r=r.apply(e,n||[])).next())})}const GD=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function dc(e,n,a){const r=QD(e),{webkitRelativePath:o}=e,d=typeof n=="string"?n:typeof o=="string"&&o.length>0?o:`./${e.name}`;return typeof r.path!="string"&&Gj(r,"path",d),Gj(r,"relativePath",d),r}function QD(e){const{name:n}=e;if(n&&n.lastIndexOf(".")!==-1&&!e.type){const r=n.split(".").pop().toLowerCase(),o=GD.get(r);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}function Gj(e,n,a){Object.defineProperty(e,n,{value:a,writable:!1,configurable:!1,enumerable:!0})}const XD=[".DS_Store","Thumbs.db"];function JD(e){return Gl(this,void 0,void 0,function*(){return Uh(e)&&e6(e.dataTransfer)?s6(e.dataTransfer,e.type):t6(e)?n6(e):Array.isArray(e)&&e.every(n=>"getFile"in n&&typeof n.getFile=="function")?a6(e):[]})}function e6(e){return Uh(e)}function t6(e){return Uh(e)&&Uh(e.target)}function Uh(e){return typeof e=="object"&&e!==null}function n6(e){return Zx(e.target.files).map(n=>dc(n))}function a6(e){return Gl(this,void 0,void 0,function*(){return(yield Promise.all(e.map(a=>a.getFile()))).map(a=>dc(a))})}function s6(e,n){return Gl(this,void 0,void 0,function*(){if(e.items){const a=Zx(e.items).filter(o=>o.kind==="file");if(n!=="drop")return a;const r=yield Promise.all(a.map(r6));return Qj(i_(r))}return Qj(Zx(e.files).map(a=>dc(a)))})}function Qj(e){return e.filter(n=>XD.indexOf(n.name)===-1)}function Zx(e){if(e===null)return[];const n=[];for(let a=0;a<e.length;a++){const r=e[a];n.push(r)}return n}function r6(e){if(typeof e.webkitGetAsEntry!="function")return Xj(e);const n=e.webkitGetAsEntry();return n&&n.isDirectory?l_(n):Xj(e,n)}function i_(e){return e.reduce((n,a)=>[...n,...Array.isArray(a)?i_(a):[a]],[])}function Xj(e,n){return Gl(this,void 0,void 0,function*(){var a;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const d=yield e.getAsFileSystemHandle();if(d===null)throw new Error(`${e} is not a File`);if(d!==void 0){const h=yield d.getFile();return h.handle=d,dc(h)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return dc(r,(a=n?.fullPath)!==null&&a!==void 0?a:void 0)})}function i6(e){return Gl(this,void 0,void 0,function*(){return e.isDirectory?l_(e):l6(e)})}function l_(e){const n=e.createReader();return new Promise((a,r)=>{const o=[];function d(){n.readEntries(h=>Gl(this,void 0,void 0,function*(){if(h.length){const g=Promise.all(h.map(i6));o.push(g),d()}else try{const g=yield Promise.all(o);a(g)}catch(g){r(g)}}),h=>{r(h)})}d()})}function l6(e){return Gl(this,void 0,void 0,function*(){return new Promise((n,a)=>{e.file(r=>{const o=dc(r,e.fullPath);n(o)},r=>{a(r)})})})}var mh={},Jj;function o6(){return Jj||(Jj=1,mh.__esModule=!0,mh.default=function(e,n){if(e&&n){var a=Array.isArray(n)?n:n.split(",");if(a.length===0)return!0;var r=e.name||"",o=(e.type||"").toLowerCase(),d=o.replace(/\/.*$/,"");return a.some(function(h){var g=h.trim().toLowerCase();return g.charAt(0)==="."?r.toLowerCase().endsWith(g):g.endsWith("/*")?d===g.replace(/\/.*$/,""):o===g})}return!0}),mh}var c6=o6();const lx=pu(c6);function ew(e){return m6(e)||u6(e)||c_(e)||d6()}function d6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function m6(e){if(Array.isArray(e))return Kx(e)}function tw(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,r)}return a}function nw(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?tw(Object(a),!0).forEach(function(r){o_(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tw(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function o_(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function hu(e,n){return p6(e)||f6(e,n)||c_(e,n)||h6()}function h6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c_(e,n){if(e){if(typeof e=="string")return Kx(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Kx(e,n)}}function Kx(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,r=new Array(n);a<n;a++)r[a]=e[a];return r}function f6(e,n){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r=[],o=!0,d=!1,h,g;try{for(a=a.call(e);!(o=(h=a.next()).done)&&(r.push(h.value),!(n&&r.length===n));o=!0);}catch(p){d=!0,g=p}finally{try{!o&&a.return!=null&&a.return()}finally{if(d)throw g}}return r}}function p6(e){if(Array.isArray(e))return e}var g6=typeof lx=="function"?lx:lx.default,x6="file-invalid-type",y6="file-too-large",b6="file-too-small",v6="too-many-files",j6=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=n.split(","),r=a.length>1?"one of ".concat(a.join(", ")):a[0];return{code:x6,message:"File type must be ".concat(r)}},aw=function(n){return{code:y6,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},sw=function(n){return{code:b6,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},w6={code:v6,message:"Too many files"};function d_(e,n){var a=e.type==="application/x-moz-file"||g6(e,n);return[a,a?null:j6(n)]}function u_(e,n,a){if(zl(e.size))if(zl(n)&&zl(a)){if(e.size>a)return[!1,aw(a)];if(e.size<n)return[!1,sw(n)]}else{if(zl(n)&&e.size<n)return[!1,sw(n)];if(zl(a)&&e.size>a)return[!1,aw(a)]}return[!0,null]}function zl(e){return e!=null}function N6(e){var n=e.files,a=e.accept,r=e.minSize,o=e.maxSize,d=e.multiple,h=e.maxFiles,g=e.validator;return!d&&n.length>1||d&&h>=1&&n.length>h?!1:n.every(function(p){var f=d_(p,a),v=hu(f,1),j=v[0],S=u_(p,r,o),T=hu(S,1),C=T[0],N=g?g(p):null;return j&&C&&!N})}function Hh(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function hh(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function rw(e){e.preventDefault()}function _6(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function S6(e){return e.indexOf("Edge/")!==-1}function C6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return _6(e)||S6(e)}function rr(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return function(r){for(var o=arguments.length,d=new Array(o>1?o-1:0),h=1;h<o;h++)d[h-1]=arguments[h];return n.some(function(g){return!Hh(r)&&g&&g.apply(void 0,[r].concat(d)),Hh(r)})}}function k6(){return"showOpenFilePicker"in window}function T6(e){if(zl(e)){var n=Object.entries(e).filter(function(a){var r=hu(a,2),o=r[0],d=r[1],h=!0;return m_(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),h=!1),(!Array.isArray(d)||!d.every(h_))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),h=!1),h}).reduce(function(a,r){var o=hu(r,2),d=o[0],h=o[1];return nw(nw({},a),{},o_({},d,h))},{});return[{description:"Files",accept:n}]}return e}function E6(e){if(zl(e))return Object.entries(e).reduce(function(n,a){var r=hu(a,2),o=r[0],d=r[1];return[].concat(ew(n),[o],ew(d))},[]).filter(function(n){return m_(n)||h_(n)}).join(",")}function M6(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function R6(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function m_(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function h_(e){return/^.*\.[\w]+$/.test(e)}var A6=["children"],D6=["open"],P6=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],O6=["refKey","onChange","onClick"];function L6(e){return B6(e)||I6(e)||f_(e)||z6()}function z6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B6(e){if(Array.isArray(e))return Wx(e)}function ox(e,n){return U6(e)||F6(e,n)||f_(e,n)||$6()}function $6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f_(e,n){if(e){if(typeof e=="string")return Wx(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wx(e,n)}}function Wx(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,r=new Array(n);a<n;a++)r[a]=e[a];return r}function F6(e,n){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r=[],o=!0,d=!1,h,g;try{for(a=a.call(e);!(o=(h=a.next()).done)&&(r.push(h.value),!(n&&r.length===n));o=!0);}catch(p){d=!0,g=p}finally{try{!o&&a.return!=null&&a.return()}finally{if(d)throw g}}return r}}function U6(e){if(Array.isArray(e))return e}function iw(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,r)}return a}function bn(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?iw(Object(a),!0).forEach(function(r){Gx(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iw(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Gx(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function qh(e,n){if(e==null)return{};var a=H6(e,n),r,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)r=d[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function H6(e,n){if(e==null)return{};var a={},r=Object.keys(e),o,d;for(d=0;d<r.length;d++)o=r[d],!(n.indexOf(o)>=0)&&(a[o]=e[o]);return a}var J0=b.forwardRef(function(e,n){var a=e.children,r=qh(e,A6),o=g_(r),d=o.open,h=qh(o,D6);return b.useImperativeHandle(n,function(){return{open:d}},[d]),Ke.createElement(b.Fragment,null,a(bn(bn({},h),{},{open:d})))});J0.displayName="Dropzone";var p_={disabled:!1,getFilesFromEvent:JD,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};J0.defaultProps=p_;J0.propTypes={children:Jt.func,accept:Jt.objectOf(Jt.arrayOf(Jt.string)),multiple:Jt.bool,preventDropOnDocument:Jt.bool,noClick:Jt.bool,noKeyboard:Jt.bool,noDrag:Jt.bool,noDragEventsBubbling:Jt.bool,minSize:Jt.number,maxSize:Jt.number,maxFiles:Jt.number,disabled:Jt.bool,getFilesFromEvent:Jt.func,onFileDialogCancel:Jt.func,onFileDialogOpen:Jt.func,useFsAccessApi:Jt.bool,autoFocus:Jt.bool,onDragEnter:Jt.func,onDragLeave:Jt.func,onDragOver:Jt.func,onDrop:Jt.func,onDropAccepted:Jt.func,onDropRejected:Jt.func,onError:Jt.func,validator:Jt.func};var Qx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function g_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=bn(bn({},p_),e),a=n.accept,r=n.disabled,o=n.getFilesFromEvent,d=n.maxSize,h=n.minSize,g=n.multiple,p=n.maxFiles,f=n.onDragEnter,v=n.onDragLeave,j=n.onDragOver,S=n.onDrop,T=n.onDropAccepted,C=n.onDropRejected,N=n.onFileDialogCancel,k=n.onFileDialogOpen,A=n.useFsAccessApi,D=n.autoFocus,O=n.preventDropOnDocument,F=n.noClick,R=n.noKeyboard,H=n.noDrag,E=n.noDragEventsBubbling,z=n.onError,Z=n.validator,U=b.useMemo(function(){return E6(a)},[a]),V=b.useMemo(function(){return T6(a)},[a]),X=b.useMemo(function(){return typeof k=="function"?k:lw},[k]),W=b.useMemo(function(){return typeof N=="function"?N:lw},[N]),B=b.useRef(null),te=b.useRef(null),G=b.useReducer(q6,Qx),J=ox(G,2),q=J[0],K=J[1],I=q.isFocused,se=q.isFileDialogActive,ne=b.useRef(typeof window<"u"&&window.isSecureContext&&A&&k6()),ae=function(){!ne.current&&se&&setTimeout(function(){if(te.current){var He=te.current.files;He.length||(K({type:"closeDialog"}),W())}},300)};b.useEffect(function(){return window.addEventListener("focus",ae,!1),function(){window.removeEventListener("focus",ae,!1)}},[te,se,W,ne]);var ee=b.useRef([]),le=function(He){B.current&&B.current.contains(He.target)||(He.preventDefault(),ee.current=[])};b.useEffect(function(){return O&&(document.addEventListener("dragover",rw,!1),document.addEventListener("drop",le,!1)),function(){O&&(document.removeEventListener("dragover",rw),document.removeEventListener("drop",le))}},[B,O]),b.useEffect(function(){return!r&&D&&B.current&&B.current.focus(),function(){}},[B,D,r]);var me=b.useCallback(function(Ae){z?z(Ae):console.error(Ae)},[z]),Re=b.useCallback(function(Ae){Ae.preventDefault(),Ae.persist(),ut(Ae),ee.current=[].concat(L6(ee.current),[Ae.target]),hh(Ae)&&Promise.resolve(o(Ae)).then(function(He){if(!(Hh(Ae)&&!E)){var ct=He.length,de=ct>0&&N6({files:He,accept:U,minSize:h,maxSize:d,multiple:g,maxFiles:p,validator:Z}),De=ct>0&&!de;K({isDragAccept:de,isDragReject:De,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Ae)}}).catch(function(He){return me(He)})},[o,f,me,E,U,h,d,g,p,Z]),Pe=b.useCallback(function(Ae){Ae.preventDefault(),Ae.persist(),ut(Ae);var He=hh(Ae);if(He&&Ae.dataTransfer)try{Ae.dataTransfer.dropEffect="copy"}catch{}return He&&j&&j(Ae),!1},[j,E]),ie=b.useCallback(function(Ae){Ae.preventDefault(),Ae.persist(),ut(Ae);var He=ee.current.filter(function(de){return B.current&&B.current.contains(de)}),ct=He.indexOf(Ae.target);ct!==-1&&He.splice(ct,1),ee.current=He,!(He.length>0)&&(K({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),hh(Ae)&&v&&v(Ae))},[B,v,E]),Q=b.useCallback(function(Ae,He){var ct=[],de=[];Ae.forEach(function(De){var Le=d_(De,U),kt=ox(Le,2),sn=kt[0],$n=kt[1],Fn=u_(De,h,d),wn=ox(Fn,2),rn=wn[0],la=wn[1],En=Z?Z(De):null;if(sn&&rn&&!En)ct.push(De);else{var he=[$n,la];En&&(he=he.concat(En)),de.push({file:De,errors:he.filter(function(tt){return tt})})}}),(!g&&ct.length>1||g&&p>=1&&ct.length>p)&&(ct.forEach(function(De){de.push({file:De,errors:[w6]})}),ct.splice(0)),K({acceptedFiles:ct,fileRejections:de,isDragReject:de.length>0,type:"setFiles"}),S&&S(ct,de,He),de.length>0&&C&&C(de,He),ct.length>0&&T&&T(ct,He)},[K,g,U,h,d,p,S,T,C,Z]),we=b.useCallback(function(Ae){Ae.preventDefault(),Ae.persist(),ut(Ae),ee.current=[],hh(Ae)&&Promise.resolve(o(Ae)).then(function(He){Hh(Ae)&&!E||Q(He,Ae)}).catch(function(He){return me(He)}),K({type:"reset"})},[o,Q,me,E]),Be=b.useCallback(function(){if(ne.current){K({type:"openDialog"}),X();var Ae={multiple:g,types:V};window.showOpenFilePicker(Ae).then(function(He){return o(He)}).then(function(He){Q(He,null),K({type:"closeDialog"})}).catch(function(He){M6(He)?(W(He),K({type:"closeDialog"})):R6(He)?(ne.current=!1,te.current?(te.current.value=null,te.current.click()):me(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):me(He)});return}te.current&&(K({type:"openDialog"}),X(),te.current.value=null,te.current.click())},[K,X,W,A,Q,me,V,g]),nt=b.useCallback(function(Ae){!B.current||!B.current.isEqualNode(Ae.target)||(Ae.key===" "||Ae.key==="Enter"||Ae.keyCode===32||Ae.keyCode===13)&&(Ae.preventDefault(),Be())},[B,Be]),Qe=b.useCallback(function(){K({type:"focus"})},[]),it=b.useCallback(function(){K({type:"blur"})},[]),Ce=b.useCallback(function(){F||(C6()?setTimeout(Be,0):Be())},[F,Be]),Fe=function(He){return r?null:He},Nt=function(He){return R?null:Fe(He)},_t=function(He){return H?null:Fe(He)},ut=function(He){E&&He.stopPropagation()},ke=b.useMemo(function(){return function(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=Ae.refKey,ct=He===void 0?"ref":He,de=Ae.role,De=Ae.onKeyDown,Le=Ae.onFocus,kt=Ae.onBlur,sn=Ae.onClick,$n=Ae.onDragEnter,Fn=Ae.onDragOver,wn=Ae.onDragLeave,rn=Ae.onDrop,la=qh(Ae,P6);return bn(bn(Gx({onKeyDown:Nt(rr(De,nt)),onFocus:Nt(rr(Le,Qe)),onBlur:Nt(rr(kt,it)),onClick:Fe(rr(sn,Ce)),onDragEnter:_t(rr($n,Re)),onDragOver:_t(rr(Fn,Pe)),onDragLeave:_t(rr(wn,ie)),onDrop:_t(rr(rn,we)),role:typeof de=="string"&&de!==""?de:"presentation"},ct,B),!r&&!R?{tabIndex:0}:{}),la)}},[B,nt,Qe,it,Ce,Re,Pe,ie,we,R,H,r]),Oe=b.useCallback(function(Ae){Ae.stopPropagation()},[]),qe=b.useMemo(function(){return function(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=Ae.refKey,ct=He===void 0?"ref":He,de=Ae.onChange,De=Ae.onClick,Le=qh(Ae,O6),kt=Gx({accept:U,multiple:g,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Fe(rr(de,we)),onClick:Fe(rr(De,Oe)),tabIndex:-1},ct,te);return bn(bn({},kt),Le)}},[te,a,g,we,r]);return bn(bn({},q),{},{isFocused:I&&!r,getRootProps:ke,getInputProps:qe,rootRef:B,inputRef:te,open:Fe(Be)})}function q6(e,n){switch(n.type){case"focus":return bn(bn({},e),{},{isFocused:!0});case"blur":return bn(bn({},e),{},{isFocused:!1});case"openDialog":return bn(bn({},Qx),{},{isFileDialogActive:!0});case"closeDialog":return bn(bn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return bn(bn({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return bn(bn({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return bn({},Qx);default:return e}}function lw(){}const Y6=({file:e,progress:n,onRemove:a,onCategoryChange:r,category:o})=>{const[d,h]=b.useState("");Ke.useEffect(()=>{const p=URL.createObjectURL(e);return h(p),()=>URL.revokeObjectURL(p)},[e]);const g=[{value:"exterior",label:"خارجية"},{value:"interior",label:"داخلية"},{value:"amenity",label:"المرافق"},{value:"floor_plan",label:"مخطط الطابق"},{value:"documents",label:"المستندات"},{value:"gallery",label:"معرض عام"}];return t.jsxs("div",{className:"relative bg-white border border-gray-200 rounded-lg p-3",children:[t.jsxs("div",{className:"relative w-full h-24 mb-2 rounded overflow-hidden bg-gray-100",children:[t.jsx("img",{src:d,alt:e.name,className:"w-full h-full object-cover"}),t.jsx("button",{onClick:a,className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:"✕"}),n&&t.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:[n.status==="uploading"&&t.jsxs("div",{className:"text-center",children:[t.jsx(pr,{size:"sm",className:"text-white"}),t.jsxs("div",{className:"text-white text-xs mt-1",children:[n.progress,"%"]})]}),n.status==="completed"&&t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n.status==="failed"&&t.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 truncate",title:e.name,children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(2)," MB"]})]}),t.jsx("select",{value:o,onChange:p=>r(p.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(p=>t.jsx("option",{value:p.value,children:p.label},p.value))}),n?.status==="failed"&&n.error&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:n.error})]})]})},x_=({propertyId:e,unitId:n,defaultCategory:a="gallery",multiple:r=!0,maxFiles:o=20,maxSize:d=10,acceptedTypes:h=["image/jpeg","image/png","image/webp","image/gif"],showPreview:g=!0,onUploadComplete:p,onError:f,compact:v=!1,showProgress:j=!0})=>{Kl();const{showSuccess:S,showError:T}=k2(),C=b.useRef(null),[N,k]=b.useState([]),[A,D]=b.useState({}),[O,F]=b.useState(!1),{uploadImageWithProgress:R,uploadProgress:H,clearUploadProgress:E,clearAllUploadProgress:z}=Eu(),Z=b.useCallback((K,I)=>{if(I.length>0){const ae=I.map(({file:ee,errors:le})=>`${ee.name}: ${le.map(me=>me.message).join(", ")}`);f?.(ae.join(`
`)),T("بعض الملفات لم يتم قبولها");return}if(N.length+K.length>o){f?.(`لا يمكن رفع أكثر من ${o} ملف`),T(`لا يمكن رفع أكثر من ${o} ملف`);return}k(ae=>[...ae,...K]);const ne={};K.forEach(ae=>{ne[ae.name]=a}),D(ae=>({...ae,...ne}))},[N,o,a,f,T]),{getRootProps:U,getInputProps:V,isDragActive:X,isDragReject:W}=g_({onDrop:Z,accept:h.reduce((K,I)=>({...K,[I]:[]}),{}),multiple:r,maxSize:d*1024*1024,disabled:O}),B=b.useCallback(K=>{const I=N[K];k(ae=>ae.filter((ee,le)=>le!==K)),D(ae=>{const{[I.name]:ee,...le}=ae;return le});const ne=Object.entries(H).find(([ae,ee])=>ee.filename===I.name);ne&&E(ne[0])},[N,H,E]),te=b.useCallback((K,I)=>{D(se=>({...se,[K]:I}))},[]),G=b.useCallback(async()=>{if(N.length===0)return;F(!0);const K=[],I=[];try{for(const se of N)try{const ne={file:se,propertyId:e,unitId:n,category:A[se.name]||a,alt:se.name.split(".")[0]},ae=await R(ne);ae.success&&ae.image&&K.push(ae.image)}catch(ne){const ae=ne instanceof Error?ne.message:"حدث خطأ غير متوقع";I.push(`${se.name}: ${ae}`)}K.length>0&&(S(`تم رفع ${K.length} صورة بنجاح`),p?.(K),k([]),D({}),z()),I.length>0&&(f?.(I.join(`
`)),T(`فشل في رفع ${I.length} صورة`))}catch(se){const ne=se instanceof Error?se.message:"حدث خطأ غير متوقع";f?.(ne),T("فشل في رفع الصور")}finally{F(!1)}},[N,A,e,n,a,R,p,f,S,T,z]),J=b.useCallback(()=>{k([]),D({}),z()},[z]),q=b.useCallback(()=>{C.current?.click()},[]);return v?t.jsx("div",{className:"w-full",children:t.jsxs("div",{...U(),className:`
            border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors
            ${X?"border-blue-500 bg-blue-50":W?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400"}
            ${O?"pointer-events-none opacity-50":""}
          `,children:[t.jsx("input",{...V(),ref:C}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),t.jsx("span",{className:"text-sm text-gray-600",children:X?"اسقط الصور هنا":"اختر أو اسقط الصور"})]})]})}):t.jsxs("div",{className:"w-full space-y-4",children:[t.jsxs("div",{...U(),className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200
          ${X?"border-blue-500 bg-blue-50 scale-105":W?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
          ${O?"pointer-events-none opacity-50":""}
        `,children:[t.jsx("input",{...V(),ref:C}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-medium text-gray-700",children:X?"اسقط الصور هنا":"اختر الصور أو اسقطها هنا"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["PNG، JPG، WebP، GIF حتى ",d," ميجابايت"]}),r&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["يمكن رفع حتى ",o," صورة"]})]}),t.jsx(rt,{variant:"secondary",onClick:q,disabled:O,label:"اختيار الملفات",children:"اختيار الملفات"})]})]}),g&&N.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["الصور المحددة (",N.length,")"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:J,disabled:O,label:"مسح الكل",children:"مسح الكل"}),t.jsx(rt,{variant:"primary",size:"sm",onClick:G,disabled:O||N.length===0,loading:O,label:"رفع الصور",children:"رفع الصور"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:N.map((K,I)=>{const ne=Object.entries(H).find(([ae,ee])=>ee.filename===K.name);return t.jsx(Y6,{file:K,progress:ne?.[1],onRemove:()=>B(I),onCategoryChange:ae=>te(K.name,ae),category:A[K.name]||a},`${K.name}-${I}`)})})]}),j&&O&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(pr,{size:"sm"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-blue-800",children:"جاري رفع الصور..."}),t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[Object.values(H).filter(K=>K.status==="completed").length," / ",N.length," مكتملة"]})]})]})})]})};var V6=Object.defineProperty,Z6=(e,n,a)=>n in e?V6(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,mn=(e,n,a)=>Z6(e,typeof n!="symbol"?n+"":n,a);const Yh={x:0,y:0,width:0,height:0,unit:"px"},Ko=(e,n,a)=>Math.min(Math.max(e,n),a),K6=(...e)=>e.filter(n=>n&&typeof n=="string").join(" "),ow=(e,n)=>e===n||e.width===n.width&&e.height===n.height&&e.x===n.x&&e.y===n.y&&e.unit===n.unit;function W6(e,n,a,r){const o=ir(e,a,r);return e.width&&(o.height=o.width/n),e.height&&(o.width=o.height*n),o.y+o.height>r&&(o.height=r-o.y,o.width=o.height*n),o.x+o.width>a&&(o.width=a-o.x,o.height=o.width/n),e.unit==="%"?Xi(o,a,r):o}function G6(e,n,a){const r=ir(e,n,a);return r.x=(n-r.width)/2,r.y=(a-r.height)/2,e.unit==="%"?Xi(r,n,a):r}function Xi(e,n,a){return e.unit==="%"?{...Yh,...e,unit:"%"}:{unit:"%",x:e.x?e.x/n*100:0,y:e.y?e.y/a*100:0,width:e.width?e.width/n*100:0,height:e.height?e.height/a*100:0}}function ir(e,n,a){return e.unit?e.unit==="px"?{...Yh,...e,unit:"px"}:{unit:"px",x:e.x?e.x*n/100:0,y:e.y?e.y*a/100:0,width:e.width?e.width*n/100:0,height:e.height?e.height*a/100:0}:{...Yh,...e,unit:"px"}}function cw(e,n,a,r,o,d=0,h=0,g=r,p=o){const f={...e};let v=Math.min(d,r),j=Math.min(h,o),S=Math.min(g,r),T=Math.min(p,o);n&&(n>1?(v=h?h*n:v,j=v/n,S=g*n):(j=d?d/n:j,v=j*n,T=p/n)),f.y<0&&(f.height=Math.max(f.height+f.y,j),f.y=0),f.x<0&&(f.width=Math.max(f.width+f.x,v),f.x=0);const C=r-(f.x+f.width);C<0&&(f.x=Math.min(f.x,r-v),f.width+=C);const N=o-(f.y+f.height);if(N<0&&(f.y=Math.min(f.y,o-j),f.height+=N),f.width<v&&((a==="sw"||a=="nw")&&(f.x-=v-f.width),f.width=v),f.height<j&&((a==="nw"||a=="ne")&&(f.y-=j-f.height),f.height=j),f.width>S&&((a==="sw"||a=="nw")&&(f.x-=S-f.width),f.width=S),f.height>T&&((a==="nw"||a=="ne")&&(f.y-=T-f.height),f.height=T),n){const k=f.width/f.height;if(k<n){const A=Math.max(f.width/n,j);(a==="nw"||a=="ne")&&(f.y-=A-f.height),f.height=A}else if(k>n){const A=Math.max(f.height*n,v);(a==="sw"||a=="nw")&&(f.x-=A-f.width),f.width=A}}return f}function Q6(e,n,a,r){const o={...e};return n==="ArrowLeft"?r==="nw"?(o.x-=a,o.y-=a,o.width+=a,o.height+=a):r==="w"?(o.x-=a,o.width+=a):r==="sw"?(o.x-=a,o.width+=a,o.height+=a):r==="ne"?(o.y+=a,o.width-=a,o.height-=a):r==="e"?o.width-=a:r==="se"&&(o.width-=a,o.height-=a):n==="ArrowRight"&&(r==="nw"?(o.x+=a,o.y+=a,o.width-=a,o.height-=a):r==="w"?(o.x+=a,o.width-=a):r==="sw"?(o.x+=a,o.width-=a,o.height-=a):r==="ne"?(o.y-=a,o.width+=a,o.height+=a):r==="e"?o.width+=a:r==="se"&&(o.width+=a,o.height+=a)),n==="ArrowUp"?r==="nw"?(o.x-=a,o.y-=a,o.width+=a,o.height+=a):r==="n"?(o.y-=a,o.height+=a):r==="ne"?(o.y-=a,o.width+=a,o.height+=a):r==="sw"?(o.x+=a,o.width-=a,o.height-=a):r==="s"?o.height-=a:r==="se"&&(o.width-=a,o.height-=a):n==="ArrowDown"&&(r==="nw"?(o.x+=a,o.y+=a,o.width-=a,o.height-=a):r==="n"?(o.y+=a,o.height-=a):r==="ne"?(o.y+=a,o.width-=a,o.height-=a):r==="sw"?(o.x-=a,o.width+=a,o.height+=a):r==="s"?o.height+=a:r==="se"&&(o.width+=a,o.height+=a)),o}const Wo={capture:!0,passive:!1};let X6=0;const Wi=class zs extends b.PureComponent{constructor(){super(...arguments),mn(this,"docMoveBound",!1),mn(this,"mouseDownOnCrop",!1),mn(this,"dragStarted",!1),mn(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),mn(this,"componentRef",b.createRef()),mn(this,"mediaRef",b.createRef()),mn(this,"resizeObserver"),mn(this,"initChangeCalled",!1),mn(this,"instanceId",`rc-${X6++}`),mn(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),mn(this,"onCropPointerDown",n=>{const{crop:a,disabled:r}=this.props,o=this.getBox();if(!a)return;const d=ir(a,o.width,o.height);if(r)return;n.cancelable&&n.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=n.target.dataset.ord,g=!!h;let p=n.clientX,f=n.clientY,v=d.x,j=d.y;if(h){const S=n.clientX-o.x,T=n.clientY-o.y;let C=0,N=0;h==="ne"||h=="e"?(C=S-(d.x+d.width),N=T-d.y,v=d.x,j=d.y+d.height):h==="se"||h==="s"?(C=S-(d.x+d.width),N=T-(d.y+d.height),v=d.x,j=d.y):h==="sw"||h=="w"?(C=S-d.x,N=T-(d.y+d.height),v=d.x+d.width,j=d.y):(h==="nw"||h=="n")&&(C=S-d.x,N=T-d.y,v=d.x+d.width,j=d.y+d.height),p=v+o.x+C,f=j+o.y+N}this.evData={startClientX:p,startClientY:f,startCropX:v,startCropY:j,clientX:n.clientX,clientY:n.clientY,isResize:g,ord:h},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),mn(this,"onComponentPointerDown",n=>{const{crop:a,disabled:r,locked:o,keepSelection:d,onChange:h}=this.props,g=this.getBox();if(r||o||d&&a)return;n.cancelable&&n.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const p=n.clientX-g.x,f=n.clientY-g.y,v={unit:"px",x:p,y:f,width:0,height:0};this.evData={startClientX:n.clientX,startClientY:n.clientY,startCropX:p,startCropY:f,clientX:n.clientX,clientY:n.clientY,isResize:!0},this.mouseDownOnCrop=!0,h(ir(v,g.width,g.height),Xi(v,g.width,g.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),mn(this,"onDocPointerMove",n=>{const{crop:a,disabled:r,onChange:o,onDragStart:d}=this.props,h=this.getBox();if(r||!a||!this.mouseDownOnCrop)return;n.cancelable&&n.preventDefault(),this.dragStarted||(this.dragStarted=!0,d&&d(n));const{evData:g}=this;g.clientX=n.clientX,g.clientY=n.clientY;let p;g.isResize?p=this.resizeCrop():p=this.dragCrop(),ow(a,p)||o(ir(p,h.width,h.height),Xi(p,h.width,h.height))}),mn(this,"onComponentKeyDown",n=>{const{crop:a,disabled:r,onChange:o,onComplete:d}=this.props;if(r)return;const h=n.key;let g=!1;if(!a)return;const p=this.getBox(),f=this.makePixelCrop(p),v=(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?zs.nudgeStepLarge:n.shiftKey?zs.nudgeStepMedium:zs.nudgeStep;if(h==="ArrowLeft"?(f.x-=v,g=!0):h==="ArrowRight"?(f.x+=v,g=!0):h==="ArrowUp"?(f.y-=v,g=!0):h==="ArrowDown"&&(f.y+=v,g=!0),g){n.cancelable&&n.preventDefault(),f.x=Ko(f.x,0,p.width-f.width),f.y=Ko(f.y,0,p.height-f.height);const j=ir(f,p.width,p.height),S=Xi(f,p.width,p.height);o(j,S),d&&d(j,S)}}),mn(this,"onHandlerKeyDown",(n,a)=>{const{aspect:r=0,crop:o,disabled:d,minWidth:h=0,minHeight:g=0,maxWidth:p,maxHeight:f,onChange:v,onComplete:j}=this.props,S=this.getBox();if(d||!o)return;if(n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="ArrowLeft"||n.key==="ArrowRight")n.stopPropagation(),n.preventDefault();else return;const T=(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?zs.nudgeStepLarge:n.shiftKey?zs.nudgeStepMedium:zs.nudgeStep,C=ir(o,S.width,S.height),N=Q6(C,n.key,T,a),k=cw(N,r,a,S.width,S.height,h,g,p,f);if(!ow(o,k)){const A=Xi(k,S.width,S.height);v(k,A),j&&j(k,A)}}),mn(this,"onDocPointerDone",n=>{const{crop:a,disabled:r,onComplete:o,onDragEnd:d}=this.props,h=this.getBox();this.unbindDocMove(),!(r||!a)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,d&&d(n),o&&o(ir(a,h.width,h.height),Xi(a,h.width,h.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),mn(this,"onDragFocus",()=>{var n;(n=this.componentRef.current)==null||n.scrollTo(0,0)})}get document(){return document}getBox(){const n=this.mediaRef.current;if(!n)return{x:0,y:0,width:0,height:0};const{x:a,y:r,width:o,height:d}=n.getBoundingClientRect();return{x:a,y:r,width:o,height:d}}componentDidUpdate(n){const{crop:a,onComplete:r}=this.props;if(r&&!n.crop&&a){const{width:o,height:d}=this.getBox();o&&d&&r(ir(a,o,d),Xi(a,o,d))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Wo),this.document.addEventListener("pointerup",this.onDocPointerDone,Wo),this.document.addEventListener("pointercancel",this.onDocPointerDone,Wo),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Wo),this.document.removeEventListener("pointerup",this.onDocPointerDone,Wo),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Wo),this.docMoveBound=!1)}getCropStyle(){const{crop:n}=this.props;if(n)return{top:`${n.y}${n.unit}`,left:`${n.x}${n.unit}`,width:`${n.width}${n.unit}`,height:`${n.height}${n.unit}`}}dragCrop(){const{evData:n}=this,a=this.getBox(),r=this.makePixelCrop(a),o=n.clientX-n.startClientX,d=n.clientY-n.startClientY;return r.x=Ko(n.startCropX+o,0,a.width-r.width),r.y=Ko(n.startCropY+d,0,a.height-r.height),r}getPointRegion(n,a,r,o){const{evData:d}=this,h=d.clientX-n.x,g=d.clientY-n.y;let p;o&&a?p=a==="nw"||a==="n"||a==="ne":p=g<d.startCropY;let f;return r&&a?f=a==="nw"||a==="w"||a==="sw":f=h<d.startCropX,f?p?"nw":"sw":p?"ne":"se"}resolveMinDimensions(n,a,r=0,o=0){const d=Math.min(r,n.width),h=Math.min(o,n.height);return!a||!d&&!h?[d,h]:a>1?d?[d,d/a]:[h*a,h]:h?[h*a,h]:[d,d/a]}resizeCrop(){const{evData:n}=this,{aspect:a=0,maxWidth:r,maxHeight:o}=this.props,d=this.getBox(),[h,g]=this.resolveMinDimensions(d,a,this.props.minWidth,this.props.minHeight);let p=this.makePixelCrop(d);const f=this.getPointRegion(d,n.ord,h,g),v=n.ord||f;let j=n.clientX-n.startClientX,S=n.clientY-n.startClientY;(h&&v==="nw"||v==="w"||v==="sw")&&(j=Math.min(j,-h)),(g&&v==="nw"||v==="n"||v==="ne")&&(S=Math.min(S,-g));const T={unit:"px",x:0,y:0,width:0,height:0};f==="ne"?(T.x=n.startCropX,T.width=j,a?(T.height=T.width/a,T.y=n.startCropY-T.height):(T.height=Math.abs(S),T.y=n.startCropY-T.height)):f==="se"?(T.x=n.startCropX,T.y=n.startCropY,T.width=j,a?T.height=T.width/a:T.height=S):f==="sw"?(T.x=n.startCropX+j,T.y=n.startCropY,T.width=Math.abs(j),a?T.height=T.width/a:T.height=S):f==="nw"&&(T.x=n.startCropX+j,T.width=Math.abs(j),a?(T.height=T.width/a,T.y=n.startCropY-T.height):(T.height=Math.abs(S),T.y=n.startCropY+S));const C=cw(T,a,f,d.width,d.height,h,g,r,o);return a||zs.xyOrds.indexOf(v)>-1?p=C:zs.xOrds.indexOf(v)>-1?(p.x=C.x,p.width=C.width):zs.yOrds.indexOf(v)>-1&&(p.y=C.y,p.height=C.height),p.x=Ko(p.x,0,d.width-p.width),p.y=Ko(p.y,0,d.height-p.height),p}renderCropSelection(){const{ariaLabels:n=zs.defaultProps.ariaLabels,disabled:a,locked:r,renderSelectionAddon:o,ruleOfThirds:d,crop:h}=this.props,g=this.getCropStyle();if(h)return Ke.createElement("div",{style:g,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":n.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!a&&!r&&Ke.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},Ke.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),Ke.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),Ke.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),Ke.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":n.nwDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"nw"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":n.nDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"n"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":n.neDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"ne"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":n.eDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"e"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":n.seDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"se"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":n.sDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"s"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":n.swDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"sw"),role:"button"}),Ke.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":n.wDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"w"),role:"button"})),o&&Ke.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:p=>p.stopPropagation()},o(this.state)),d&&Ke.createElement(Ke.Fragment,null,Ke.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),Ke.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(n){const a={...Yh,...this.props.crop||{}};return ir(a,n.width,n.height)}render(){const{aspect:n,children:a,circularCrop:r,className:o,crop:d,disabled:h,locked:g,style:p,ruleOfThirds:f}=this.props,{cropIsActive:v,newCropIsBeingDrawn:j}=this.state,S=d?this.renderCropSelection():null,T=K6("ReactCrop",o,v&&"ReactCrop--active",h&&"ReactCrop--disabled",g&&"ReactCrop--locked",j&&"ReactCrop--new-crop",d&&n&&"ReactCrop--fixed-aspect",d&&r&&"ReactCrop--circular-crop",d&&f&&"ReactCrop--rule-of-thirds",!this.dragStarted&&d&&!d.width&&!d.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return Ke.createElement("div",{ref:this.componentRef,className:T,style:p},Ke.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},a),d?Ke.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},Ke.createElement("defs",null,Ke.createElement("mask",{id:`hole-${this.instanceId}`},Ke.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?Ke.createElement("ellipse",{cx:`${d.x+d.width/2}${d.unit}`,cy:`${d.y+d.height/2}${d.unit}`,rx:`${d.width/2}${d.unit}`,ry:`${d.height/2}${d.unit}`,fill:"black"}):Ke.createElement("rect",{x:`${d.x}${d.unit}`,y:`${d.y}${d.unit}`,width:`${d.width}${d.unit}`,height:`${d.height}${d.unit}`,fill:"black"}))),Ke.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,S)}};mn(Wi,"xOrds",["e","w"]),mn(Wi,"yOrds",["n","s"]),mn(Wi,"xyOrds",["nw","ne","se","sw"]),mn(Wi,"nudgeStep",1),mn(Wi,"nudgeStepMedium",10),mn(Wi,"nudgeStepLarge",100),mn(Wi,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let J6=Wi;const y_=({image:e,isOpen:n,onClose:a,onSave:r})=>{const{executeWithFeedback:o}=Kl(),d=b.useRef(null),h=b.useRef(null),[g,p]=b.useState("crop"),[f,v]=b.useState(""),[j,S]=b.useState(""),[T,C]=b.useState(!1),[N,k]=b.useState(),[A,D]=b.useState(),[O,F]=b.useState(void 0),[R,H]=b.useState({brightness:100,contrast:100,saturation:100,blur:0,sepia:0,hue:0}),[E,z]=b.useState({text:"النص الجديد",fontSize:24,fontFamily:"Arial",color:"#000000",bold:!1,italic:!1,shadow:!1}),[Z,U]=b.useState(0),{cropImageAsync:V,rotateImageAsync:X,flipImageAsync:W,restoreOriginalAsync:B}=Eu();b.useEffect(()=>{n&&e&&(v(e.url),S(e.url),H({brightness:100,contrast:100,saturation:100,blur:0,sepia:0,hue:0}),U(0),k(void 0),D(void 0))},[n,e]),b.useEffect(()=>{if(n&&d.current){const ee=d.current,le=ee.getContext("2d");le&&(ee.width=800,ee.height=600,le.clearRect(0,0,ee.width,ee.height))}},[n,g]);const te=b.useCallback(()=>{if(!h.current||!d.current)return;const ee=d.current,le=ee.getContext("2d");if(!le)return;const me=h.current;ee.width=me.naturalWidth,ee.height=me.naturalHeight,le.filter=`
      brightness(${R.brightness}%)
      contrast(${R.contrast}%)
      saturate(${R.saturation}%)
      blur(${R.blur}px)
      sepia(${R.sepia}%)
      hue-rotate(${R.hue}deg)
    `,le.drawImage(me,0,0);const Re=ee.toDataURL("image/jpeg",.9);S(Re)},[R]);b.useEffect(()=>{(g==="filter"||g==="adjust")&&te()},[R,g,te]);const G=b.useCallback(async()=>{if(!(!A||!h.current)){C(!0);try{const ee=await V({imageId:e.id,cropData:{x:A.x,y:A.y,width:A.width,height:A.height}});ee&&(S(ee.url),r?.(ee))}catch(ee){console.error("فشل في اقتصاص الصورة:",ee)}finally{C(!1)}}},[A,e.id,V,r]),J=b.useCallback(async ee=>{C(!0);try{const le=await o(()=>X({imageId:e.id,degrees:ee}),{loadingKey:"rotate-image",successMessage:"تم تدوير الصورة بنجاح",errorMessage:"فشل في تدوير الصورة"});if(!le)return;S(le.url),U(me=>(me+ee)%360),r?.(le)}finally{C(!1)}},[e.id,X,o,r]),q=b.useCallback(async ee=>{C(!0);try{const le=await o(()=>W({imageId:e.id,direction:ee}),{loadingKey:"flip-image",successMessage:"تم قلب الصورة بنجاح",errorMessage:"فشل في قلب الصورة"});if(!le)return;S(le.url),r?.(le)}finally{C(!1)}},[e.id,W,o,r]),K=b.useCallback(()=>{if(!d.current)return;const ee=d.current,le=ee.getContext("2d");le&&(le.font=`${E.bold?"bold":"normal"} ${E.fontSize}px ${E.fontFamily}`,le.fillStyle=E.color,le.textAlign="center",E.shadow&&(le.shadowColor="rgba(0,0,0,0.5)",le.shadowBlur=5,le.shadowOffsetX=2,le.shadowOffsetY=2),le.fillText(E.text,ee.width/2,ee.height/2),le.shadowColor="transparent")},[E]),I=b.useCallback(async()=>{C(!0);try{let ee=e;const le=Object.values(R).some((me,Re)=>me!==[100,100,100,0,0,0][Re]);if(d.current){const Re=d.current.toDataURL("image/png")}r?.(ee),a()}catch(ee){console.error("فشل في تطبيق التعديلات:",ee)}finally{C(!1)}},[R,e,r,a]),se=b.useCallback(async()=>{C(!0);try{const ee=await o(()=>B(e.id),{loadingKey:"restore-image",successMessage:"تم استعادة النسخة الأصلية بنجاح",errorMessage:"فشل في استعادة النسخة الأصلية"});if(!ee)return;S(ee.url),H({brightness:100,contrast:100,saturation:100,blur:0,sepia:0,hue:0}),r?.(ee)}finally{C(!1)}},[e.id,B,o,r]),ne=b.useCallback(ee=>{const{width:le,height:me}=ee.currentTarget,Re=G6(W6({unit:"%",width:90},O||le/me,le,me),le,me);k(Re)},[O]),ae=[{id:"crop",name:"اقتصاص",icon:"✂️"},{id:"rotate",name:"تدوير",icon:"🔄"},{id:"flip",name:"قلب",icon:"🔀"},{id:"filter",name:"فلاتر",icon:"🎨"},{id:"adjust",name:"تعديلات",icon:"⚙️"},{id:"text",name:"نص",icon:"📝"},{id:"watermark",name:"علامة مائية",icon:"💧"}];return n?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg w-full max-w-7xl h-full max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"محرر الصور المتقدم"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(rt,{variant:"secondary",onClick:se,disabled:T,label:"استعادة الأصلية"}),t.jsx(rt,{variant:"primary",onClick:I,disabled:T,loading:T,label:"حفظ التعديلات"}),t.jsx(rt,{variant:"secondary",onClick:a,disabled:T,label:"✕"})]})]}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsx("div",{className:"w-64 border-l p-4 overflow-y-auto",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"الأدوات"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae.map(ee=>t.jsxs("button",{onClick:()=>p(ee.id),className:`
                        p-3 rounded-lg border transition-all text-sm
                        ${g===ee.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}
                      `,children:[t.jsx("div",{className:"text-lg mb-1",children:ee.icon}),ee.name]},ee.id))})]}),t.jsxs("div",{className:"border-t pt-4",children:[g==="crop"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"إعدادات الاقتصاص"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"النسبة:"}),t.jsxs("select",{value:O||"",onChange:ee=>F(ee.target.value?parseFloat(ee.target.value):void 0),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"حر"}),t.jsx("option",{value:"1",children:"مربع (1:1)"}),t.jsx("option",{value:"1.3333",children:"4:3"}),t.jsx("option",{value:"1.7778",children:"16:9"}),t.jsx("option",{value:"0.75",children:"3:4"})]})]}),t.jsx(rt,{onClick:G,disabled:!A||T,loading:T,className:"w-full",label:"تطبيق الاقتصاص",children:t.jsx("span",{className:"text-sm",children:"تطبيق الاقتصاص"})})]})]}),g==="rotate"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"التدوير"}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx(rt,{onClick:()=>J(90),disabled:T,size:"sm",label:"90°"}),t.jsx(rt,{onClick:()=>J(180),disabled:T,size:"sm",label:"180°"}),t.jsx(rt,{onClick:()=>J(270),disabled:T,size:"sm",label:"270°"})]})})]}),g==="flip"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"القلب"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(rt,{onClick:()=>q("horizontal"),disabled:T,className:"w-full",label:"قلب أفقي"}),t.jsx(rt,{onClick:()=>q("vertical"),disabled:T,className:"w-full",label:"قلب عمودي"})]})]}),(g==="filter"||g==="adjust")&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"التعديلات والفلاتر"}),t.jsx("div",{className:"space-y-3",children:Object.entries(R).map(([ee,le])=>t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600 capitalize",children:ee==="brightness"?"السطوع":ee==="contrast"?"التباين":ee==="saturation"?"التشبع":ee==="blur"?"الضبابية":ee==="sepia"?"بني داكن":ee==="hue"?"الصبغة":ee}),t.jsx("input",{type:"range",min:ee==="hue"?-180:0,max:ee==="hue"?180:ee==="blur"?20:200,value:le,onChange:me=>H(Re=>({...Re,[ee]:parseInt(me.target.value)})),className:"w-full mt-1"}),t.jsx("span",{className:"text-xs text-gray-500",children:le})]},ee))})]}),g==="text"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"إعدادات النص"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"النص:"}),t.jsx("input",{type:"text",value:E.text,onChange:ee=>z(le=>({...le,text:ee.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"حجم الخط:"}),t.jsx("input",{type:"range",min:"12",max:"72",value:E.fontSize,onChange:ee=>z(le=>({...le,fontSize:parseInt(ee.target.value)})),className:"w-full mt-1"}),t.jsxs("span",{className:"text-xs text-gray-500",children:[E.fontSize,"px"]})]}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"اللون:"}),t.jsx("input",{type:"color",value:E.color,onChange:ee=>z(le=>({...le,color:ee.target.value})),className:"w-full mt-1 h-10 border border-gray-300 rounded"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:E.bold,onChange:ee=>z(le=>({...le,bold:ee.target.checked})),className:"ml-2"}),t.jsx("span",{className:"text-sm",children:"عريض"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:E.italic,onChange:ee=>z(le=>({...le,italic:ee.target.checked})),className:"ml-2"}),t.jsx("span",{className:"text-sm",children:"مائل"})]})]}),t.jsx(rt,{onClick:K,className:"w-full",label:"إضافة النص"})]})]})]})]})}),t.jsxs("div",{className:"flex-1 flex items-center justify-center bg-gray-100 p-4 overflow-auto",children:[T&&t.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10",children:t.jsx(pr,{size:"lg"})}),t.jsx("div",{className:"relative max-w-full max-h-full",children:g==="crop"?t.jsx(J6,{crop:N,onChange:(ee,le)=>k(le),onComplete:ee=>D(ee),aspect:O,children:t.jsx("img",{ref:h,src:j,alt:"تحرير الصورة",onLoad:ne,className:"max-w-full max-h-full object-contain"})}):t.jsxs("div",{className:"relative",children:[t.jsx("img",{ref:h,src:j,alt:"تحرير الصورة",className:"max-w-full max-h-full object-contain",style:{filter:g==="filter"||g==="adjust"?`
                        brightness(${R.brightness}%)
                        contrast(${R.contrast}%)
                        saturate(${R.saturation}%)
                        blur(${R.blur}px)
                        sepia(${R.sepia}%)
                        hue-rotate(${R.hue}deg)
                      `:"none"}}),g==="text"&&t.jsx("canvas",{ref:d,className:"absolute top-0 left-0 w-full h-full",style:{pointerEvents:"auto"}})]})})]})]})]})}):null},eP=()=>{const{propertyId:e}=Qh(),n=Hs(),a=is(),{executeWithFeedback:r,showConfirmDialog:o,confirmDialog:d,hideConfirmDialog:h}=Kl(),[g,p]=b.useState("gallery"),[f,v]=b.useState([]),[j,S]=b.useState(null),[T,C]=b.useState("all"),[N,k]=b.useState("grid"),D={title:n.state?.propertyName||`الكيان ${e}`},{images:O,isLoading:F,deleteImagesAsync:R,refetch:H}=Eu({propertyId:e,category:T==="all"?void 0:T,sortBy:"order",sortOrder:"asc"}),{data:E,isLoading:z,refetch:Z}=L2(e),U=b.useCallback(q=>{v(q)},[]),V=b.useCallback(()=>{f.length!==0&&o({title:"حذف الصور المحددة",message:`هل أنت متأكد من حذف ${f.length} صورة؟`,type:"danger",onConfirm:async()=>{try{await r(()=>R({imageIds:f}),{loadingKey:"delete-images",successMessage:`تم حذف ${f.length} صورة بنجاح`,errorMessage:"فشل في حذف الصور"}),v([])}catch(q){console.error("فشل في حذف الصور:",q)}finally{h()}}})},[f,o,h,r,R]),X=b.useCallback(q=>{H(),Z(),p("gallery")},[H,Z]),W=b.useCallback(q=>{S(q)},[]),B=b.useCallback(()=>{S(null)},[]),te=b.useCallback(q=>{H(),S(null)},[H]),G=[{key:"thumbnail",title:"الصورة",render:(q,K)=>t.jsx("div",{className:"w-16 h-16 rounded overflow-hidden",children:t.jsx("img",{src:K.thumbnails.small||K.url,alt:K.alt||K.filename,className:"w-full h-full object-cover"})})},{key:"filename",title:"اسم الملف",render:(q,K)=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:K.filename}),t.jsx("p",{className:"text-sm text-gray-500",children:K.alt})]})},{key:"category",title:"الفئة",render:(q,K)=>t.jsx(Kr,{status:K.category==="exterior"?"خارجية":K.category==="interior"?"داخلية":K.category==="amenity"?"المرافق":K.category==="floor_plan"?"مخطط الطابق":K.category==="documents"?"المستندات":"معرض عام"})},{key:"size",title:"الحجم / الأبعاد",render:(q,K)=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[Math.round(K.size/1024)," كب"]}),t.jsxs("p",{className:"text-gray-500",children:[K.width,"×",K.height]})]})},{key:"status",title:"الحالة",render:(q,K)=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(Kr,{status:K.processingStatus==="ready"?"جاهزة":"معالجة"}),K.isPrimary&&t.jsx(Kr,{status:"رئيسية",size:"sm"})]})},{key:"uploadedAt",title:"تاريخ الرفع",render:(q,K)=>t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{children:new Date(K.uploadedAt).toLocaleDateString("ar-SA")}),t.jsx("p",{className:"text-gray-500",children:new Date(K.uploadedAt).toLocaleTimeString("ar-SA")})]})},{key:"actions",title:"الإجراءات",render:(q,K)=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>W(K),label:"تحرير"}),t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>v([K.id]),label:"حذف"})]})}],J=[{value:"all",label:"جميع الصور",count:E?.totalImages||0},{value:"exterior",label:"خارجية",count:E?.byCategory.exterior||0},{value:"interior",label:"داخلية",count:E?.byCategory.interior||0},{value:"amenity",label:"المرافق",count:E?.byCategory.amenity||0},{value:"floor_plan",label:"مخطط الطابق",count:E?.byCategory.floor_plan||0},{value:"documents",label:"المستندات",count:E?.byCategory.documents||0},{value:"gallery",label:"معرض عام",count:E?.byCategory.gallery||0}];return D?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[t.jsx("button",{onClick:()=>a("/admin/properties"),className:"hover:text-blue-600 transition-colors",children:"الكيانات"}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/properties/${e}`),className:"hover:text-blue-600 transition-colors",children:D.title}),t.jsx("span",{children:"/"}),t.jsx("span",{children:"معرض الصور"})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"معرض صور الكيان"}),t.jsx("p",{className:"text-gray-600 mt-1",children:D.title})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(rt,{variant:"secondary",onClick:()=>a(`/admin/properties/${e}`),label:"العودة للكيان"})})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 rtl:space-x-reverse px-6",children:[{id:"gallery",label:"معرض الصور",count:O.length},{id:"upload",label:"رفع جديدة",icon:"📤"},{id:"statistics",label:"الإحصائيات",icon:"📊"}].map(q=>t.jsx("button",{onClick:()=>p(q.id),className:`
                  py-4 px-1 border-b-2 font-medium text-sm transition-colors
                  ${g===q.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:t.jsxs("div",{className:"flex items-center gap-2",children:[q.icon&&t.jsx("span",{children:q.icon}),t.jsx("span",{children:q.label}),q.count!==void 0&&t.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:q.count})]})},q.id))})}),t.jsxs("div",{className:"p-6",children:[g==="gallery"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"الفئة:"}),t.jsx("select",{value:T,onChange:q=>C(q.target.value),className:"px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:J.map(q=>t.jsxs("option",{value:q.value,children:[q.label," (",q.count,")"]},q.value))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"العرض:"}),t.jsxs("div",{className:"flex border border-gray-300 rounded overflow-hidden",children:[t.jsx("button",{onClick:()=>k("grid"),className:`px-3 py-1 text-sm ${N==="grid"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"شبكة"}),t.jsx("button",{onClick:()=>k("table"),className:`px-3 py-1 text-sm ${N==="table"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"جدول"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[f.length," محددة"]}),t.jsx(rt,{variant:"danger",size:"sm",onClick:V,label:"حذف المحددة",children:"حذف المحددة"})]}),t.jsx(rt,{variant:"primary",onClick:()=>p("upload"),label:"رفع صور جديدة"})]})]}),N==="grid"?t.jsx(r_,{propertyId:e,category:T==="all"?void 0:T,editable:!0,reorderable:!0,multiSelect:!0,selectedImages:f,onSelectionChange:U,onEditImage:W,showDetails:!0,showToolbar:!1}):t.jsx("div",{children:O.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد صور للعرض"}):t.jsx(ls,{data:O,columns:G,loading:F,rowSelection:{selectedRowKeys:f,onChange:q=>v(q)}})})]}),g==="upload"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"رفع صور جديدة"}),t.jsx("p",{className:"text-gray-600",children:"اختر الصور لرفعها وربطها بهذا الكيان. يمكنك تحديد فئة كل صورة والتحكم في ترتيبها."})]}),t.jsx(x_,{propertyId:e,defaultCategory:"gallery",multiple:!0,maxFiles:50,maxSize:10,showPreview:!0,showProgress:!0,onUploadComplete:X})]}),g==="statistics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إحصائيات الصور"}),t.jsx("p",{className:"text-gray-600",children:"نظرة عامة على صور هذا الكيان والمساحة المستخدمة."})]}),z?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(pr,{size:"lg"})}):E?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-blue-600",children:"إجمالي الصور"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:E.totalImages})]})]})}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-green-600",children:"الحجم الكلي"}),t.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[(E.totalSize/1024/1024).toFixed(1)," MB"]})]})]})}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"الصور الرئيسية"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:E.primaryImages})]})]})}),t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-purple-600",children:"متوسط الحجم"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[(E.averageSize/1024/1024).toFixed(1)," MB"]})]})]})})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"لا توجد إحصائيات متاحة"})})]})]})]}),j&&t.jsx(y_,{image:j,isOpen:!!j,onClose:B,onSave:te}),d&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:d.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:d.message}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(rt,{variant:"secondary",onClick:h,label:"إلغاء",children:"إلغاء"}),t.jsx(rt,{variant:"danger",onClick:d.onConfirm,label:"تأكيد",children:"تأكيد"})]})]})})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:"حدث خطأ في تحميل بيانات الكيان"}),t.jsx(rt,{onClick:()=>a("/admin/properties"),variant:"secondary",label:"العودة للكيانات"})]})},tP=()=>{const{propertyId:e,unitId:n}=Qh(),a=is(),r=Hs(),{executeWithFeedback:o,showConfirmDialog:d,confirmDialog:h,hideConfirmDialog:g}=Kl(),{data:p,isLoading:f,error:v}=zt({queryKey:["admin-unit-details",n],queryFn:()=>nc.getDetails(n),enabled:!!n}),j=p?.data,S=j?.dynamicFields?.flatMap(le=>le.fieldValues)||[],[T,C]=b.useState("gallery"),[N,k]=b.useState([]),[A,D]=b.useState(null),[O,F]=b.useState("all"),[R,H]=b.useState("grid"),E=r.state||{},z={title:E.propertyName||`الكيان ${e}`},Z={name:E.unitName||`الوحدة ${n}`},{images:U,isLoading:V,deleteImagesAsync:X,refetch:W}=Eu({propertyId:e,unitId:n,category:O==="all"?void 0:O,sortBy:"order",sortOrder:"asc"}),{data:B,isLoading:te,refetch:G}=L2(e,n),J=b.useCallback(le=>{k(le)},[]),q=b.useCallback(()=>{N.length!==0&&d({title:"حذف الصور المحددة",message:`هل أنت متأكد من حذف ${N.length} صورة؟`,type:"danger",onConfirm:async()=>{try{await o(()=>X({imageIds:N}),{loadingKey:"delete-images",successMessage:`تم حذف ${N.length} صورة بنجاح`,errorMessage:"فشل في حذف الصور"}),k([])}catch(le){console.error("فشل في حذف الصور:",le)}finally{g()}}})},[N,d,g,o,X]),K=b.useCallback(le=>{W(),G(),C("gallery")},[W,G]),I=b.useCallback(le=>{D(le)},[]),se=b.useCallback(()=>{D(null)},[]),ne=b.useCallback(le=>{W(),D(null)},[W]),ae=[{key:"thumbnail",title:"الصورة",label:"الصورة",render:le=>t.jsx("div",{className:"w-16 h-16 rounded overflow-hidden",children:t.jsx("img",{src:le.thumbnails.small||le.url,alt:le.alt||le.filename,className:"w-full h-full object-cover"})})},{key:"filename",title:"اسم الملف",label:"اسم الملف",render:le=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:le.filename}),t.jsx("p",{className:"text-sm text-gray-500",children:le.alt})]})},{key:"category",title:"الفئة",label:"الفئة",render:le=>t.jsx(Kr,{status:le.category==="exterior"?"خارجية":le.category==="interior"?"داخلية":le.category==="amenity"?"المرافق":le.category==="floor_plan"?"مخطط الطابق":le.category==="documents"?"المستندات":"معرض عام"})},{key:"size",title:"الحجم / الأبعاد",label:"الحجم / الأبعاد",render:le=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[Math.round(le.size/1024)," كب"]}),t.jsxs("p",{className:"text-gray-500",children:[le.width,"×",le.height]})]})},{key:"status",title:"الحالة",label:"الحالة",render:le=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(Kr,{status:le.processingStatus==="ready"?"جاهزة":"معالجة"}),le.isPrimary&&t.jsx(Kr,{status:"رئيسية",size:"sm"})]})},{key:"uploadedAt",title:"تاريخ الرفع",label:"تاريخ الرفع",render:le=>t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{children:new Date(le.uploadedAt).toLocaleDateString("ar-SA")}),t.jsx("p",{className:"text-gray-500",children:new Date(le.uploadedAt).toLocaleTimeString("ar-SA")})]})},{key:"actions",title:"الإجراءات",label:"الإجراءات",render:le=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>I(le),label:"تحرير",children:"تحرير"}),t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>k([le.id]),label:"حذف",children:"حذف"})]})}],ee=[{value:"all",label:"جميع الصور",count:B?.totalImages||0},{value:"exterior",label:"خارجية",count:B?.byCategory.exterior||0},{value:"interior",label:"داخلية",count:B?.byCategory.interior||0},{value:"amenity",label:"المرافق",count:B?.byCategory.amenity||0},{value:"floor_plan",label:"مخطط الطابق",count:B?.byCategory.floor_plan||0},{value:"documents",label:"المستندات",count:B?.byCategory.documents||0},{value:"gallery",label:"معرض عام",count:B?.byCategory.gallery||0}];return f?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(pr,{size:"lg"})}):v||!j||!z?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:"حدث خطأ في تحميل بيانات الوحدة"}),t.jsx(rt,{onClick:()=>a("/admin/units"),variant:"secondary",label:"العودة للوحدات",children:"العودة للوحدات"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[t.jsx("button",{onClick:()=>a("/admin/properties"),className:"hover:text-blue-600 transition-colors",children:"الكيانات"}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/properties/${e}`),className:"hover:text-blue-600 transition-colors",children:z.title}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/units?propertyId=${e}`),className:"hover:text-blue-600 transition-colors",children:"الوحدات"}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/units/${n}`),className:"hover:text-blue-600 transition-colors",children:Z.name}),t.jsx("span",{children:"/"}),t.jsx("span",{children:"معرض الصور"})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"معرض صور الوحدة"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("p",{className:"text-gray-600",children:Z.name}),t.jsx("span",{className:"text-gray-400",children:"•"}),t.jsx("p",{className:"text-gray-600",children:z.title})]})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(rt,{variant:"secondary",onClick:()=>a(`/admin/units/${n}`),label:"العودة للوحدة"})})]})}),t.jsx("div",{className:"bg-gradient-to-l from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"نوع الوحدة"}),t.jsx("p",{className:"font-semibold text-gray-900",children:j.unitTypeName})]}),S.slice(0,3).map(le=>t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:le.displayName}),t.jsx("p",{className:"font-semibold text-gray-900",children:le.value})]},le.fieldId))]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 rtl:space-x-reverse px-6",children:[{id:"gallery",label:"معرض الصور",count:U.length},{id:"upload",label:"رفع جديدة",icon:"📤"},{id:"statistics",label:"الإحصائيات",icon:"📊"}].map(le=>t.jsx("button",{onClick:()=>C(le.id),className:`
                  py-4 px-1 border-b-2 font-medium text-sm transition-colors
                  ${T===le.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:t.jsxs("div",{className:"flex items-center gap-2",children:[le.icon&&t.jsx("span",{children:le.icon}),t.jsx("span",{children:le.label}),le.count!==void 0&&t.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:le.count})]})},le.id))})}),t.jsxs("div",{className:"p-6",children:[T==="gallery"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"الفئة:"}),t.jsx("select",{style:{direction:"rtl"},value:O,onChange:le=>F(le.target.value),className:"px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:ee.map(le=>t.jsxs("option",{value:le.value,children:[le.label," (",le.count,")"]},le.value))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"العرض:"}),t.jsxs("div",{className:"flex border border-gray-300 rounded overflow-hidden",children:[t.jsx("button",{onClick:()=>H("grid"),className:`px-3 py-1 text-sm ${R==="grid"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"شبكة"}),t.jsx("button",{onClick:()=>H("table"),className:`px-3 py-1 text-sm ${R==="table"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"جدول"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[N.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[N.length," محددة"]}),t.jsx(rt,{variant:"danger",size:"sm",onClick:q,label:"حذف المحددة"})]}),t.jsx(rt,{variant:"primary",onClick:()=>C("upload"),label:"رفع صور جديدة"})]})]}),R==="grid"?t.jsx(r_,{propertyId:e,unitId:n,category:O==="all"?void 0:O,editable:!0,reorderable:!0,multiSelect:!0,selectedImages:N,onSelectionChange:J,onEditImage:I,showDetails:!0,showToolbar:!1}):t.jsx("div",{children:U.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد صور للعرض"}):t.jsx(ls,{data:U,columns:ae,loading:V,rowSelection:{selectedRowKeys:N,onChange:le=>k(le)}})})]}),T==="upload"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"رفع صور جديدة للوحدة"}),t.jsx("p",{className:"text-gray-600",children:"اختر الصور لرفعها وربطها بهذه الوحدة. يمكنك تحديد فئة كل صورة والتحكم في ترتيبها."})]}),t.jsx(x_,{propertyId:e,unitId:n,defaultCategory:"interior",multiple:!0,maxFiles:30,maxSize:10,showPreview:!0,showProgress:!0,onUploadComplete:K})]}),T==="statistics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إحصائيات صور الوحدة"}),t.jsx("p",{className:"text-gray-600",children:"نظرة عامة على صور هذه الوحدة والمساحة المستخدمة."})]}),te?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(pr,{size:"lg"})}):B?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-blue-600",children:"إجمالي الصور"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:B.totalImages})]})]})}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-green-600",children:"الحجم الكلي"}),t.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[(B.totalSize/1024/1024).toFixed(1)," MB"]})]})]})}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"الصور الرئيسية"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:B.primaryImages})]})]})}),t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-purple-600",children:"متوسط الحجم"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[(B.averageSize/1024/1024).toFixed(1)," MB"]})]})]})})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"لا توجد إحصائيات متاحة"})})]})]})]}),A&&t.jsx(y_,{image:A,isOpen:!!A,onClose:se,onSave:ne}),h&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:h.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:h.message}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(rt,{variant:"secondary",onClick:g,label:"إلغاء"}),t.jsx(rt,{variant:"danger",onClick:h.onConfirm,label:"تأكيد"})]})]})})]})},nP=()=>{const{userId:e}=Qh(),n=is(),{showError:a}=vc(),{userDetails:r,isLoading:o,error:d,isSuccess:h,message:g}=wR(e||""),p=()=>r?.role==="Owner"||r?.role==="Staff",f=k=>k?new Date(k).toLocaleDateString("ar-SA"):"غير محدد",v=k=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"YER"}).format(k),j=()=>{p()?n(`/admin/bookings?propertyId=${r?.propertyId}`):n(`/admin/bookings?userId=${e}`)},S=()=>{p()?n(`/admin/reviews?propertyId=${r?.propertyId}`):n(`/admin/reviews?userId=${e}`)},T=()=>{p()?n(`/admin/reports?propertyId=${r?.propertyId}`):n(`/admin/reports?userId=${e}`)},C=()=>{p()?n(`/admin/audit-logs?propertyId=${r?.propertyId}`):n(`/admin/audit-logs?userId=${e}`)},N=()=>{p()?n(`/admin/payments?propertyId=${r?.propertyId}`):n(`/admin/payments?userId=${e}`)};return o?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(pr,{size:"lg"})}):!r||d||!o&&(!h||!r)?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600 mb-4",children:g||d?.message||"لم يتم العثور على بيانات المستخدم"}),t.jsx("button",{onClick:()=>n("/admin/users"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"العودة لقائمة المستخدمين"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("button",{onClick:()=>n("/admin/users"),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"→"}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:r?.avatarUrl?t.jsx("img",{src:r.avatarUrl,alt:r.userName,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-gray-500 text-2xl",children:r?.userName.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?.userName}),t.jsx("p",{className:"text-gray-600",children:r?.email}),t.jsxs("div",{className:"flex items-center mt-1",children:[t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r?.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r?.isActive?"نشط":"غير نشط"}),p()&&t.jsx("span",{className:"mr-2 inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:r?.role==="Owner"?"مالك كيان":"موظف"})]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"عضو منذ"}),t.jsx("p",{className:"text-lg font-medium text-gray-900",children:f(r?.createdAt||"")})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"👤 معلومات المستخدم"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"البريد الإلكتروني"}),t.jsx("p",{className:"text-gray-900",children:r?.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"رقم الهاتف"}),t.jsx("p",{className:"text-gray-900",children:r?.phoneNumber||"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"تاريخ التسجيل"}),t.jsx("p",{className:"text-gray-900",children:f(r?.createdAt||"")})]})]})]}),p()&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"🏨 معلومات الكيان"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"اسم الكيان"}),t.jsx("p",{className:"text-gray-900",children:r?.propertyName||"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"عدد الوحدات"}),t.jsx("p",{className:"text-gray-900",children:r?.unitsCount||0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"صور الكيان"}),t.jsx("p",{className:"text-gray-900",children:r?.propertyImagesCount||0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"صور الوحدات"}),t.jsx("p",{className:"text-gray-900",children:r?.unitImagesCount||0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"صافي الإيراد"}),t.jsx("p",{className:"text-gray-900 font-medium text-green-600",children:v(r?.netRevenue||0)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"إجمالي الحجوزات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r?.bookingsCount||0}),r?.pendingBookingsCount||!1,r?.canceledBookingsCount||!1]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"📅"})})]}),t.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[t.jsxs("p",{children:["أول حجز: ",f(r?.firstBookingDate)]}),t.jsxs("p",{children:["آخر حجز: ",f(r?.lastBookingDate)]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:p()?"تقييمات الكيان":"المراجعات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r?.reviewsCount||0})]}),t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"⭐"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"البلاغات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r?.reportsCreatedCount||0}),r?.reportsAgainstCount||!1]}),t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"⚠️"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"المدفوعات"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:v(r?.totalPayments||0)}),r?.totalRefunds||!1]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"💰"})})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"الإجراءات السريعة"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[t.jsxs("button",{onClick:j,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"📅"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:p()?"حجوزات الكيان":"حجوزات العميل"}),t.jsx("span",{className:"text-xs text-gray-500",children:r?.bookingsCount||0})]}),t.jsxs("button",{onClick:S,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"⭐"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:p()?"تقييمات الكيان":"مراجعات العميل"}),t.jsx("span",{className:"text-xs text-gray-500",children:r?.reviewsCount||0})]}),t.jsxs("button",{onClick:T,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"📝"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"البلاغات المُنشأة"}),t.jsx("span",{className:"text-xs text-gray-500",children:r?.reportsCreatedCount||0})]}),r?.reportsAgainstCount||!1,t.jsxs("button",{onClick:C,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"📊"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:p()?"نشاط الكيان":"نشاط العميل"})]}),t.jsxs("button",{onClick:N,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"💰"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"المدفوعات"}),t.jsx("span",{className:"text-xs text-gray-500",children:v(r?.totalPayments||0)})]})]})]})]})},Go="/api/admin/propertyservices",Mc={create:e=>je.post(Go,e).then(n=>n.data),update:(e,n)=>je.put(`${Go}/${e}`,n).then(a=>a.data),delete:e=>je.delete(`${Go}/${e}`).then(n=>n.data),getByProperty:e=>je.get(`${Go}/property/${e.propertyId}`).then(n=>n.data),getById:e=>je.get(`${Go}/${e.serviceId}`).then(n=>n.data),getByType:e=>je.get(`${Go}/type/${e.serviceType}`,{params:{pageNumber:e.pageNumber,pageSize:e.pageSize}}).then(n=>n.data)},aP=e=>zt({queryKey:["admin","property-services","by-property",e.propertyId],queryFn:()=>Mc.getByProperty(e),enabled:!!e.propertyId}),sP=e=>zt({queryKey:["admin","property-services","details",e.serviceId],queryFn:()=>Mc.getById(e),enabled:!!e.serviceId}),rP=e=>zt({queryKey:["admin","property-services","by-type",e],queryFn:()=>Mc.getByType(e),enabled:!!e.serviceType,placeholderData:n=>n}),iP=()=>{const e=In();return Ie({mutationFn:n=>Mc.create(n),onSuccess:(n,a)=>{e.invalidateQueries({queryKey:["admin","property-services","by-property",a.propertyId]}),e.invalidateQueries({queryKey:["admin","property-services","by-type"]})}})},lP=()=>{const e=In();return Ie({mutationFn:({serviceId:n,data:a})=>Mc.update(n,a),onSuccess:(n,a)=>{e.invalidateQueries({queryKey:["admin","property-services","details",a.serviceId]}),e.invalidateQueries({queryKey:["admin","property-services"]})}})},oP=()=>{const e=In();return Ie({mutationFn:n=>Mc.delete(n),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","property-services"]})}})},cP=()=>t.jsx("span",{children:"➕"}),dP=()=>t.jsx("span",{children:"🔍"}),uP=()=>t.jsx("span",{children:"🏢"}),mP=()=>t.jsx("span",{children:"💰"}),Gd=[{name:"cleaning_services",label:"خدمة تنظيف",icon:"🧹",category:"تنظيف"},{name:"dry_cleaning",label:"تنظيف جاف",icon:"👔",category:"تنظيف"},{name:"local_laundry_service",label:"خدمة غسيل",icon:"🧺",category:"تنظيف"},{name:"iron",label:"كوي الملابس",icon:"👔",category:"تنظيف"},{name:"wash",label:"غسيل",icon:"🧴",category:"تنظيف"},{name:"soap",label:"صابون",icon:"🧼",category:"تنظيف"},{name:"sanitizer",label:"معقم",icon:"🧴",category:"تنظيف"},{name:"plumbing",label:"سباكة",icon:"🔧",category:"تنظيف"},{name:"room_service",label:"خدمة الغرف",icon:"🛎️",category:"ضيافة"},{name:"restaurant",label:"مطعم",icon:"🍴",category:"ضيافة"},{name:"local_cafe",label:"مقهى",icon:"☕",category:"ضيافة"},{name:"local_bar",label:"بار",icon:"🍺",category:"ضيافة"},{name:"breakfast_dining",label:"إفطار",icon:"🍳",category:"ضيافة"},{name:"lunch_dining",label:"غداء",icon:"🍽️",category:"ضيافة"},{name:"dinner_dining",label:"عشاء",icon:"🍽️",category:"ضيافة"},{name:"delivery_dining",label:"توصيل طعام",icon:"🚚",category:"ضيافة"},{name:"takeout_dining",label:"طعام للخارج",icon:"🥡",category:"ضيافة"},{name:"ramen_dining",label:"وجبات سريعة",icon:"🍜",category:"ضيافة"},{name:"icecream",label:"آيس كريم",icon:"🍦",category:"ضيافة"},{name:"cake",label:"كيك",icon:"🎂",category:"ضيافة"},{name:"local_pizza",label:"بيتزا",icon:"🍕",category:"ضيافة"},{name:"fastfood",label:"وجبات سريعة",icon:"🍔",category:"ضيافة"},{name:"airport_shuttle",label:"نقل مطار",icon:"🚐",category:"نقل"},{name:"local_taxi",label:"تاكسي",icon:"🚕",category:"نقل"},{name:"car_rental",label:"تأجير سيارات",icon:"🚙",category:"نقل"},{name:"car_repair",label:"صيانة سيارات",icon:"🔧",category:"نقل"},{name:"directions_car",label:"سيارة خاصة",icon:"🚗",category:"نقل"},{name:"directions_bus",label:"حافلة",icon:"🚌",category:"نقل"},{name:"directions_boat",label:"قارب",icon:"⛵",category:"نقل"},{name:"directions_bike",label:"دراجة",icon:"🚴",category:"نقل"},{name:"electric_bike",label:"دراجة كهربائية",icon:"🚴",category:"نقل"},{name:"electric_scooter",label:"سكوتر كهربائي",icon:"🛴",category:"نقل"},{name:"local_shipping",label:"شحن محلي",icon:"🚚",category:"نقل"},{name:"local_parking",label:"موقف سيارات",icon:"🅿️",category:"نقل"},{name:"valet_parking",label:"خدمة صف السيارات",icon:"🚗",category:"نقل"},{name:"wifi",label:"واي فاي",icon:"📶",category:"اتصالات"},{name:"wifi_calling",label:"مكالمات واي فاي",icon:"📞",category:"اتصالات"},{name:"router",label:"راوتر",icon:"🔌",category:"اتصالات"},{name:"phone_in_talk",label:"خدمة هاتف",icon:"📞",category:"اتصالات"},{name:"phone_callback",label:"اتصال مجاني",icon:"📞",category:"اتصالات"},{name:"support_agent",label:"دعم العملاء",icon:"🧑‍💼",category:"اتصالات"},{name:"headset_mic",label:"خدمة عملاء",icon:"🎧",category:"اتصالات"},{name:"mail",label:"بريد",icon:"📧",category:"اتصالات"},{name:"markunread_mailbox",label:"صندوق بريد",icon:"📬",category:"اتصالات"},{name:"print",label:"طباعة",icon:"🖨️",category:"اتصالات"},{name:"scanner",label:"ماسح ضوئي",icon:"📄",category:"اتصالات"},{name:"fax",label:"فاكس",icon:"📠",category:"اتصالات"},{name:"spa",label:"سبا",icon:"💆",category:"ترفيه"},{name:"hot_tub",label:"جاكوزي",icon:"♨️",category:"ترفيه"},{name:"pool",label:"مسبح",icon:"🏊",category:"ترفيه"},{name:"fitness_center",label:"صالة رياضية",icon:"💪",category:"ترفيه"},{name:"sports_tennis",label:"تنس",icon:"🎾",category:"ترفيه"},{name:"sports_golf",label:"جولف",icon:"⛳",category:"ترفيه"},{name:"sports_soccer",label:"كرة قدم",icon:"⚽",category:"ترفيه"},{name:"sports_basketball",label:"كرة سلة",icon:"🏀",category:"ترفيه"},{name:"casino",label:"كازينو",icon:"🎰",category:"ترفيه"},{name:"theater_comedy",label:"مسرح",icon:"🎭",category:"ترفيه"},{name:"movie",label:"سينما",icon:"🎬",category:"ترفيه"},{name:"music_note",label:"موسيقى",icon:"🎵",category:"ترفيه"},{name:"nightlife",label:"حياة ليلية",icon:"🌃",category:"ترفيه"},{name:"celebration",label:"احتفالات",icon:"🎉",category:"ترفيه"},{name:"business_center",label:"مركز أعمال",icon:"💼",category:"أعمال"},{name:"meeting_room",label:"قاعة اجتماعات",icon:"👥",category:"أعمال"},{name:"co_present",label:"عرض تقديمي",icon:"📊",category:"أعمال"},{name:"groups",label:"مجموعات",icon:"👥",category:"أعمال"},{name:"event",label:"فعاليات",icon:"📅",category:"أعمال"},{name:"event_available",label:"حجز فعاليات",icon:"✅",category:"أعمال"},{name:"event_seat",label:"مقاعد فعاليات",icon:"🪑",category:"أعمال"},{name:"mic",label:"ميكروفون",icon:"🎤",category:"أعمال"},{name:"videocam",label:"كاميرا فيديو",icon:"📹",category:"أعمال"},{name:"desktop_windows",label:"كمبيوتر",icon:"💻",category:"أعمال"},{name:"laptop",label:"لابتوب",icon:"💻",category:"أعمال"},{name:"medical_services",label:"خدمات طبية",icon:"🏥",category:"صحة"},{name:"local_hospital",label:"مستشفى",icon:"🏥",category:"صحة"},{name:"local_pharmacy",label:"صيدلية",icon:"💊",category:"صحة"},{name:"emergency",label:"طوارئ",icon:"🚨",category:"صحة"},{name:"vaccines",label:"لقاحات",icon:"💉",category:"صحة"},{name:"healing",label:"علاج",icon:"❤️‍🩹",category:"صحة"},{name:"monitor_heart",label:"مراقبة صحية",icon:"❤️",category:"صحة"},{name:"health_and_safety",label:"صحة وأمان",icon:"🏥",category:"صحة"},{name:"masks",label:"كمامات",icon:"😷",category:"صحة"},{name:"sanitizer",label:"معقم",icon:"🧴",category:"صحة"},{name:"psychology",label:"استشارة نفسية",icon:"🧠",category:"صحة"},{name:"self_improvement",label:"تطوير ذاتي",icon:"🧘",category:"صحة"},{name:"shopping_cart",label:"عربة تسوق",icon:"🛒",category:"تسوق"},{name:"shopping_bag",label:"حقيبة تسوق",icon:"🛍️",category:"تسوق"},{name:"local_mall",label:"مول",icon:"🛍️",category:"تسوق"},{name:"local_grocery_store",label:"بقالة",icon:"🛒",category:"تسوق"},{name:"local_convenience_store",label:"متجر صغير",icon:"🏪",category:"تسوق"},{name:"store",label:"متجر",icon:"🏪",category:"تسوق"},{name:"storefront",label:"واجهة متجر",icon:"🏪",category:"تسوق"},{name:"local_offer",label:"عروض",icon:"🏷️",category:"تسوق"},{name:"loyalty",label:"برنامج ولاء",icon:"🎁",category:"تسوق"},{name:"card_giftcard",label:"بطاقة هدية",icon:"🎁",category:"تسوق"},{name:"child_care",label:"رعاية أطفال",icon:"👶",category:"عائلة"},{name:"baby_changing_station",label:"غرفة تغيير",icon:"👶",category:"عائلة"},{name:"child_friendly",label:"صديق للأطفال",icon:"👨‍👩‍👧‍👦",category:"عائلة"},{name:"toys",label:"ألعاب",icon:"🧸",category:"عائلة"},{name:"stroller",label:"عربة أطفال",icon:"👶",category:"عائلة"},{name:"family_restroom",label:"حمام عائلي",icon:"👨‍👩‍👧‍👦",category:"عائلة"},{name:"escalator_warning",label:"تحذير أطفال",icon:"⚠️",category:"عائلة"},{name:"pregnant_woman",label:"خدمات حوامل",icon:"🤰",category:"عائلة"},{name:"pets",label:"حيوانات أليفة",icon:"🐾",category:"حيوانات"},{name:"pet_supplies",label:"مستلزمات حيوانات",icon:"🐕",category:"حيوانات"},{name:"security",label:"أمن",icon:"🔒",category:"أمان"},{name:"local_police",label:"شرطة",icon:"👮",category:"أمان"},{name:"shield",label:"حماية",icon:"🛡️",category:"أمان"},{name:"verified_user",label:"مستخدم موثق",icon:"✅",category:"أمان"},{name:"lock",label:"قفل",icon:"🔒",category:"أمان"},{name:"key",label:"مفتاح",icon:"🔑",category:"أمان"},{name:"doorbell",label:"جرس الباب",icon:"🔔",category:"أمان"},{name:"camera_alt",label:"كاميرا مراقبة",icon:"📷",category:"أمان"},{name:"local_atm",label:"صراف آلي",icon:"💳",category:"مالية"},{name:"account_balance",label:"بنك",icon:"🏦",category:"مالية"},{name:"currency_exchange",label:"صرافة",icon:"💱",category:"مالية"},{name:"payment",label:"دفع",icon:"💳",category:"مالية"},{name:"credit_card",label:"بطاقة ائتمان",icon:"💳",category:"مالية"},{name:"account_balance_wallet",label:"محفظة",icon:"👛",category:"مالية"},{name:"savings",label:"توفير",icon:"🏦",category:"مالية"},{name:"handshake",label:"استقبال",icon:"🤝",category:"أخرى"},{name:"concierge",label:"كونسيرج",icon:"🧑‍💼",category:"أخرى"},{name:"bellhop",label:"حمال",icon:"🧳",category:"أخرى"},{name:"luggage",label:"أمتعة",icon:"🧳",category:"أخرى"},{name:"umbrella",label:"مظلة",icon:"☂️",category:"أخرى"},{name:"interpreter",label:"مترجم",icon:"🗣️",category:"أخرى"},{name:"translate",label:"ترجمة",icon:"🌐",category:"أخرى"},{name:"tour",label:"جولة سياحية",icon:"🗺️",category:"أخرى"},{name:"map",label:"خريطة",icon:"🗺️",category:"أخرى"},{name:"info",label:"معلومات",icon:"ℹ️",category:"أخرى"}],hP=({selectedIcon:e,onSelectIcon:n,onClose:a})=>{const[r,o]=b.useState(""),[d,h]=b.useState("الكل"),g=["الكل",...new Set(Gd.map(f=>f.category))],p=Gd.filter(f=>{const v=f.label.toLowerCase().includes(r.toLowerCase())||f.name.toLowerCase().includes(r.toLowerCase()),j=d==="الكل"||f.category===d;return v&&j});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"اختر أيقونة للخدمة"}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-xl",children:"✕"})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsx("input",{type:"text",placeholder:"ابحث عن أيقونة...",value:r,onChange:f=>o(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>t.jsx("button",{onClick:()=>h(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${d===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsx("div",{className:"grid grid-cols-8 gap-2",children:p.map(f=>t.jsx("button",{onClick:()=>n(f.name),className:`p-3 rounded-lg border-2 transition-all hover:scale-105 ${e===f.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:`${f.label} (${f.name})`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl mb-1",children:f.icon}),t.jsx("span",{className:"text-xs text-gray-600",children:f.label}),t.jsx("code",{className:"text-xs text-gray-400 mt-1",children:f.name})]})},f.name))}),p.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أيقونات مطابقة للبحث"})})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"ملاحظة:"})," هذه الأيقونات متوافقة مع Material Icons في Flutter. استخدم اسم الأيقونة (مثل: Icons.",e||"room_service",") في تطبيق Flutter."]})})]})})},fP=()=>{const[e,n]=b.useState(""),[a,r]=b.useState(""),[o,d]=b.useState(""),[h,g]=b.useState(1),[p,f]=b.useState(20),[v,j]=b.useState(!1),[S,T]=b.useState(null),{currencies:C,loading:N}=Cc(),k=N?[]:C.map(Ce=>Ce.code),[A,D]=b.useState(!1),[O,F]=b.useState(!1),[R,H]=b.useState(!1),[E,z]=b.useState(null),[Z,U]=b.useState({propertyId:"",name:"",price:{amount:0,currency:"SAR"},pricingModel:"PerBooking",icon:"room_service"}),[V,X]=b.useState({serviceId:"",name:"",price:{amount:0,currency:"SAR"},pricingModel:"PerBooking",icon:"room_service"}),W=Ce=>{const Fe=Gd.find(Nt=>Nt.name===Ce);return Fe?Fe.icon:"🛎️"},B=(Ce,Fe)=>{if(Fe)return W(Fe);const Nt=Ce.toLowerCase(),_t=Gd.find(ut=>Nt.includes(ut.label.toLowerCase())||Nt.includes(ut.name.toLowerCase()));return _t?_t.icon:"🛎️"},te=Ce=>{S==="create"?U({...Z,icon:Ce}):S==="edit"&&X({...V,icon:Ce}),j(!1),T(null)};Sc({pageNumber:1,pageSize:100});const{data:G,isLoading:J}=aP({propertyId:e}),{data:q,isLoading:K}=rP({serviceType:a,pageNumber:h,pageSize:p}),{data:I}=sP({serviceId:E?.id||""}),se=iP(),ne=lP(),ae=oP(),ee=[{value:"PerBooking",label:"لكل حجز"},{value:"PerDay",label:"لكل يوم"},{value:"PerPerson",label:"لكل شخص"},{value:"PerUnit",label:"لكل وحدة"},{value:"PerHour",label:"لكل ساعة"},{value:"Fixed",label:"سعر ثابت"}],le=()=>e&&G?.success&&G.data?G.data:a&&q?.items?q.items:[],me=e?J:K,Re=()=>{U({propertyId:e||"",name:"",price:{amount:0,currency:"SAR"},pricingModel:"PerBooking",icon:"room_service"}),D(!0)},Pe=Ce=>{z(Ce),X({serviceId:Ce.id,name:Ce.name,price:Ce.price,pricingModel:Object.keys(Ce.pricingModel)[0],icon:Ce.icon||"room_service"}),F(!0)},ie=Ce=>{confirm("هل أنت متأكد من حذف هذه الخدمة؟")&&ae.mutate(Ce.id,{onSuccess:()=>{},onError:()=>{}})},Q=Ce=>{z(Ce),H(!0)},we=Ce=>{Ce.preventDefault(),se.mutate(Z,{onSuccess:()=>{D(!1)},onError:()=>{}})},Be=Ce=>{Ce.preventDefault(),ne.mutate({serviceId:V.serviceId,data:V},{onSuccess:()=>{F(!1)},onError:()=>{}})},nt=[{header:"الخدمة",title:"الخدمة",key:"name",render:Ce=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-xl",children:B(Ce.name,Ce.icon)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:Ce.name}),Ce.icon&&t.jsxs("code",{className:"text-xs text-gray-400",children:["Icons.",Ce.icon]})]})]})},{header:"العقار",title:"العقار",key:"property",render:Ce=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(uP,{}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:Ce.propertyName}),t.jsxs("div",{className:"text-sm text-gray-500",children:[Ce.propertyId.substring(0,8),"..."]})]})]})},{header:"السعر",title:"السعر",key:"price",render:Ce=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mP,{}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-green-600",children:[Ce.price.amount," ",Ce.price.currency]}),t.jsx("div",{className:"text-sm text-gray-500",children:ee.find(Fe=>Fe.value===Object.keys(Ce.pricingModel)[0])?.label})]})]})},{header:"الإجراءات",title:"الإجراءات",key:"actions",render:Ce=>t.jsx(Ix,{actions:[{label:"عرض التفاصيل",icon:"👁️",onClick:()=>Q(Ce)},{label:"تعديل",icon:"✏️",onClick:()=>Pe(Ce)},{label:"حذف",icon:"🗑️",onClick:()=>ie(Ce),variant:"danger"}]})}],Qe=le().filter(Ce=>Ce.name.toLowerCase().includes(o.toLowerCase())||Ce.propertyName.toLowerCase().includes(o.toLowerCase())),it={totalServices:Qe.length,totalIcons:Gd.length};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الخدمات"}),t.jsx("p",{className:"text-gray-600",children:"إدارة خدمات العقارات والتحكم في الأسعار مع دعم الأيقونات الديناميكية"})]}),t.jsxs("button",{onClick:Re,disabled:!e,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t.jsx(cP,{}),"إضافة خدمة جديدة"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🛎️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الخدمات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:it.totalServices})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"💰"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"خدمات مدفوعة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Qe.filter(Ce=>Ce.price.amount>0).length})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🎨"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"أيقونات متاحة"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:it.totalIcons})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العقار"}),t.jsx(cc,{value:e,onChange:Ce=>{n(Ce),r("")},placeholder:"اختر العقار",className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخدمة"}),t.jsx("input",{type:"text",value:a,onChange:Ce=>{r(Ce.target.value),n("")},placeholder:"ادخل نوع الخدمة",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البحث"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx(dP,{})}),t.jsx("input",{type:"text",value:o,onChange:Ce=>d(Ce.target.value),placeholder:"البحث في الخدمات...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),!e&&!a&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"الرجاء اختيار عقار أو إدخال نوع خدمة لعرض النتائج"})]}),(e||a)&&t.jsx("div",{className:"bg-white rounded-lg shadow",children:t.jsx(ls,{data:Qe,columns:nt,loading:me,pagination:a?{current:h,total:q?.totalPages||1,pageSize:p,onChange:(Ce,Fe)=>{g(Ce),f(Fe)}}:void 0,onRowClick:()=>{}})}),t.jsx(Mt,{isOpen:A,onClose:()=>D(!1),title:"إضافة خدمة جديدة",size:"lg",children:t.jsxs("form",{onSubmit:we,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العقار"}),t.jsx(cc,{value:Z.propertyId,onChange:Ce=>U(Fe=>({...Fe,propertyId:Ce})),required:!0,className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الخدمة"}),t.jsx("input",{type:"text",value:Z.name,onChange:Ce=>U(Fe=>({...Fe,name:Ce.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{T("create"),j(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:W(Z.icon)}),t.jsx("span",{className:"text-sm",children:Z.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",Z.icon," في Flutter"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر"}),t.jsx(Zl,{value:Z.price.amount,currency:Z.price.currency,supportedCurrencies:k,onValueChange:(Ce,Fe)=>U(Nt=>({...Nt,price:{amount:Ce,currency:Fe}})),required:!0,className:"w-full",min:0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نموذج التسعير"}),t.jsx("select",{value:Z.pricingModel,onChange:Ce=>U(Fe=>({...Fe,pricingModel:Ce.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.map(Ce=>t.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:W(Z.icon)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",Z.icon]})]})]})]}),t.jsxs("div",{className:"flex gap-2 pt-4",children:[t.jsx("button",{type:"submit",disabled:se.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:se.isPending?"جاري الإنشاء...":"إنشاء"}),t.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"إلغاء"})]})]})}),t.jsx(Mt,{isOpen:O,onClose:()=>F(!1),title:"تعديل الخدمة",size:"lg",children:t.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الخدمة"}),t.jsx("input",{type:"text",value:V.name,onChange:Ce=>X(Fe=>({...Fe,name:Ce.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{T("edit"),j(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:W(V.icon||"room_service")}),t.jsx("span",{className:"text-sm",children:V.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",V.icon," في Flutter"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر"}),t.jsx(Zl,{value:V.price?.amount??0,currency:V.price?.currency??"SAR",supportedCurrencies:k,onValueChange:(Ce,Fe)=>X(Nt=>({...Nt,price:{amount:Ce,currency:Fe}})),required:!0,className:"w-full",min:0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نموذج التسعير"}),t.jsx("select",{value:V.pricingModel,onChange:Ce=>X(Fe=>({...Fe,pricingModel:Ce.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.map(Ce=>t.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:W(V.icon||"room_service")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",V.icon]})]})]})]}),t.jsxs("div",{className:"flex gap-2 pt-4",children:[t.jsx("button",{type:"submit",disabled:ne.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:ne.isPending?"جاري التحديث...":"تحديث"}),t.jsx("button",{type:"button",onClick:()=>F(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"إلغاء"})]})]})}),t.jsx(Mt,{isOpen:R,onClose:()=>H(!1),title:"تفاصيل الخدمة",size:"lg",children:E&&I?.success&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-6xl",children:B(I.data.name,I.data.icon)}),t.jsx("div",{children:t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:I.data.name})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"معرف الخدمة"}),t.jsx("div",{className:"font-medium",children:I.data.id})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"اسم الأيقونة"}),t.jsx("div",{className:"font-medium font-mono",children:I.data.icon?`Icons.${I.data.icon}`:"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"العقار"}),t.jsx("div",{className:"font-medium",children:I.data.propertyName})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"معرف العقار"}),t.jsx("div",{className:"font-medium",children:I.data.propertyId})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"السعر"}),t.jsxs("div",{className:"font-medium text-green-600",children:[I.data.price.amount," ",I.data.price.currency]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"نموذج التسعير"}),t.jsx("div",{className:"font-medium",children:ee.find(Ce=>Ce.value===Object.keys(I.data.pricingModel)[0])?.label})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"معلومات إضافية"}),t.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"الأيقونة المحددة متوافقة مع Material Icons في Flutter ويمكن استخدامها مباشرة في التطبيق."})]})]})})]})}),v&&t.jsx(hP,{selectedIcon:S==="create"?Z.icon:V.icon||"room_service",onSelectIcon:te,onClose:()=>{j(!1),T(null)}})]})},ey=b.createContext(void 0),Nf=({value:e,onValueChange:n,children:a,className:r=""})=>t.jsx(ey.Provider,{value:{value:e,onValueChange:n},children:t.jsx("div",{className:We("w-full",r),children:a})}),_f=({variant:e="default",className:n="",children:a,...r})=>{const o={default:"inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 p-1",pills:"inline-flex items-center gap-2",underline:"inline-flex items-center border-b border-gray-200"};return t.jsx("div",{className:We(o[e],n),role:"tablist",...r,children:a})},as=({value:e,className:n="",children:a,...r})=>{const o=b.useContext(ey);if(!o)throw new Error("TabsTrigger must be used within Tabs");const{value:d,onValueChange:h}=o,g=d===e;return t.jsx("button",{role:"tab","aria-selected":g,onClick:()=>h(e),className:We("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5","text-sm font-medium ring-offset-white transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900",n),...r,children:a})},ss=({value:e,className:n="",children:a,...r})=>{const o=b.useContext(ey);if(!o)throw new Error("TabsContent must be used within Tabs");const{value:d}=o;return d!==e?null:t.jsx("div",{role:"tabpanel",className:We("mt-4 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2","animate-in fade-in-50 slide-in-from-bottom-1",n),...r,children:a})},b_=6048e5,pP=864e5,Sf=6e4,Cf=36e5,gP=1e3,dw=Symbol.for("constructDateFrom");function Wt(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&dw in e?e[dw](n):e instanceof Date?new e.constructor(n):new Date(n)}function et(e,n){return Wt(n||e,e)}function kf(e,n,a){const r=et(e,a?.in);return isNaN(n)?Wt(a?.in||e,NaN):(n&&r.setDate(r.getDate()+n),r)}function v_(e,n,a){const r=et(e,a?.in);if(isNaN(n))return Wt(e,NaN);if(!n)return r;const o=r.getDate(),d=Wt(e,r.getTime());d.setMonth(r.getMonth()+n+1,0);const h=d.getDate();return o>=h?d:(r.setFullYear(d.getFullYear(),d.getMonth(),o),r)}function uw(e,n){const a=et(e,n?.in).getDay();return a===0||a===6}function j_(e,n,a){return Wt(e,+et(e)+n)}function xP(e,n,a){return j_(e,n*Cf)}let yP={};function Ql(){return yP}function Qr(e,n){const a=Ql(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=et(e,n?.in),d=o.getDay(),h=(d<r?7:0)+d-r;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function uc(e,n){return Qr(e,{...n,weekStartsOn:1})}function w_(e,n){const a=et(e,n?.in),r=a.getFullYear(),o=Wt(a,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const d=uc(o),h=Wt(a,0);h.setFullYear(r,0,4),h.setHours(0,0,0,0);const g=uc(h);return a.getTime()>=d.getTime()?r+1:a.getTime()>=g.getTime()?r:r-1}function Vh(e){const n=et(e),a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),+e-+a}function Rc(e,...n){const a=Wt.bind(null,n.find(r=>typeof r=="object"));return n.map(a)}function mc(e,n){const a=et(e,n?.in);return a.setHours(0,0,0,0),a}function bP(e,n,a){const[r,o]=Rc(a?.in,e,n),d=mc(r),h=mc(o),g=+d-Vh(d),p=+h-Vh(h);return Math.round((g-p)/pP)}function vP(e,n){const a=w_(e,n),r=Wt(e,0);return r.setFullYear(a,0,4),r.setHours(0,0,0,0),uc(r)}function jP(e,n,a){const r=et(e,a?.in);return r.setTime(r.getTime()+n*Sf),r}function wP(e,n,a){return j_(e,n*1e3)}function NP(e,n,a){return kf(e,n*7,a)}function _P(e,n,a){return v_(e,n*12,a)}function SP(e){return Wt(e,Date.now())}function N_(e,n,a){const[r,o]=Rc(a?.in,e,n);return+mc(r)==+mc(o)}function CP(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Tf(e){return!(!CP(e)&&typeof e!="number"||isNaN(+et(e)))}function mw(e,n){const a=et(e,n?.in);return a.setHours(23,59,59,999),a}function __(e,n){const a=et(e,n?.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function kP(e,n){const[a,r]=Rc(e,n.start,n.end);return{start:a,end:r}}function TP(e,n){const{start:a,end:r}=kP(n?.in,e);let o=+a>+r;const d=o?+a:+r,h=o?r:a;h.setHours(0,0,0,0);let g=1;const p=[];for(;+h<=d;)p.push(Wt(a,h)),h.setDate(h.getDate()+g),h.setHours(0,0,0,0);return o?p.reverse():p}function S_(e,n){const a=et(e,n?.in);return a.setDate(1),a.setHours(0,0,0,0),a}function hw(e,n){const a=et(e,n?.in),r=a.getFullYear();return a.setFullYear(r+1,0,0),a.setHours(23,59,59,999),a}function C_(e,n){const a=et(e,n?.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function EP(e,n){const a=Ql(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=et(e,n?.in),d=o.getDay(),h=(d<r?-7:0)+6-(d-r);return o.setDate(o.getDate()+h),o.setHours(23,59,59,999),o}const MP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RP=(e,n,a)=>{let r;const o=MP[e];return typeof o=="string"?r=o:n===1?r=o.one:r=o.other.replace("{{count}}",n.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function lc(e){return(n={})=>{const a=n.width?String(n.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const AP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},DP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OP={date:lc({formats:AP,defaultWidth:"full"}),time:lc({formats:DP,defaultWidth:"full"}),dateTime:lc({formats:PP,defaultWidth:"full"})},LP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zP=(e,n,a,r)=>LP[e];function cr(e){return(n,a)=>{const r=a?.context?String(a.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const h=e.defaultFormattingWidth||e.defaultWidth,g=a?.width?String(a.width):h;o=e.formattingValues[g]||e.formattingValues[h]}else{const h=e.defaultWidth,g=a?.width?String(a.width):e.defaultWidth;o=e.values[g]||e.values[h]}const d=e.argumentCallback?e.argumentCallback(n):n;return o[d]}}const IP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$P={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qP=(e,n)=>{const a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},YP={ordinalNumber:qP,era:cr({values:IP,defaultWidth:"wide"}),quarter:cr({values:BP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cr({values:$P,defaultWidth:"wide"}),day:cr({values:FP,defaultWidth:"wide"}),dayPeriod:cr({values:UP,defaultWidth:"wide",formattingValues:HP,defaultFormattingWidth:"wide"})};function dr(e){return(n,a={})=>{const r=a.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],d=n.match(o);if(!d)return null;const h=d[0],g=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(g)?ZP(g,j=>j.test(h)):VP(g,j=>j.test(h));let f;f=e.valueCallback?e.valueCallback(p):p,f=a.valueCallback?a.valueCallback(f):f;const v=n.slice(h.length);return{value:f,rest:v}}}function VP(e,n){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&n(e[a]))return a}function ZP(e,n){for(let a=0;a<e.length;a++)if(n(e[a]))return a}function k_(e){return(n,a={})=>{const r=n.match(e.matchPattern);if(!r)return null;const o=r[0],d=n.match(e.parsePattern);if(!d)return null;let h=e.valueCallback?e.valueCallback(d[0]):d[0];h=a.valueCallback?a.valueCallback(h):h;const g=n.slice(o.length);return{value:h,rest:g}}}const KP=/^(\d+)(th|st|nd|rd)?/i,WP=/\d+/i,GP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},QP={any:[/^b/i,/^(a|c)/i]},XP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JP={any:[/1/i,/2/i,/3/i,/4/i]},eO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iO={ordinalNumber:k_({matchPattern:KP,parsePattern:WP,valueCallback:e=>parseInt(e,10)}),era:dr({matchPatterns:GP,defaultMatchWidth:"wide",parsePatterns:QP,defaultParseWidth:"any"}),quarter:dr({matchPatterns:XP,defaultMatchWidth:"wide",parsePatterns:JP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:dr({matchPatterns:eO,defaultMatchWidth:"wide",parsePatterns:tO,defaultParseWidth:"any"}),day:dr({matchPatterns:nO,defaultMatchWidth:"wide",parsePatterns:aO,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:sO,defaultMatchWidth:"any",parsePatterns:rO,defaultParseWidth:"any"})},ty={code:"en-US",formatDistance:RP,formatLong:OP,formatRelative:zP,localize:YP,match:iO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lO(e,n){const a=et(e,n?.in);return bP(a,C_(a))+1}function T_(e,n){const a=et(e,n?.in),r=+uc(a)-+vP(a);return Math.round(r/b_)+1}function ny(e,n){const a=et(e,n?.in),r=a.getFullYear(),o=Ql(),d=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=Wt(n?.in||e,0);h.setFullYear(r+1,0,d),h.setHours(0,0,0,0);const g=Qr(h,n),p=Wt(n?.in||e,0);p.setFullYear(r,0,d),p.setHours(0,0,0,0);const f=Qr(p,n);return+a>=+g?r+1:+a>=+f?r:r-1}function oO(e,n){const a=Ql(),r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=ny(e,n),d=Wt(n?.in||e,0);return d.setFullYear(o,0,r),d.setHours(0,0,0,0),Qr(d,n)}function ay(e,n){const a=et(e,n?.in),r=+Qr(a,n)-+oO(a,n);return Math.round(r/b_)+1}function Ht(e,n){const a=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return a+r}const Vi={y(e,n){const a=e.getFullYear(),r=a>0?a:1-a;return Ht(n==="yy"?r%100:r,n.length)},M(e,n){const a=e.getMonth();return n==="M"?String(a+1):Ht(a+1,2)},d(e,n){return Ht(e.getDate(),n.length)},a(e,n){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,n){return Ht(e.getHours()%12||12,n.length)},H(e,n){return Ht(e.getHours(),n.length)},m(e,n){return Ht(e.getMinutes(),n.length)},s(e,n){return Ht(e.getSeconds(),n.length)},S(e,n){const a=n.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,a-3));return Ht(o,n.length)}},Qo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fw={G:function(e,n,a){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(e,n,a){if(n==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return a.ordinalNumber(o,{unit:"year"})}return Vi.y(e,n)},Y:function(e,n,a,r){const o=ny(e,r),d=o>0?o:1-o;if(n==="YY"){const h=d%100;return Ht(h,2)}return n==="Yo"?a.ordinalNumber(d,{unit:"year"}):Ht(d,n.length)},R:function(e,n){const a=w_(e);return Ht(a,n.length)},u:function(e,n){const a=e.getFullYear();return Ht(a,n.length)},Q:function(e,n,a){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Ht(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,a){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Ht(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,a){const r=e.getMonth();switch(n){case"M":case"MM":return Vi.M(e,n);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,a){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return Ht(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,a,r){const o=ay(e,r);return n==="wo"?a.ordinalNumber(o,{unit:"week"}):Ht(o,n.length)},I:function(e,n,a){const r=T_(e);return n==="Io"?a.ordinalNumber(r,{unit:"week"}):Ht(r,n.length)},d:function(e,n,a){return n==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):Vi.d(e,n)},D:function(e,n,a){const r=lO(e);return n==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):Ht(r,n.length)},E:function(e,n,a){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,a,r){const o=e.getDay(),d=(o-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return Ht(d,2);case"eo":return a.ordinalNumber(d,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});case"eeee":default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,a,r){const o=e.getDay(),d=(o-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return Ht(d,n.length);case"co":return a.ordinalNumber(d,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});case"cccc":default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,a){const r=e.getDay(),o=r===0?7:r;switch(n){case"i":return String(o);case"ii":return Ht(o,n.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,a){const o=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,a){const r=e.getHours();let o;switch(r===12?o=Qo.noon:r===0?o=Qo.midnight:o=r/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,a){const r=e.getHours();let o;switch(r>=17?o=Qo.evening:r>=12?o=Qo.afternoon:r>=4?o=Qo.morning:o=Qo.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,a){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return Vi.h(e,n)},H:function(e,n,a){return n==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):Vi.H(e,n)},K:function(e,n,a){const r=e.getHours()%12;return n==="Ko"?a.ordinalNumber(r,{unit:"hour"}):Ht(r,n.length)},k:function(e,n,a){let r=e.getHours();return r===0&&(r=24),n==="ko"?a.ordinalNumber(r,{unit:"hour"}):Ht(r,n.length)},m:function(e,n,a){return n==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vi.m(e,n)},s:function(e,n,a){return n==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):Vi.s(e,n)},S:function(e,n){return Vi.S(e,n)},X:function(e,n,a){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return gw(r);case"XXXX":case"XX":return Ol(r);case"XXXXX":case"XXX":default:return Ol(r,":")}},x:function(e,n,a){const r=e.getTimezoneOffset();switch(n){case"x":return gw(r);case"xxxx":case"xx":return Ol(r);case"xxxxx":case"xxx":default:return Ol(r,":")}},O:function(e,n,a){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+pw(r,":");case"OOOO":default:return"GMT"+Ol(r,":")}},z:function(e,n,a){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+pw(r,":");case"zzzz":default:return"GMT"+Ol(r,":")}},t:function(e,n,a){const r=Math.trunc(+e/1e3);return Ht(r,n.length)},T:function(e,n,a){return Ht(+e,n.length)}};function pw(e,n=""){const a=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),d=r%60;return d===0?a+String(o):a+String(o)+n+Ht(d,2)}function gw(e,n){return e%60===0?(e>0?"-":"+")+Ht(Math.abs(e)/60,2):Ol(e,n)}function Ol(e,n=""){const a=e>0?"-":"+",r=Math.abs(e),o=Ht(Math.trunc(r/60),2),d=Ht(r%60,2);return a+o+n+d}const xw=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},E_=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},cO=(e,n)=>{const a=e.match(/(P+)(p+)?/)||[],r=a[1],o=a[2];if(!o)return xw(e,n);let d;switch(r){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",xw(r,n)).replace("{{time}}",E_(o,n))},Zh={p:E_,P:cO},dO=/^D+$/,uO=/^Y+$/,mO=["D","DD","YY","YYYY"];function M_(e){return dO.test(e)}function R_(e){return uO.test(e)}function Xx(e,n,a){const r=hO(e,n,a);if(console.warn(r),mO.includes(e))throw new RangeError(r)}function hO(e,n,a){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gO=/^'([^]*?)'?$/,xO=/''/g,yO=/[a-zA-Z]/;function Qn(e,n,a){const r=Ql(),o=a?.locale??r.locale??ty,d=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,h=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,g=et(e,a?.in);if(!Tf(g))throw new RangeError("Invalid time value");let p=n.match(pO).map(v=>{const j=v[0];if(j==="p"||j==="P"){const S=Zh[j];return S(v,o.formatLong)}return v}).join("").match(fO).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const j=v[0];if(j==="'")return{isToken:!1,value:bO(v)};if(fw[j])return{isToken:!0,value:v};if(j.match(yO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:v}});o.localize.preprocessor&&(p=o.localize.preprocessor(g,p));const f={firstWeekContainsDate:d,weekStartsOn:h,locale:o};return p.map(v=>{if(!v.isToken)return v.value;const j=v.value;(!a?.useAdditionalWeekYearTokens&&R_(j)||!a?.useAdditionalDayOfYearTokens&&M_(j))&&Xx(j,n,String(e));const S=fw[j[0]];return S(g,j,o.localize,f)}).join("")}function bO(e){const n=e.match(gO);return n?n[1].replace(xO,"'"):e}function vO(e,n){return et(e,n?.in).getDate()}function A_(e,n){const a=et(e,n?.in),r=a.getFullYear(),o=a.getMonth(),d=Wt(a,0);return d.setFullYear(r,o+1,0),d.setHours(0,0,0,0),d.getDate()}function jO(){return Object.assign({},Ql())}function wO(e,n){return et(e,n?.in).getHours()}function NO(e,n){const a=et(e,n?.in).getDay();return a===0?7:a}function _O(e){return et(e).getMilliseconds()}function SO(e,n){return et(e,n?.in).getMinutes()}function CO(e,n){return et(e,n?.in).getMonth()}function kO(e){return et(e).getSeconds()}function TO(e,n){return et(e,n?.in).getFullYear()}function cx(e,n){return+et(e)>+et(n)}function kh(e,n){return+et(e)<+et(n)}function EO(e,n){return+et(e)==+et(n)}function MO(e,n){const a=RO(n)?new n(0):Wt(n,0);return a.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),a.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),a}function RO(e){return typeof e=="function"&&e.prototype?.constructor===e}const AO=10;class D_{subPriority=0;validate(n,a){return!0}}class DO extends D_{constructor(n,a,r,o,d){super(),this.value=n,this.validateValue=a,this.setValue=r,this.priority=o,d&&(this.subPriority=d)}validate(n,a){return this.validateValue(n,this.value,a)}set(n,a,r){return this.setValue(n,a,this.value,r)}}class PO extends D_{priority=AO;subPriority=-1;constructor(n,a){super(),this.context=n||(r=>Wt(a,r))}set(n,a){return a.timestampIsSet?n:Wt(n,MO(n,this.context))}}class It{run(n,a,r,o){const d=this.parse(n,a,r,o);return d?{setter:new DO(d.value,this.validate,this.set,this.priority,this.subPriority),rest:d.rest}:null}validate(n,a,r){return!0}}class OO extends It{priority=140;parse(n,a,r){switch(a){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"})||r.era(n,{width:"narrow"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})||r.era(n,{width:"abbreviated"})||r.era(n,{width:"narrow"})}}set(n,a,r){return a.era=r,n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["R","u","t","T"]}const On={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ur={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ln(e,n){return e&&{value:n(e.value),rest:e.rest}}function vn(e,n){const a=n.match(e);return a?{value:parseInt(a[0],10),rest:n.slice(a[0].length)}:null}function mr(e,n){const a=n.match(e);if(!a)return null;if(a[0]==="Z")return{value:0,rest:n.slice(1)};const r=a[1]==="+"?1:-1,o=a[2]?parseInt(a[2],10):0,d=a[3]?parseInt(a[3],10):0,h=a[5]?parseInt(a[5],10):0;return{value:r*(o*Cf+d*Sf+h*gP),rest:n.slice(a[0].length)}}function P_(e){return vn(On.anyDigitsSigned,e)}function Tn(e,n){switch(e){case 1:return vn(On.singleDigit,n);case 2:return vn(On.twoDigits,n);case 3:return vn(On.threeDigits,n);case 4:return vn(On.fourDigits,n);default:return vn(new RegExp("^\\d{1,"+e+"}"),n)}}function Kh(e,n){switch(e){case 1:return vn(On.singleDigitSigned,n);case 2:return vn(On.twoDigitsSigned,n);case 3:return vn(On.threeDigitsSigned,n);case 4:return vn(On.fourDigitsSigned,n);default:return vn(new RegExp("^-?\\d{1,"+e+"}"),n)}}function sy(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function O_(e,n){const a=n>0,r=a?n:1-n;let o;if(r<=50)o=e||100;else{const d=r+50,h=Math.trunc(d/100)*100,g=e>=d%100;o=e+h-(g?100:0)}return a?o:1-o}function L_(e){return e%400===0||e%4===0&&e%100!==0}class LO extends It{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(n,a,r){const o=d=>({year:d,isTwoDigitYear:a==="yy"});switch(a){case"y":return Ln(Tn(4,n),o);case"yo":return Ln(r.ordinalNumber(n,{unit:"year"}),o);default:return Ln(Tn(a.length,n),o)}}validate(n,a){return a.isTwoDigitYear||a.year>0}set(n,a,r){const o=n.getFullYear();if(r.isTwoDigitYear){const h=O_(r.year,o);return n.setFullYear(h,0,1),n.setHours(0,0,0,0),n}const d=!("era"in a)||a.era===1?r.year:1-r.year;return n.setFullYear(d,0,1),n.setHours(0,0,0,0),n}}class zO extends It{priority=130;parse(n,a,r){const o=d=>({year:d,isTwoDigitYear:a==="YY"});switch(a){case"Y":return Ln(Tn(4,n),o);case"Yo":return Ln(r.ordinalNumber(n,{unit:"year"}),o);default:return Ln(Tn(a.length,n),o)}}validate(n,a){return a.isTwoDigitYear||a.year>0}set(n,a,r,o){const d=ny(n,o);if(r.isTwoDigitYear){const g=O_(r.year,d);return n.setFullYear(g,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),Qr(n,o)}const h=!("era"in a)||a.era===1?r.year:1-r.year;return n.setFullYear(h,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),Qr(n,o)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class IO extends It{priority=130;parse(n,a){return Kh(a==="R"?4:a.length,n)}set(n,a,r){const o=Wt(n,0);return o.setFullYear(r,0,4),o.setHours(0,0,0,0),uc(o)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class BO extends It{priority=130;parse(n,a){return Kh(a==="u"?4:a.length,n)}set(n,a,r){return n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class $O extends It{priority=120;parse(n,a,r){switch(a){case"Q":case"QQ":return Tn(a.length,n);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"})||r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})||r.quarter(n,{width:"abbreviated",context:"formatting"})||r.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=1&&a<=4}set(n,a,r){return n.setMonth((r-1)*3,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class FO extends It{priority=120;parse(n,a,r){switch(a){case"q":case"qq":return Tn(a.length,n);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"})||r.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})||r.quarter(n,{width:"abbreviated",context:"standalone"})||r.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=1&&a<=4}set(n,a,r){return n.setMonth((r-1)*3,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class UO extends It{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(n,a,r){const o=d=>d-1;switch(a){case"M":return Ln(vn(On.month,n),o);case"MM":return Ln(Tn(2,n),o);case"Mo":return Ln(r.ordinalNumber(n,{unit:"month"}),o);case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"})||r.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})||r.month(n,{width:"abbreviated",context:"formatting"})||r.month(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=11}set(n,a,r){return n.setMonth(r,1),n.setHours(0,0,0,0),n}}class HO extends It{priority=110;parse(n,a,r){const o=d=>d-1;switch(a){case"L":return Ln(vn(On.month,n),o);case"LL":return Ln(Tn(2,n),o);case"Lo":return Ln(r.ordinalNumber(n,{unit:"month"}),o);case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"})||r.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})||r.month(n,{width:"abbreviated",context:"standalone"})||r.month(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=0&&a<=11}set(n,a,r){return n.setMonth(r,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function qO(e,n,a){const r=et(e,a?.in),o=ay(r,a)-n;return r.setDate(r.getDate()-o*7),et(r,a?.in)}class YO extends It{priority=100;parse(n,a,r){switch(a){case"w":return vn(On.week,n);case"wo":return r.ordinalNumber(n,{unit:"week"});default:return Tn(a.length,n)}}validate(n,a){return a>=1&&a<=53}set(n,a,r,o){return Qr(qO(n,r,o),o)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function VO(e,n,a){const r=et(e,a?.in),o=T_(r,a)-n;return r.setDate(r.getDate()-o*7),r}class ZO extends It{priority=100;parse(n,a,r){switch(a){case"I":return vn(On.week,n);case"Io":return r.ordinalNumber(n,{unit:"week"});default:return Tn(a.length,n)}}validate(n,a){return a>=1&&a<=53}set(n,a,r){return uc(VO(n,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const KO=[31,28,31,30,31,30,31,31,30,31,30,31],WO=[31,29,31,30,31,30,31,31,30,31,30,31];class GO extends It{priority=90;subPriority=1;parse(n,a,r){switch(a){case"d":return vn(On.date,n);case"do":return r.ordinalNumber(n,{unit:"date"});default:return Tn(a.length,n)}}validate(n,a){const r=n.getFullYear(),o=L_(r),d=n.getMonth();return o?a>=1&&a<=WO[d]:a>=1&&a<=KO[d]}set(n,a,r){return n.setDate(r),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class QO extends It{priority=90;subpriority=1;parse(n,a,r){switch(a){case"D":case"DD":return vn(On.dayOfYear,n);case"Do":return r.ordinalNumber(n,{unit:"date"});default:return Tn(a.length,n)}}validate(n,a){const r=n.getFullYear();return L_(r)?a>=1&&a<=366:a>=1&&a<=365}set(n,a,r){return n.setMonth(0,r),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function ry(e,n,a){const r=Ql(),o=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,d=et(e,a?.in),h=d.getDay(),p=(n%7+7)%7,f=7-o,v=n<0||n>6?n-(h+f)%7:(p+f)%7-(h+f)%7;return kf(d,v,a)}class XO extends It{priority=90;parse(n,a,r){switch(a){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})||r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=6}set(n,a,r,o){return n=ry(n,r,o),n.setHours(0,0,0,0),n}incompatibleTokens=["D","i","e","c","t","T"]}class JO extends It{priority=90;parse(n,a,r,o){const d=h=>{const g=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+g};switch(a){case"e":case"ee":return Ln(Tn(a.length,n),d);case"eo":return Ln(r.ordinalNumber(n,{unit:"day"}),d);case"eee":return r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})||r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=6}set(n,a,r,o){return n=ry(n,r,o),n.setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class eL extends It{priority=90;parse(n,a,r,o){const d=h=>{const g=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+g};switch(a){case"c":case"cc":return Ln(Tn(a.length,n),d);case"co":return Ln(r.ordinalNumber(n,{unit:"day"}),d);case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"})||r.day(n,{width:"short",context:"standalone"})||r.day(n,{width:"narrow",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"})||r.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})||r.day(n,{width:"abbreviated",context:"standalone"})||r.day(n,{width:"short",context:"standalone"})||r.day(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=0&&a<=6}set(n,a,r,o){return n=ry(n,r,o),n.setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function tL(e,n,a){const r=et(e,a?.in),o=NO(r,a),d=n-o;return kf(r,d,a)}class nL extends It{priority=90;parse(n,a,r){const o=d=>d===0?7:d;switch(a){case"i":case"ii":return Tn(a.length,n);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return Ln(r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return Ln(r.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Ln(r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Ln(r.day(n,{width:"wide",context:"formatting"})||r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"}),o)}}validate(n,a){return a>=1&&a<=7}set(n,a,r){return n=tL(n,r),n.setHours(0,0,0,0),n}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class aL extends It{priority=80;parse(n,a,r){switch(a){case"a":case"aa":case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})||r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,r){return n.setHours(sy(r),0,0,0),n}incompatibleTokens=["b","B","H","k","t","T"]}class sL extends It{priority=80;parse(n,a,r){switch(a){case"b":case"bb":case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})||r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,r){return n.setHours(sy(r),0,0,0),n}incompatibleTokens=["a","B","H","k","t","T"]}class rL extends It{priority=80;parse(n,a,r){switch(a){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})||r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,r){return n.setHours(sy(r),0,0,0),n}incompatibleTokens=["a","b","t","T"]}class iL extends It{priority=70;parse(n,a,r){switch(a){case"h":return vn(On.hour12h,n);case"ho":return r.ordinalNumber(n,{unit:"hour"});default:return Tn(a.length,n)}}validate(n,a){return a>=1&&a<=12}set(n,a,r){const o=n.getHours()>=12;return o&&r<12?n.setHours(r+12,0,0,0):!o&&r===12?n.setHours(0,0,0,0):n.setHours(r,0,0,0),n}incompatibleTokens=["H","K","k","t","T"]}class lL extends It{priority=70;parse(n,a,r){switch(a){case"H":return vn(On.hour23h,n);case"Ho":return r.ordinalNumber(n,{unit:"hour"});default:return Tn(a.length,n)}}validate(n,a){return a>=0&&a<=23}set(n,a,r){return n.setHours(r,0,0,0),n}incompatibleTokens=["a","b","h","K","k","t","T"]}class oL extends It{priority=70;parse(n,a,r){switch(a){case"K":return vn(On.hour11h,n);case"Ko":return r.ordinalNumber(n,{unit:"hour"});default:return Tn(a.length,n)}}validate(n,a){return a>=0&&a<=11}set(n,a,r){return n.getHours()>=12&&r<12?n.setHours(r+12,0,0,0):n.setHours(r,0,0,0),n}incompatibleTokens=["h","H","k","t","T"]}class cL extends It{priority=70;parse(n,a,r){switch(a){case"k":return vn(On.hour24h,n);case"ko":return r.ordinalNumber(n,{unit:"hour"});default:return Tn(a.length,n)}}validate(n,a){return a>=1&&a<=24}set(n,a,r){const o=r<=24?r%24:r;return n.setHours(o,0,0,0),n}incompatibleTokens=["a","b","h","H","K","t","T"]}class dL extends It{priority=60;parse(n,a,r){switch(a){case"m":return vn(On.minute,n);case"mo":return r.ordinalNumber(n,{unit:"minute"});default:return Tn(a.length,n)}}validate(n,a){return a>=0&&a<=59}set(n,a,r){return n.setMinutes(r,0,0),n}incompatibleTokens=["t","T"]}class uL extends It{priority=50;parse(n,a,r){switch(a){case"s":return vn(On.second,n);case"so":return r.ordinalNumber(n,{unit:"second"});default:return Tn(a.length,n)}}validate(n,a){return a>=0&&a<=59}set(n,a,r){return n.setSeconds(r,0),n}incompatibleTokens=["t","T"]}class mL extends It{priority=30;parse(n,a){const r=o=>Math.trunc(o*Math.pow(10,-a.length+3));return Ln(Tn(a.length,n),r)}set(n,a,r){return n.setMilliseconds(r),n}incompatibleTokens=["t","T"]}class hL extends It{priority=10;parse(n,a){switch(a){case"X":return mr(ur.basicOptionalMinutes,n);case"XX":return mr(ur.basic,n);case"XXXX":return mr(ur.basicOptionalSeconds,n);case"XXXXX":return mr(ur.extendedOptionalSeconds,n);case"XXX":default:return mr(ur.extended,n)}}set(n,a,r){return a.timestampIsSet?n:Wt(n,n.getTime()-Vh(n)-r)}incompatibleTokens=["t","T","x"]}class fL extends It{priority=10;parse(n,a){switch(a){case"x":return mr(ur.basicOptionalMinutes,n);case"xx":return mr(ur.basic,n);case"xxxx":return mr(ur.basicOptionalSeconds,n);case"xxxxx":return mr(ur.extendedOptionalSeconds,n);case"xxx":default:return mr(ur.extended,n)}}set(n,a,r){return a.timestampIsSet?n:Wt(n,n.getTime()-Vh(n)-r)}incompatibleTokens=["t","T","X"]}class pL extends It{priority=40;parse(n){return P_(n)}set(n,a,r){return[Wt(n,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class gL extends It{priority=20;parse(n){return P_(n)}set(n,a,r){return[Wt(n,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const xL={G:new OO,y:new LO,Y:new zO,R:new IO,u:new BO,Q:new $O,q:new FO,M:new UO,L:new HO,w:new YO,I:new ZO,d:new GO,D:new QO,E:new XO,e:new JO,c:new eL,i:new nL,a:new aL,b:new sL,B:new rL,h:new iL,H:new lL,K:new oL,k:new cL,m:new dL,s:new uL,S:new mL,X:new hL,x:new fL,t:new pL,T:new gL},yL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vL=/^'([^]*?)'?$/,jL=/''/g,wL=/\S/,NL=/[a-zA-Z]/;function _L(e,n,a,r){const o=()=>Wt(r?.in||a,NaN),d=jO(),h=r?.locale??d.locale??ty,g=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,p=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0;if(!n)return e?o():et(a,r?.in);const f={firstWeekContainsDate:g,weekStartsOn:p,locale:h},v=[new PO(r?.in,a)],j=n.match(bL).map(k=>{const A=k[0];if(A in Zh){const D=Zh[A];return D(k,h.formatLong)}return k}).join("").match(yL),S=[];for(let k of j){!r?.useAdditionalWeekYearTokens&&R_(k)&&Xx(k,n,e),!r?.useAdditionalDayOfYearTokens&&M_(k)&&Xx(k,n,e);const A=k[0],D=xL[A];if(D){const{incompatibleTokens:O}=D;if(Array.isArray(O)){const R=S.find(H=>O.includes(H.token)||H.token===A);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${k}\` at the same time`)}else if(D.incompatibleTokens==="*"&&S.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);S.push({token:A,fullToken:k});const F=D.run(e,k,h.match,f);if(!F)return o();v.push(F.setter),e=F.rest}else{if(A.match(NL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(k==="''"?k="'":A==="'"&&(k=SL(k)),e.indexOf(k)===0)e=e.slice(k.length);else return o()}}if(e.length>0&&wL.test(e))return o();const T=v.map(k=>k.priority).sort((k,A)=>A-k).filter((k,A,D)=>D.indexOf(k)===A).map(k=>v.filter(A=>A.priority===k).sort((A,D)=>D.subPriority-A.subPriority)).map(k=>k[0]);let C=et(a,r?.in);if(isNaN(+C))return o();const N={};for(const k of T){if(!k.validate(C,f))return o();const A=k.set(C,N,f);Array.isArray(A)?(C=A[0],Object.assign(N,A[1])):C=A}return C}function SL(e){return e.match(vL)[1].replace(jL,"'")}function yw(e,n){const a=et(e,n?.in);return a.setMinutes(0,0,0),a}function CL(e,n,a){const[r,o]=Rc(a?.in,e,n);return+yw(r)==+yw(o)}function z_(e,n,a){const[r,o]=Rc(a?.in,e,n);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function kL(e,n,a){const[r,o]=Rc(a?.in,e,n);return r.getFullYear()===o.getFullYear()}function TL(e,n){return N_(Wt(e,e),SP(e))}function EL(e,n,a){const r=+et(e,a?.in),[o,d]=[+et(n.start,a?.in),+et(n.end,a?.in)].sort((h,g)=>h-g);return r>=o&&r<=d}function I_(e,n){const a=()=>Wt(n?.in,NaN),o=DL(e);let d;if(o.date){const f=PL(o.date,2);d=OL(f.restDateString,f.year)}if(!d||isNaN(+d))return a();const h=+d;let g=0,p;if(o.time&&(g=LL(o.time),isNaN(g)))return a();if(o.timezone){if(p=zL(o.timezone),isNaN(p))return a()}else{const f=new Date(h+g),v=et(0,n?.in);return v.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),v.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),v}return et(h+g+p,n?.in)}const fh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ML=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,RL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,AL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function DL(e){const n={},a=e.split(fh.dateTimeDelimiter);let r;if(a.length>2)return n;if(/:/.test(a[0])?r=a[0]:(n.date=a[0],r=a[1],fh.timeZoneDelimiter.test(n.date)&&(n.date=e.split(fh.timeZoneDelimiter)[0],r=e.substr(n.date.length,e.length))),r){const o=fh.timezone.exec(r);o?(n.time=r.replace(o[1],""),n.timezone=o[1]):n.time=r}return n}function PL(e,n){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};const o=r[1]?parseInt(r[1]):null,d=r[2]?parseInt(r[2]):null;return{year:d===null?o:d*100,restDateString:e.slice((r[1]||r[2]).length)}}function OL(e,n){if(n===null)return new Date(NaN);const a=e.match(ML);if(!a)return new Date(NaN);const r=!!a[4],o=$d(a[1]),d=$d(a[2])-1,h=$d(a[3]),g=$d(a[4]),p=$d(a[5])-1;if(r)return UL(n,g,p)?IL(n,g,p):new Date(NaN);{const f=new Date(0);return!$L(n,d,h)||!FL(n,o)?new Date(NaN):(f.setUTCFullYear(n,d,Math.max(o,h)),f)}}function $d(e){return e?parseInt(e):1}function LL(e){const n=e.match(RL);if(!n)return NaN;const a=dx(n[1]),r=dx(n[2]),o=dx(n[3]);return HL(a,r,o)?a*Cf+r*Sf+o*1e3:NaN}function dx(e){return e&&parseFloat(e.replace(",","."))||0}function zL(e){if(e==="Z")return 0;const n=e.match(AL);if(!n)return 0;const a=n[1]==="+"?-1:1,r=parseInt(n[2]),o=n[3]&&parseInt(n[3])||0;return qL(r,o)?a*(r*Cf+o*Sf):NaN}function IL(e,n,a){const r=new Date(0);r.setUTCFullYear(e,0,4);const o=r.getUTCDay()||7,d=(n-1)*7+a+1-o;return r.setUTCDate(r.getUTCDate()+d),r}const BL=[31,null,31,30,31,30,31,31,30,31,30,31];function B_(e){return e%400===0||e%4===0&&e%100!==0}function $L(e,n,a){return n>=0&&n<=11&&a>=1&&a<=(BL[n]||(B_(e)?29:28))}function FL(e,n){return n>=1&&n<=(B_(e)?366:365)}function UL(e,n,a){return n>=1&&n<=53&&a>=0&&a<=6}function HL(e,n,a){return e===24?n===0&&a===0:a>=0&&a<60&&n>=0&&n<60&&e>=0&&e<25}function qL(e,n){return n>=0&&n<=59}function YL(e,n,a){const r=et(e,a?.in),o=r.getFullYear(),d=r.getDate(),h=Wt(e,0);h.setFullYear(o,n,15),h.setHours(0,0,0,0);const g=A_(h);return r.setMonth(n,Math.min(d,g)),r}function VL(e,n,a){const r=et(e,a?.in);return r.setDate(n),r}function ZL(e,n,a){const r=et(e,a?.in);return r.setHours(n),r}function KL(e,n,a){const r=et(e,a?.in);return r.setMilliseconds(n),r}function WL(e,n,a){const r=et(e,a?.in);return r.setMinutes(n),r}function GL(e,n,a){const r=et(e,a?.in);return r.setSeconds(n),r}function QL(e,n,a){const r=et(e,a?.in);return isNaN(+r)?Wt(e,NaN):(r.setFullYear(n),r)}const $_=({year:e,month:n,data:a={},onDayClick:r,onDayHover:o,onRangeSelect:d,renderDay:h,selectedDates:g=[],rangeStart:p,rangeEnd:f,multiSelect:v=!1,className:j})=>{const[S,T]=b.useState(!1),[C,N]=b.useState(null),[k,A]=b.useState(null),[D,O]=b.useState(null),F=b.useRef(null),R=b.useMemo(()=>{const W=S_(new Date(e,n-1)),B=__(new Date(e,n-1)),te=TP({start:W,end:B}),G=W.getDay(),J=B.getDay(),q=Array.from({length:G},(I,se)=>{const ne=new Date(W);return ne.setDate(ne.getDate()-(G-se)),ne}),K=Array.from({length:6-J},(I,se)=>{const ne=new Date(B);return ne.setDate(ne.getDate()+se+1),ne});return[...q,...te,...K].map(I=>{const se=Qn(I,"yyyy-MM-dd"),ne=a?.[se]||null;return{date:I,dateString:se,isCurrentMonth:z_(I,new Date(e,n-1)),isToday:TL(I),isPast:kh(I,mc(new Date)),data:ne}})},[e,n,a]),H=b.useMemo(()=>["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],[]),E=b.useCallback((W,B)=>{B.preventDefault(),v&&(T(!0),N(W),A(W))},[v]),z=b.useCallback(W=>{O(W),o?.(W),S&&C&&A(W)},[S,C,o]),Z=b.useCallback(()=>{if(S&&C&&k&&d){const W=C<k?C:k,B=C<k?k:C;d(W,B)}T(!1),N(null),A(null)},[S,C,k,d]),U=b.useCallback((W,B)=>{if(!S&&r)if(B.shiftKey&&g.length>0){const te=g[g.length-1],G=te<W?te:W,J=te<W?W:te;d?.(G,J)}else B.ctrlKey||B.metaKey,r(W)},[S,r,d,g]);b.useEffect(()=>{const W=()=>{S&&Z()};return document.addEventListener("mouseup",W),()=>document.removeEventListener("mouseup",W)},[S,Z]);const V=b.useCallback(W=>!p||!f?!1:W>=p&&W<=f,[p,f]),X=b.useCallback(W=>{if(!C||!k)return!1;const B=C<k?C:k,te=C<k?k:C;return W>=B&&W<=te},[C,k]);return t.jsxs("div",{ref:F,className:We("bg-white rounded-lg shadow-sm border border-gray-200",j),onMouseLeave:()=>{O(null),o?.(null)},children:[t.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:H.map((W,B)=>t.jsx("div",{className:"py-3 px-2 text-center text-sm font-medium text-gray-700 bg-gray-50",children:W},B))}),t.jsx("div",{className:"grid grid-cols-7",children:R.map(W=>{const B=g.includes(W.dateString),te=V(W.dateString),G=X(W.dateString),J=W.dateString===p||W.dateString===C,q=W.dateString===f||W.dateString===k;return t.jsx("div",{className:We("relative aspect-square border-r border-b border-gray-100 p-1","transition-all duration-150 select-none",!W.isCurrentMonth&&"bg-gray-50 opacity-50",W.isToday&&"ring-2 ring-blue-400 ring-inset",W.isPast&&"opacity-60",(B||te||G)&&W.isCurrentMonth&&"bg-blue-50",J&&"bg-blue-100 rounded-l-lg",q&&"bg-blue-100 rounded-r-lg",D===W.dateString&&"bg-gray-100","cursor-pointer hover:bg-gray-50"),onMouseDown:K=>E(W.dateString,K),onMouseEnter:()=>z(W.dateString),onClick:K=>U(W.dateString,K),children:h?h(W):t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("div",{className:We("text-sm font-medium",W.isToday?"text-blue-600":"text-gray-900"),children:Qn(W.date,"d")}),W.data&&t.jsx("div",{className:"flex-1 mt-1"})]})},W.dateString)})})]})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F_=(...e)=>e.filter((n,a,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===a).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=b.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:d,iconNode:h,...g},p)=>b.createElement("svg",{ref:p,...JL,width:n,height:n,stroke:e,strokeWidth:r?Number(a)*24/Number(n):a,className:F_("lucide",o),...g},[...h.map(([f,v])=>b.createElement(f,v)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(e,n)=>{const a=b.forwardRef(({className:r,...o},d)=>b.createElement(ez,{ref:d,iconNode:n,className:F_(`lucide-${XL(e)}`,r),...o}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nz=$t("ArrowRight",tz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],sz=$t("Banknote",az);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],iz=$t("Building",rz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],oz=$t("CalendarDays",lz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hc=$t("Calendar",cz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],uz=$t("ChartNoAxesColumnIncreasing",dz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hz=$t("ChevronDown",mz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pz=$t("ChevronLeft",fz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],U_=$t("ChevronRight",gz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ef=$t("CircleAlert",xz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],H_=$t("CircleCheckBig",yz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vz=$t("CircleX",bz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],wz=$t("Clock",jz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iy=$t("Copy",Nz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Mf=$t("DollarSign",_z);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Cz=$t("Download",Sz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Tz=$t("House",kz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mz=$t("Info",Ez);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],q_=$t("Layers",Rz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Y_=$t("Percent",Az);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pz=$t("Plus",Dz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lz=$t("RefreshCw",Oz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],V_=$t("Settings",zz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bz=$t("ShieldCheck",Iz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ly=$t("SquarePen",$z);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Uz=$t("Trash",Fz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Z_=$t("TrendingDown",Hz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],fu=$t("TrendingUp",qz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],K_=$t("Upload",Yz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rf=$t("X",Vz),ot=b.forwardRef(({variant:e="primary",size:n="md",loading:a=!1,icon:r,iconPosition:o="left",fullWidth:d=!1,rounded:h="md",className:g="",children:p,disabled:f,...v},j)=>{const S=We("inline-flex items-center justify-center font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-60 disabled:cursor-not-allowed","active:scale-[0.98]"),T={primary:We("bg-blue-600 text-white border border-transparent","hover:bg-blue-700 focus:ring-blue-500","shadow-sm hover:shadow"),secondary:We("bg-gray-600 text-white border border-transparent","hover:bg-gray-700 focus:ring-gray-500","shadow-sm hover:shadow"),outline:We("bg-white text-gray-700 border border-gray-300","hover:bg-gray-50 focus:ring-gray-500"),ghost:We("bg-transparent text-gray-700 border border-transparent","hover:bg-gray-100 focus:ring-gray-500"),danger:We("bg-red-600 text-white border border-transparent","hover:bg-red-700 focus:ring-red-500","shadow-sm hover:shadow"),success:We("bg-green-600 text-white border border-transparent","hover:bg-green-700 focus:ring-green-500","shadow-sm hover:shadow"),warning:We("bg-amber-600 text-white border border-transparent","hover:bg-amber-700 focus:ring-amber-500","shadow-sm hover:shadow")},C={xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"},N={sm:"rounded",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};return t.jsxs("button",{ref:j,className:We(S,T[e],C[n],N[h],d&&"w-full",g),disabled:f||a,...v,children:[a&&t.jsxs("svg",{className:We("animate-spin h-4 w-4",!!p&&(o==="left"?"mr-2":"ml-2")),fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!a&&r&&o==="left"&&t.jsx("span",{className:We(!!p&&"mr-2"),children:r}),p,!a&&r&&o==="right"&&t.jsx("span",{className:We(!!p&&"ml-2"),children:r})]})});ot.displayName="Button";const Ss=b.forwardRef(({children:e,className:n="",onChange:a,error:r=!1,icon:o,placeholder:d,disabled:h,...g},p)=>t.jsxs("div",{className:"relative",children:[o&&t.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:o}),t.jsxs("select",{ref:p,className:We("w-full appearance-none px-3 py-2 pr-10 text-sm border rounded-md transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-0",r?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500/20",h&&"bg-gray-50 cursor-not-allowed opacity-60",!!o&&"pl-10",n),onChange:f=>a?.(f.target.value),disabled:h,...g,children:[d&&t.jsx("option",{value:"",disabled:!0,children:d}),e]}),t.jsx(hz,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}));Ss.displayName="Select";const Zz=({variant:e="default",size:n="md",fullWidth:a=!1,className:r="",children:o,...d})=>{const h={default:"gap-0.5",pills:"gap-2",tabs:"gap-0 border-b border-gray-200"};return t.jsx("div",{className:We("inline-flex items-center",h[e],a&&"w-full",e==="default"&&"bg-gray-100 p-0.5 rounded-lg",r),...d,children:Ke.Children.map(o,(g,p)=>Ke.isValidElement(g)?Ke.cloneElement(g,{className:We(g.props.className,e==="default"&&p===0&&"rounded-l-md",e==="default"&&p===Ke.Children.count(o)-1&&"rounded-r-md",e==="default"&&"rounded-none",a&&"flex-1")}):g)})},W_=({year:e,month:n,onMonthChange:a,onViewChange:r,currentView:o="month",onExport:d,onImport:h,onSettings:g,onClone:p,title:f,actions:v})=>{const j=()=>{n===1?a(e-1,12):a(e,n-1)},S=()=>{n===12?a(e+1,1):a(e,n+1)},T=()=>{const k=new Date;a(k.getFullYear(),k.getMonth()+1)},C=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],N=Array.from({length:10},(k,A)=>new Date().getFullYear()-2+A);return t.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[f&&t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{variant:"outline",size:"sm",onClick:j,icon:t.jsx(U_,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ss,{value:n.toString(),onChange:k=>a(e,parseInt(k)),className:"w-28",children:C.map((k,A)=>t.jsx("option",{value:A+1,children:k},A+1))}),t.jsx(Ss,{value:e.toString(),onChange:k=>a(parseInt(k),n),className:"w-20",children:N.map(k=>t.jsx("option",{value:k,children:k},k))})]}),t.jsx(ot,{variant:"outline",size:"sm",onClick:S,icon:t.jsx(pz,{className:"h-4 w-4"})}),t.jsx(ot,{variant:"outline",size:"sm",onClick:T,children:"اليوم"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[r&&t.jsxs(Zz,{children:[t.jsx(ot,{variant:o==="month"?"primary":"outline",size:"sm",onClick:()=>r("month"),icon:t.jsx(hc,{className:"h-4 w-4"}),children:"شهري"}),t.jsx(ot,{variant:o==="year"?"primary":"outline",size:"sm",onClick:()=>r("year"),children:"سنوي"}),t.jsx(ot,{variant:o==="list"?"primary":"outline",size:"sm",onClick:()=>r("list"),children:"قائمة"})]}),(p||h||d||g)&&t.jsxs("div",{className:"flex items-center gap-2 border-r pr-3",children:[p&&t.jsx(ot,{variant:"outline",size:"sm",onClick:p,icon:t.jsx(iy,{className:"h-4 w-4"}),children:"نسخ"}),h&&t.jsx(ot,{variant:"outline",size:"sm",onClick:h,icon:t.jsx(K_,{className:"h-4 w-4"}),children:"استيراد"}),d&&t.jsx(ot,{variant:"outline",size:"sm",onClick:d,icon:t.jsx(Cz,{className:"h-4 w-4"}),children:"تصدير"}),g&&t.jsx(ot,{variant:"outline",size:"sm",onClick:g,icon:t.jsx(V_,{className:"h-4 w-4"})})]}),v]})]})})};var ja=(e=>(e.Available="Available",e.Booked="Booked",e.Blocked="Blocked",e.Maintenance="Maintenance",e.Hold="Hold",e))(ja||{});const Kz=()=>{const e=[{status:ja.Available,label:"متاح",color:"bg-green-100 border-green-200",icon:"✓"},{status:ja.Booked,label:"محجوز",color:"bg-red-100 border-red-200",icon:"●"},{status:ja.Blocked,label:"محظور",color:"bg-gray-200 border-gray-300",icon:"✕"},{status:ja.Maintenance,label:"صيانة",color:"bg-yellow-100 border-yellow-200",icon:"🔧"},{status:ja.Hold,label:"معلق",color:"bg-blue-100 border-blue-200",icon:"⏸"}];return t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:t.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"دليل الألوان:"}),e.map(n=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-8 h-8 rounded border ${n.color} flex items-center justify-center`,children:t.jsx("span",{className:"text-xs",children:n.icon})}),t.jsx("span",{className:"text-sm text-gray-600",children:n.label})]},n.status))]})})},Wz=({stats:e})=>{const n=typeof e.totalDays=="object"&&e.totalDays!==null&&"amount"in e.totalDays?e.totalDays.amount:Number(e.totalDays)||0,a=typeof e.availableDays=="object"&&e.availableDays!==null&&"amount"in e.availableDays?e.availableDays.amount:Number(e.availableDays)||0,r=typeof e.bookedDays=="object"&&e.bookedDays!==null&&"amount"in e.bookedDays?e.bookedDays.amount:Number(e.bookedDays)||0,o=typeof e.occupancyRate=="object"&&e.occupancyRate!==null&&"amount"in e.occupancyRate?e.occupancyRate.amount:Number(e.occupancyRate)||0,d=[{label:"إجمالي الأيام",value:n,icon:hc,color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},{label:"الأيام المتاحة",value:a,icon:wz,color:"green",bgColor:"bg-green-50",textColor:"text-green-600",percentage:n>0?(a/n*100).toFixed(1):"0.0"},{label:"الأيام المحجوزة",value:r,icon:fu,color:"red",bgColor:"bg-red-50",textColor:"text-red-600",percentage:n>0?(r/n*100).toFixed(1):"0.0"},{label:"معدل الإشغال",value:`${o.toFixed(1)}%`,icon:fu,color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600"}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((h,g)=>{const p=h.icon;return t.jsx(Ia,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:h.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.value}),h.percentage&&t.jsxs("p",{className:`text-sm mt-1 ${h.textColor}`,children:[h.percentage,"% من الإجمالي"]})]}),t.jsx("div",{className:`p-3 rounded-lg ${h.bgColor}`,children:t.jsx(p,{className:`h-5 w-5 ${h.textColor}`})})]})},g)})})},Gz=({selectedCount:e,onBlock:n,onAvailable:a,onUpdate:r,onBulkOperations:o})=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{variant:"outline",size:"sm",onClick:a,icon:t.jsx(H_,{className:"h-4 w-4"}),disabled:e===0,children:"تعيين كمتاحة"}),t.jsx(ot,{variant:"outline",size:"sm",onClick:n,icon:t.jsx(Bz,{className:"h-4 w-4"}),disabled:e===0,children:"حظر سريع"}),t.jsx(ot,{variant:"outline",size:"sm",onClick:r,icon:t.jsx(ly,{className:"h-4 w-4"}),disabled:e===0,children:"تحديث"}),t.jsx(ot,{variant:"primary",size:"sm",onClick:o,icon:t.jsx(q_,{className:"h-4 w-4"}),disabled:e===0,children:"عمليات متعددة"})]}),Wh=({isOpen:e,onClose:n,title:a,description:r,size:o="md",children:d,footer:h,closeOnOverlay:g=!0,closeOnEsc:p=!0,showClose:f=!0,className:v=""})=>{if(b.useEffect(()=>{const S=T=>{p&&T.key==="Escape"&&n()};return e&&(document.addEventListener("keydown",S),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",S),document.body.style.overflow="unset"}},[e,n,p]),!e)return null;const j={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-full mx-4"};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:g?n:void 0,"aria-hidden":"true"}),t.jsxs("div",{className:We("relative w-full bg-white rounded-xl shadow-2xl transition-all","animate-in fade-in zoom-in-95 duration-200",j[o],v),children:[(a||f)&&t.jsxs("div",{className:"flex items-start justify-between px-6 py-4 border-b",children:[t.jsxs("div",{children:[a&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),r&&t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:r})]}),f&&t.jsx(ot,{variant:"ghost",size:"sm",onClick:n,className:"-mr-2 -mt-2",icon:t.jsx(Rf,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:d}),h&&t.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl",children:h})]})]})})},G_=b.createContext({}),Af=({errors:e,className:n="",children:a,...r})=>t.jsx(G_.Provider,{value:{errors:e},children:t.jsx("form",{className:We("space-y-6",n),...r,children:a})}),La=({name:e,label:n,required:a,help:r,error:o,className:d="",children:h})=>{const{errors:g}=b.useContext(G_),p=o||e&&g?.[e];return t.jsxs("div",{className:We("space-y-2",d),children:[n&&t.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700",children:[n,a&&t.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),t.jsx("div",{children:h}),r&&!p&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r}),p&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(Ef,{className:"h-3 w-3 text-red-500"}),t.jsx("p",{className:"text-xs text-red-600",children:p})]})]})},Qz=({title:e,description:n,children:a,className:r=""})=>t.jsxs("div",{className:We("space-y-4",r),children:[(e||n)&&t.jsxs("div",{className:"border-b pb-2",children:[e&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),n&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n})]}),t.jsx("div",{className:"space-y-4",children:a})]});Af.Field=La;Af.Section=Qz;const ia=b.forwardRef(({error:e=!1,icon:n,iconPosition:a="left",addon:r,addonPosition:o="left",className:d="",disabled:h,...g},p)=>{const f=t.jsx("input",{ref:p,className:We("w-full px-3 py-2 text-sm border rounded-md transition-all duration-200","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-offset-0",e?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500/20",h&&"bg-gray-50 cursor-not-allowed opacity-60",!!n&&a==="left"&&"pl-10",!!n&&a==="right"&&"pr-10",!!r&&o==="left"&&"rounded-l-none",!!r&&o==="right"&&"rounded-r-none",d),disabled:h,...g});return!n&&!r?f:t.jsxs("div",{className:"relative flex",children:[r&&o==="left"&&t.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-600 bg-gray-50 border border-r-0 border-gray-300 rounded-l-md",children:r}),t.jsxs("div",{className:"relative flex-1",children:[n&&t.jsx("div",{className:We("absolute top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",a==="left"?"left-3":"right-3"),children:n}),f]}),r&&o==="right"&&t.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-600 bg-gray-50 border border-l-0 border-gray-300 rounded-r-md",children:r})]})});ia.displayName="Input";const Du=b.forwardRef(({error:e=!1,resize:n="vertical",showCount:a=!1,maxLength:r,className:o="",disabled:d,value:h,...g},p)=>{const f={none:"resize-none",vertical:"resize-y",horizontal:"resize-x",both:"resize"},v=h?String(h).length:0;return t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:p,value:h,maxLength:r,className:We("w-full px-3 py-2 text-sm border rounded-md transition-all duration-200","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-offset-0",e?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500/20",d&&"bg-gray-50 cursor-not-allowed opacity-60",f[n],a&&r!==void 0&&"pb-6",o),disabled:d,...g}),a&&r!==void 0&&t.jsxs("div",{className:We("absolute bottom-2 right-2 text-xs",v===r?"text-red-500":"text-gray-400"),children:[v,"/",r]})]})});Du.displayName="Textarea";const Df=({checked:e=!1,onChange:n,disabled:a=!1,size:r="md",label:o,labelPosition:d="right",color:h="primary",className:g=""})=>{const p={sm:{container:"h-5 w-9",thumb:"h-4 w-4",translate:"translate-x-4"},md:{container:"h-6 w-11",thumb:"h-5 w-5",translate:"translate-x-5"},lg:{container:"h-7 w-14",thumb:"h-6 w-6",translate:"translate-x-7"}},f={primary:"bg-blue-600",success:"bg-green-600",danger:"bg-red-600"},v=p[r],j=t.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>!a&&n?.(!e),disabled:a,className:We("relative inline-flex items-center rounded-full transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2",v.container,e?f[h]:"bg-gray-300",a&&"opacity-50 cursor-not-allowed",h==="primary"&&"focus:ring-blue-500",h==="success"&&"focus:ring-green-500",h==="danger"&&"focus:ring-red-500"),children:t.jsx("span",{className:We("inline-block transform rounded-full bg-white shadow-lg transition-transform duration-200",v.thumb,e?v.translate:"translate-x-1")})});return o?t.jsxs("label",{className:We("inline-flex items-center gap-3 cursor-pointer",a&&"cursor-not-allowed opacity-60",g),children:[d==="left"&&t.jsx("span",{className:"text-sm text-gray-700",children:o}),j,d==="right"&&t.jsx("span",{className:"text-sm text-gray-700",children:o})]}):j};class Xz{basePath="/api/admin/units";async getMonthlyAvailability(n,a,r){const d=(await je.get(`${this.basePath}/${n}/availability/${a}/${r}`)).data.data;if(d&&d.calendar){const h={};for(const[g,p]of Object.entries(d.calendar)){let f;try{const j=I_(g);f=Tf(j)?j:new Date(g)}catch{f=new Date(g)}const v=Qn(f,"yyyy-MM-dd");h[v]=p}d.calendar=h}return d}async updateAvailability(n){await je.post(`${this.basePath}/${n.unitId}/availability`,n)}async bulkUpdateAvailability(n){console.log("=== AVAILABILITY SERVICE DEBUG ==="),console.log("Base Path:",this.basePath),console.log("Unit ID:",n.unitId),console.log("Full URL:",`${this.basePath}/${n.unitId}/availability/bulk`),console.log("Command Data:",n),console.log("Command JSON:",JSON.stringify(n,null,2)),console.log("=== END SERVICE DEBUG ==="),await je.post(`${this.basePath}/${n.unitId}/availability/bulk`,n)}async cloneAvailability(n){await je.post(`${this.basePath}/${n.unitId}/availability/clone`,n)}async deleteAvailability(n,a,r){await je.delete(`${this.basePath}/${n}/availability/${a}/${r}`)}async checkAvailability(n){return(await je.get(`${this.basePath}/${n.unitId}/availability/check`,{params:{checkIn:n.checkIn,checkOut:n.checkOut,adults:n.adults,children:n.children,includePricing:n.includePricing}})).data.data}}const Fd=new Xz;let Jz={data:""},eI=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Jz,tI=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,nI=/\/\*[^]*?\*\/|  +/g,bw=/\n+/g,el=(e,n)=>{let a="",r="",o="";for(let d in e){let h=e[d];d[0]=="@"?d[1]=="i"?a=d+" "+h+";":r+=d[1]=="f"?el(h,d):d+"{"+el(h,d[1]=="k"?"":n)+"}":typeof h=="object"?r+=el(h,n?n.replace(/([^,])+/g,g=>d.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,g):g?g+" "+p:p)):d):h!=null&&(d=/^--/.test(d)?d:d.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=el.p?el.p(d,h):d+":"+h+";")}return a+(n&&o?n+"{"+o+"}":o)+r},Vr={},Q_=e=>{if(typeof e=="object"){let n="";for(let a in e)n+=a+Q_(e[a]);return n}return e},aI=(e,n,a,r,o)=>{let d=Q_(e),h=Vr[d]||(Vr[d]=(p=>{let f=0,v=11;for(;f<p.length;)v=101*v+p.charCodeAt(f++)>>>0;return"go"+v})(d));if(!Vr[h]){let p=d!==e?e:(f=>{let v,j,S=[{}];for(;v=tI.exec(f.replace(nI,""));)v[4]?S.shift():v[3]?(j=v[3].replace(bw," ").trim(),S.unshift(S[0][j]=S[0][j]||{})):S[0][v[1]]=v[2].replace(bw," ").trim();return S[0]})(e);Vr[h]=el(o?{["@keyframes "+h]:p}:p,a?"":"."+h)}let g=a&&Vr.g?Vr.g:null;return a&&(Vr.g=Vr[h]),((p,f,v,j)=>{j?f.data=f.data.replace(j,p):f.data.indexOf(p)===-1&&(f.data=v?p+f.data:f.data+p)})(Vr[h],n,r,g),h},sI=(e,n,a)=>e.reduce((r,o,d)=>{let h=n[d];if(h&&h.call){let g=h(a),p=g&&g.props&&g.props.className||/^go/.test(g)&&g;h=p?"."+p:g&&typeof g=="object"?g.props?"":el(g,""):g===!1?"":g}return r+o+(h??"")},"");function Pf(e){let n=this||{},a=e.call?e(n.p):e;return aI(a.unshift?a.raw?sI(a,[].slice.call(arguments,1),n.p):a.reduce((r,o)=>Object.assign(r,o&&o.call?o(n.p):o),{}):a,eI(n.target),n.g,n.o,n.k)}let X_,Jx,e0;Pf.bind({g:1});let Xr=Pf.bind({k:1});function rI(e,n,a,r){el.p=n,X_=e,Jx=a,e0=r}function sl(e,n){let a=this||{};return function(){let r=arguments;function o(d,h){let g=Object.assign({},d),p=g.className||o.className;a.p=Object.assign({theme:Jx&&Jx()},g),a.o=/ *go\d+/.test(p),g.className=Pf.apply(a,r)+(p?" "+p:"");let f=e;return e[0]&&(f=g.as||e,delete g.as),e0&&f[0]&&e0(g),X_(f,g)}return o}}var iI=e=>typeof e=="function",t0=(e,n)=>iI(e)?e(n):e,lI=(()=>{let e=0;return()=>(++e).toString()})(),oI=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");e=!n||n.matches}return e}})(),cI=20,J_=(e,n)=>{switch(n.type){case 0:return{...e,toasts:[n.toast,...e.toasts].slice(0,cI)};case 1:return{...e,toasts:e.toasts.map(d=>d.id===n.toast.id?{...d,...n.toast}:d)};case 2:let{toast:a}=n;return J_(e,{type:e.toasts.find(d=>d.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=n;return{...e,toasts:e.toasts.map(d=>d.id===r||r===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(d=>d.id!==n.toastId)};case 5:return{...e,pausedAt:n.time};case 6:let o=n.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+o}))}}},dI=[],ux={toasts:[],pausedAt:void 0},oy=e=>{ux=J_(ux,e),dI.forEach(n=>{n(ux)})},uI=(e,n="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||lI()}),Pu=e=>(n,a)=>{let r=uI(n,e,a);return oy({type:2,toast:r}),r.id},xt=(e,n)=>Pu("blank")(e,n);xt.error=Pu("error");xt.success=Pu("success");xt.loading=Pu("loading");xt.custom=Pu("custom");xt.dismiss=e=>{oy({type:3,toastId:e})};xt.remove=e=>oy({type:4,toastId:e});xt.promise=(e,n,a)=>{let r=xt.loading(n.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let d=n.success?t0(n.success,o):void 0;return d?xt.success(d,{id:r,...a,...a?.success}):xt.dismiss(r),o}).catch(o=>{let d=n.error?t0(n.error,o):void 0;d?xt.error(d,{id:r,...a,...a?.error}):xt.dismiss(r)}),e};var mI=Xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hI=Xr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fI=Xr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pI=sl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${fI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gI=Xr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,xI=sl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${gI} 1s linear infinite;
`,yI=Xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,bI=Xr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vI=sl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${bI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,jI=sl("div")`
  position: absolute;
`,wI=sl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,NI=Xr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_I=sl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${NI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,SI=({toast:e})=>{let{icon:n,type:a,iconTheme:r}=e;return n!==void 0?typeof n=="string"?b.createElement(_I,null,n):n:a==="blank"?null:b.createElement(wI,null,b.createElement(xI,{...r}),a!=="loading"&&b.createElement(jI,null,a==="error"?b.createElement(pI,{...r}):b.createElement(vI,{...r})))},CI=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,kI=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,TI="0%{opacity:0;} 100%{opacity:1;}",EI="0%{opacity:1;} 100%{opacity:0;}",MI=sl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,RI=sl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,AI=(e,n)=>{let a=e.includes("top")?1:-1,[r,o]=oI()?[TI,EI]:[CI(a),kI(a)];return{animation:n?`${Xr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Xr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};b.memo(({toast:e,position:n,style:a,children:r})=>{let o=e.height?AI(e.position||n||"top-center",e.visible):{opacity:0},d=b.createElement(SI,{toast:e}),h=b.createElement(RI,{...e.ariaProps},t0(e.message,e));return b.createElement(MI,{className:e.className,style:{...o,...a,...e.style}},typeof r=="function"?r({icon:d,message:h}):b.createElement(b.Fragment,null,d,h))});rI(b.createElement);Pf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const cy=(e,n,a)=>{console.log("useAvailability - Unit ID:",e),console.log("useAvailability - Year:",n),console.log("useAvailability - Month:",a);const r=In(),o=["availability",e,n,a],{data:d,isLoading:h,error:g,refetch:p}=zt({queryKey:o,queryFn:()=>Fd.getMonthlyAvailability(e,n,a),enabled:!!e&&n>0&&a>0}),f=Ie({mutationFn:N=>Fd.updateAvailability(N),onSuccess:()=>{r.invalidateQueries({queryKey:o}),r.invalidateQueries({queryKey:["availability",e,n,a-1]}),r.invalidateQueries({queryKey:["availability",e,n,a+1]}),xt.success("تم تحديث الإتاحة بنجاح")},onError:N=>{xt.error(N.response?.data?.message||"حدث خطأ في تحديث الإتاحة")}}),v=Ie({mutationFn:N=>Fd.bulkUpdateAvailability(N),onSuccess:()=>{r.invalidateQueries({queryKey:o}),r.invalidateQueries({queryKey:["availability",e,n,a-1]}),r.invalidateQueries({queryKey:["availability",e,n,a+1]}),xt.success("تم تحديث الإتاحة بنجاح")},onError:N=>{console.error("Bulk update mutation error:",N);let k="حدث خطأ في تحديث الإتاحة";N.response?.data?.message?k=N.response.data.message:N.response?.data?.errors?.[0]?k=N.response.data.errors[0]:N.message?k=N.message:typeof N=="string"?k=N:N&&typeof N=="object"&&(N.success===!1&&N.message?k=N.message:N.errors&&Array.isArray(N.errors)&&N.errors.length>0&&(k=N.errors[0])),xt.error(k)}}),j=Ie({mutationFn:N=>Fd.cloneAvailability(N),onSuccess:()=>{r.invalidateQueries({queryKey:["availability",e]}),xt.success("تم نسخ الإتاحة بنجاح")},onError:N=>{console.error("Clone availability mutation error:",N);let k="حدث خطأ في نسخ الإتاحة";N.response?.data?.message?k=N.response.data.message:N.response?.data?.errors?.[0]?k=N.response.data.errors[0]:N.message?k=N.message:typeof N=="string"?k=N:N&&typeof N=="object"&&(N.success===!1&&N.message?k=N.message:N.errors&&Array.isArray(N.errors)&&N.errors.length>0&&(k=N.errors[0])),xt.error(k)}}),S=Ie({mutationFn:({startDate:N,endDate:k})=>Fd.deleteAvailability(e,N,k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),xt.success("تم حذف الإتاحة بنجاح")},onError:N=>{xt.error(N.response?.data?.message||"حدث خطأ في حذف الإتاحة")}}),T=b.useCallback(N=>{const k=N.map(A=>({startDate:A,endDate:A,status:"Blocked",reason:"حظر سريع",notes:"",overwriteExisting:!0}));v.mutate({unitId:e,periods:k,overwriteExisting:!0})},[e,v]),C=b.useCallback(N=>{const k=N.map(A=>({startDate:A,endDate:A,status:"Available",reason:"",notes:"",overwriteExisting:!0}));v.mutate({unitId:e,periods:k,overwriteExisting:!0})},[e,v]);return{data:d,isLoading:h,error:g,refetch:p,updateAvailability:f,bulkUpdateAvailability:v,cloneAvailability:j,deleteAvailability:S,quickBlock:T,quickAvailable:C}},DI=({unitId:e,selectedDates:n,year:a,month:r,onClose:o,onSuccess:d})=>{const{updateAvailability:h}=cy(e,a,r),[g,p]=b.useState({unitId:e,startDate:n[0],endDate:n[n.length-1],status:ja.Blocked,reason:"",notes:"",overwriteExisting:!0}),[f,v]=b.useState(!1),j=[{value:ja.Available,label:"متاح"},{value:ja.Blocked,label:"محظور"},{value:ja.Maintenance,label:"صيانة"},{value:ja.Hold,label:"معلق"}],S={[ja.Blocked]:["حجز خاص","صيانة مجدولة","إغلاق موسمي","طلب المالك","أخرى"],[ja.Maintenance]:["صيانة دورية","إصلاحات","تجديدات","تنظيف عميق","أخرى"],[ja.Hold]:["انتظار التأكيد","حجز مؤقت","قيد المراجعة","أخرى"]},T=async C=>{C.preventDefault(),v(!0);try{await h.mutateAsync(g),d()}catch(N){console.error("Error updating availability:",N)}finally{v(!1)}};return t.jsx(Wh,{isOpen:!0,onClose:o,title:"تحديث الإتاحة",size:"md",children:t.jsxs(Af,{onSubmit:T,className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(hc,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"الفترة المحددة"})]}),t.jsx("div",{className:"text-sm text-gray-600",children:n.length===1?t.jsx("span",{children:Qn(new Date(n[0]),"dd/MM/yyyy")}):t.jsxs("span",{children:["من ",Qn(new Date(n[0]),"dd/MM/yyyy"),"إلى ",Qn(new Date(n[n.length-1]),"dd/MM/yyyy"),t.jsxs("span",{className:"mr-2 text-gray-500",children:["(",n.length," يوم)"]})]})})]}),t.jsx(La,{label:"الحالة",required:!0,children:t.jsx(Ss,{value:g.status,onChange:C=>p({...g,status:C,reason:""}),children:j.map(C=>t.jsx("option",{value:C.value,children:C.label},C.value))})}),g.status&&g.status!==ja.Available&&t.jsx(La,{label:"السبب",children:t.jsxs(Ss,{value:g.reason,onChange:C=>p({...g,reason:C}),children:[t.jsx("option",{value:"",children:"اختر السبب"}),S[g.status]?.map(C=>t.jsx("option",{value:C,children:C},C))]})}),g.reason==="أخرى"&&t.jsx(La,{label:"السبب المخصص",children:t.jsx(ia,{placeholder:"أدخل السبب...",onChange:C=>p({...g,reason:C.target.value})})}),t.jsx(La,{label:"ملاحظات",children:t.jsx(Du,{value:g.notes,onChange:C=>p({...g,notes:C.target.value}),placeholder:"أضف ملاحظات إضافية...",rows:3})}),t.jsx(La,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Df,{checked:g.overwriteExisting,onChange:C=>p({...g,overwriteExisting:C})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"استبدال البيانات الموجودة"}),t.jsx("p",{className:"text-xs text-gray-500",children:"سيتم استبدال أي إتاحة موجودة في هذه الفترة"})]})]})}),g.status===ja.Blocked&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Ef,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),t.jsxs("div",{className:"text-sm text-yellow-800",children:[t.jsx("p",{className:"font-medium mb-1",children:"تنبيه"}),t.jsx("p",{children:"حظر هذه الأيام سيمنع العملاء من حجزها"})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[t.jsx(ot,{type:"button",variant:"outline",onClick:o,disabled:f,children:"إلغاء"}),t.jsx(ot,{type:"submit",variant:"primary",loading:f,children:"تحديث الإتاحة"})]})]})})},dy=({startDate:e="",endDate:n="",onChange:a,minDate:r,maxDate:o,disabled:d=!1,className:h="",placeholder:g={start:"من تاريخ",end:"إلى تاريخ"}})=>{const[p,f]=b.useState(null),v=S=>{a(S,n),S&&n&&S>n&&a(S,S)},j=S=>{a(e,S),e&&S&&S<e&&a(S,S)};return t.jsxs("div",{className:We("flex items-center gap-2",h),children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),t.jsx("input",{type:"date",value:e,onChange:S=>v(S.target.value),onFocus:()=>f("start"),onBlur:()=>f(null),min:r,max:n||o,disabled:d,placeholder:g.start,className:We("w-full pl-10 pr-3 py-2 text-sm border rounded-md transition-all duration-200","hover:border-gray-400",p==="start"?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-300",d&&"bg-gray-50 cursor-not-allowed opacity-60")})]}),t.jsx(nz,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"relative flex-1",children:[t.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),t.jsx("input",{type:"date",value:n,onChange:S=>j(S.target.value),onFocus:()=>f("end"),onBlur:()=>f(null),min:e||r,max:o,disabled:d||!e,placeholder:g.end,className:We("w-full pl-10 pr-3 py-2 text-sm border rounded-md transition-all duration-200","hover:border-gray-400",p==="end"?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-300",(d||!e)&&"bg-gray-50 cursor-not-allowed opacity-60")})]})]})},PI=({unitId:e,selectedDates:n,year:a,month:r,onClose:o,onSuccess:d})=>{console.log("BulkOperationsPanel - Unit ID:",e),console.log("BulkOperationsPanel - Selected Dates:",n);const{bulkUpdateAvailability:h,cloneAvailability:g}=cy(e,a,r),[p,f]=b.useState("bulk-update"),[v,j]=b.useState("Blocked"),[S,T]=b.useState(""),[C,N]=b.useState(""),[k,A]=b.useState(!0),[D,O]=b.useState({start:"",end:""}),[F,R]=b.useState({start:"",end:""}),[H,E]=b.useState(1),[z,Z]=b.useState("weekly"),[U,V]=b.useState([]),[X,W]=b.useState([]),B=async()=>{if(!v){xt.error("يرجى تحديد الحالة");return}if(n.length===0){xt.error("يرجى تحديد التواريخ المراد تحديثها");return}const J=n.map(q=>{const K=q.includes("T")?q.split("T")[0]:q;return{startDate:K,endDate:K,status:v,reason:S||void 0,notes:C||void 0,overwriteExisting:k}});try{const q={unitId:e,periods:J,overwriteExisting:k};console.log("=== BULK UPDATE DEBUG INFO ==="),console.log("Unit ID:",e),console.log("Selected Dates Count:",n.length),console.log("Selected Dates:",n),console.log("Bulk Status:",v),console.log("Bulk Reason:",S),console.log("Bulk Notes:",C),console.log("Overwrite Existing:",k),console.log("Periods:",J),console.log("Command Object:",q),console.log("Command JSON:",JSON.stringify(q,null,2)),console.log("=== END DEBUG INFO ==="),await h.mutateAsync(q),xt.success("تم تحديث الإتاحة بنجاح"),d()}catch(q){console.error("Bulk update failed:",q),console.error("Error response:",q.response),console.error("Error data:",q.response?.data);let K="حدث خطأ في تحديث الإتاحة";q.response?.data?.message?K=q.response.data.message:q.response?.data?.errors?.[0]?K=q.response.data.errors[0]:q.message?K=q.message:typeof q=="string"?K=q:q&&typeof q=="object"&&(q.success===!1&&q.message?K=q.message:q.errors&&Array.isArray(q.errors)&&q.errors.length>0&&(K=q.errors[0])),console.error("Final error message:",K),xt.error(K)}},te=async()=>{if(!D.start||!D.end||!F.start){xt.error("يرجى تحديد فترة المصدر والهدف");return}try{console.log("Sending clone command:",{unitId:e,sourceStartDate:D.start,sourceEndDate:D.end,targetStartDate:F.start,repeatCount:H}),await g.mutateAsync({unitId:e,sourceStartDate:D.start,sourceEndDate:D.end,targetStartDate:F.start,repeatCount:H}),xt.success("تم نسخ الإتاحة بنجاح"),d()}catch(J){console.error("Clone failed:",J);let q="حدث خطأ في نسخ الإتاحة";J.response?.data?.message?q=J.response.data.message:J.response?.data?.errors?.[0]?q=J.response.data.errors[0]:J.message?q=J.message:typeof J=="string"?q=J:J&&typeof J=="object"&&(J.success===!1&&J.message?q=J.message:J.errors&&Array.isArray(J.errors)&&J.errors.length>0&&(q=J.errors[0])),console.error("Final error message:",q),xt.error(q)}},G=async()=>{const J=[];if(J.length===0){xt.error("لم يتم إنشاء أي تواريخ من النمط المحدد");return}const q=J.map(K=>({startDate:K,endDate:K,status:v,reason:"تطبيق نمط",notes:C,overwriteExisting:k}));try{const K={unitId:e,periods:q,overwriteExisting:k};console.log("Pattern apply command:",K),await h.mutateAsync(K),d()}catch(K){console.error("Pattern apply failed:",K);let I="حدث خطأ في تطبيق النمط";K.response?.data?.message?I=K.response.data.message:K.response?.data?.errors?.[0]?I=K.response.data.errors[0]:K.message?I=K.message:typeof K=="string"?I=K:K&&typeof K=="object"&&(K.success===!1&&K.message?I=K.message:K.errors&&Array.isArray(K.errors)&&K.errors.length>0&&(I=K.errors[0])),console.error("Final error message:",I),xt.error(I)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(Ia,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"عمليات متعددة"}),t.jsx(ot,{variant:"ghost",size:"sm",onClick:o,icon:t.jsx(Rf,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:t.jsxs(Nf,{value:p,onValueChange:f,children:[t.jsxs(_f,{className:"grid grid-cols-4 w-full",children:[t.jsx(as,{value:"bulk-update",children:"تحديث جماعي"}),t.jsx(as,{value:"clone",children:"نسخ"}),t.jsx(as,{value:"pattern",children:"نمط"}),t.jsx(as,{value:"import",children:"استيراد"})]}),t.jsxs(ss,{value:"bulk-update",className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["سيتم تطبيق التحديث على ",n.length," يوم محدد"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),t.jsxs(Ss,{value:v,onChange:J=>j(J),children:[t.jsx("option",{value:"Available",children:"متاح"}),t.jsx("option",{value:"Blocked",children:"محظور"}),t.jsx("option",{value:"Maintenance",children:"صيانة"}),t.jsx("option",{value:"Hold",children:"معلق"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السبب"}),t.jsx(ia,{value:S,onChange:J=>T(J.target.value),placeholder:"أدخل سبب التحديث..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),t.jsx(Du,{value:C,onChange:J=>N(J.target.value),placeholder:"ملاحظات إضافية...",rows:3})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Df,{checked:k,onChange:A}),t.jsx("label",{className:"text-sm text-gray-700",children:"استبدال البيانات الموجودة"})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:B,loading:h.isPending,children:"تطبيق التحديث"})]})]}),t.jsx(ss,{value:"clone",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفترة المصدر"}),t.jsx(dy,{startDate:D.start,endDate:D.end,onChange:(J,q)=>O({start:J,end:q})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية للنسخ"}),t.jsx(ia,{type:"date",value:F.start,onChange:J=>R({...F,start:J.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد مرات التكرار"}),t.jsx(ia,{type:"number",min:"1",max:"12",value:H,onChange:J=>E(parseInt(J.target.value))})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:te,loading:g.isPending,icon:t.jsx(iy,{className:"h-4 w-4"}),children:"نسخ الإتاحة"})]})}),t.jsx(ss,{value:"pattern",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع النمط"}),t.jsxs(Ss,{value:z,onChange:J=>Z(J),children:[t.jsx("option",{value:"weekly",children:"أسبوعي"}),t.jsx("option",{value:"monthly",children:"شهري"})]})]}),z==="weekly"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"أيام الأسبوع"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"].map((J,q)=>t.jsx(ot,{variant:U.includes(q)?"primary":"outline",size:"sm",onClick:()=>{U.includes(q)?V(U.filter(K=>K!==q)):V([...U,q])},children:J},q))})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:G,icon:t.jsx(Lz,{className:"h-4 w-4"}),children:"تطبيق النمط"})]})}),t.jsxs(ss,{value:"import",className:"space-y-4",children:[t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx(K_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"اسحب وأفلت ملف CSV أو Excel هنا"}),t.jsx(ot,{variant:"outline",size:"sm",children:"اختر ملف"})]})}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:t.jsx("p",{className:"text-sm text-gray-600",children:"صيغة الملف المطلوبة: التاريخ، الحالة، السبب، الملاحظات"})})]})]})}),t.jsx("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:t.jsx(ot,{variant:"outline",onClick:o,children:"إلغاء"})})]})})},Of=({size:e="md",variant:n="spinner",color:a="primary",text:r,fullScreen:o=!1,className:d=""})=>{const h={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},g={primary:"border-blue-600",secondary:"border-gray-600",white:"border-white",dark:"border-gray-900"},p=n==="spinner"&&t.jsx("div",{className:We("animate-spin rounded-full border-2 border-t-transparent",h[e],g[a]),"aria-label":"Loading"}),f=n==="dots"&&t.jsx("div",{className:"flex gap-1",children:[0,1,2].map(T=>t.jsx("div",{className:We("rounded-full bg-current animate-pulse",e==="xs"&&"h-1 w-1",e==="sm"&&"h-1.5 w-1.5",e==="md"&&"h-2 w-2",e==="lg"&&"h-3 w-3",e==="xl"&&"h-4 w-4",a==="primary"&&"text-blue-600",a==="secondary"&&"text-gray-600",a==="white"&&"text-white",a==="dark"&&"text-gray-900"),style:{animationDelay:`${T*150}ms`}},T))}),v=n==="pulse"&&t.jsxs("div",{className:We("space-y-2",h[e]),children:[t.jsx("div",{className:"bg-gray-300 rounded h-2 animate-pulse"}),t.jsx("div",{className:"bg-gray-300 rounded h-2 animate-pulse",style:{width:"75%"}})]}),j=n==="ring"&&t.jsxs("div",{className:We("relative",h[e]),children:[t.jsx("div",{className:We("absolute inset-0 rounded-full border-2 opacity-25",g[a])}),t.jsx("div",{className:We("absolute inset-0 rounded-full border-2 border-t-transparent animate-spin",g[a])})]}),S=t.jsxs("div",{className:We("flex flex-col items-center justify-center gap-3",d),children:[p,f,v,j,r&&t.jsx("p",{className:We("text-sm font-medium",a==="primary"&&"text-blue-600",a==="secondary"&&"text-gray-600",a==="white"&&"text-white",a==="dark"&&"text-gray-900"),children:r})]});return o?t.jsx("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50",children:S}):S},uy=({variant:e="info",title:n,description:a,children:r,icon:o,closable:d=!1,onClose:h,className:g="",action:p})=>{const v={info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-600",title:"text-blue-900",description:"text-blue-800",defaultIcon:t.jsx(Mz,{className:"h-5 w-5"})},success:{container:"bg-green-50 border-green-200",icon:"text-green-600",title:"text-green-900",description:"text-green-800",defaultIcon:t.jsx(H_,{className:"h-5 w-5"})},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-600",title:"text-amber-900",description:"text-amber-800",defaultIcon:t.jsx(Ef,{className:"h-5 w-5"})},error:{container:"bg-red-50 border-red-200",icon:"text-red-600",title:"text-red-900",description:"text-red-800",defaultIcon:t.jsx(vz,{className:"h-5 w-5"})}}[e];return t.jsx("div",{className:We("relative rounded-lg border px-4 py-3 transition-all duration-200","animate-in fade-in slide-in-from-top-1",v.container,g),role:"alert",children:t.jsxs("div",{className:"flex gap-3",children:[(o||v.defaultIcon)&&t.jsx("div",{className:We("flex-shrink-0 mt-0.5",v.icon),children:o||v.defaultIcon}),t.jsxs("div",{className:"flex-1",children:[n&&t.jsx("h3",{className:We("font-semibold text-sm mb-1",v.title),children:n}),a&&t.jsx("p",{className:We("text-sm",v.description),children:a}),r&&t.jsx("div",{className:We("text-sm",v.description),children:r}),p&&t.jsx("div",{className:"mt-3",children:p})]}),d&&t.jsx("button",{onClick:h,className:We("flex-shrink-0 ml-auto -mr-1 -mt-1 p-1 rounded-md transition-colors","hover:bg-black/5 focus:outline-none focus:ring-2 focus:ring-offset-2",e==="info"&&"focus:ring-blue-500",e==="success"&&"focus:ring-green-500",e==="warning"&&"focus:ring-amber-500",e==="error"&&"focus:ring-red-500"),children:t.jsx(Rf,{className:We("h-4 w-4",v.icon)})})]})})},OI=({unitId:e,unitName:n,initialYear:a=new Date().getFullYear(),initialMonth:r=new Date().getMonth()+1})=>{const[o,d]=b.useState(a),[h,g]=b.useState(r),[p,f]=b.useState([]),[v,j]=b.useState(!1),[S,T]=b.useState(!1),[C,N]=b.useState(null),[k,A]=b.useState("month"),{data:D,isLoading:O,error:F,quickBlock:R,quickAvailable:H,refetch:E}=cy(e,o,h);b.useEffect(()=>{E()},[o,h,E]);const z=b.useCallback((B,te)=>{d(B),g(te),f([])},[]),Z=b.useCallback(B=>{f(te=>te.includes(B)?te.filter(G=>G!==B):[...te,B])},[]),U=b.useCallback((B,te)=>{const G=new Date(B),J=new Date(te),q=[];for(let K=new Date(G);K<=J;K.setDate(K.getDate()+1))q.push(Qn(new Date(K),"yyyy-MM-dd"));f(q),T(!0)},[]),V=b.useCallback(()=>{p.length>0&&(R(p),f([]))},[p,R]),X=b.useCallback(()=>{p.length>0&&(H(p),f([]))},[p,H]),W=b.useCallback(B=>{const te=D?.calendar[B.dateString],G=typeof te?.status=="string"?te.status:"Available",J=p.includes(B.dateString),q={Available:"bg-green-100 text-green-800 border-green-200",Booked:"bg-red-100 text-red-800 border-red-200",Blocked:"bg-gray-200 text-gray-700 border-gray-300",Maintenance:"bg-yellow-100 text-yellow-800 border-yellow-200",Hold:"bg-blue-100 text-blue-800 border-blue-200"},K={Available:"✓",Booked:"●",Blocked:"✕",Maintenance:"🔧",Hold:"⏸"};return t.jsxs("div",{className:We("flex flex-col h-full p-1 rounded transition-all",B.isCurrentMonth&&q[G],J&&"ring-2 ring-blue-500",B.isPast&&"opacity-60"),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:We("text-sm font-medium",B.isToday&&"font-bold"),children:Qn(B.date,"d")}),t.jsx("span",{className:"text-xs",children:K[G]})]}),te?.reason&&t.jsx("div",{className:"mt-1 text-xs truncate",title:te.reason,children:te.reason}),te?.bookingId&&t.jsx("div",{className:"mt-auto",children:t.jsxs("span",{className:"text-xs bg-white/50 px-1 rounded",children:["#",te.bookingId.slice(0,6)]})})]})},[D,p]);return O?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx(Of,{size:"lg"})}):F?t.jsx(uy,{variant:"error",children:"حدث خطأ في تحميل بيانات الإتاحة"}):t.jsxs("div",{className:"space-y-4",children:[t.jsx(W_,{year:o,month:h,onMonthChange:z,onViewChange:A,currentView:k,title:`إتاحة ${n}`,actions:t.jsx(Gz,{selectedCount:p.length,onBlock:V,onAvailable:X,onUpdate:()=>j(!0),onBulkOperations:()=>T(!0)})}),D?.stats&&t.jsx(Wz,{stats:D.stats}),t.jsx(Kz,{}),k==="month"&&t.jsx($_,{year:o,month:h,data:D?.calendar,selectedDates:p,onDayClick:Z,onRangeSelect:U,onDayHover:N,renderDay:W,multiSelect:!0}),v&&p.length>0&&t.jsx(DI,{unitId:e,year:o,month:h,selectedDates:p,onClose:()=>j(!1),onSuccess:()=>{j(!1),f([])}}),S&&t.jsx(PI,{unitId:e,selectedDates:p,year:o,month:h,onClose:()=>T(!1),onSuccess:()=>{T(!1),f([])}})]})},LI=()=>{const e=[{type:"Base",label:"سعر أساسي",color:"bg-gray-100 border-gray-200"},{type:"Custom",label:"سعر مخصص",color:"bg-blue-100 border-blue-200"},{type:"Weekend",label:"نهاية الأسبوع",color:"bg-purple-100 border-purple-200"},{type:"Holiday",label:"عطلة رسمية",color:"bg-red-100 border-red-200"},{type:"Seasonal",label:"موسمي",color:"bg-green-100 border-green-200"},{type:"Special",label:"عرض خاص",color:"bg-yellow-100 border-yellow-200"}];return t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:t.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"أنواع التسعير:"}),e.map(n=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-6 h-6 rounded border ${n.color}`}),t.jsx("span",{className:"text-sm text-gray-600",children:n.label})]},n.type))]})})},zI=({stats:e,currency:n})=>{const a=o=>{let d,h;return typeof o=="object"&&o!==null&&"amount"in o?(d=o.amount,h=o.currency||n):(d=typeof o=="number"?o:0,h=n),`${new Intl.NumberFormat("ar-YE",{minimumFractionDigits:0,maximumFractionDigits:0}).format(d)} ${h}`},r=[{label:"متوسط السعر",value:a(e.averagePrice),icon:Mf,color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},{label:"أعلى سعر",value:a(e.maxPrice),icon:fu,color:"green",bgColor:"bg-green-50",textColor:"text-green-600",change:e.maxPrice>e.averagePrice?`+${Math.round((e.maxPrice-e.averagePrice)/e.averagePrice*100)}%`:null},{label:"أقل سعر",value:a(e.minPrice),icon:Z_,color:"red",bgColor:"bg-red-50",textColor:"text-red-600",change:e.minPrice<e.averagePrice?`-${Math.round((e.averagePrice-e.minPrice)/e.averagePrice*100)}%`:null},{label:"الإيرادات المحتملة",value:a(e.potentialRevenue),icon:uz,color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600",subtitle:`${e.daysWithSpecialPricing} يوم بتسعير خاص`}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((o,d)=>{const h=o.icon;return t.jsx(Ia,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:o.label}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:o.value}),o.change&&t.jsxs("p",{className:`text-sm mt-1 ${o.textColor}`,children:[o.change," من المتوسط"]}),o.subtitle&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.subtitle})]}),t.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:t.jsx(h,{className:`h-5 w-5 ${o.textColor}`})})]})},d)})})},II=({selectedCount:e,onIncrease:n,onDecrease:a,onUpdate:r,onBulkOperations:o})=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{size:"sm",variant:"outline",onClick:n,icon:t.jsx(fu,{className:"h-4 w-4"}),disabled:e===0,children:"+10%"}),t.jsx(ot,{size:"sm",variant:"outline",onClick:a,icon:t.jsx(Z_,{className:"h-4 w-4"}),disabled:e===0,children:"-10%"}),t.jsx(ot,{size:"sm",variant:"outline",onClick:r,icon:t.jsx(ly,{className:"h-4 w-4"}),disabled:e===0,children:"تحديث"}),t.jsx(ot,{size:"sm",variant:"primary",onClick:o,icon:t.jsx(q_,{className:"h-4 w-4"}),disabled:e===0,children:"عمليات متقدمة"})]}),Jo=({value:e,onValueChange:n,min:a=0,max:r=100,step:o=1,disabled:d=!1,showLabels:h=!1,showValue:g=!1,formatValue:p=j=>j.toString(),marks:f,className:v=""})=>{const[j,S]=b.useState(!1),T=(e[0]-a)/(r-a)*100;return t.jsxs("div",{className:We("relative",v),children:[g&&t.jsx("div",{className:"absolute -top-8 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded",style:{left:`${T}%`},children:p(e[0])}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"range",min:a,max:r,step:o,value:e[0],onChange:C=>n([Number(C.target.value)]),onMouseDown:()=>S(!0),onMouseUp:()=>S(!1),disabled:d,className:We("w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","[&::-webkit-slider-thumb]:appearance-none","[&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5","[&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full","[&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-all",j&&"[&::-webkit-slider-thumb]:scale-125 [&::-webkit-slider-thumb]:shadow-lg",d&&"opacity-50 cursor-not-allowed")}),t.jsx("div",{className:"absolute top-0 h-2 bg-blue-600 rounded-lg pointer-events-none",style:{width:`${T}%`}})]}),h&&t.jsxs("div",{className:"flex justify-between mt-1",children:[t.jsx("span",{className:"text-xs text-gray-500",children:a}),t.jsx("span",{className:"text-xs text-gray-500",children:r})]}),f&&t.jsx("div",{className:"relative mt-2",children:f.map(C=>{const N=(C.value-a)/(r-a)*100;return t.jsxs("div",{className:"absolute transform -translate-x-1/2",style:{left:`${N}%`},children:[t.jsx("div",{className:"w-0.5 h-2 bg-gray-300"}),C.label&&t.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:C.label})]},C.value)})})]})};class BI{basePath="/api/admin/units";async getMonthlyPricing(n,a,r){const d=(await je.get(`${this.basePath}/${n}/pricing/${a}/${r}`)).data.data;if(d&&d.calendar){const h={};for(const[g,p]of Object.entries(d.calendar)){let f;try{const j=I_(g);f=Tf(j)?j:new Date(g)}catch{f=new Date(g)}const v=Qn(f,"yyyy-MM-dd");h[v]=p}d.calendar=h}return d}async updatePricing(n){await je.post(`${this.basePath}/${n.unitId}/pricing`,n)}async bulkUpdatePricing(n){await je.post(`${this.basePath}/${n.unitId}/pricing/bulk`,n)}async copyPricing(n){await je.post(`${this.basePath}/${n.unitId}/pricing/copy`,n)}async deletePricing(n,a){await je.delete(`${this.basePath}/${n}/pricing/${a}`)}async getSeasonalPricing(n){return(await je.get(`${this.basePath}/${n}/pricing/templates`)).data}async applySeasonalPricing(n){await je.post(`${this.basePath}/${n.unitId}/pricing/apply-template`,n)}async getPricingBreakdown(n,a,r){return(await je.get(`${this.basePath}/${n}/pricing/breakdown`,{params:{checkIn:a,checkOut:r}})).data.data}}const Ll=new BI,Lf=(e,n,a)=>{const r=In(),o=["pricing",e,n,a],{data:d,isLoading:h,error:g,refetch:p}=zt({queryKey:o,queryFn:()=>Ll.getMonthlyPricing(e,n,a),enabled:!!e&&n>0&&a>0}),f=Ie({mutationFn:k=>Ll.updatePricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),r.invalidateQueries({queryKey:["pricing",e,n,a-1]}),r.invalidateQueries({queryKey:["pricing",e,n,a+1]}),xt.success("تم تحديث التسعير بنجاح")},onError:k=>{xt.error(k.response?.data?.message||"حدث خطأ في تحديث التسعير")}}),v=Ie({mutationFn:k=>Ll.bulkUpdatePricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),r.invalidateQueries({queryKey:["pricing",e,n,a-1]}),r.invalidateQueries({queryKey:["pricing",e,n,a+1]}),xt.success("تم تحديث التسعير بنجاح")},onError:k=>{xt.error(k.response?.data?.message||"حدث خطأ في تحديث التسعير")}}),j=Ie({mutationFn:k=>Ll.copyPricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:["pricing",e]}),xt.success("تم نسخ التسعير بنجاح")},onError:k=>{xt.error(k.response?.data?.message||"حدث خطأ في نسخ التسعير")}}),S=Ie({mutationFn:k=>Ll.applySeasonalPricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),xt.success("تم تطبيق التسعير الموسمي بنجاح")},onError:k=>{xt.error(k.response?.data?.message||"حدث خطأ في تطبيق التسعير الموسمي")}}),T=Ie({mutationFn:k=>Ll.deletePricing(e,k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),xt.success("تم حذف التسعير بنجاح")},onError:k=>{xt.error(k.response?.data?.message||"حدث خطأ في حذف التسعير")}}),C=b.useCallback((k,A)=>{const D=k.map(O=>({startDate:O,endDate:O,priceType:"Custom",price:0,currency:d?.currency||"YER",tier:"1",percentageChange:A,overwriteExisting:!0}));v.mutate({unitId:e,periods:D,overwriteExisting:!0})},[e,v,d]),N=b.useCallback((k,A,D)=>{f.mutate({unitId:e,startDate:k,endDate:A,priceType:"Weekend",price:0,currency:d?.currency||"YER",pricingTier:"2",percentageChange:D,overwriteExisting:!0})},[e,f,d]);return{data:d,isLoading:h,error:g,refetch:p,updatePricing:f,bulkUpdatePricing:v,copyPricing:j,applySeasonalPricing:S,deletePricing:T,applyPercentageChange:C,applyWeekendPricing:N}},$I=e=>{In();const{data:n,isLoading:a,error:r}=zt({queryKey:["seasonal-pricing",e],queryFn:()=>Ll.getSeasonalPricing(e),enabled:!!e});return{seasonalPricing:n?.seasons||[],statistics:n?.statistics,isLoading:a,error:r}},FI=({unitId:e,selectedDates:n,basePrice:a,currency:r,year:o,month:d,onClose:h,onSuccess:g})=>{const{updatePricing:p}=Lf(e,o,d),[f,v]=b.useState("fixed"),[j,S]=b.useState({unitId:e,startDate:n[0],endDate:n[n.length-1],priceType:"Custom",price:a,currency:r,pricingTier:"1",percentageChange:0,description:"",overwriteExisting:!0}),[T,C]=b.useState(!1),N=[{value:"Custom",label:"سعر مخصص"},{value:"Weekend",label:"نهاية الأسبوع"},{value:"Holiday",label:"عطلة رسمية"},{value:"Seasonal",label:"موسمي"},{value:"Special",label:"عرض خاص"}],k=[{value:"1",label:"عادي"},{value:"2",label:"مميز"},{value:"3",label:"VIP"}],A=()=>f==="percentage"&&j.percentageChange?a+a*j.percentageChange/100:j.price||a,D=async O=>{O.preventDefault(),C(!0);try{const F={...j,price:f==="percentage"?0:j.price,percentageChange:f==="percentage"?j.percentageChange:void 0};await p.mutateAsync(F),g()}catch(F){console.error("Error updating pricing:",F)}finally{C(!1)}};return t.jsx(Wh,{isOpen:!0,onClose:h,title:"تحديث التسعير",size:"md",children:t.jsxs(Af,{onSubmit:D,className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(hc,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"الفترة المحددة"})]}),t.jsx("div",{className:"text-sm text-gray-600",children:n.length===1?t.jsx("span",{children:Qn(new Date(n[0]),"dd/MM/yyyy")}):t.jsxs("span",{children:["من ",Qn(new Date(n[0]),"dd/MM/yyyy"),"إلى ",Qn(new Date(n[n.length-1]),"dd/MM/yyyy"),t.jsxs("span",{className:"mr-2 text-gray-500",children:["(",n.length," يوم)"]})]})})]}),t.jsx(La,{label:"نوع التسعير",required:!0,children:t.jsx(Ss,{value:j.priceType,onChange:O=>S({...j,priceType:O}),children:N.map(O=>t.jsx("option",{value:O.value,children:O.label},O.value))})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ot,{type:"button",variant:f==="fixed"?"primary":"outline",onClick:()=>v("fixed"),className:"flex-1",icon:t.jsx(Mf,{className:"h-4 w-4"}),children:"سعر ثابت"}),t.jsx(ot,{type:"button",variant:f==="percentage"?"primary":"outline",onClick:()=>v("percentage"),className:"flex-1",icon:t.jsx(Y_,{className:"h-4 w-4"}),children:"نسبة مئوية"})]}),f==="fixed"?t.jsxs(La,{label:"السعر",required:!0,children:[t.jsxs("div",{className:"relative",children:[t.jsx(ia,{type:"number",value:j.price,onChange:O=>S({...j,price:parseFloat(O.target.value)}),min:"0",step:"100",className:"pl-12"}),t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:r})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["السعر الأساسي: ",a," ",r]})]}):t.jsx(La,{label:"نسبة التغيير",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Jo,{value:[j.percentageChange||0],onValueChange:O=>S({...j,percentageChange:O[0]}),min:-50,max:100,step:5,className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"-50%"}),t.jsxs("span",{className:"font-medium text-lg",children:[j.percentageChange>0?"+":"",j.percentageChange,"%"]}),t.jsx("span",{className:"text-gray-500",children:"+100%"})]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["السعر الجديد: ",A().toFixed(0)," ",r]})})]})}),t.jsx(La,{label:"فئة التسعير",children:t.jsx(Ss,{value:j.pricingTier,onChange:O=>S({...j,pricingTier:O}),children:k.map(O=>t.jsx("option",{value:O.value,children:O.label},O.value))})}),t.jsx(La,{label:"وصف التسعير",children:t.jsx(Du,{value:j.description,onChange:O=>S({...j,description:O.target.value}),placeholder:"مثال: عرض خاص لنهاية الأسبوع...",rows:3})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(La,{label:"الحد الأدنى للسعر",children:t.jsx(ia,{type:"number",value:j.minPrice||"",onChange:O=>S({...j,minPrice:parseFloat(O.target.value)||void 0}),placeholder:"اختياري"})}),t.jsx(La,{label:"الحد الأقصى للسعر",children:t.jsx(ia,{type:"number",value:j.maxPrice||"",onChange:O=>S({...j,maxPrice:parseFloat(O.target.value)||void 0}),placeholder:"اختياري"})})]}),t.jsx(La,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Df,{checked:j.overwriteExisting,onChange:O=>S({...j,overwriteExisting:O})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"استبدال الأسعار الموجودة"}),t.jsx("p",{className:"text-xs text-gray-500",children:"سيتم استبدال أي تسعير موجود في هذه الفترة"})]})]})}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Ef,{className:"h-4 w-4 text-blue-600 mt-0.5"}),t.jsx("div",{className:"text-sm text-blue-800",children:t.jsx("p",{children:"سيتم تطبيق هذا التسعير على جميع الأيام المحددة"})})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[t.jsx(ot,{type:"button",variant:"outline",onClick:h,disabled:T,children:"إلغاء"}),t.jsx(ot,{type:"submit",variant:"primary",loading:T,children:"تحديث التسعير"})]})]})})},UI=({unitId:e,onClose:n,onSuccess:a})=>{const{seasonalPricing:r,statistics:o,isLoading:d}=$I(e),{applySeasonalPricing:h}=Lf(e,0,0),[g,p]=b.useState("templates"),[f,v]=b.useState([]),[j,S]=b.useState({name:"",type:"High",price:0,percentageChange:0,priority:1}),T=[{value:"Low",label:"موسم منخفض",color:"bg-blue-100 text-blue-800"},{value:"Regular",label:"موسم عادي",color:"bg-gray-100 text-gray-800"},{value:"High",label:"موسم مرتفع",color:"bg-orange-100 text-orange-800"},{value:"Peak",label:"موسم ذروة",color:"bg-red-100 text-red-800"}],C=[{id:"summer",name:"الصيف",seasons:[{name:"بداية الصيف",type:"High",startDate:"2024-06-01",endDate:"2024-06-30",percentageChange:20},{name:"ذروة الصيف",type:"Peak",startDate:"2024-07-01",endDate:"2024-08-15",percentageChange:40},{name:"نهاية الصيف",type:"High",startDate:"2024-08-16",endDate:"2024-08-31",percentageChange:15}]},{id:"winter",name:"الشتاء",seasons:[{name:"بداية الشتاء",type:"Low",startDate:"2024-12-01",endDate:"2024-12-20",percentageChange:-20},{name:"عطلة رأس السنة",type:"Peak",startDate:"2024-12-21",endDate:"2025-01-05",percentageChange:50},{name:"منتصف الشتاء",type:"Regular",startDate:"2025-01-06",endDate:"2025-02-28",percentageChange:0}]}],N=async k=>{try{await h.mutateAsync({unitId:e,seasons:k.seasons,currency:"YER"}),a()}catch(A){console.error("Error applying template:",A)}};return d?t.jsx(Wh,{isOpen:!0,onClose:n,title:"التسعير الموسمي",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Of,{size:"lg"})})}):t.jsxs(Wh,{isOpen:!0,onClose:n,title:"التسعير الموسمي",size:"lg",children:[t.jsxs(Nf,{value:g,onValueChange:p,children:[t.jsxs(_f,{className:"grid grid-cols-3 w-full",children:[t.jsx(as,{value:"templates",children:"قوالب جاهزة"}),t.jsx(as,{value:"current",children:"المواسم الحالية"}),t.jsx(as,{value:"custom",children:"إنشاء موسم"})]}),t.jsx(ss,{value:"templates",className:"space-y-4",children:t.jsx("div",{className:"grid gap-4",children:C.map(k=>t.jsxs(Ia,{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-lg",children:k.name}),t.jsx(ot,{size:"sm",variant:"primary",onClick:()=>N(k),children:"تطبيق القالب"})]}),t.jsx("div",{className:"space-y-2",children:k.seasons.map((A,D)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs ${T.find(O=>O.value===A.type)?.color}`,children:A.type}),t.jsx("span",{children:A.name})]}),t.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[t.jsxs("span",{children:[Qn(new Date(A.startDate),"dd/MM")," - ",Qn(new Date(A.endDate),"dd/MM")]}),t.jsxs("span",{className:A.percentageChange>0?"text-green-600":"text-red-600",children:[A.percentageChange>0?"+":"",A.percentageChange,"%"]})]})]},D))})]},k.id))})}),t.jsxs(ss,{value:"current",className:"space-y-4",children:[o&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"إجمالي المواسم"}),t.jsx("p",{className:"text-lg font-semibold",children:o.totalSeasons})]}),t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"مواسم نشطة"}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.activeSeasons})]}),t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"متوسط السعر"}),t.jsx("p",{className:"text-lg font-semibold",children:o.averageSeasonalPrice})]}),t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"الأيام المغطاة"}),t.jsx("p",{className:"text-lg font-semibold",children:o.totalDaysCovered})]})]}),t.jsx("div",{className:"space-y-3",children:r.map(k=>t.jsx(Ia,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`px-3 py-1 rounded ${T.find(A=>A.value===k.type)?.color}`,children:k.type}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:k.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[Qn(new Date(k.startDate),"dd/MM/yyyy")," -",Qn(new Date(k.endDate),"dd/MM/yyyy")]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-semibold",children:[k.price," ",k.currency]}),k.percentageChange&&t.jsxs("p",{className:`text-sm ${k.percentageChange>0?"text-green-600":"text-red-600"}`,children:[k.percentageChange>0?"+":"",k.percentageChange,"%"]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(ot,{variant:"ghost",size:"sm",icon:t.jsx(ly,{className:"h-4 w-4"})}),t.jsx(ot,{variant:"ghost",size:"sm",icon:t.jsx(Uz,{className:"h-4 w-4"})})]})]})]})},k.id))})]}),t.jsx(ss,{value:"custom",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الموسم"}),t.jsx(ia,{value:j.name,onChange:k=>S({...j,name:k.target.value}),placeholder:"مثال: موسم الصيف"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الموسم"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:T.map(k=>t.jsx(ot,{variant:j.type===k.value?"primary":"outline",size:"sm",onClick:()=>S({...j,type:k.value}),className:"text-xs",children:k.label},k.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فترة الموسم"}),t.jsx(dy,{startDate:j.startDate||"",endDate:j.endDate||"",onChange:(k,A)=>S({...j,startDate:k,endDate:A})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر"}),t.jsx(ia,{type:"number",value:j.price,onChange:k=>S({...j,price:parseFloat(k.target.value)}),placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة التغيير"}),t.jsx(ia,{type:"number",value:j.percentageChange,onChange:k=>S({...j,percentageChange:parseFloat(k.target.value)}),placeholder:"0"})]})]}),t.jsx(ot,{variant:"primary",className:"w-full",icon:t.jsx(Pz,{className:"h-4 w-4"}),children:"إضافة الموسم"})]})})]}),t.jsx("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t",children:t.jsx(ot,{variant:"outline",onClick:n,children:"إغلاق"})})]})},HI=({unitId:e,selectedDates:n,basePrice:a,currency:r,year:o,month:d,onClose:h,onSuccess:g})=>{const{bulkUpdatePricing:p,copyPricing:f}=Lf(e,o,d),[v,j]=b.useState("bulk-update"),[S,T]=b.useState("Custom"),[C,N]=b.useState(a),[k,A]=b.useState(0),[D,O]=b.useState("fixed"),[F,R]=b.useState(""),[H,E]=b.useState(!0),[z,Z]=b.useState({start:"",end:""}),[U,V]=b.useState({start:""}),[X,W]=b.useState(1),[B,te]=b.useState({type:"none",value:0}),[G,J]=b.useState("weekday"),[q,K]=b.useState({monday:0,tuesday:0,wednesday:0,thursday:0,friday:10,saturday:20,sunday:20}),[I,se]=b.useState(a),[ne,ae]=b.useState({demandFactor:1,seasonFactor:1,competitionFactor:1,minPrice:a*.7,maxPrice:a*1.5}),ee=async()=>{const ie=n.map(Q=>({startDate:Q,endDate:Q,priceType:S,price:D==="fixed"?C:0,currency:r,tier:"1",percentageChange:D==="percentage"?k:void 0,description:F,overwriteExisting:H}));try{await p.mutateAsync({unitId:e,periods:ie,overwriteExisting:H}),g()}catch(Q){console.error("Bulk update failed:",Q)}},le=async()=>{if(!z.start||!z.end||!U.start){xt.error("يرجى تحديد فترة المصدر والهدف");return}try{await f.mutateAsync({unitId:e,sourceStartDate:z.start,sourceEndDate:z.end,targetStartDate:U.start,repeatCount:X,adjustmentType:B.type,adjustmentValue:B.value,overwriteExisting:!0}),g()}catch(ie){console.error("Copy failed:",ie)}},me=async()=>{const ie=[];G==="weekday"&&n.forEach(Q=>{const we=new Date(Q).getDay(),nt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][we],Qe=q[nt];ie.push({startDate:Q,endDate:Q,priceType:uw(new Date(Q))?"Weekend":"Custom",price:0,currency:r,tier:"1",percentageChange:Qe,description:`تسعير ${uw(new Date(Q))?"نهاية الأسبوع":"يوم عمل"}`,overwriteExisting:!0})});try{await p.mutateAsync({unitId:e,periods:ie,overwriteExisting:!0}),g()}catch(Q){console.error("Dynamic pricing failed:",Q)}},Re=()=>{const ie=I*ne.demandFactor*ne.seasonFactor*ne.competitionFactor;return Math.min(Math.max(ie,ne.minPrice),ne.maxPrice)},Pe=async()=>{const ie=Re(),Q=n.map(we=>({startDate:we,endDate:we,priceType:"Custom",price:ie,currency:r,tier:"1",minPrice:ne.minPrice,maxPrice:ne.maxPrice,description:"تسعير محسوب بالمعادلة",overwriteExisting:!0}));try{await p.mutateAsync({unitId:e,periods:Q,overwriteExisting:!0}),g()}catch(we){console.error("Formula pricing failed:",we)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs(Ia,{className:"w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"عمليات التسعير المتقدمة"}),t.jsx(ot,{variant:"ghost",size:"sm",onClick:h,icon:t.jsx(Rf,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[t.jsxs("p",{className:"text-sm text-blue-800",children:["سيتم تطبيق التحديث على ",n.length," يوم محدد"]}),t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["السعر الأساسي الحالي: ",a," ",r]})]}),t.jsxs(Nf,{value:v,onValueChange:j,children:[t.jsxs(_f,{className:"grid grid-cols-4 w-full",children:[t.jsx(as,{value:"bulk-update",children:"تحديث جماعي"}),t.jsx(as,{value:"copy",children:"نسخ"}),t.jsx(as,{value:"dynamic",children:"ديناميكي"}),t.jsx(as,{value:"formula",children:"معادلة"})]}),t.jsx(ss,{value:"bulk-update",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع التسعير"}),t.jsxs(Ss,{value:S,onChange:T,children:[t.jsx("option",{value:"Custom",children:"مخصص"}),t.jsx("option",{value:"Weekend",children:"نهاية الأسبوع"}),t.jsx("option",{value:"Holiday",children:"عطلة رسمية"}),t.jsx("option",{value:"Seasonal",children:"موسمي"}),t.jsx("option",{value:"Special",children:"عرض خاص"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ot,{type:"button",variant:D==="fixed"?"primary":"outline",onClick:()=>O("fixed"),className:"flex-1",icon:t.jsx(Mf,{className:"h-4 w-4"}),children:"سعر ثابت"}),t.jsx(ot,{type:"button",variant:D==="percentage"?"primary":"outline",onClick:()=>O("percentage"),className:"flex-1",icon:t.jsx(Y_,{className:"h-4 w-4"}),children:"نسبة مئوية"})]}),D==="fixed"?t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر"}),t.jsxs("div",{className:"relative",children:[t.jsx(ia,{type:"number",value:C,onChange:ie=>N(parseFloat(ie.target.value)),min:"0",step:"100",className:"pl-12"}),t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:r})]})]}):t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة التغيير: ",k>0?"+":"",k,"%"]}),t.jsx(Jo,{value:[k],onValueChange:ie=>A(ie[0]),min:-50,max:100,step:5,className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[t.jsx("span",{children:"-50%"}),t.jsx("span",{children:"0%"}),t.jsx("span",{children:"+100%"})]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mt-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["السعر الجديد: ",(a+a*k/100).toFixed(0)," ",r]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف التحديث"}),t.jsx(Du,{value:F,onChange:ie=>R(ie.target.value),placeholder:"أضف وصف للتسعير...",rows:2})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Df,{checked:H,onChange:E}),t.jsx("label",{className:"text-sm text-gray-700",children:"استبدال الأسعار الموجودة"})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:ee,loading:p.isPending,children:"تطبيق التحديث"})]})}),t.jsx(ss,{value:"copy",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفترة المصدر"}),t.jsx(dy,{startDate:z.start,endDate:z.end,onChange:(ie,Q)=>Z({start:ie,end:Q})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية للنسخ"}),t.jsx(ia,{type:"date",value:U.start,onChange:ie=>V({start:ie.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد مرات التكرار"}),t.jsx(ia,{type:"number",min:"1",max:"12",value:X,onChange:ie=>W(parseInt(ie.target.value))}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["سيتم نسخ الفترة ",X," مرة متتالية"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تعديل الأسعار المنسوخة"}),t.jsxs(Ss,{value:B.type,onChange:ie=>te({...B,type:ie}),children:[t.jsx("option",{value:"none",children:"بدون تعديل"}),t.jsx("option",{value:"percentage",children:"نسبة مئوية"}),t.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]}),B.type!=="none"&&t.jsx("div",{className:"mt-2",children:t.jsx(ia,{type:"number",value:B.value,onChange:ie=>te({...B,value:parseFloat(ie.target.value)}),placeholder:B.type==="percentage"?"النسبة المئوية":"المبلغ"})})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:le,loading:f.isPending,icon:t.jsx(iy,{className:"h-4 w-4"}),children:"نسخ التسعير"})]})}),t.jsx(ss,{value:"dynamic",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"استراتيجية التسعير"}),t.jsxs(Ss,{value:G,onChange:ie=>J(ie),children:[t.jsx("option",{value:"weekday",children:"حسب أيام الأسبوع"}),t.jsx("option",{value:"occupancy",children:"حسب معدل الإشغال"}),t.jsx("option",{value:"season",children:"حسب الموسم"})]})]}),G==="weekday"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"نسبة التغيير لكل يوم"}),t.jsx("div",{className:"space-y-2",children:Object.entries(q).map(([ie,Q])=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"w-24 text-sm capitalize",children:[ie==="monday"&&"الإثنين",ie==="tuesday"&&"الثلاثاء",ie==="wednesday"&&"الأربعاء",ie==="thursday"&&"الخميس",ie==="friday"&&"الجمعة",ie==="saturday"&&"السبت",ie==="sunday"&&"الأحد"]}),t.jsx("div",{className:"flex-1",children:t.jsx(Jo,{value:[Q],onValueChange:we=>K({...q,[ie]:we[0]}),min:-30,max:50,step:5})}),t.jsxs("span",{className:`text-sm w-12 text-left ${Q>0?"text-green-600":Q<0?"text-red-600":""}`,children:[Q>0?"+":"",Q,"%"]})]},ie))})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:me,icon:t.jsx(fu,{className:"h-4 w-4"}),children:"تطبيق التسعير الديناميكي"})]})}),t.jsx(ss,{value:"formula",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"المعادلة:"}),t.jsx("code",{className:"text-xs bg-white p-2 rounded block",children:"السعر = السعر الأساسي × معامل الطلب × معامل الموسم × معامل المنافسة"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي"}),t.jsx(ia,{type:"number",value:I,onChange:ie=>se(parseFloat(ie.target.value)),min:"0"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["معامل الطلب: ",ne.demandFactor.toFixed(1)]}),t.jsx(Jo,{value:[ne.demandFactor],onValueChange:ie=>ae({...ne,demandFactor:ie[0]}),min:.5,max:2,step:.1})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["معامل الموسم: ",ne.seasonFactor.toFixed(1)]}),t.jsx(Jo,{value:[ne.seasonFactor],onValueChange:ie=>ae({...ne,seasonFactor:ie[0]}),min:.5,max:2,step:.1})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["معامل المنافسة: ",ne.competitionFactor.toFixed(1)]}),t.jsx(Jo,{value:[ne.competitionFactor],onValueChange:ie=>ae({...ne,competitionFactor:ie[0]}),min:.5,max:2,step:.1})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى"}),t.jsx(ia,{type:"number",value:ne.minPrice,onChange:ie=>ae({...ne,minPrice:parseFloat(ie.target.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى"}),t.jsx(ia,{type:"number",value:ne.maxPrice,onChange:ie=>ae({...ne,maxPrice:parseFloat(ie.target.value)})})]})]}),t.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:t.jsxs("p",{className:"text-sm font-medium text-green-800",children:["السعر المحسوب: ",Re().toFixed(0)," ",r]})}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:Pe,children:"تطبيق المعادلة"})]})})]})]}),t.jsx("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:t.jsx(ot,{variant:"outline",onClick:h,children:"إلغاء"})})]})})},qI=({unitId:e,unitName:n,initialYear:a=new Date().getFullYear(),initialMonth:r=new Date().getMonth()+1})=>{const[o,d]=b.useState(a),[h,g]=b.useState(r),[p,f]=b.useState([]),[v,j]=b.useState(!1),[S,T]=b.useState(!1),[C,N]=b.useState(!1),[k,A]=b.useState("month"),{data:D,isLoading:O,error:F,applyPercentageChange:R,refetch:H}=Lf(e,o,h);b.useEffect(()=>{H()},[o,h,H]);const E=b.useCallback((W,B)=>{d(W),g(B),f([])},[]),z=b.useCallback(W=>{f(B=>B.includes(W)?B.filter(te=>te!==W):[...B,W])},[]),Z=b.useCallback((W,B)=>{const te=new Date(W),G=new Date(B),J=[];for(let q=new Date(te);q<=G;q.setDate(q.getDate()+1))J.push(Qn(new Date(q),"yyyy-MM-dd"));f(J),N(!0)},[]),U=b.useCallback(()=>{p.length>0&&(R(p,10),f([]))},[p,R]),V=b.useCallback(()=>{p.length>0&&(R(p,-10),f([]))},[p,R]),X=b.useCallback(W=>{const B=D?.calendar[W.dateString],te=ae=>typeof ae=="object"&&ae!==null&&"amount"in ae?ae.amount:typeof ae=="number"?ae:0,G=te(B?.price)||te(D?.basePrice)||0,J=B?.priceType||"Base",q=B?.percentageChange,K=D?.currency||"YER",I=p.includes(W.dateString),se={Base:"bg-gray-100",Custom:"bg-blue-100",Weekend:"bg-purple-100",Holiday:"bg-red-100",Seasonal:"bg-green-100",Special:"bg-yellow-100"},ne=ae=>{let ee=ae,le;return ee>=1e6?le=`${(ee/1e6).toFixed(1)}M`:ee>=1e3?le=`${(ee/1e3).toFixed(0)}K`:le=ee.toString(),`${le} ${K}`};return t.jsxs("div",{className:We("flex flex-col h-full p-1 rounded transition-all",W.isCurrentMonth&&se[J],I&&"ring-2 ring-blue-500",W.isPast&&"opacity-60"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:We("text-xs font-medium",W.isToday&&"text-blue-600"),children:Qn(W.date,"d")}),q!=null&&t.jsxs("span",{className:We("text-xs font-medium",q>0?"text-green-600":"text-red-600"),children:[q>0?"+":"",Math.round(Number(q)),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-1 mt-auto",children:[t.jsx(sz,{className:"h-3 w-3 text-gray-500"}),t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:ne(G)})]}),J!=="Base"&&t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:"text-xs text-gray-600",children:J})})]})},[D,p]);return O?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx(Of,{size:"lg"})}):F?t.jsx(uy,{variant:"error",children:"حدث خطأ في تحميل بيانات التسعير"}):t.jsxs("div",{className:"space-y-4",children:[t.jsx(W_,{year:o,month:h,onMonthChange:E,onViewChange:A,currentView:k,title:`تسعير ${n}`,onSettings:()=>T(!0),actions:t.jsx(II,{selectedCount:p.length,onIncrease:U,onDecrease:V,onUpdate:()=>j(!0),onBulkOperations:()=>N(!0)})}),D?.stats&&t.jsx(zI,{stats:D.stats,currency:D.currency}),t.jsx(LI,{}),k==="month"&&t.jsx($_,{year:o,month:h,data:D?.calendar,selectedDates:p,onDayClick:z,onRangeSelect:Z,renderDay:X,multiSelect:!0}),v&&p.length>0&&t.jsx(FI,{unitId:e,selectedDates:p,basePrice:D?.basePrice||0,currency:D?.currency||"YER",year:o,month:h,onClose:()=>j(!1),onSuccess:()=>{j(!1),f([])}}),S&&t.jsx(UI,{unitId:e,onClose:()=>T(!1),onSuccess:()=>T(!1)}),C&&t.jsx(HI,{unitId:e,selectedDates:p,basePrice:D?.basePrice||0,currency:D?.currency||"YER",year:o,month:h,onClose:()=>N(!1),onSuccess:()=>{N(!1),f([])}})]})},YI=({children:e,separator:n,className:a=""})=>{const r=Ke.Children.toArray(e);return t.jsx("nav",{"aria-label":"Breadcrumb",className:We("py-2",a),children:t.jsx("ol",{className:"flex items-center flex-wrap gap-2 text-sm",children:r.map((o,d)=>t.jsxs(Ke.Fragment,{children:[o,d<r.length-1&&t.jsx("span",{className:"text-gray-400 mx-1",children:n||t.jsx(U_,{className:"h-4 w-4"})})]},d))})})},VI=({href:e,active:n,icon:a,children:r,onClick:o,className:d=""})=>{const h=t.jsxs(t.Fragment,{children:[a&&t.jsx("span",{className:"flex-shrink-0",children:a}),t.jsx("span",{children:r})]}),g=We("flex items-center gap-1.5 transition-colors duration-200","hover:text-blue-600 focus:outline-none focus:text-blue-600",n&&"text-gray-900 font-semibold pointer-events-none",!n&&"text-gray-600",d);return t.jsx("li",{className:"flex items-center",children:e&&!n?t.jsx("a",{href:e,onClick:o,className:g,children:h}):t.jsx("span",{className:g,children:h})})},ph=Object.assign(YI,{Item:VI}),ZI=()=>{const{unitId:e}=Qh(),n=is(),[a,r]=b.useState("availability"),{data:o,isLoading:d,error:h}=zt({queryKey:["unit-details",e],queryFn:async()=>(await je.get(`/api/admin/units/${e}`)).data.data,enabled:!!e});return d?t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsx(Of,{size:"lg"})}):h||!o?t.jsx("div",{className:"p-6",children:t.jsx(uy,{variant:"error",children:"حدث خطأ في تحميل بيانات الوحدة"})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:t.jsxs(ph,{children:[t.jsx(ph.Item,{href:"/admin",icon:t.jsx(Tz,{className:"h-4 w-4"}),children:"لوحة التحكم"}),t.jsx(ph.Item,{href:"/admin/units",icon:t.jsx(iz,{className:"h-4 w-4"}),children:"الوحدات"}),t.jsxs(ph.Item,{active:!0,children:["إدارة ",o.name]})]})})}),t.jsxs("div",{className:"container mx-auto px-4 py-6",children:[t.jsx(Ia,{className:"mb-6",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:o.name}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsx("span",{className:"bg-gray-100 px-3 py-1 rounded-full",children:o.type}),t.jsxs("span",{children:["السعة: ",o.maxAdults," بالغ، ",o.maxChildren," طفل"]}),t.jsxs("span",{children:["السعر الأساسي: ",typeof o.basePrice=="object"&&o.basePrice!==null&&"amount"in o.basePrice?`${o.basePrice.amount} ${o.basePrice.currency}`:`${o.basePrice} ${o.currency}`]})]})]}),t.jsx(ot,{variant:"outline",size:"sm",onClick:()=>n(`/units/${e}/settings`),icon:t.jsx(V_,{className:"h-4 w-4"}),children:"الإعدادات"})]})})}),t.jsx(Ia,{children:t.jsxs(Nf,{value:a,onValueChange:r,children:[t.jsx("div",{className:"border-b",children:t.jsxs(_f,{className:"w-full justify-start p-0",children:[t.jsxs(as,{value:"availability",className:"flex items-center gap-2 px-6 py-4",children:[t.jsx(oz,{className:"h-4 w-4"}),"إدارة الإتاحة"]}),t.jsxs(as,{value:"pricing",className:"flex items-center gap-2 px-6 py-4",children:[t.jsx(Mf,{className:"h-4 w-4"}),"إدارة التسعير"]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsx(ss,{value:"availability",className:"mt-0",children:t.jsx(OI,{unitId:e,unitName:o.name})}),t.jsx(ss,{value:"pricing",className:"mt-0",children:t.jsx(qI,{unitId:e,unitName:o.name})})]})]})})]})]})};function KI(e){return Object.keys(e).length===0}function my(e=null){const n=b.useContext(wc);return!n||KI(n)?e:n}const WI=D0();function hy(e=WI){return my(e)}function mx(e){const n=m2(e);return e!==n&&n.styles?(n.styles.match(/^@layer\s+[^{]*$/)||(n.styles=`@layer global{${n.styles}}`),n):e}function GI({styles:e,themeId:n,defaultTheme:a={}}){const r=hy(a),o=n&&r[n]||r;let d=typeof e=="function"?e(o):e;return o.modularCssLayers&&(Array.isArray(d)?d=d.map(h=>mx(typeof h=="function"?h(o):h)):d=mx(d)),t.jsx(d2,{styles:d})}const QI=["className","component"];function XI(e={}){const{themeId:n,defaultTheme:a,defaultClassName:r="MuiBox-root",generateClassName:o}=e,d=u2("div",{shouldForwardProp:g=>g!=="theme"&&g!=="sx"&&g!=="as"})(ku);return b.forwardRef(function(p,f){const v=hy(a),j=P0(p),{className:S,component:T="div"}=j,C=jn(j,QI);return t.jsx(d,ze({as:T,ref:f,className:Pn(S,o?o(r):r),theme:n&&v[n]||v},C))})}function JI(e){const{theme:n,name:a,props:r}=e;return!n||!n.components||!n.components[a]||!n.components[a].defaultProps?r:nu(n.components[a].defaultProps,r)}function e7({props:e,name:n,defaultTheme:a,themeId:r}){let o=hy(a);return o=o[r]||o,JI({theme:o,name:n,props:e})}const eS=b.createContext(null);function tS(){return b.useContext(eS)}const t7=typeof Symbol=="function"&&Symbol.for,n7=t7?Symbol.for("mui.nested"):"__THEME_NESTED__";function a7(e,n){return typeof n=="function"?n(e):ze({},e,n)}function s7(e){const{children:n,theme:a}=e,r=tS(),o=b.useMemo(()=>{const d=r===null?a:a7(r,a);return d!=null&&(d[n7]=r!==null),d},[a,r]);return t.jsx(eS.Provider,{value:o,children:n})}const r7=["value"],nS=b.createContext();function i7(e){let{value:n}=e,a=jn(e,r7);return t.jsx(nS.Provider,ze({value:n??!0},a))}const l7=()=>{const e=b.useContext(nS);return e??!1};function o7(e){const n=my(),a=M3()||"",{modularCssLayers:r}=e;let o="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||n!==null?o="":typeof r=="string"?o=r.replace(/mui(?!\.)/g,o):o=`@layer ${o};`,qN(()=>{const d=document.querySelector("head");if(!d)return;const h=d.firstChild;if(o){var g;if(h&&(g=h.hasAttribute)!=null&&g.call(h,"data-mui-layer-order")&&h.getAttribute("data-mui-layer-order")===a)return;const f=document.createElement("style");f.setAttribute("data-mui-layer-order",a),f.textContent=o,d.prepend(f)}else{var p;(p=d.querySelector(`style[data-mui-layer-order="${a}"]`))==null||p.remove()}},[o,a]),o?t.jsx(GI,{styles:o}):null}const vw={};function jw(e,n,a,r=!1){return b.useMemo(()=>{const o=e&&n[e]||n;if(typeof a=="function"){const d=a(o),h=e?ze({},n,{[e]:d}):d;return r?()=>h:h}return e?ze({},n,{[e]:a}):ze({},n,a)},[e,n,a,r])}function c7(e){const{children:n,theme:a,themeId:r}=e,o=my(vw),d=tS()||vw,h=jw(r,o,a),g=jw(r,d,a,!0),p=h.direction==="rtl",f=o7(h);return t.jsx(s7,{theme:g,children:t.jsx(wc.Provider,{value:h,children:t.jsx(i7,{value:p,children:t.jsxs(Z3,{value:h?.components,children:[f,n]})})})})}function d7({props:e,name:n}){return e7({props:e,name:n,defaultTheme:y2,themeId:lu})}const u7=["theme"];function m7(e){let{theme:n}=e,a=jn(e,u7);const r=n[lu];let o=r||n;return typeof n!="function"&&(r&&!r.vars?o=ze({},r,{vars:null}):n&&!n.vars&&(o=ze({},n,{vars:null}))),t.jsx(c7,ze({},a,{themeId:r?lu:void 0,theme:o}))}function n0(e,n){return n0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},n0(e,n)}function h7(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,n0(e,n)}const ww=Ke.createContext(null);function f7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fy(e,n){var a=function(d){return n&&b.isValidElement(d)?n(d):d},r=Object.create(null);return e&&b.Children.map(e,function(o){return o}).forEach(function(o){r[o.key]=a(o)}),r}function p7(e,n){e=e||{},n=n||{};function a(v){return v in n?n[v]:e[v]}var r=Object.create(null),o=[];for(var d in e)d in n?o.length&&(r[d]=o,o=[]):o.push(d);var h,g={};for(var p in n){if(r[p])for(h=0;h<r[p].length;h++){var f=r[p][h];g[r[p][h]]=a(f)}g[p]=a(p)}for(h=0;h<o.length;h++)g[o[h]]=a(o[h]);return g}function Bl(e,n,a){return a[n]!=null?a[n]:e.props[n]}function g7(e,n){return fy(e.children,function(a){return b.cloneElement(a,{onExited:n.bind(null,a),in:!0,appear:Bl(a,"appear",e),enter:Bl(a,"enter",e),exit:Bl(a,"exit",e)})})}function x7(e,n,a){var r=fy(e.children),o=p7(n,r);return Object.keys(o).forEach(function(d){var h=o[d];if(b.isValidElement(h)){var g=d in n,p=d in r,f=n[d],v=b.isValidElement(f)&&!f.props.in;p&&(!g||v)?o[d]=b.cloneElement(h,{onExited:a.bind(null,h),in:!0,exit:Bl(h,"exit",e),enter:Bl(h,"enter",e)}):!p&&g&&!v?o[d]=b.cloneElement(h,{in:!1}):p&&g&&b.isValidElement(f)&&(o[d]=b.cloneElement(h,{onExited:a.bind(null,h),in:f.props.in,exit:Bl(h,"exit",e),enter:Bl(h,"enter",e)}))}}),o}var y7=Object.values||function(e){return Object.keys(e).map(function(n){return e[n]})},b7={component:"div",childFactory:function(n){return n}},py=function(e){h7(n,e);function n(r,o){var d;d=e.call(this,r,o)||this;var h=d.handleExited.bind(f7(d));return d.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},d}var a=n.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(o,d){var h=d.children,g=d.handleExited,p=d.firstRender;return{children:p?g7(o,g):x7(o,h,g),firstRender:!1}},a.handleExited=function(o,d){var h=fy(this.props.children);o.key in h||(o.props.onExited&&o.props.onExited(d),this.mounted&&this.setState(function(g){var p=ze({},g.children);return delete p[o.key],{children:p}}))},a.render=function(){var o=this.props,d=o.component,h=o.childFactory,g=jn(o,["component","childFactory"]),p=this.state.contextValue,f=y7(this.state.children).map(h);return delete g.appear,delete g.enter,delete g.exit,d===null?Ke.createElement(ww.Provider,{value:p},f):Ke.createElement(ww.Provider,{value:p},Ke.createElement(d,g,f))},n}(Ke.Component);py.propTypes={};py.defaultProps=b7;function v7(e){const{className:n,classes:a,pulsate:r=!1,rippleX:o,rippleY:d,rippleSize:h,in:g,onExited:p,timeout:f}=e,[v,j]=b.useState(!1),S=Pn(n,a.ripple,a.rippleVisible,r&&a.ripplePulsate),T={width:h,height:h,top:-(h/2)+d,left:-(h/2)+o},C=Pn(a.child,v&&a.childLeaving,r&&a.childPulsate);return!g&&!v&&j(!0),b.useEffect(()=>{if(!g&&p!=null){const N=setTimeout(p,f);return()=>{clearTimeout(N)}}},[p,g,f]),t.jsx("span",{className:S,style:T,children:t.jsx("span",{className:C})})}const Ns=Ys("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),j7=["center","classes","className"];let zf=e=>e,Nw,_w,Sw,Cw;const a0=550,w7=80,N7=Nc(Nw||(Nw=zf`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),_7=Nc(_w||(_w=zf`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),S7=Nc(Sw||(Sw=zf`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),C7=Xn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),k7=Xn(v7,{name:"MuiTouchRipple",slot:"Ripple"})(Cw||(Cw=zf`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Ns.rippleVisible,N7,a0,({theme:e})=>e.transitions.easing.easeInOut,Ns.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Ns.child,Ns.childLeaving,_7,a0,({theme:e})=>e.transitions.easing.easeInOut,Ns.childPulsate,S7,({theme:e})=>e.transitions.easing.easeInOut),T7=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiTouchRipple"}),{center:o=!1,classes:d={},className:h}=r,g=jn(r,j7),[p,f]=b.useState([]),v=b.useRef(0),j=b.useRef(null);b.useEffect(()=>{j.current&&(j.current(),j.current=null)},[p]);const S=b.useRef(!1),T=P3(),C=b.useRef(null),N=b.useRef(null),k=b.useCallback(F=>{const{pulsate:R,rippleX:H,rippleY:E,rippleSize:z,cb:Z}=F;f(U=>[...U,t.jsx(k7,{classes:{ripple:Pn(d.ripple,Ns.ripple),rippleVisible:Pn(d.rippleVisible,Ns.rippleVisible),ripplePulsate:Pn(d.ripplePulsate,Ns.ripplePulsate),child:Pn(d.child,Ns.child),childLeaving:Pn(d.childLeaving,Ns.childLeaving),childPulsate:Pn(d.childPulsate,Ns.childPulsate)},timeout:a0,pulsate:R,rippleX:H,rippleY:E,rippleSize:z},v.current)]),v.current+=1,j.current=Z},[d]),A=b.useCallback((F={},R={},H=()=>{})=>{const{pulsate:E=!1,center:z=o||R.pulsate,fakeElement:Z=!1}=R;if(F?.type==="mousedown"&&S.current){S.current=!1;return}F?.type==="touchstart"&&(S.current=!0);const U=Z?null:N.current,V=U?U.getBoundingClientRect():{width:0,height:0,left:0,top:0};let X,W,B;if(z||F===void 0||F.clientX===0&&F.clientY===0||!F.clientX&&!F.touches)X=Math.round(V.width/2),W=Math.round(V.height/2);else{const{clientX:te,clientY:G}=F.touches&&F.touches.length>0?F.touches[0]:F;X=Math.round(te-V.left),W=Math.round(G-V.top)}if(z)B=Math.sqrt((2*V.width**2+V.height**2)/3),B%2===0&&(B+=1);else{const te=Math.max(Math.abs((U?U.clientWidth:0)-X),X)*2+2,G=Math.max(Math.abs((U?U.clientHeight:0)-W),W)*2+2;B=Math.sqrt(te**2+G**2)}F!=null&&F.touches?C.current===null&&(C.current=()=>{k({pulsate:E,rippleX:X,rippleY:W,rippleSize:B,cb:H})},T.start(w7,()=>{C.current&&(C.current(),C.current=null)})):k({pulsate:E,rippleX:X,rippleY:W,rippleSize:B,cb:H})},[o,k,T]),D=b.useCallback(()=>{A({},{pulsate:!0})},[A]),O=b.useCallback((F,R)=>{if(T.clear(),F?.type==="touchend"&&C.current){C.current(),C.current=null,T.start(0,()=>{O(F,R)});return}C.current=null,f(H=>H.length>0?H.slice(1):H),j.current=R},[T]);return b.useImperativeHandle(a,()=>({pulsate:D,start:A,stop:O}),[D,A,O]),t.jsx(C7,ze({className:Pn(Ns.root,d.root,h),ref:N},g,{children:t.jsx(py,{component:null,exit:!0,children:p})}))});function E7(e){return xr("MuiButtonBase",e)}const M7=Ys("MuiButtonBase",["root","disabled","focusVisible"]),R7=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],A7=e=>{const{disabled:n,focusVisible:a,focusVisibleClassName:r,classes:o}=e,h=Jr({root:["root",n&&"disabled",a&&"focusVisible"]},E7,o);return a&&r&&(h.root+=` ${r}`),h},D7=Xn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,n)=>n.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${M7.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),gy=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiButtonBase"}),{action:o,centerRipple:d=!1,children:h,className:g,component:p="button",disabled:f=!1,disableRipple:v=!1,disableTouchRipple:j=!1,focusRipple:S=!1,LinkComponent:T="a",onBlur:C,onClick:N,onContextMenu:k,onDragLeave:A,onFocus:D,onFocusVisible:O,onKeyDown:F,onKeyUp:R,onMouseDown:H,onMouseLeave:E,onMouseUp:z,onTouchEnd:Z,onTouchMove:U,onTouchStart:V,tabIndex:X=0,TouchRippleProps:W,touchRippleRef:B,type:te}=r,G=jn(r,R7),J=b.useRef(null),q=b.useRef(null),K=Q1(q,B),{isFocusVisibleRef:I,onFocus:se,onBlur:ne,ref:ae}=U3(),[ee,le]=b.useState(!1);f&&ee&&le(!1),b.useImperativeHandle(o,()=>({focusVisible:()=>{le(!0),J.current.focus()}}),[]);const[me,Re]=b.useState(!1);b.useEffect(()=>{Re(!0)},[]);const Pe=me&&!v&&!f;b.useEffect(()=>{ee&&S&&!v&&me&&q.current.pulsate()},[v,S,ee,me]);function ie(Le,kt,sn=j){return nh($n=>(kt&&kt($n),!sn&&q.current&&q.current[Le]($n),!0))}const Q=ie("start",H),we=ie("stop",k),Be=ie("stop",A),nt=ie("stop",z),Qe=ie("stop",Le=>{ee&&Le.preventDefault(),E&&E(Le)}),it=ie("start",V),Ce=ie("stop",Z),Fe=ie("stop",U),Nt=ie("stop",Le=>{ne(Le),I.current===!1&&le(!1),C&&C(Le)},!1),_t=nh(Le=>{J.current||(J.current=Le.currentTarget),se(Le),I.current===!0&&(le(!0),O&&O(Le)),D&&D(Le)}),ut=()=>{const Le=J.current;return p&&p!=="button"&&!(Le.tagName==="A"&&Le.href)},ke=b.useRef(!1),Oe=nh(Le=>{S&&!ke.current&&ee&&q.current&&Le.key===" "&&(ke.current=!0,q.current.stop(Le,()=>{q.current.start(Le)})),Le.target===Le.currentTarget&&ut()&&Le.key===" "&&Le.preventDefault(),F&&F(Le),Le.target===Le.currentTarget&&ut()&&Le.key==="Enter"&&!f&&(Le.preventDefault(),N&&N(Le))}),qe=nh(Le=>{S&&Le.key===" "&&q.current&&ee&&!Le.defaultPrevented&&(ke.current=!1,q.current.stop(Le,()=>{q.current.pulsate(Le)})),R&&R(Le),N&&Le.target===Le.currentTarget&&ut()&&Le.key===" "&&!Le.defaultPrevented&&N(Le)});let Ae=p;Ae==="button"&&(G.href||G.to)&&(Ae=T);const He={};Ae==="button"?(He.type=te===void 0?"button":te,He.disabled=f):(!G.href&&!G.to&&(He.role="button"),f&&(He["aria-disabled"]=f));const ct=Q1(a,ae,J),de=ze({},r,{centerRipple:d,component:p,disabled:f,disableRipple:v,disableTouchRipple:j,focusRipple:S,tabIndex:X,focusVisible:ee}),De=A7(de);return t.jsxs(D7,ze({as:Ae,className:Pn(De.root,g),ownerState:de,onBlur:Nt,onClick:N,onContextMenu:we,onFocus:_t,onKeyDown:Oe,onKeyUp:qe,onMouseDown:Q,onMouseLeave:Qe,onMouseUp:nt,onDragLeave:Be,onTouchEnd:Ce,onTouchMove:Fe,onTouchStart:it,ref:ct,tabIndex:f?-1:X,type:te},He,G,{children:[h,Pe?t.jsx(T7,ze({ref:K,center:d},W)):null]}))});function P7(e){return xr("MuiTypography",e)}Ys("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const O7=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],L7=e=>{const{align:n,gutterBottom:a,noWrap:r,paragraph:o,variant:d,classes:h}=e,g={root:["root",d,e.align!=="inherit"&&`align${Ct(n)}`,a&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return Jr(g,P7,h)},z7=Xn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.variant&&n[a.variant],a.align!=="inherit"&&n[`align${Ct(a.align)}`],a.noWrap&&n.noWrap,a.gutterBottom&&n.gutterBottom,a.paragraph&&n.paragraph]}})(({theme:e,ownerState:n})=>ze({margin:0},n.variant==="inherit"&&{font:"inherit"},n.variant!=="inherit"&&e.typography[n.variant],n.align!=="inherit"&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})),kw={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},I7={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},B7=e=>I7[e]||e,Dn=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiTypography"}),o=B7(r.color),d=P0(ze({},r,{color:o})),{align:h="inherit",className:g,component:p,gutterBottom:f=!1,noWrap:v=!1,paragraph:j=!1,variant:S="body1",variantMapping:T=kw}=d,C=jn(d,O7),N=ze({},d,{align:h,color:o,className:g,component:p,gutterBottom:f,noWrap:v,paragraph:j,variant:S,variantMapping:T}),k=p||(j?"p":T[S]||kw[S])||"span",A=L7(N);return t.jsx(z7,ze({as:k,ref:a,ownerState:N,className:Pn(A.root,g)},C))}),$7=b.createContext(void 0);function F7(){return b.useContext($7)}const U7=Ys("MuiBox",["root"]),H7=O0(),ln=XI({themeId:lu,defaultTheme:H7,defaultClassName:U7.root,generateClassName:VN.generate});function q7(e){return xr("MuiButton",e)}const gh=Ys("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Y7=b.createContext({}),V7=b.createContext(void 0),Z7=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],K7=e=>{const{color:n,disableElevation:a,fullWidth:r,size:o,variant:d,classes:h}=e,g={root:["root",d,`${d}${Ct(n)}`,`size${Ct(o)}`,`${d}Size${Ct(o)}`,`color${Ct(n)}`,a&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Ct(o)}`],endIcon:["icon","endIcon",`iconSize${Ct(o)}`]},p=Jr(g,q7,h);return ze({},h,p)},aS=e=>ze({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),W7=Xn(gy,{shouldForwardProp:e=>yf(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`${a.variant}${Ct(a.color)}`],n[`size${Ct(a.size)}`],n[`${a.variant}Size${Ct(a.size)}`],a.color==="inherit"&&n.colorInherit,a.disableElevation&&n.disableElevation,a.fullWidth&&n.fullWidth]}})(({theme:e,ownerState:n})=>{var a,r;const o=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return ze({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":ze({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},n.variant==="text"&&n.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},n.variant==="outlined"&&n.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[n.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},n.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},n.variant==="contained"&&n.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}}),"&:active":ze({},n.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${gh.focusVisible}`]:ze({},n.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${gh.disabled}`]:ze({color:(e.vars||e).palette.action.disabled},n.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},n.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},n.variant==="text"&&{padding:"6px 8px"},n.variant==="text"&&n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main},n.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},n.variant==="outlined"&&n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${za.alpha(e.palette[n.color].main,.5)}`},n.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(a=(r=e.palette).getContrastText)==null?void 0:a.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:o,boxShadow:(e.vars||e).shadows[2]},n.variant==="contained"&&n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main},n.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},n.size==="small"&&n.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},n.size==="large"&&n.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},n.size==="small"&&n.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},n.size==="large"&&n.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},n.size==="small"&&n.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},n.size==="large"&&n.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${gh.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${gh.disabled}`]:{boxShadow:"none"}}),G7=Xn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.startIcon,n[`iconSize${Ct(a.size)}`]]}})(({ownerState:e})=>ze({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},aS(e))),Q7=Xn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.endIcon,n[`iconSize${Ct(a.size)}`]]}})(({ownerState:e})=>ze({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},aS(e))),xh=b.forwardRef(function(n,a){const r=b.useContext(Y7),o=b.useContext(V7),d=nu(r,n),h=ei({props:d,name:"MuiButton"}),{children:g,color:p="primary",component:f="button",className:v,disabled:j=!1,disableElevation:S=!1,disableFocusRipple:T=!1,endIcon:C,focusVisibleClassName:N,fullWidth:k=!1,size:A="medium",startIcon:D,type:O,variant:F="text"}=h,R=jn(h,Z7),H=ze({},h,{color:p,component:f,disabled:j,disableElevation:S,disableFocusRipple:T,fullWidth:k,size:A,type:O,variant:F}),E=K7(H),z=D&&t.jsx(G7,{className:E.startIcon,ownerState:H,children:D}),Z=C&&t.jsx(Q7,{className:E.endIcon,ownerState:H,children:C}),U=o||"";return t.jsxs(W7,ze({ownerState:H,className:Pn(r.className,E.root,v,U),component:f,disabled:j,focusRipple:!T,focusVisibleClassName:Pn(E.focusVisible,N),ref:a,type:O},R,{classes:E,children:[z,g,Z]}))});function X7(e){return xr("PrivateSwitchBase",e)}Ys("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const J7=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],e8=e=>{const{classes:n,checked:a,disabled:r,edge:o}=e,d={root:["root",a&&"checked",r&&"disabled",o&&`edge${Ct(o)}`],input:["input"]};return Jr(d,X7,n)},t8=Xn(gy,{name:"MuiSwitchBase"})(({ownerState:e})=>ze({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),n8=Xn("input",{name:"MuiSwitchBase",shouldForwardProp:yf})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),a8=b.forwardRef(function(n,a){const{autoFocus:r,checked:o,checkedIcon:d,className:h,defaultChecked:g,disabled:p,disableFocusRipple:f=!1,edge:v=!1,icon:j,id:S,inputProps:T,inputRef:C,name:N,onBlur:k,onChange:A,onFocus:D,readOnly:O,required:F=!1,tabIndex:R,type:H,value:E}=n,z=jn(n,J7),[Z,U]=YN({controlled:o,default:!!g,name:"SwitchBase",state:"checked"}),V=F7(),X=K=>{D&&D(K),V&&V.onFocus&&V.onFocus(K)},W=K=>{k&&k(K),V&&V.onBlur&&V.onBlur(K)},B=K=>{if(K.nativeEvent.defaultPrevented)return;const I=K.target.checked;U(I),A&&A(K,I)};let te=p;V&&typeof te>"u"&&(te=V.disabled);const G=H==="checkbox"||H==="radio",J=ze({},n,{checked:Z,disabled:te,disableFocusRipple:f,edge:v}),q=e8(J);return t.jsxs(t8,ze({component:"span",className:Pn(q.root,h),centerRipple:!0,focusRipple:!f,disabled:te,tabIndex:null,role:void 0,onFocus:X,onBlur:W,ownerState:J,ref:a},z,{children:[t.jsx(n8,ze({autoFocus:r,checked:o,defaultChecked:g,className:q.input,disabled:te,id:G?S:void 0,name:N,onChange:B,readOnly:O,ref:C,required:F,ownerState:J,tabIndex:R,type:H},H==="checkbox"&&E===void 0?{}:{value:E},T)),Z?d:j]}))}),s8=al(t.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),r8=al(t.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),i8=al(t.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function l8(e){return xr("MuiCheckbox",e)}const hx=Ys("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),o8=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],c8=e=>{const{classes:n,indeterminate:a,color:r,size:o}=e,d={root:["root",a&&"indeterminate",`color${Ct(r)}`,`size${Ct(o)}`]},h=Jr(d,l8,n);return ze({},n,h)},d8=Xn(a8,{shouldForwardProp:e=>yf(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.indeterminate&&n.indeterminate,n[`size${Ct(a.size)}`],a.color!=="default"&&n[`color${Ct(a.color)}`]]}})(({theme:e,ownerState:n})=>ze({color:(e.vars||e).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${n.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(n.color==="default"?e.palette.action.active:e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},n.color!=="default"&&{[`&.${hx.checked}, &.${hx.indeterminate}`]:{color:(e.vars||e).palette[n.color].main},[`&.${hx.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),u8=t.jsx(r8,{}),m8=t.jsx(s8,{}),h8=t.jsx(i8,{}),f8=b.forwardRef(function(n,a){var r,o;const d=ei({props:n,name:"MuiCheckbox"}),{checkedIcon:h=u8,color:g="primary",icon:p=m8,indeterminate:f=!1,indeterminateIcon:v=h8,inputProps:j,size:S="medium",className:T}=d,C=jn(d,o8),N=f?v:p,k=f?v:h,A=ze({},d,{color:g,indeterminate:f,size:S}),D=c8(A);return t.jsx(d8,ze({type:"checkbox",inputProps:ze({"data-indeterminate":f},j),icon:b.cloneElement(N,{fontSize:(r=N.props.fontSize)!=null?r:S}),checkedIcon:b.cloneElement(k,{fontSize:(o=k.props.fontSize)!=null?o:S}),ownerState:A,ref:a,className:Pn(D.root,T)},C,{classes:D}))});function p8(e){return xr("MuiCircularProgress",e)}Ys("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const g8=["className","color","disableShrink","size","style","thickness","value","variant"];let If=e=>e,Tw,Ew,Mw,Rw;const Zi=44,x8=Nc(Tw||(Tw=If`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),y8=Nc(Ew||(Ew=If`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),b8=e=>{const{classes:n,variant:a,color:r,disableShrink:o}=e,d={root:["root",a,`color${Ct(r)}`],svg:["svg"],circle:["circle",`circle${Ct(a)}`,o&&"circleDisableShrink"]};return Jr(d,p8,n)},v8=Xn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`color${Ct(a.color)}`]]}})(({ownerState:e,theme:n})=>ze({display:"inline-block"},e.variant==="determinate"&&{transition:n.transitions.create("transform")},e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&uf(Mw||(Mw=If`
      animation: ${0} 1.4s linear infinite;
    `),x8)),j8=Xn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,n)=>n.svg})({display:"block"}),w8=Xn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.circle,n[`circle${Ct(a.variant)}`],a.disableShrink&&n.circleDisableShrink]}})(({ownerState:e,theme:n})=>ze({stroke:"currentColor"},e.variant==="determinate"&&{transition:n.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&uf(Rw||(Rw=If`
      animation: ${0} 1.4s ease-in-out infinite;
    `),y8)),Aw=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiCircularProgress"}),{className:o,color:d="primary",disableShrink:h=!1,size:g=40,style:p,thickness:f=3.6,value:v=0,variant:j="indeterminate"}=r,S=jn(r,g8),T=ze({},r,{color:d,disableShrink:h,size:g,thickness:f,value:v,variant:j}),C=b8(T),N={},k={},A={};if(j==="determinate"){const D=2*Math.PI*((Zi-f)/2);N.strokeDasharray=D.toFixed(3),A["aria-valuenow"]=Math.round(v),N.strokeDashoffset=`${((100-v)/100*D).toFixed(3)}px`,k.transform="rotate(-90deg)"}return t.jsx(v8,ze({className:Pn(C.root,o),style:ze({width:g,height:g},k,p),ownerState:T,ref:a,role:"progressbar"},A,S,{children:t.jsx(j8,{className:C.svg,ownerState:T,viewBox:`${Zi/2} ${Zi/2} ${Zi} ${Zi}`,children:t.jsx(w8,{className:C.circle,style:N,ownerState:T,cx:Zi,cy:Zi,r:(Zi-f)/2,fill:"none",strokeWidth:f})})}))});function N8(e){return xr("MuiPagination",e)}Ys("MuiPagination",["root","ul","outlined","text"]);const _8=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function S8(e={}){const{boundaryCount:n=1,componentName:a="usePagination",count:r=1,defaultPage:o=1,disabled:d=!1,hideNextButton:h=!1,hidePrevButton:g=!1,onChange:p,page:f,showFirstButton:v=!1,showLastButton:j=!1,siblingCount:S=1}=e,T=jn(e,_8),[C,N]=YN({controlled:f,default:o,name:a,state:"page"}),k=(Z,U)=>{f||N(U),p&&p(Z,U)},A=(Z,U)=>{const V=U-Z+1;return Array.from({length:V},(X,W)=>Z+W)},D=A(1,Math.min(n,r)),O=A(Math.max(r-n+1,n+1),r),F=Math.max(Math.min(C-S,r-n-S*2-1),n+2),R=Math.min(Math.max(C+S,n+S*2+2),O.length>0?O[0]-2:r-1),H=[...v?["first"]:[],...g?[]:["previous"],...D,...F>n+2?["start-ellipsis"]:n+1<r-n?[n+1]:[],...A(F,R),...R<r-n-1?["end-ellipsis"]:r-n>n?[r-n]:[],...O,...h?[]:["next"],...j?["last"]:[]],E=Z=>{switch(Z){case"first":return 1;case"previous":return C-1;case"next":return C+1;case"last":return r;default:return null}},z=H.map(Z=>typeof Z=="number"?{onClick:U=>{k(U,Z)},type:"page",page:Z,selected:Z===C,disabled:d,"aria-current":Z===C?"true":void 0}:{onClick:U=>{k(U,E(Z))},type:Z,page:E(Z),selected:!1,disabled:d||Z.indexOf("ellipsis")===-1&&(Z==="next"||Z==="last"?C>=r:C<=1)});return ze({items:z},T)}function C8(e){return xr("MuiPaginationItem",e)}const vs=Ys("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Dw=al(t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Pw=al(t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Ow=al(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Lw=al(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),k8=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],sS=(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`size${Ct(a.size)}`],a.variant==="text"&&n[`text${Ct(a.color)}`],a.variant==="outlined"&&n[`outlined${Ct(a.color)}`],a.shape==="rounded"&&n.rounded,a.type==="page"&&n.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&n.ellipsis,(a.type==="previous"||a.type==="next")&&n.previousNext,(a.type==="first"||a.type==="last")&&n.firstLast]},T8=e=>{const{classes:n,color:a,disabled:r,selected:o,size:d,shape:h,type:g,variant:p}=e,f={root:["root",`size${Ct(d)}`,p,h,a!=="standard"&&`color${Ct(a)}`,a!=="standard"&&`${p}${Ct(a)}`,r&&"disabled",o&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[g]],icon:["icon"]};return Jr(f,C8,n)},E8=Xn("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:sS})(({theme:e,ownerState:n})=>ze({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${vs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},n.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),M8=Xn(gy,{name:"MuiPaginationItem",slot:"Root",overridesResolver:sS})(({theme:e,ownerState:n})=>ze({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${vs.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${vs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${vs.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:za.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${vs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:za.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${vs.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},n.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},n.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},n.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:n})=>ze({},n.variant==="text"&&{[`&.${vs.selected}`]:ze({},n.color!=="standard"&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}},[`&.${vs.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n.color].dark}},{[`&.${vs.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},n.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${vs.selected}`]:ze({},n.color!=="standard"&&{color:(e.vars||e).palette[n.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / 0.5)`:za.alpha(e.palette[n.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:za.alpha(e.palette[n.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:za.alpha(e.palette[n.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${vs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:za.alpha(e.palette[n.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${vs.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),R8=Xn("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,n)=>n.icon})(({theme:e,ownerState:n})=>ze({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},n.size==="small"&&{fontSize:e.typography.pxToRem(18)},n.size==="large"&&{fontSize:e.typography.pxToRem(22)})),A8=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiPaginationItem"}),{className:o,color:d="standard",component:h,components:g={},disabled:p=!1,page:f,selected:v=!1,shape:j="circular",size:S="medium",slots:T={},type:C="page",variant:N="text"}=r,k=jn(r,k8),A=ze({},r,{color:d,disabled:p,selected:v,shape:j,size:S,type:C,variant:N}),D=l7(),O=T8(A),R=(D?{previous:T.next||g.next||Lw,next:T.previous||g.previous||Ow,last:T.first||g.first||Dw,first:T.last||g.last||Pw}:{previous:T.previous||g.previous||Ow,next:T.next||g.next||Lw,first:T.first||g.first||Dw,last:T.last||g.last||Pw})[C];return C==="start-ellipsis"||C==="end-ellipsis"?t.jsx(E8,{ref:a,ownerState:A,className:Pn(O.root,o),children:"…"}):t.jsxs(M8,ze({ref:a,ownerState:A,component:h,disabled:p,className:Pn(O.root,o)},k,{children:[C==="page"&&f,R?t.jsx(R8,{as:R,ownerState:A,className:O.icon}):null]}))}),D8=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],P8=e=>{const{classes:n,variant:a}=e;return Jr({root:["root",a],ul:["ul"]},N8,n)},O8=Xn("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant]]}})({}),L8=Xn("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,n)=>n.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function z8(e,n,a){return e==="page"?`${a?"":"Go to "}page ${n}`:`Go to ${e} page`}const zw=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiPagination"}),{boundaryCount:o=1,className:d,color:h="standard",count:g=1,defaultPage:p=1,disabled:f=!1,getItemAriaLabel:v=z8,hideNextButton:j=!1,hidePrevButton:S=!1,renderItem:T=z=>t.jsx(A8,ze({},z)),shape:C="circular",showFirstButton:N=!1,showLastButton:k=!1,siblingCount:A=1,size:D="medium",variant:O="text"}=r,F=jn(r,D8),{items:R}=S8(ze({},r,{componentName:"Pagination"})),H=ze({},r,{boundaryCount:o,color:h,count:g,defaultPage:p,disabled:f,getItemAriaLabel:v,hideNextButton:j,hidePrevButton:S,renderItem:T,shape:C,showFirstButton:N,showLastButton:k,siblingCount:A,size:D,variant:O}),E=P8(H);return t.jsx(O8,ze({"aria-label":"pagination navigation",className:Pn(E.root,d),ownerState:H,ref:a},F,{children:t.jsx(L8,{className:E.ul,ownerState:H,children:R.map((z,Z)=>t.jsx("li",{children:T(ze({},z,{color:h,"aria-label":v(z.type,z.page,z.selected),shape:C,size:D,variant:O}))},Z))})}))}),s0={getCities:()=>je.get("/api/admin/system-settings/cities").then(e=>e.data.data||[]),saveCities:e=>je.put("/api/admin/system-settings/cities",e).then(n=>n.data.data||!1)},I8=()=>{const[e,n]=b.useState([]),[a,r]=b.useState(!0),[o,d]=b.useState(null);return b.useEffect(()=>{s0.getCities().then(h=>n(h)).catch(h=>d(h)).finally(()=>r(!1))},[]),{cities:e,loading:a,error:o}},B8=()=>{const{showSuccess:e,showError:n}=vc(),[a,r]=b.useState(0),{currencies:o,loading:d,error:h}=Cc(),[g,p]=b.useState([]),[f,v]=b.useState(!1),[j,S]=b.useState(!1),[T,C]=b.useState(null),[N,k]=b.useState({code:"",arabicCode:"",name:"",arabicName:"",exchangeRate:0,isDefault:!1}),{cities:A,loading:D,error:O}=I8(),[F,R]=b.useState([]),[H,E]=b.useState(!1),[z,Z]=b.useState(!1),[U,V]=b.useState(null),[X,W]=b.useState({name:"",country:"",images:[]}),B=5,[te,G]=b.useState(1),[J,q]=b.useState(1),K=T?!T.isDefault:g.some(Q=>Q.isDefault);b.useEffect(()=>{d||p(o)},[d,o]),b.useEffect(()=>{const Q=Math.max(1,Math.ceil(g.length/B));J>Q&&q(Q)},[g,J]),b.useEffect(()=>{D||R(A)},[D,A]),b.useEffect(()=>{const Q=Math.max(1,Math.ceil(F.length/B));te>Q&&G(Q)},[F,te]),b.useCallback((Q,we)=>{p(Be=>Be.map(nt=>nt.code===Q?{...nt,exchangeRate:parseFloat(we)}:nt))},[]),b.useCallback(Q=>{p(we=>we.map(Be=>({...Be,isDefault:Be.code===Q})))},[]);const I=()=>{C(null),k({code:"",arabicCode:"",name:"",arabicName:"",exchangeRate:0,isDefault:!1}),S(!0)},se=Q=>{C(Q),k({code:Q.code,arabicCode:Q.arabicCode,name:Q.name,arabicName:Q.arabicName,exchangeRate:Q.exchangeRate||0,isDefault:Q.isDefault}),S(!0)},ne=async Q=>{if(!window.confirm("هل أنت متأكد من الحذف؟"))return;const we=g.filter(Be=>Be.code!==Q);p(we);try{await Fx.saveCurrencies(we),e("تم الحذف بنجاح")}catch(Be){n(Be.message||"فشل في الحذف")}},ae=async()=>{let Q;T?Q=g.map(we=>we.code===T.code?{...N}:we):Q=[...g,N],v(!0);try{await Fx.saveCurrencies(Q),p(Q),e(T?"تم التحديث بنجاح":"تم الإضافة بنجاح"),S(!1)}catch(we){n(we.message||"فشل في الحفظ")}finally{v(!1)}},ee=()=>{V(null),W({name:"",country:"",images:[]}),Z(!0)},le=Q=>{V(Q),W({...Q}),Z(!0)},me=async Q=>{if(!window.confirm("هل أنت متأكد من الحذف؟"))return;const we=F.filter(Be=>Be.name!==Q);R(we);try{await s0.saveCities(we),e("تم الحذف بنجاح")}catch(Be){n(Be.message||"فشل في الحذف")}},Re=async()=>{let Q;U?Q=F.map(we=>we.name===U.name?X:we):Q=[...F,X],E(!0);try{await s0.saveCities(Q),R(Q),e(U?"تم التحديث بنجاح":"تم الإضافة بنجاح"),Z(!1)}catch(we){n(we.message||"فشل في الحفظ")}finally{E(!1)}},Pe=F.slice((te-1)*B,te*B),ie=g.slice((J-1)*B,J*B);return t.jsxs(ln,{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[t.jsx("div",{className:"flex justify-between items-center mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المدخلات"}),t.jsx(Dn,{className:"text-gray-600",children:"تحتوي على ادارة المدن والعملات ."})]})}),t.jsxs(ln,{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs(ln,{className:"bg-blue-50 p-4 rounded-lg flex items-center",children:[t.jsx(Dn,{className:"text-blue-600 text-2xl ml-3",children:"📌"}),t.jsxs(ln,{children:[t.jsx(Dn,{className:"text-sm text-blue-600",children:"المدن"}),t.jsx(Dn,{className:"text-2xl font-bold text-blue-900",children:"0"})]})]}),t.jsxs(ln,{className:"bg-green-50 p-4 rounded-lg flex items-center",children:[t.jsx(Dn,{className:"text-green-600 text-2xl ml-3",children:"🔧"}),t.jsxs(ln,{children:[t.jsx(Dn,{className:"text-sm text-green-600",children:"العملات"}),t.jsx(Dn,{className:"text-2xl font-bold text-green-900",children:g.length})]})]}),t.jsxs(ln,{className:"bg-yellow-50 p-4 rounded-lg flex items-center",children:[t.jsx(Dn,{className:"text-yellow-600 text-2xl ml-3",children:"📂"}),t.jsxs(ln,{children:[t.jsx(Dn,{className:"text-sm text-yellow-600",children:"القسم 3"}),t.jsx(Dn,{className:"text-2xl font-bold text-yellow-900",children:"0"})]})]}),t.jsxs(ln,{className:"bg-purple-50 p-4 rounded-lg flex items-center",children:[t.jsx(Dn,{className:"text-purple-600 text-2xl ml-3",children:"📝"}),t.jsxs(ln,{children:[t.jsx(Dn,{className:"text-sm text-purple-600",children:"القسم 4"}),t.jsx(Dn,{className:"text-2xl font-bold text-purple-900",children:"0"})]})]})]}),t.jsxs(ln,{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs(ln,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(ln,{className:"flex justify-between items-center mb-4",children:[t.jsx(Dn,{variant:"h6",className:"font-semibold",children:"المدن"}),t.jsx(xh,{variant:"contained",color:"primary",onClick:ee,children:"+ إضافة"})]}),D?t.jsx(ln,{className:"flex justify-center py-10",children:t.jsx(Aw,{})}):O?t.jsx(Dn,{color:"error",align:"center",children:O.message}):t.jsxs("div",{className:"space-y-2",children:[Pe.map(Q=>t.jsx("div",{className:"p-3 rounded-lg border border-gray-200 hover:border-gray-300 cursor-pointer transition-colors",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:Q.name}),t.jsxs("p",{className:"text-xs text-gray-600",children:["الدولة: ",Q.country]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["الصور: ",Q.images.length]})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>le(Q),className:"text-blue-600 hover:text-blue-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>me(Q.name),className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},Q.name)),F.length===0&&t.jsxs("div",{className:"text-center py-10 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏙️"}),t.jsx(Dn,{className:"text-sm",children:"لا توجد مدن"})]}),F.length>B&&t.jsx(ln,{className:"flex justify-center mt-2",children:t.jsx(zw,{dir:"ltr",count:Math.ceil(F.length/B),page:te,onChange:(Q,we)=>G(we),size:"small",color:"primary"})})]})]}),t.jsxs(ln,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(ln,{className:"flex justify-between items-center mb-4",children:[t.jsx(Dn,{variant:"h6",className:"font-semibold",children:"العملات"}),t.jsx(xh,{variant:"contained",color:"primary",onClick:I,children:"+ إضافة"})]}),d?t.jsx(ln,{className:"flex justify-center py-10",children:t.jsx(Aw,{})}):h?t.jsx(Dn,{color:"error",align:"center",children:h.message}):t.jsxs("div",{className:"space-y-2",children:[ie.map(Q=>t.jsx("div",{className:"p-3 rounded-lg border border-gray-200 hover:border-gray-300 cursor-pointer transition-colors",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-medium text-gray-900 text-sm",children:[Q.name," (",Q.code,")"]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["القيمة: ",Q.exchangeRate??""]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["افتراضي: ",Q.isDefault?"نعم":"لا"]})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>se(Q),className:"text-blue-600 hover:text-blue-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>ne(Q.code),className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},Q.code)),g.length===0&&t.jsxs("div",{className:"text-center py-10 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🔧"}),t.jsx(Dn,{className:"text-sm",children:"لا توجد مدخلات"})]}),g.length>B&&t.jsx(ln,{className:"flex justify-center mt-2",children:t.jsx(zw,{dir:"ltr",count:Math.ceil(g.length/B),page:J,onChange:(Q,we)=>q(we),size:"small",color:"primary"})})]})]}),t.jsxs(ln,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(ln,{className:"flex justify-between items-center mb-4",children:[t.jsx(Dn,{variant:"h6",className:"font-semibold",children:"القسم 3"}),t.jsx(xh,{variant:"contained",disabled:!0,children:"+ إضافة"})]}),t.jsx(ln,{className:"text-center text-gray-500 py-10",children:"لا توجد بيانات"})]}),t.jsxs(ln,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(ln,{className:"flex justify-between items-center mb-4",children:[t.jsx(Dn,{variant:"h6",className:"font-semibold",children:"القسم 4"}),t.jsx(xh,{variant:"contained",disabled:!0,children:"+ إضافة"})]}),t.jsx(ln,{className:"text-center text-gray-500 py-10",children:"لا توجد بيانات"})]})]}),j&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:T?"تعديل المدخل":"إضافة مدخل جديد"}),t.jsxs("form",{onSubmit:Q=>{Q.preventDefault(),ae()},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المعرف"}),t.jsx("input",{type:"text",value:N.code,onChange:Q=>k(we=>({...we,code:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الرمز العربي"}),t.jsx("input",{type:"text",value:N.arabicCode,onChange:Q=>k(we=>({...we,arabicCode:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم"}),t.jsx("input",{type:"text",value:N.name,onChange:Q=>k(we=>({...we,name:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيمة"}),t.jsx("input",{type:"number",value:N.exchangeRate,onChange:Q=>k(we=>({...we,exchangeRate:parseFloat(Q.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx(f8,{checked:N.isDefault,disabled:K,onChange:Q=>k(we=>({...we,isDefault:Q.target.checked}))}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"افتراضي"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:T?"تحديث":"إضافة"})]})]})]})}),z&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:U?"تعديل المدينة":"إضافة مدينة جديدة"}),t.jsxs("form",{onSubmit:Q=>{Q.preventDefault(),Re()},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المدينة"}),t.jsx("input",{type:"text",value:X.name,onChange:Q=>W(we=>({...we,name:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الدولة"}),t.jsx("input",{type:"text",value:X.country,onChange:Q=>W(we=>({...we,country:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"صور المدينة"}),t.jsx(Yl,{value:X.images,multiple:!0,onChange:Q=>W(we=>({...we,images:Array.isArray(Q)?Q:[Q]}))})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:U?"تحديث":"إضافة"})]})]})]})})]})},$8=()=>{const[e,n]=b.useState([]),[a,r]=b.useState(0),[o,d]=b.useState(1),[h,g]=b.useState(20),[p,f]=b.useState({}),[v,j]=b.useState(!1),[S,T]=b.useState(null),[C,N]=b.useState(!1),[k,A]=b.useState(null),[D,O]=b.useState({type:yn.HORIZONTAL_PROPERTY_LIST,displayOrder:0,target:Is.PROPERTIES,isActive:!0}),F=b.useMemo(()=>[{key:"displayOrder",title:"الترتيب",width:"80px"},{key:"type",title:"النوع",render:(U,V)=>V.type},{key:"target",title:"المستهدف",render:(U,V)=>V.target===Is.PROPERTIES?"كيانات":"وحدات"},{key:"isActive",title:"نشط",render:(U,V)=>V.isActive?"نعم":"لا",width:"80px"}],[]),R=async()=>{try{j(!0);const U={pageNumber:o,pageSize:h,target:p.target,type:p.type},V=await tc.getSections(U);n(V.items),r(V.totalCount)}catch(U){T(U.message||"حدث خطأ")}finally{j(!1)}};b.useEffect(()=>{R()},[o,h,p]);const H=()=>{O({type:yn.HORIZONTAL_PROPERTY_LIST,displayOrder:0,target:Is.PROPERTIES,isActive:!0}),A(null)},E=async()=>{await tc.createSection(D),N(!1),H(),R()},z=async()=>{if(!k)return;const U={sectionId:k.id,type:D.type,displayOrder:D.displayOrder,target:D.target,isActive:D.isActive??!0};await tc.updateSection(k.id,U),N(!1),H(),R()},Z=async U=>{await tc.deleteSection(U.id),R()};return t.jsxs(ou,{children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm",children:"المستهدف"}),t.jsxs("select",{className:"border rounded px-2 py-1",value:p.target||"",onChange:U=>f({...p,target:U.target.value||void 0}),children:[t.jsx("option",{value:"",children:"الكل"}),t.jsx("option",{value:Is.PROPERTIES,children:"كيانات"}),t.jsx("option",{value:Is.UNITS,children:"وحدات"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm",children:"النوع"}),t.jsxs("select",{className:"border rounded px-2 py-1",value:p.type||"",onChange:U=>f({...p,type:U.target.value||void 0}),children:[t.jsx("option",{value:"",children:"الكل"}),Object.values(yn).map(U=>t.jsx("option",{value:U,children:U},U))]})]}),t.jsx("button",{className:"btn btn-primary ml-auto",onClick:()=>{H(),N(!0)},children:"إنشاء قسم"})]}),t.jsx(ls,{data:e,columns:F,loading:v,pagination:{current:o,pageSize:h,total:a,onChange:(U,V)=>{d(U),g(V)}},actions:[{label:"تعديل",onClick:U=>{A(U),O({type:U.type,displayOrder:U.displayOrder,target:U.target,isActive:U.isActive}),N(!0)},color:"blue"},{label:"حذف",onClick:Z,color:"red"}]}),t.jsx(Mt,{isOpen:C,onClose:()=>N(!1),title:k?"تعديل قسم":"إنشاء قسم",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm w-28",children:"النوع"}),t.jsx("select",{className:"border rounded px-2 py-1 flex-1",value:D.type,onChange:U=>O({...D,type:U.target.value}),children:Object.values(yn).map(U=>t.jsx("option",{value:U,children:U},U))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm w-28",children:"المستهدف"}),t.jsxs("select",{className:"border rounded px-2 py-1 flex-1",value:D.target,onChange:U=>O({...D,target:U.target.value}),children:[t.jsx("option",{value:Is.PROPERTIES,children:"كيانات"}),t.jsx("option",{value:Is.UNITS,children:"وحدات"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm w-28",children:"الترتيب"}),t.jsx("input",{className:"border rounded px-2 py-1 flex-1",type:"number",value:D.displayOrder,onChange:U=>O({...D,displayOrder:Number(U.target.value)})})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{className:"btn",onClick:()=>N(!1),children:"إلغاء"}),t.jsx("button",{className:"btn btn-primary",onClick:k?z:E,children:k?"حفظ":"إنشاء"})]})]})})]})},Iw=()=>t.jsx(Wl,{title:"لوحة معلومات مالك الكيان",description:"إحصائيات وأداء كياناتك، الحجوزات الحالية، والإيرادات المحققة",icon:"📊",comingSoon:!0}),F8=()=>t.jsx(Wl,{title:"إدارة كياناتي",description:"عرض وإدارة كياناتك المسجلة في النظام، إضافة كيانات جديدة وتحديث البيانات",icon:"🏢",comingSoon:!0}),U8=()=>t.jsx(Wl,{title:"إدارة الوحدات",description:"إدارة وحدات كياناتك مع الحقول الديناميكية المخصصة لكل نوع من أنواع الوحدات",icon:"🏠",comingSoon:!0}),H8=()=>t.jsx(Wl,{title:"إدارة الحجوزات",description:"عرض وإدارة حجوزات كياناتك، متابعة حالات الحجوزات والمدفوعات",icon:"📝",comingSoon:!0}),q8=()=>t.jsx(Wl,{title:"إدارة الموظفين",description:"إدارة فريق عمل كيانك، إضافة موظفين جدد وتحديد صلاحياتهم",icon:"👨‍💼",comingSoon:!0}),Y8=()=>t.jsxs(vk,{children:[t.jsxs(gt,{path:"/auth",element:t.jsx(IM,{}),children:[t.jsx(gt,{path:"login",element:t.jsx(BM,{})}),t.jsx(gt,{path:"forgot-password",element:t.jsx(xR,{})}),t.jsx(gt,{index:!0,element:t.jsx($l,{to:"login",replace:!0})})]}),t.jsx(gt,{path:"/auth/register",element:t.jsx(rR,{})}),t.jsxs(gt,{path:"/admin",element:t.jsx(LM,{}),children:[t.jsx(gt,{index:!0,element:t.jsx(Mj,{})}),t.jsx(gt,{path:"inputs",element:t.jsx(B8,{})}),t.jsx(gt,{path:"dashboard",element:t.jsx(Mj,{})}),t.jsx(gt,{path:"users",element:t.jsx(NR,{})}),t.jsx(gt,{path:"users/:userId",element:t.jsx(nP,{})}),t.jsx(gt,{path:"properties",element:t.jsx(MR,{})}),t.jsx(gt,{path:"property-types",element:t.jsx(DR,{})}),t.jsx(gt,{path:"units",element:t.jsx(zR,{})}),t.jsx(gt,{path:"property-images/:propertyId",element:t.jsx(eP,{})}),t.jsx(gt,{path:"unit-images/:propertyId/:unitId",element:t.jsx(tP,{})}),t.jsx(gt,{path:"bookings",element:t.jsx(IR,{})}),t.jsx(gt,{path:"payments",element:t.jsx(FR,{})}),t.jsx(gt,{path:"amenities",element:t.jsx(qR,{})}),t.jsx(gt,{path:"property-services",element:t.jsx(fP,{})}),t.jsx(gt,{path:"units/:unitId/availability-pricing",element:t.jsx(ZI,{})}),t.jsx(gt,{path:"reviews",element:t.jsx(GR,{})}),t.jsx(gt,{path:"notifications",element:t.jsx(QR,{})}),t.jsx(gt,{path:"reports",element:t.jsx(eA,{})}),t.jsx(gt,{path:"audit-logs",element:t.jsx(oA,{})}),t.jsx(gt,{path:"settings",element:t.jsx(cA,{})}),t.jsx(gt,{path:"sections",element:t.jsx($8,{})})]}),t.jsxs(gt,{path:"/property-owner",element:t.jsx(zM,{}),children:[t.jsx(gt,{index:!0,element:t.jsx(Iw,{})}),t.jsx(gt,{path:"dashboard",element:t.jsx(Iw,{})}),t.jsx(gt,{path:"properties",element:t.jsx(F8,{})}),t.jsx(gt,{path:"units",element:t.jsx(U8,{})}),t.jsx(gt,{path:"bookings",element:t.jsx(H8,{})}),t.jsx(gt,{path:"staff",element:t.jsx(q8,{})})]}),t.jsx(gt,{path:"/test",element:t.jsx(yR,{})}),t.jsx(gt,{path:"/profile",element:t.jsx(ou,{children:t.jsx(bR,{})})}),t.jsx(gt,{path:"/settings",element:t.jsx(ou,{children:t.jsx(vR,{})})}),t.jsx(gt,{path:"/",element:t.jsx($l,{to:"/auth/login",replace:!0})}),t.jsx(gt,{path:"*",element:t.jsx($l,{to:"/auth/login",replace:!0})})]}),V8=O0({palette:{orange:{50:"#FFF3E0",100:"#FFE0B2",200:"#FFCC80",300:"#FFB74D",400:"#FFA726",500:"#FF9800",600:"#FB8C00",700:"#F57C00",800:"#EF6C00",900:"#E65100",main:"#FF9800",light:"#FFA726",dark:"#FB8C00",contrastText:"#fff"}}}),Z8=new f5({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*10}}});function K8(){return t.jsx(b5,{client:Z8,children:t.jsx(Hk,{children:t.jsx(m7,{theme:V8,children:t.jsx(d3,{children:t.jsx(u3,{children:t.jsx("div",{dir:"rtl",className:"min-h-screen",children:t.jsx(Y8,{})})})})})})})}const W8=["localeText"],Bw=b.createContext(null),G8=function(n){const{localeText:a}=n,r=jn(n,W8),{adapter:o,localeText:d}=b.useContext(Bw)??{adapter:void 0,localeText:void 0},h=d7({props:r,name:"MuiLocalizationProvider"}),{children:g,dateAdapter:p,dateFormats:f,dateLibInstance:v,adapterLocale:j,localeText:S}=h,T=b.useMemo(()=>ze({},S,d,a),[S,d,a]),C=b.useMemo(()=>{if(!p)return o||null;const A=new p({locale:j,formats:f,instance:v});if(!A.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return A},[p,j,f,v,o]),N=b.useMemo(()=>C?{minDate:C.date("1900-01-01T00:00:00.000"),maxDate:C.date("2099-12-31T00:00:00.000")}:null,[C]),k=b.useMemo(()=>({utils:C,adapter:C,defaultDates:N,localeText:T}),[N,C,T]);return t.jsx(Bw.Provider,{value:k,children:g})},Q8={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},X8={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class J8{constructor(n){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=Q8,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=h=>typeof h>"u"?new Date:h===null?null:new Date(h),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=h=>h,this.toJsDate=h=>h,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=h=>{const g=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return h.match(g).map(p=>{const f=p[0];if(f==="p"||f==="P"){const v=this.longFormatters[f];return v(p,this.locale.formatLong)}return p}).join("")},this.formatNumber=h=>h,this.getDayOfWeek=h=>h.getDay()+1;const{locale:a,formats:r,longFormatters:o,lib:d}=n;this.locale=a,this.formats=ze({},X8,r),this.longFormatters=o,this.lib=d||"date-fns"}}class eB extends J8{constructor({locale:n,formats:a}={}){super({locale:n??ty,formats:a,longFormatters:Zh}),this.parse=(r,o)=>r===""?null:_L(r,o,new Date,{locale:this.locale}),this.isValid=r=>r==null?!1:Tf(r),this.format=(r,o)=>this.formatByString(r,this.formats[o]),this.formatByString=(r,o)=>Qn(r,o,{locale:this.locale}),this.isEqual=(r,o)=>r===null&&o===null?!0:r===null||o===null?!1:EO(r,o),this.isSameYear=(r,o)=>kL(r,o),this.isSameMonth=(r,o)=>z_(r,o),this.isSameDay=(r,o)=>N_(r,o),this.isSameHour=(r,o)=>CL(r,o),this.isAfter=(r,o)=>cx(r,o),this.isAfterYear=(r,o)=>cx(r,hw(o)),this.isAfterDay=(r,o)=>cx(r,mw(o)),this.isBefore=(r,o)=>kh(r,o),this.isBeforeYear=(r,o)=>kh(r,this.startOfYear(o)),this.isBeforeDay=(r,o)=>kh(r,this.startOfDay(o)),this.isWithinRange=(r,[o,d])=>EL(r,{start:o,end:d}),this.startOfYear=r=>C_(r),this.startOfMonth=r=>S_(r),this.startOfWeek=r=>Qr(r,{locale:this.locale}),this.startOfDay=r=>mc(r),this.endOfYear=r=>hw(r),this.endOfMonth=r=>__(r),this.endOfWeek=r=>EP(r,{locale:this.locale}),this.endOfDay=r=>mw(r),this.addYears=(r,o)=>_P(r,o),this.addMonths=(r,o)=>v_(r,o),this.addWeeks=(r,o)=>NP(r,o),this.addDays=(r,o)=>kf(r,o),this.addHours=(r,o)=>xP(r,o),this.addMinutes=(r,o)=>jP(r,o),this.addSeconds=(r,o)=>wP(r,o),this.getYear=r=>TO(r),this.getMonth=r=>CO(r),this.getDate=r=>vO(r),this.getHours=r=>wO(r),this.getMinutes=r=>SO(r),this.getSeconds=r=>kO(r),this.getMilliseconds=r=>_O(r),this.setYear=(r,o)=>QL(r,o),this.setMonth=(r,o)=>YL(r,o),this.setDate=(r,o)=>VL(r,o),this.setHours=(r,o)=>ZL(r,o),this.setMinutes=(r,o)=>WL(r,o),this.setSeconds=(r,o)=>GL(r,o),this.setMilliseconds=(r,o)=>KL(r,o),this.getDaysInMonth=r=>A_(r),this.getWeekArray=r=>{const o=this.startOfWeek(this.startOfMonth(r)),d=this.endOfWeek(this.endOfMonth(r));let h=0,g=o;const p=[];for(;this.isBefore(g,d);){const f=Math.floor(h/7);p[f]=p[f]||[],p[f].push(g),g=this.addDays(g,1),h+=1}return p},this.getWeekNumber=r=>ay(r,{locale:this.locale}),this.getYearRange=([r,o])=>{const d=this.startOfYear(r),h=this.endOfYear(o),g=[];let p=d;for(;this.isBefore(p,h);)g.push(p),p=this.addYears(p,1);return g}}}const tB={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},nB=(e,n,a)=>{const r=tB[e];let o;return typeof r=="string"?o=r:n===1?o=r.one:n===2?o=r.two:n<=10?o=r.threeToTen.replace("{{count}}",String(n)):o=r.other.replace("{{count}}",String(n)),a?.addSuffix?a.comparison&&a.comparison>0?"خلال "+o:"منذ "+o:o},aB={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},sB={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},rB={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iB={date:lc({formats:aB,defaultWidth:"full"}),time:lc({formats:sB,defaultWidth:"full"}),dateTime:lc({formats:rB,defaultWidth:"full"})},lB={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},oB=e=>lB[e],cB={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},dB={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},uB={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},mB={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},hB={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},fB={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},pB=e=>String(e),gB={ordinalNumber:pB,era:cr({values:cB,defaultWidth:"wide"}),quarter:cr({values:dB,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cr({values:uB,defaultWidth:"wide"}),day:cr({values:mB,defaultWidth:"wide"}),dayPeriod:cr({values:hB,defaultWidth:"wide",formattingValues:fB,defaultFormattingWidth:"wide"})},xB=/^(\d+)(th|st|nd|rd)?/i,yB=/\d+/i,bB={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},vB={any:[/قبل/,/بعد/]},jB={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},wB={any:[/1/i,/2/i,/3/i,/4/i]},NB={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},_B={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},SB={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},CB={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},kB={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},TB={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},EB={ordinalNumber:k_({matchPattern:xB,parsePattern:yB,valueCallback:e=>parseInt(e,10)}),era:dr({matchPatterns:bB,defaultMatchWidth:"wide",parsePatterns:vB,defaultParseWidth:"any"}),quarter:dr({matchPatterns:jB,defaultMatchWidth:"wide",parsePatterns:wB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:dr({matchPatterns:NB,defaultMatchWidth:"wide",parsePatterns:_B,defaultParseWidth:"any"}),day:dr({matchPatterns:SB,defaultMatchWidth:"wide",parsePatterns:CB,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:kB,defaultMatchWidth:"any",parsePatterns:TB,defaultParseWidth:"any"})},MB={code:"ar",formatDistance:nB,formatLong:iB,formatRelative:oB,localize:gB,match:EB,options:{weekStartsOn:6,firstWeekContainsDate:1}};TC.createRoot(document.getElementById("root")).render(t.jsx(b.StrictMode,{children:t.jsx(G8,{dateAdapter:eB,adapterLocale:MB,children:t.jsx(K8,{})})}));if("serviceWorker"in navigator){const e=new URL("firebase-messaging-sw.js","/client/").pathname;navigator.serviceWorker.register(e).catch(console.error)}
